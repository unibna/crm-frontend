/*!
*  filename: ej2-pivotview.min.js
*  version : 22.1.34
*  Copyright Syncfusion Inc. 2001 - 2020. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("SyncfusionBase"),require("SyncfusionPopups"),require("SyncfusionNavigations"),require("SyncfusionCharts"),require("SyncfusionDropdowns"),require("SyncfusionGrids"),require("SyncfusionInputs"),require("SyncfusionButtons"),require("SyncfusionData"),require("SyncfusionPdfExport"),require("SyncfusionCalendars"),require("SyncfusionExcelExport"),require("SyncfusionFileUtils"),require("SyncfusionSplitbuttons"),require("SyncfusionSvgBase")):"function"==typeof define&&define.amd?define(["SyncfusionBase","SyncfusionPopups","SyncfusionNavigations","SyncfusionCharts","SyncfusionDropdowns","SyncfusionGrids","SyncfusionInputs","SyncfusionButtons","SyncfusionData","SyncfusionPdfExport","SyncfusionCalendars","SyncfusionExcelExport","SyncfusionFileUtils","SyncfusionSplitbuttons","SyncfusionSvgBase"],t):"object"==typeof exports?exports.SyncfusionPivotview=t(require("SyncfusionBase"),require("SyncfusionPopups"),require("SyncfusionNavigations"),require("SyncfusionCharts"),require("SyncfusionDropdowns"),require("SyncfusionGrids"),require("SyncfusionInputs"),require("SyncfusionButtons"),require("SyncfusionData"),require("SyncfusionPdfExport"),require("SyncfusionCalendars"),require("SyncfusionExcelExport"),require("SyncfusionFileUtils"),require("SyncfusionSplitbuttons"),require("SyncfusionSvgBase")):e.SyncfusionPivotview=t(e.SyncfusionBase,e.SyncfusionPopups,e.SyncfusionNavigations,e.SyncfusionCharts,e.SyncfusionDropdowns,e.SyncfusionGrids,e.SyncfusionInputs,e.SyncfusionButtons,e.SyncfusionData,e.SyncfusionPdfExport,e.SyncfusionCalendars,e.SyncfusionExcelExport,e.SyncfusionFileUtils,e.SyncfusionSplitbuttons,e.SyncfusionSvgBase)}(this,function(e,t,i,r,a,n,o,s,l,d,h,p,u,c,g){return function(e){function t(r){if(i[r])return i[r].exports;var a=i[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var i={};return t.m=e,t.c=i,t.i=function(e){return e},t.d=function(e,i,r){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=56)}([function(t,i){t.exports=e},function(e,t,i){"use strict";i.d(t,"a",function(){return r}),i.d(t,"b",function(){return a}),i.d(t,"c",function(){return n}),i.d(t,"d",function(){return o}),i.d(t,"e",function(){return s}),i.d(t,"f",function(){return l}),i.d(t,"g",function(){return d}),i.d(t,"h",function(){return h}),i.d(t,"i",function(){return p}),i.d(t,"j",function(){return u}),i.d(t,"k",function(){return c}),i.d(t,"l",function(){return g}),i.d(t,"m",function(){return m}),i.d(t,"n",function(){return f}),i.d(t,"o",function(){return v}),i.d(t,"p",function(){return S}),i.d(t,"q",function(){return y}),i.d(t,"r",function(){return b}),i.d(t,"s",function(){return C}),i.d(t,"t",function(){return x}),i.d(t,"u",function(){return w}),i.d(t,"v",function(){return T}),i.d(t,"w",function(){return M}),i.d(t,"x",function(){return _}),i.d(t,"y",function(){return D}),i.d(t,"z",function(){return O}),i.d(t,"A",function(){return P}),i.d(t,"B",function(){return E}),i.d(t,"C",function(){return N}),i.d(t,"D",function(){return F}),i.d(t,"E",function(){return I}),i.d(t,"F",function(){return L}),i.d(t,"G",function(){return A}),i.d(t,"H",function(){return R}),i.d(t,"I",function(){return k}),i.d(t,"J",function(){return j}),i.d(t,"K",function(){return H}),i.d(t,"L",function(){return q}),i.d(t,"M",function(){return V}),i.d(t,"N",function(){return B}),i.d(t,"O",function(){return U}),i.d(t,"P",function(){return G}),i.d(t,"Q",function(){return z}),i.d(t,"R",function(){return W}),i.d(t,"S",function(){return Q}),i.d(t,"T",function(){return Y}),i.d(t,"U",function(){return K}),i.d(t,"V",function(){return X}),i.d(t,"W",function(){return J}),i.d(t,"X",function(){return Z}),i.d(t,"Y",function(){return $}),i.d(t,"Z",function(){return ee}),i.d(t,"_0",function(){return te}),i.d(t,"_1",function(){return ie}),i.d(t,"_2",function(){return re}),i.d(t,"_3",function(){return ae}),i.d(t,"_4",function(){return ne}),i.d(t,"_5",function(){return oe}),i.d(t,"_6",function(){return se}),i.d(t,"_7",function(){return le}),i.d(t,"_8",function(){return de}),i.d(t,"_9",function(){return he}),i.d(t,"_10",function(){return pe}),i.d(t,"_11",function(){return ue}),i.d(t,"_12",function(){return ce}),i.d(t,"_13",function(){return ge}),i.d(t,"_14",function(){return me}),i.d(t,"_15",function(){return fe}),i.d(t,"_16",function(){return ve}),i.d(t,"_17",function(){return Se}),i.d(t,"_18",function(){return ye}),i.d(t,"_19",function(){return be}),i.d(t,"_20",function(){return Ce}),i.d(t,"_21",function(){return xe}),i.d(t,"_22",function(){return we}),i.d(t,"_23",function(){return Te}),i.d(t,"_24",function(){return Me}),i.d(t,"_25",function(){return _e}),i.d(t,"_26",function(){return De}),i.d(t,"_27",function(){return Oe}),i.d(t,"_28",function(){return Pe}),i.d(t,"_29",function(){return Ee}),i.d(t,"_30",function(){return Ne}),i.d(t,"_31",function(){return Fe}),i.d(t,"_32",function(){return Ie}),i.d(t,"_33",function(){return Le}),i.d(t,"_34",function(){return Ae}),i.d(t,"_35",function(){return Re}),i.d(t,"_36",function(){return ke}),i.d(t,"_37",function(){return je}),i.d(t,"_38",function(){return He}),i.d(t,"_39",function(){return qe}),i.d(t,"_40",function(){return Ve}),i.d(t,"_41",function(){return Be}),i.d(t,"_42",function(){return Ue}),i.d(t,"_43",function(){return Ge}),i.d(t,"_44",function(){return ze}),i.d(t,"_45",function(){return We}),i.d(t,"_46",function(){return Qe}),i.d(t,"_47",function(){return Ye}),i.d(t,"_48",function(){return Ke}),i.d(t,"_49",function(){return Xe}),i.d(t,"_50",function(){return Je}),i.d(t,"_51",function(){return Ze}),i.d(t,"_52",function(){return $e}),i.d(t,"_53",function(){return et}),i.d(t,"_54",function(){return tt}),i.d(t,"_55",function(){return it}),i.d(t,"_56",function(){return rt}),i.d(t,"_57",function(){return at}),i.d(t,"_58",function(){return nt}),i.d(t,"_59",function(){return ot}),i.d(t,"_60",function(){return st}),i.d(t,"_61",function(){return lt}),i.d(t,"_62",function(){return dt}),i.d(t,"_63",function(){return ht}),i.d(t,"_64",function(){return pt}),i.d(t,"_65",function(){return ut}),i.d(t,"_66",function(){return ct}),i.d(t,"_67",function(){return gt}),i.d(t,"_68",function(){return mt}),i.d(t,"_69",function(){return ft}),i.d(t,"_70",function(){return vt}),i.d(t,"_71",function(){return St}),i.d(t,"_72",function(){return yt}),i.d(t,"_73",function(){return bt}),i.d(t,"_74",function(){return Ct}),i.d(t,"_75",function(){return xt}),i.d(t,"_76",function(){return wt}),i.d(t,"_77",function(){return Tt}),i.d(t,"_78",function(){return Mt}),i.d(t,"_79",function(){return _t}),i.d(t,"_80",function(){return Dt}),i.d(t,"_81",function(){return Ot}),i.d(t,"_82",function(){return Pt}),i.d(t,"_83",function(){return Et}),i.d(t,"_84",function(){return Nt}),i.d(t,"_85",function(){return Ft}),i.d(t,"_86",function(){return It}),i.d(t,"_87",function(){return Lt}),i.d(t,"_88",function(){return At}),i.d(t,"_89",function(){return Rt}),i.d(t,"_90",function(){return kt}),i.d(t,"_91",function(){return jt}),i.d(t,"_92",function(){return Ht}),i.d(t,"_93",function(){return qt}),i.d(t,"_94",function(){return Vt}),i.d(t,"_95",function(){return Bt}),i.d(t,"_96",function(){return Ut}),i.d(t,"_97",function(){return Gt}),i.d(t,"_98",function(){return zt}),i.d(t,"_99",function(){return Wt}),i.d(t,"_100",function(){return Qt}),i.d(t,"_101",function(){return Yt}),i.d(t,"_102",function(){return Kt}),i.d(t,"_103",function(){return Xt}),i.d(t,"_104",function(){return Jt}),i.d(t,"_105",function(){return Zt}),i.d(t,"_106",function(){return $t}),i.d(t,"_107",function(){return ei}),i.d(t,"_108",function(){return ti}),i.d(t,"_109",function(){return ii}),i.d(t,"_110",function(){return ri}),i.d(t,"_111",function(){return ai}),i.d(t,"_112",function(){return ni}),i.d(t,"_113",function(){return oi}),i.d(t,"_114",function(){return si}),i.d(t,"_115",function(){return li}),i.d(t,"_116",function(){return di}),i.d(t,"_117",function(){return hi}),i.d(t,"_118",function(){return pi}),i.d(t,"_119",function(){return ui}),i.d(t,"_120",function(){return ci}),i.d(t,"_121",function(){return gi}),i.d(t,"_122",function(){return mi}),i.d(t,"_123",function(){return fi}),i.d(t,"_124",function(){return vi}),i.d(t,"_125",function(){return Si});var r="load",a="enginePopulating",n="enginePopulated",o="onFieldDropped",s="fieldDrop",l="beforePivotTableRender",d="afterPivotTableRender",h="beforeExport",p="exportComplete",u="excelHeaderQueryCellInfo",c="pdfHeaderQueryCellInfo",g="excelQueryCellInfo",m="pdfQueryCellInfo",f="onPdfCellRender",v="dataBound",S="queryCellInfo",y="headerCellInfo",b="hyperlinkCellClick",C="resizing",x="resizeStop",w="cellClick",T="drillThrough",M="beforeColumnsRender",_="selected",D="cellSelecting",O="drill",P="cellSelected",E="cellDeselected",N="rowSelected",F="rowDeselected",I="beginDrillThrough",L="editCompleted",A="multiLevelLabelClick",R="saveReport",k="fetchReport",j="loadReport",H="renameReport",q="removeReport",V="newReport",B="toolbarRender",U="toolbarClick",G="chartTooltipRender",z="chartLegendClick",W="chartLoaded",Q="chartLoad",Y="chartResized",K="chartAxisLabelRender",X="chartSeriesCreated",J="aggregateCellInfo",Z="onHeadersSort",$="contextMenuClick",ee="contextMenuOpen",te="fieldListRefreshed",ie="conditionalFormatting",re="beforePdfExport",ae="beforeExcelExport",ne="memberFiltering",oe="calculatedFieldCreate",se="memberEditorOpen",le="fieldRemove",de="numberFormatting",he="aggregateMenuOpen",pe="fieldDragStart",ue="chartPointClick",ce="beforeServiceInvoke",ge="actionBegin",me="actionComplete",fe="actionFailure",ve="initial-load",Se="ui-update",ye="scroll",be="vertical-scroll",Ce="horizontal-scroll",xe="content-ready",we="data-ready",Te="init-groupingbar",Me="tree-view-update",_e="pivot-button-update",De="init-calculatedfield",Oe="click",Pe="init-toolbar",Ee="init-pivotPager",Ne="init-formatting",Fe="init-grouping",Ie="Sort value",Le="Drill up",Ae="Drill down",Re="Add new report",ke="Save current report",je="Save as current report",He="Rename current report",qe="Remove current report",Ve="Load report",Be="Open conditional formatting dialog",Ue="Open number formatting dialog",Ge="MdxQuery",ze="Open field list",We="Show table view",Qe="Show chart view",Ye="Multiple Axis",Ke="Show legend",Xe="PDF export",Je="PNG export",Ze="Excel export",$e="CSV export",et="JPEG export",tt="SVG export",it="Hide sub-totals",rt="Show row sub-totals",at="Show column sub-totals",nt="Show sub-totals",ot="Hide grand totals",st="Show row grand totals",lt="Show column grand totals",dt="Show grand totals",ht="Number Formatting menu",pt="Conditional Formatting menu",ut="Report change",ct="Sort field tree",gt="Edit calculated field",mt="Sort field",ft="Filter field",vt="Remove field",St="Open calculated field dialog",yt="Edit record",bt="Save edited records",Ct="Add new record",xt="Remove record",wt="Aggregate field",Tt="CalculatedField Context menu",Mt="Window resize",_t="Navigate row page",Dt="Navigate column page",Ot="Calculated field applied",Pt="Edited records saved",Et="New record added",Nt="Record removed",Ft="Field list closed",It="Field tree sorted",Lt="Report saved",At="New report added",Rt="Report re-saved",kt="Report renamed",jt="Report removed",Ht="Excel exported",qt="CSV exported",Vt="PDF exported",Bt="PNG exported",Ut="JPEG exported",Gt="SVG exported",zt="Conditional formatting applied",Wt="Number formatting applied",Qt="Table view shown",Yt="Chart view shown",Kt="Sub-totals hidden",Xt="Row sub-totals shown",Jt="Column sub-totals shown",Zt="Sub-totals shown",$t="Grand totals hidden",ei="Row grand totals shown",ti="Column grand totals shown",ii="Grand totals shown",ri="Value sorted",ai="Calculated field edited",ni="Field sorted",oi="Field filtered",si="Field removed",li="Field aggregated",di="Record edited",hi="Report changed",pi="Window resized",ui="Records updated",ci="Drill-through closed",gi="Vertically scrolled",mi="Horizontally scrolled",fi="Row page navigated",vi="Column page navigated",Si="Action dropped"},function(e,t,i){"use strict";i.d(t,"_167",function(){return r}),i.d(t,"_30",function(){return a}),i.d(t,"_305",function(){return n}),i.d(t,"_168",function(){return o}),i.d(t,"a",function(){return s}),i.d(t,"_18",function(){return l}),i.d(t,"_86",function(){return d}),i.d(t,"_223",function(){return h}),i.d(t,"_226",function(){return p}),i.d(t,"_224",function(){return u}),i.d(t,"_225",function(){return c}),i.d(t,"_160",function(){return g}),i.d(t,"_190",function(){return m}),i.d(t,"_191",function(){return f}),i.d(t,"_193",function(){return v}),i.d(t,"_85",function(){return S}),i.d(t,"_197",function(){return y}),i.d(t,"_205",function(){return b}),i.d(t,"_172",function(){return C}),i.d(t,"_154",function(){return x}),i.d(t,"_173",function(){return w}),i.d(t,"_150",function(){return T}),i.d(t,"_180",function(){return M}),i.d(t,"_184",function(){return _}),i.d(t,"_178",function(){return D}),i.d(t,"_189",function(){return O}),i.d(t,"_192",function(){return P}),i.d(t,"_174",function(){return E}),i.d(t,"_185",function(){return N}),i.d(t,"_186",function(){return F}),i.d(t,"_181",function(){return I}),i.d(t,"_195",function(){return L}),i.d(t,"_196",function(){return A}),i.d(t,"_175",function(){return R}),i.d(t,"_176",function(){return k}),i.d(t,"_177",function(){return j}),i.d(t,"_214",function(){return H}),i.d(t,"_217",function(){return q}),i.d(t,"_117",function(){return V}),i.d(t,"_116",function(){return B}),i.d(t,"_169",function(){return U}),i.d(t,"_170",function(){return G}),i.d(t,"_118",function(){return z}),i.d(t,"_119",function(){return W}),i.d(t,"_143",function(){return Q}),i.d(t,"_144",function(){return Y}),i.d(t,"_171",function(){return K}),i.d(t,"_152",function(){return X}),i.d(t,"_151",function(){return J}),i.d(t,"_145",function(){return Z}),i.d(t,"_14",function(){return $}),i.d(t,"_13",function(){return ee}),i.d(t,"_166",function(){return te}),i.d(t,"_162",function(){return ie}),i.d(t,"_32",function(){return re}),i.d(t,"_161",function(){return ae}),i.d(t,"_165",function(){return ne}),i.d(t,"_163",function(){return oe}),i.d(t,"_164",function(){return se}),i.d(t,"_153",function(){return le}),i.d(t,"_112",function(){return de}),i.d(t,"_159",function(){return he}),i.d(t,"_147",function(){return pe}),i.d(t,"_148",function(){return ue}),i.d(t,"_16",function(){return ce}),i.d(t,"_19",function(){return ge}),i.d(t,"_26",function(){return me}),i.d(t,"_275",function(){return fe}),i.d(t,"_270",function(){return ve}),i.d(t,"_271",function(){return Se}),i.d(t,"_273",function(){return ye}),i.d(t,"_272",function(){return be}),i.d(t,"_274",function(){return Ce}),i.d(t,"_269",function(){return xe}),i.d(t,"_22",function(){return we}),i.d(t,"_23",function(){return Te}),i.d(t,"_47",function(){return Me}),i.d(t,"_48",function(){return _e}),i.d(t,"_49",function(){return De}),i.d(t,"d",function(){return Oe}),i.d(t,"e",function(){return Pe}),i.d(t,"Q",function(){return Ee}),i.d(t,"_146",function(){return Ne}),i.d(t,"_126",function(){return Fe}),i.d(t,"_128",function(){return Ie}),i.d(t,"_130",function(){return Le}),i.d(t,"_132",function(){return Ae}),i.d(t,"w",function(){return Re}),i.d(t,"_149",function(){return ke}),i.d(t,"_125",function(){return je}),i.d(t,"_127",function(){return He}),i.d(t,"_129",function(){return qe}),i.d(t,"_131",function(){return Ve}),i.d(t,"_111",function(){return Be}),i.d(t,"_82",function(){return Ue}),i.d(t,"_215",function(){return Ge}),i.d(t,"_216",function(){return ze}),i.d(t,"_114",function(){return We}),i.d(t,"_213",function(){return Qe}),i.d(t,"_194",function(){return Ye}),i.d(t,"_209",function(){return Ke}),i.d(t,"_212",function(){return Xe}),i.d(t,"_210",function(){return Je}),i.d(t,"_211",function(){return Ze}),i.d(t,"_53",function(){return $e}),i.d(t,"_200",function(){return et}),i.d(t,"_182",function(){return tt}),i.d(t,"_183",function(){return it}),i.d(t,"_188",function(){return rt}),i.d(t,"_80",function(){return at}),i.d(t,"_187",function(){return nt}),i.d(t,"_79",function(){return ot}),i.d(t,"_36",function(){return st}),i.d(t,"_37",function(){return lt}),i.d(t,"_38",function(){return dt}),i.d(t,"_39",function(){return ht}),i.d(t,"_40",function(){return pt}),i.d(t,"_41",function(){return ut}),i.d(t,"_42",function(){return ct}),i.d(t,"_43",function(){return gt}),i.d(t,"_44",function(){return mt}),i.d(t,"_45",function(){return ft}),i.d(t,"_11",function(){return vt}),i.d(t,"_46",function(){return St}),i.d(t,"_12",function(){return yt}),i.d(t,"_29",function(){return bt}),i.d(t,"_33",function(){return Ct}),i.d(t,"_34",function(){return xt}),i.d(t,"_31",function(){return wt}),i.d(t,"_287",function(){return Tt}),i.d(t,"_286",function(){return Mt}),i.d(t,"_280",function(){return _t}),i.d(t,"_293",function(){return Dt}),i.d(t,"_282",function(){return Ot}),i.d(t,"_291",function(){return Pt}),i.d(t,"_292",function(){return Et}),i.d(t,"_290",function(){return Nt}),i.d(t,"_307",function(){return Ft}),i.d(t,"_308",function(){return It}),i.d(t,"_309",function(){return Lt}),i.d(t,"_288",function(){return At}),i.d(t,"_289",function(){return Rt}),i.d(t,"_20",function(){return kt}),i.d(t,"_28",function(){return jt}),i.d(t,"_21",function(){return Ht}),i.d(t,"_24",function(){return qt}),i.d(t,"_25",function(){return Vt}),i.d(t,"_113",function(){return Bt}),i.d(t,"_83",function(){return Ut}),i.d(t,"_84",function(){return Gt}),i.d(t,"_115",function(){return zt}),i.d(t,"_78",function(){return Wt}),i.d(t,"_81",function(){return Qt}),i.d(t,"_109",function(){return Yt}),i.d(t,"_95",function(){return Kt}),i.d(t,"_108",function(){return Xt}),i.d(t,"_105",function(){return Jt}),i.d(t,"_107",function(){return Zt}),i.d(t,"_103",function(){return $t}),i.d(t,"_110",function(){return ei}),i.d(t,"_88",function(){return ti}),i.d(t,"_87",function(){return ii}),i.d(t,"_74",function(){return ri}),i.d(t,"_75",function(){return ai}),i.d(t,"_89",function(){return ni}),i.d(t,"_99",function(){return oi}),i.d(t,"_96",function(){return si}),i.d(t,"_179",function(){return li}),i.d(t,"_93",function(){return di}),i.d(t,"_92",function(){return hi}),i.d(t,"_101",function(){return pi}),i.d(t,"_90",function(){return ui}),i.d(t,"_91",function(){return ci}),i.d(t,"_121",function(){return gi}),i.d(t,"_120",function(){return mi}),i.d(t,"_122",function(){return fi}),i.d(t,"_123",function(){return vi}),i.d(t,"_124",function(){return Si}),i.d(t,"_142",function(){return yi}),i.d(t,"_283",function(){return bi}),i.d(t,"_97",function(){return Ci}),i.d(t,"_94",function(){return xi}),i.d(t,"_100",function(){return wi}),i.d(t,"_104",function(){return Ti}),i.d(t,"_106",function(){return Mi}),i.d(t,"_102",function(){return _i}),i.d(t,"_15",function(){return Di}),i.d(t,"E",function(){return Oi}),i.d(t,"_8",function(){return Pi}),i.d(t,"_27",function(){return Ei}),i.d(t,"_76",function(){return Ni}),i.d(t,"_77",function(){return Fi}),i.d(t,"_98",function(){return Ii}),i.d(t,"f",function(){return Li}),i.d(t,"_50",function(){return Ai}),i.d(t,"_52",function(){return Ri}),i.d(t,"_56",function(){return ki}),i.d(t,"_58",function(){return ji}),i.d(t,"_60",function(){return Hi}),i.d(t,"_61",function(){return qi});i.d(t,"_62",function(){return Vi}),i.d(t,"_66",function(){return Bi}),i.d(t,"p",function(){return Ui}),i.d(t,"_63",function(){return Gi}),i.d(t,"_65",function(){return zi}),i.d(t,"_64",function(){return Wi}),i.d(t,"_67",function(){return Qi}),i.d(t,"_68",function(){return Yi}),i.d(t,"_69",function(){return Ki}),i.d(t,"_70",function(){return Xi}),i.d(t,"_73",function(){return Ji}),i.d(t,"_59",function(){return Zi}),i.d(t,"_72",function(){return $i}),i.d(t,"h",function(){return er}),i.d(t,"_54",function(){return tr}),i.d(t,"_55",function(){return ir}),i.d(t,"_51",function(){return rr}),i.d(t,"_281",function(){return ar}),i.d(t,"_276",function(){return nr}),i.d(t,"_279",function(){return or}),i.d(t,"_306",function(){return sr}),i.d(t,"_277",function(){return lr}),i.d(t,"_278",function(){return dr}),i.d(t,"_198",function(){return hr}),i.d(t,"_201",function(){return pr}),i.d(t,"_202",function(){return ur}),i.d(t,"b",function(){return cr}),i.d(t,"c",function(){return gr}),i.d(t,"_204",function(){return mr}),i.d(t,"_203",function(){return fr}),i.d(t,"_199",function(){return vr}),i.d(t,"_207",function(){return Sr}),i.d(t,"_206",function(){return yr}),i.d(t,"_208",function(){return br}),i.d(t,"_285",function(){return Cr}),i.d(t,"_284",function(){return xr}),i.d(t,"_311",function(){return wr}),i.d(t,"_310",function(){return Tr}),i.d(t,"_296",function(){return Mr}),i.d(t,"T",function(){return _r}),i.d(t,"_298",function(){return Dr}),i.d(t,"_297",function(){return Or}),i.d(t,"_299",function(){return Pr}),i.d(t,"_300",function(){return Er}),i.d(t,"_303",function(){return Nr}),i.d(t,"_304",function(){return Fr}),i.d(t,"U",function(){return Ir}),i.d(t,"V",function(){return Lr}),i.d(t,"W",function(){return Ar}),i.d(t,"X",function(){return Rr}),i.d(t,"Y",function(){return kr}),i.d(t,"Z",function(){return jr}),i.d(t,"C",function(){return Hr}),i.d(t,"x",function(){return qr}),i.d(t,"A",function(){return Vr}),i.d(t,"B",function(){return Br}),i.d(t,"z",function(){return Ur}),i.d(t,"y",function(){return Gr}),i.d(t,"_0",function(){return zr}),i.d(t,"_3",function(){return Wr}),i.d(t,"G",function(){return Qr}),i.d(t,"v",function(){return Yr}),i.d(t,"M",function(){return Kr}),i.d(t,"N",function(){return Xr}),i.d(t,"L",function(){return Jr}),i.d(t,"O",function(){return Zr}),i.d(t,"I",function(){return $r}),i.d(t,"D",function(){return ea}),i.d(t,"R",function(){return ta}),i.d(t,"_7",function(){return ia}),i.d(t,"_10",function(){return ra}),i.d(t,"_136",function(){return aa}),i.d(t,"_139",function(){return na}),i.d(t,"_138",function(){return oa}),i.d(t,"_137",function(){return sa}),i.d(t,"_140",function(){return la}),i.d(t,"_141",function(){return da}),i.d(t,"_155",function(){return ha}),i.d(t,"_156",function(){return pa}),i.d(t,"_157",function(){return ua}),i.d(t,"_158",function(){return ca}),i.d(t,"_135",function(){return ga}),i.d(t,"_2",function(){return ma}),i.d(t,"_1",function(){return fa}),i.d(t,"_294",function(){return va}),i.d(t,"_301",function(){return Sa}),i.d(t,"_302",function(){return ya}),i.d(t,"_133",function(){return ba}),i.d(t,"J",function(){return Ca}),i.d(t,"K",function(){return xa}),i.d(t,"P",function(){return wa}),i.d(t,"F",function(){return Ta}),i.d(t,"g",function(){return Ma}),i.d(t,"i",function(){return _a}),i.d(t,"k",function(){return Da}),i.d(t,"r",function(){return Oa}),i.d(t,"l",function(){return Pa}),i.d(t,"s",function(){return Ea}),i.d(t,"o",function(){return Na}),i.d(t,"q",function(){return Fa}),i.d(t,"m",function(){return Ia}),i.d(t,"t",function(){return La}),i.d(t,"n",function(){return Aa}),i.d(t,"u",function(){return Ra}),i.d(t,"H",function(){return ka}),i.d(t,"j",function(){return ja}),i.d(t,"_4",function(){return Ha}),i.d(t,"_5",function(){return qa}),i.d(t,"_57",function(){return Va}),i.d(t,"_6",function(){return Ba}),i.d(t,"_218",function(){return Ua}),i.d(t,"_9",function(){return Ga}),i.d(t,"_71",function(){return za}),i.d(t,"_134",function(){return Wa}),i.d(t,"S",function(){return Qa}),i.d(t,"_241",function(){return Ya}),i.d(t,"_244",function(){return Ka}),i.d(t,"_257",function(){return Xa}),i.d(t,"_260",function(){return Ja}),i.d(t,"_219",function(){return Za}),i.d(t,"_227",function(){return $a}),i.d(t,"_232",function(){return en}),i.d(t,"_234",function(){return tn}),i.d(t,"_235",function(){return rn}),i.d(t,"_236",function(){return an}),i.d(t,"_238",function(){return nn}),i.d(t,"_231",function(){return on}),i.d(t,"_230",function(){return sn}),i.d(t,"_267",function(){return ln}),i.d(t,"_268",function(){return dn}),i.d(t,"_262",function(){return hn}),i.d(t,"_254",function(){return pn}),i.d(t,"_263",function(){return un}),i.d(t,"_255",function(){return cn}),i.d(t,"_246",function(){return gn}),i.d(t,"_247",function(){return mn}),i.d(t,"_252",function(){return fn}),i.d(t,"_253",function(){return vn}),i.d(t,"_248",function(){return Sn}),i.d(t,"_249",function(){return yn}),i.d(t,"_265",function(){return bn}),i.d(t,"_266",function(){return Cn}),i.d(t,"_229",function(){return xn}),i.d(t,"_222",function(){return wn}),i.d(t,"_233",function(){return Tn}),i.d(t,"_250",function(){return Mn}),i.d(t,"_251",function(){return _n}),i.d(t,"_264",function(){return Dn}),i.d(t,"_240",function(){return On}),i.d(t,"_243",function(){return Pn}),i.d(t,"_256",function(){return En}),i.d(t,"_259",function(){return Nn}),i.d(t,"_242",function(){return Fn}),i.d(t,"_245",function(){return In}),i.d(t,"_258",function(){return Ln}),i.d(t,"_261",function(){return An}),i.d(t,"_220",function(){return Rn}),i.d(t,"_221",function(){return kn}),i.d(t,"_228",function(){return jn}),i.d(t,"_237",function(){return Hn}),i.d(t,"_239",function(){return qn}),i.d(t,"_295",function(){return Vn}),i.d(t,"_35",function(){return Bn}),i.d(t,"_17",function(){return Un});var r="e-pivotfieldlist",a="e-rtl",n="e-ltr",o="e-device",s="e-icons",l="e-disable",d="e-hide",h="e-icon-first",p="e-icon-last",u="e-icon-prev",c="e-icon-next",g="e-dropdown-icon",m="e-pivotfieldlist-container",f="e-olapfieldlist-container",v="e-field-list-container",S="e-toggle-field-list",y="e-static",b="e-select-table",C="e-field-table",x="e-draggable",w="e-olap-field-table",T="e-field-list",M="e-olap-field-list-tree",_="e-field-list-tree",D="e-field-list-tree-outer-div",O="e-field-list-tree-outer-div-searchMode",P="e-search-mode",E="e-field-header",N="e-pivot-parent",F="e-pivot-child",I="e-field-header-container",L="e-field-list-title",A="e-title-content",R="e-field-list-search",k="e-field-list-search-input",j="e-field-list-search-icon",H="e-field-list-footer",q="e-calculated-field",V="e-flat e-primary",B="e-outline",U="e-axis-table",G="e-olap-axis-table",z="e-left-axis-fields",W="e-right-axis-fields",Q="e-all-fields-axis",Y="e-hscroll",K="e-axis-header",X="e-axis-content",J="e-draggable-prompt",Z="e-pvt-btn-div",$="e-pivot-button",ee="e-pvt-btn-content",te="e-button-drag-clone",ie="e-sort",re="e-member-sort",ae="e-descend",ne="e-btn-filter",oe="e-pv-filter",se="e-pv-filtered",le="e-remove",de="e-drag",he="e-disable-drag",pe="e-drop-indicator",ue="e-drop-hover",ce="e-member-editor-dialog",ge="e-member-editor-outer-container",me="e-member-editor-container",fe="e-drillthrough-grid",ve="e-drillthrough-body",Se="e-drillthrough-body-header-container",ye="e-drillthrough-body-header",be="e-drillthrough-body-header-common",Ce="e-drillthrough-body-header-value",xe="e-drillthrough-dialog",we="e-editor-label-container",Te="e-editor-label",Me="e-frame",_e="e-check",De="e-stop",Oe="e-ok-btn",Pe="e-cancel-btn",Ee="e-pivot-error-dialog",Ne="e-droppable",Fe="e-rows",Ie="e-columns",Le="e-values",Ae="e-filters",Re="e-grouping-bar",ke="e-group-all-fields",je="e-group-rows",He="e-group-columns",qe="e-group-values",Ve="e-group-filters",Be="e-drag-restrict",Ue="e-list-selected",Ge="e-title-header",ze="e-title-content",We="e-text-content",Qe="e-footer-content",Ye="e-adaptive-container",Ke="e-field-list-btn",Xe="e-calculated-field-btn",Je="e-small",Ze="e-round",$e="e-add-icon",et="e-flat",tt="e-center-div",it="e-center-title",rt="e-adaptive-field-list-dialog",at="e-list-text",nt="e-selected-node",ot="e-select",st="e-selected-option-icon",lt="e-selected-level-icon",dt="e-filter-div-content",ht="e-filter-text-div",pt="e-between-text-div",ut="e-separator-div",ct="e-filter-option-container-1",gt="e-filter-option-container-2",mt="e-filter-input-div-1",ft="e-filter-input-div-2",vt="e-value-options",St="e-level-options",yt="e-filter-operator",bt="e-filter-sort",Ct="e-sort-ascend-icon",xt="e-sort-descend-icon",wt="e-active",Tt="e-collapse",Mt="e-expand",_t="e-table",Dt="e-columnsheader",Ot="e-rowsheader",Pt="e-valuescontent",Et="e-summary",Nt="e-cellvalue",Ft="e-pivottooltip",It="e-tooltipheader",Lt="e-tooltipcontent",At="e-nextspan",Rt="e-lastspan",kt="e-editor-search-container",jt="e-editor-search",Ht="e-editor-search-input",qt="e-select-all-container",Vt="e-select-all",Bt="e-pivot-calc",Ut="e-pivot-calc-dialog-div",Gt="e-olap-calc-dialog-div",zt="e-pivot-calc-radio",Wt="e-pivot-calc-check",Qt="e-pivot-calc-input",Yt="e-custom-format-input",Kt="e-pivot-calc-input-div",Xt="e-pivot-calc-custom-format-div",Jt="e-olap-calc-hierarchy-list-div",Zt="e-pivot-calc-format-type-div",$t="e-olap-calc-member-type-div",ei="e-member-options",ti="e-pivot-calc-outer-div",ii="e-olap-calc-outer-div",ri="e-flat",ai="e-format",ni="e-pivot-formula",oi="e-pivot-treeview",si="e-pivot-treeview-outer",li="e-treeContainer",di="e-pivot-cancel-button",hi="e-pivot-add-button",pi="e-pivot-ok-button",ui="e-pivot-accord",ci="e-pivot-button-div",gi="e-axis",mi="e-axis-row",fi="e-axis-column",vi="e-axis-value",Si="e-axis-filter",yi="e-grid",bi="e-pivotview",Ci="e-pivot-all-field-title",xi="e-pivot-field-name-title",wi="e-pivot-formula-title",Ti="e-olap-hierarchy-title",Mi="e-pivot-format-title",_i="e-olap-member-title",Di="e-pivot-context-menu",Oi="e-disabled",Pi="e-menu-hide",Ei="e-member-prompt",Ni="e-edit",Fi="e-edited",Ii="e-info",Li="e-empty-field",Ai="e-pivot-formatting-dialog",Ri="e-format-condition-button",ki="e-new-format",ji="e-format-outer-div",Hi="e-format-inner-div",qi="e-format-table",Vi="e-format-value-label",Bi="e-format-label",Ui="e-input",Gi="e-format-value1",zi="e-format-value2",Wi="e-format-value-span",Qi="e-format-font-color",Yi="e-format-back-color",Ki="e-format-value-preview",Xi="e-format-color-picker",Ji="e-format-delete-icon",Zi="e-format-delete-button",$i="e-selected-color",er="e-dlg-header",tr="e-format-apply-button",ir="e-format-cancel-button",rr="e-small e-round",ar="e-virtualtrack",nr="e-movablecontent",or="e-movablescrollbar",sr="e-movablechild",lr="e-frozencontent",dr="e-movableheader",hr="e-defer-apply-button",pr="e-defer-cancel-button",ur="e-layout-footer",cr="e-cellselectionbackground",gr="e-selectionbackground",mr="e-button-layout",fr="e-checkbox-layout",vr="e-defer-update-btn",Sr="e-field-list-back-icon",yr="e-title-mobile-header",br="e-title-mobile-content",Cr="e-rowcell",xr="e-active",wr="e-spanclicked",Tr="e-rowselect",Mr="e-gridheader",_r="e-export",Dr="e-pivotview-export",Or="e-pivotview-grid",Pr="e-pivotview-expand",Er="e-pivotview-collapse",Nr="e-pivotview-group",Fr="e-pivotview-ungroup",Ir="e-pivotview-pdf-export",Lr="e-pivotview-excel-export",Ar="e-pivotview-csv-export",Rr="e-pivotview-png-export",kr="e-pivotview-jpeg-export",jr="e-pivotview-svg-export",Hr="e-load-report",qr="e-new-report",Vr="e-rename-report",Br="e-remove-report",Ur="e-saveas-report",Gr="e-save-report",zr="e-sub-total",Wr="e-grand-total",Qr="e-toolbar-formatting",Yr="e-pivot-toolbar",Kr="e-pivotview-report-label",Xr="e-pivotview-report-input",Jr="e-report-outer",Zr="e-pivotview-report-dialog",$r="e-toolbar-fieldlist",ea="e-toolbar-grid",ta="e-toolbar-chart",ia="e-reportlist-drop",ra="e-pivotchart",aa="e-group-chart-rows",na="e-group-chart-columns",oa="e-group-chart-values",sa="e-group-chart-multi-values",la="e-group-chart-accumulation-column",da="e-group-chart-filters",ha="e-group-chart-values-drodown-div",pa="e-group-chart-values-drodown",ua="e-group-chart-columns-dropdown-div",ca="e-group-chart-columns-dropdown",ga="e-chart-grouping-bar",ma="e-pivotview-disable-icon",fa="e-pivotview-select-icon",va="e-valuesheader",Sa="e-icon-ascending",ya="e-icon-descending",ba="e-pivot-grouping-bar",Ca="e-mdx-query",xa="e-mdx-query-content",wa="e-pivotview-mdx-dialog",Ta="e-mdx",Ma="e-pivot-format-dialog",_a="e-pivot-format-dialog-outer",Da="e-pivot-format-value-lable",Oa="e-pivot-format-value-drop",Pa="e-pivot-format-lable",Ea="e-pivot-format-drop",Na="e-pivot-format-custom-lable",Fa="e-pivot-format-custom-text",Ia="e-pivot-format-grouping-lable",La="e-pivot-format-grouping-drop",Aa="e-pivot-format-decimal-lable",Ra="e-pivot-format-decimal-drop",ka="e-pivot-format-toolbar",ja="e-pivot-format-table",Ha="e-pivot-format-menu",qa="e-pivot-number-format-menu",Va="e-pivot-conditional-empty-format",Ba="e-pivot-conditional-format-menu",Ua="e-pivotchart-inner",Ga="e-pivotchart-type-dialog",za="e-format-font-color-picker",Wa="e-group-pivot-rows",Qa="e-pivot-toolbar-menu",Ya="e-firstpagedisabled",Ka="e-prevpagedisabled",Xa="e-nextpagedisabled",Ja="e-lastpagedisabled",Za="e-pivot-pager",$a="e-pivot-pager-maindiv",en="e-pivot-pager-row-maindiv",tn="e-pivot-pager-column-maindiv",rn="e-pivot-row-pager-settings",an="e-pivot-column-pager-settings",nn="e-pagercontainer",on="e-pivotview-vseparator",sn="e-pivotview-hseparator",ln="e-pivotview-text-div",dn="e-pivotview-text-div-1",hn="e-pivotview-row-size",pn="e-pivotview-row-pagerNumber",un="e-pivotview-column-size",cn="e-pivotview-column-pagerNumber",gn="e-pivotview-row-pagerString",mn="e-pivotview-column-pagerString",fn="e-pivot-row-of-string",vn="e-pivot-column-of-string",Sn="e-pivot-pager-row-dropdown",yn="e-pivot-pager-column-dropdown",bn="e-pivot-row-size-list",Cn="e-pivot-column-size-list",xn="e-inverse-view",wn="e-compact-view",Tn="e-page-size-disable",Mn="e-pivot-row-of-string-maindiv",_n="e-pivot-column-of-string-maindiv",Dn="e-pager-dropdown",On="e-first e-icons e-icon-first",Pn="e-prev e-icons e-icon-prev",En="e-next e-icons e-icon-next",Nn="e-last e-icons e-icon-last",Fn="e-firstpage e-pager-default",In="e-prevpage e-pager-default",Ln="e-nextpage e-pager-default",An="e-lastpage e-pager-default",Rn="e-pivot-pager-top",kn="e-pivot-pager-bottom",jn="e-pivot-pager-single-maindiv",Hn="e-pivot-pager-nav-container",qn="e-pivot-pager-info-container",Vn="e-pivotcell-container",Bn="e-filter-tab-container",Un="e-node-limit"},function(e,t,i){"use strict";i.d(t,"a",function(){return o});var r=i(0),a=(i.n(r),i(11)),n=(i.n(a),i(12)),o=(i.n(n),function(){function e(){}return e.getType=function(e){var t=new Date(e);return"boolean"==typeof e?"boolean":isNaN(Number(e))?t instanceof Date&&!isNaN(t.valueOf())?t&&t.getDay()&&(t.getHours()>0||t.getMinutes()>0||t.getSeconds()>0||t.getMilliseconds()>0)?"datetime":"date":typeof e:"number"},e.resetTime=function(e){return e.setHours(0,0,0,0),e},e.getClonedData=function(e){var t=[];if(e)for(var i=0,r=e;i<r.length;i++){for(var a=r[i],n=Object.keys(a),o=0,s={};o<n.length;)s[n[o]]=a[n[o]],o++;t.push(s)}return t},e.getDefinedObj=function(e){var t=0,i={};if(null!==e&&void 0!==e)for(var r=Object.keys(e);t<r.length;)null!==e[r[t]]&&void 0!==e[r[t]]&&(i[r[t]]=e[r[t]]),t++;else i=e;return i},e.inArray=function(e,t){if(t)for(var i=0,r=t.length;i<r;i++)if(t[i]===e)return i;return-1},e.setPivotProperties=function(e,t){e.allowServerDataBinding=!1,e.pivotGridModule&&(e.pivotGridModule.allowServerDataBinding=!1),e.setProperties(t,!0),e.allowServerDataBinding=!0,e.pivotGridModule&&(e.pivotGridModule.allowServerDataBinding=!0)},e.getClonedDataSourceSettings=function(e){return this.getDefinedObj({type:e.type,catalog:e.catalog,cube:e.cube,providerType:e.providerType,url:e.url,localeIdentifier:e.localeIdentifier,excludeFields:i.i(r.isNullOrUndefined)(e.excludeFields)?[]:e.excludeFields.slice(),expandAll:e.expandAll,allowLabelFilter:e.allowLabelFilter,allowValueFilter:e.allowValueFilter,allowMemberFilter:e.allowMemberFilter,enableSorting:!!e.enableSorting,rows:this.cloneFieldSettings(e.rows),columns:this.cloneFieldSettings(e.columns),filters:this.cloneFieldSettings(e.filters),values:this.cloneFieldSettings(e.values),filterSettings:this.cloneFilterSettings(e.filterSettings),sortSettings:this.cloneSortSettings(e.sortSettings),drilledMembers:this.cloneDrillMemberSettings(e.drilledMembers),valueSortSettings:this.CloneValueSortObject(e.valueSortSettings),valueAxis:e.valueAxis,grandTotalsPosition:e.grandTotalsPosition,formatSettings:this.cloneFormatSettings(e.formatSettings),calculatedFieldSettings:this.cloneCalculatedFieldSettings(e.calculatedFieldSettings),fieldMapping:this.cloneFieldSettings(e.fieldMapping),showSubTotals:e.showSubTotals,showRowSubTotals:e.showRowSubTotals,showColumnSubTotals:e.showColumnSubTotals,subTotalsPosition:e.subTotalsPosition,showGrandTotals:e.showGrandTotals,showRowGrandTotals:e.showRowGrandTotals,showColumnGrandTotals:e.showColumnGrandTotals,showHeaderWhenEmpty:e.showHeaderWhenEmpty,alwaysShowValueHeader:e.alwaysShowValueHeader,conditionalFormatSettings:this.cloneConditionalFormattingSettings(e.conditionalFormatSettings),emptyCellsTextContent:e.emptyCellsTextContent,groupSettings:this.cloneGroupSettings(e.groupSettings),showAggregationOnValueField:e.showAggregationOnValueField,authentication:this.CloneAuthenticationObject(e.authentication)})},e.getClonedFieldList=function(e){for(var t=Object.keys(e),i={},r=0,a=t.length;r<a;r++){var n=e[t[r]];e[t[r]]&&(i[t[r]]={type:n.type,caption:n.caption,id:n.id,isSelected:n.isSelected,sort:n.sort,filterType:n.filterType,index:n.index,filter:n.filter,isCustomField:n.isCustomField,showRemoveIcon:n.showRemoveIcon,showFilterIcon:n.showFilterIcon,showSortIcon:n.showSortIcon,showNoDataItems:n.showNoDataItems,isCalculatedField:n.isCalculatedField,showEditIcon:n.showEditIcon,showValueTypeIcon:n.showValueTypeIcon,allowDragAndDrop:n.allowDragAndDrop,showSubTotals:n.showSubTotals,expandAll:n.expandAll,pid:n.pid,aggregateType:n.aggregateType,baseField:n.baseField,baseItem:n.baseItem,dateMember:this.cloneDateMembers(n.dateMember),formattedMembers:this.cloneFormatMembers(n.formattedMembers),members:this.cloneFormatMembers(n.members),formatString:n.formatString,format:n.format,formula:n.formula,isExcelFilter:n.isExcelFilter,membersOrder:n.membersOrder?n.membersOrder.slice():n.membersOrder,isAlphanumeric:n.isAlphanumeric,tag:n.tag,expanded:n.expanded,spriteCssClass:n.spriteCssClass,name:n.name,defaultHierarchy:n.defaultHierarchy,hasAllMember:n.hasAllMember,allMember:n.allMember,isChecked:n.isChecked,filterMembers:this.cloneFieldMembers(n.filterMembers),childMembers:this.cloneFieldMembers(n.childMembers),searchMembers:this.cloneFieldMembers(n.searchMembers),htmlAttributes:this.getDefinedObj(n.htmlAttributes),currrentMembers:this.cloneFormatMembers(n.currrentMembers),isHierarchy:n.isHierarchy,isNamedSets:n.isNamedSets,actualFilter:n.actualFilter?n.actualFilter.slice():n.actualFilter,levels:this.cloneFieldMembers(n.levels),levelCount:n.levelCount,fieldType:n.fieldType,memberType:n.memberType,parentHierarchy:n.parentHierarchy})}return i},e.cloneDateMembers=function(e){if(e){for(var t=[],i=0,r=e;i<r.length;i++){var a=r[i];t.push({formattedText:a.formattedText,actualText:a.actualText})}return t}return e},e.cloneFormatMembers=function(e){if(e){for(var t=Object.keys(e),i={},r=0,a=t.length;r<a;r++){var n=e[t[r]];i[t[r]]={index:n.index?n.index.slice():n.index,isDrilled:n.isDrilled,ordinal:n.ordinal}}return i}return e},e.cloneFieldMembers=function(e){if(e){for(var t=[],i=0,r=e;i<r.length;i++){var a=r[i];t.push({caption:a.caption,hasChildren:a.hasChildren,id:a.id,isSelected:a.isSelected,name:a.name,tag:a.tag,htmlAttributes:this.getDefinedObj(a.htmlAttributes),type:a.type,spriteCssClass:a.spriteCssClass,pid:a.pid,isChecked:a.isChecked})}return t}return e},e.updateDataSourceSettings=function(e,t){e&&this.setPivotProperties(e,{dataSourceSettings:this.getDefinedObj({type:t.type,catalog:t.catalog,cube:t.cube,providerType:t.providerType,url:t.url,localeIdentifier:t.localeIdentifier,excludeFields:i.i(r.isNullOrUndefined)(t.excludeFields)?[]:t.excludeFields,expandAll:t.expandAll,allowLabelFilter:t.allowLabelFilter,allowValueFilter:t.allowValueFilter,allowMemberFilter:t.allowMemberFilter,enableSorting:!!t.enableSorting,rows:t.rows,columns:t.columns,filters:t.filters,values:t.values,filterSettings:t.filterSettings,sortSettings:t.sortSettings,drilledMembers:t.drilledMembers,valueSortSettings:t.valueSortSettings,valueAxis:t.valueAxis,grandTotalsPosition:t.grandTotalsPosition,formatSettings:t.formatSettings,calculatedFieldSettings:t.calculatedFieldSettings,fieldMapping:t.fieldMapping,showSubTotals:t.showSubTotals,showRowSubTotals:t.showRowSubTotals,showColumnSubTotals:t.showColumnSubTotals,subTotalsPosition:t.subTotalsPosition,showGrandTotals:t.showGrandTotals,showRowGrandTotals:t.showRowGrandTotals,showColumnGrandTotals:t.showColumnGrandTotals,showHeaderWhenEmpty:t.showHeaderWhenEmpty,alwaysShowValueHeader:t.alwaysShowValueHeader,conditionalFormatSettings:t.conditionalFormatSettings,emptyCellsTextContent:t.emptyCellsTextContent,groupSettings:t.groupSettings,showAggregationOnValueField:t.showAggregationOnValueField,authentication:this.CloneAuthenticationObject(t.authentication)})})},e.cloneFieldSettings=function(e){if(e){for(var t=[],i=0,r=e;i<r.length;i++){var a=r[i];t.push(this.getDefinedObj({name:a.name,caption:a.caption,axis:a.axis,baseField:a.baseField,baseItem:a.baseItem,isCalculatedField:a.isCalculatedField,isNamedSet:a.isNamedSet,showNoDataItems:a.showNoDataItems,showSubTotals:a.showSubTotals,type:a.type,dataType:a.dataType,showFilterIcon:a.showFilterIcon,showSortIcon:a.showSortIcon,showRemoveIcon:a.showRemoveIcon,showValueTypeIcon:a.showValueTypeIcon,showEditIcon:a.showEditIcon,allowDragAndDrop:a.allowDragAndDrop,expandAll:a.expandAll,groupName:a.groupName}))}return t}return e},e.cloneOlapFieldSettings=function(e){if(e){for(var t=[],i=0,r=e;i<r.length;i++){var a=r[i];t.push(this.getDefinedObj({caption:a.caption,hasChildren:a.hasChildren,id:a.id,isSelected:a.isSelected,name:a.name,spriteCssClass:a.spriteCssClass,tag:a.tag,type:a.type,pid:a.pid,expanded:a.expanded,defaultHierarchy:a.defaultHierarchy,hasAllMember:a.hasAllMember,allMember:a.allMember,isChecked:a.isChecked,filterMembers:a.filterMembers,childMembers:a.childMembers,searchMembers:a.searchMembers,htmlAttributes:this.getDefinedObj(a.htmlAttributes),currrentMembers:a.currrentMembers,isHierarchy:a.isHierarchy,isNamedSets:a.isNamedSets,formatString:a.formatString,actualFilter:a.actualFilter,levels:a.levels,levelCount:a.levelCount,memberType:a.memberType,fieldType:a.fieldType,parentHierarchy:a.parentHierarchy}))}return t}return e},e.cloneFilterSettings=function(e){if(e){for(var t=[],i=0,r=e;i<r.length;i++){var a=r[i];t.push(this.getDefinedObj({name:a.name,type:a.type,condition:a.condition,items:a.items?a.items.slice():a.items,levelCount:a.levelCount,measure:a.measure,selectedField:a.selectedField,showDateFilter:a.showDateFilter,showLabelFilter:a.showLabelFilter,showNumberFilter:a.showNumberFilter,value1:a.value1,value2:a.value2}))}return t}return e},e.cloneSortSettings=function(e){if(e){for(var t=[],i=0,r=e;i<r.length;i++){var a=r[i];t.push(this.getDefinedObj({name:a.name,order:a.order,membersOrder:a.membersOrder?a.membersOrder.slice():a.membersOrder}))}return t}return e},e.cloneDrillMemberSettings=function(e){if(e){for(var t=[],i=0,r=e;i<r.length;i++){var a=r[i];t.push(this.getDefinedObj({name:a.name,delimiter:a.delimiter,items:a.items?a.items.slice():a.items}))}return t}return e},e.cloneFormatSettings=function(e){if(e){for(var t=[],i=0,r=e;i<r.length;i++){var a=r[i];t.push(this.getDefinedObj({name:a.name,calendar:a.calendar,currency:a.currency,format:a.format,maximumFractionDigits:a.maximumFractionDigits,maximumSignificantDigits:a.maximumSignificantDigits,minimumFractionDigits:a.minimumFractionDigits,minimumIntegerDigits:a.minimumIntegerDigits,minimumSignificantDigits:a.minimumSignificantDigits,skeleton:a.skeleton,type:a.type,useGrouping:a.useGrouping}))}return t}return e},e.CloneValueSortObject=function(e){if(e){return{columnIndex:e.columnIndex,headerDelimiter:e.headerDelimiter,headerText:e.headerText,measure:e.measure,sortOrder:e.sortOrder}}return e},e.CloneAuthenticationObject=function(e){if(e){return{userName:e.userName,password:e.password}}return e},e.cloneCalculatedFieldSettings=function(e){if(e){for(var t=[],i=0,r=e;i<r.length;i++){var a=r[i];t.push(this.getDefinedObj({name:a.name,formatString:a.formatString,formula:a.formula,hierarchyUniqueName:a.hierarchyUniqueName}))}return t}return e},e.cloneConditionalFormattingSettings=function(e){if(e){for(var t=[],i=0,r=e;i<r.length;i++){var a=r[i];t.push(this.getDefinedObj({applyGrandTotals:a.applyGrandTotals,conditions:a.conditions,label:a.label,measure:a.measure,style:a.style?{backgroundColor:a.style.backgroundColor,color:a.style.color,fontFamily:a.style.fontFamily,fontSize:a.style.fontSize}:a.style,value1:a.value1,value2:a.value2}))}return t}return e},e.cloneGroupSettings=function(e){if(e){for(var t=[],i=0,r=e;i<r.length;i++){var a=r[i];t.push(this.getDefinedObj({name:a.name,caption:a.caption,customGroups:this.cloneCustomGroups(a.customGroups),endingAt:a.endingAt,startingAt:a.startingAt,groupInterval:a.groupInterval,rangeInterval:a.rangeInterval,type:a.type}))}return t}return e},e.cloneCustomGroups=function(e){if(e){for(var t=[],i=0,r=e;i<r.length;i++){var a=r[i];t.push(this.getDefinedObj({groupName:a.groupName,items:a.items?a.items.slice():a.items}))}return t}return e},e.getFilterItemByName=function(e,t){var i=new a.DataManager({json:t}).executeLocal((new a.Query).where("name","equal",e));if(i&&i.length>0)return i[i.length-1]},e.getFieldByName=function(e,t){return new a.DataManager({json:t}).executeLocal((new a.Query).where("name","equal",e))[0]},e.getFieldInfo=function(e,t,i){if(!i)for(var r=this.cloneFieldSettings(t.dataSourceSettings.rows),a=this.cloneFieldSettings(t.dataSourceSettings.columns),n=this.cloneFieldSettings(t.dataSourceSettings.values),o=this.cloneFieldSettings(t.dataSourceSettings.filters),s=[r,a,n,o],l=0,d=s.length;l<d;l++)for(var h=0,p=s[l]?s[l].length:0;h<p;h++)if(s[l][h]&&s[l][h].name===e)return{fieldName:e,fieldItem:s[l][h],axis:0===l?"rows":1===l?"columns":2===l?"values":"filters",position:h};var u="olap"===t.dataType?t.olapEngineModule.fieldList[e]:t.engineModule.fieldList[e];return{fieldName:e,fieldItem:u?{name:e,caption:u.caption,baseField:u.baseField,baseItem:u.baseItem,isCalculatedField:u.isCalculatedField,isNamedSet:u.isNamedSets,showNoDataItems:u.showNoDataItems,showSubTotals:u.showSubTotals,type:u.aggregateType,showFilterIcon:u.showFilterIcon,showSortIcon:u.showSortIcon,showRemoveIcon:u.showRemoveIcon,showValueTypeIcon:u.showValueTypeIcon,showEditIcon:u.showEditIcon,allowDragAndDrop:u.allowDragAndDrop,expandAll:u.expandAll}:void 0,axis:"fieldlist",position:-1}},e.isButtonIconRefesh=function(e,t,a){var n=!1;try{if("dataSourceSettings"===e&&t.dataSourceSettings&&a.dataSourceSettings){var o=["notAvail","notAvail","notAvail","notAvail"],s=Object.keys(t.dataSourceSettings),l=Object.keys(a.dataSourceSettings);if(s&&l&&l.length>0&&s.length===l.length)for(var d=["rows","columns","values","filters"],h=0;h<l.length;h++){var p=l[h]in t.dataSourceSettings&&!i.i(r.isNullOrUndefined)(t.dataSourceSettings[l[h]])?Object.keys(t.dataSourceSettings[l[h]]):[],u=l[h]in a.dataSourceSettings&&!i.i(r.isNullOrUndefined)(a.dataSourceSettings[l[h]])?Object.keys(a.dataSourceSettings[l[h]]):[];if(-1!==d.indexOf(l[h])&&-1!==d.indexOf(s[h])&&p&&u&&u.length>0&&p.length===u.length)for(var c=["showFilterIcon","showSortIcon","showRemoveIcon","showValueTypeIcon","showEditIcon","allowDragAndDrop","expandAll"],g=0;g<u.length;g++){for(var m=Object.keys(t.dataSourceSettings[l[h]][u[g]]),f=Object.keys(a.dataSourceSettings[l[h]][u[g]]),v=0;v<f.length;v++){if(-1===c.indexOf(f[v])||-1===c.indexOf(m[v])){o[h]="break";break}o[h]="update"}if("break"===o[h])break}else o[h]="break";if("break"===o[h])break}for(var S=0,y=0,b=0,C=0,x=o;C<x.length;C++){var w=x[C];"break"===w&&S++,"notAvail"===w&&y++,"update"===w&&b++}n=!(S>0||4===y)&&(0===S&&y<4&&b>0)}}catch(e){n=!1}return n},e.formatPivotValues=function(e){for(var t=[],i=0;i<e.length;i++)if(e[i]){t[i]=[];for(var r=0;r<e[i].length;r++)e[i][r]&&(t[i][r]={axis:e[i][r].Axis,actualText:e[i][r].ActualText,indexObject:e[i][r].IndexObject,index:e[i][r].Index,rowHeaders:e[i][r].RowHeaders,columnHeaders:e[i][r].ColumnHeaders,formattedText:e[i][r].FormattedText,actualValue:e[i][r].ActualValue,rowIndex:e[i][r].RowIndex,colIndex:e[i][r].ColIndex,colSpan:e[i][r].ColSpan,level:e[i][r].Level,rowSpan:e[i][r].RowSpan,isSum:e[i][r].IsSum,isGrandSum:e[i][r].IsGrandSum,valueSort:e[i][r].ValueSort,ordinal:e[i][r].Ordinal,hasChild:e[i][r].HasChild,isDrilled:e[i][r].IsDrilled,value:e[i][r].Value,type:e[i][r].Type,members:e[i][r].Members})}return t},e.formatFieldList=function(e){for(var t=Object.keys(e),i={},r=0;r<t.length;r++)e[t[r]]&&(i[t[r]]={id:e[t[r]].Id,caption:e[t[r]].Caption,type:e[t[r]].Type,formatString:e[t[r]].FormatString,index:e[t[r]].Index,members:e[t[r]].Members,formattedMembers:e[t[r]].FormattedMembers,dateMember:e[t[r]].DateMember,filter:e[t[r]].Filter,sort:e[t[r]].Sort,aggregateType:e[t[r]].AggregateType,baseField:e[t[r]].BaseField,baseItem:e[t[r]].BaseItem,filterType:e[t[r]].FilterType,format:e[t[r]].Format,formula:e[t[r]].Formula,isSelected:e[t[r]].IsSelected,isExcelFilter:e[t[r]].IsExcelFilter,showNoDataItems:e[t[r]].ShowNoDataItems,isCustomField:e[t[r]].IsCustomField,showFilterIcon:e[t[r]].ShowFilterIcon,showSortIcon:e[t[r]].ShowSortIcon,showRemoveIcon:e[t[r]].ShowRemoveIcon,showEditIcon:e[t[r]].ShowEditIcon,showValueTypeIcon:e[t[r]].ShowValueTypeIcon,allowDragAndDrop:e[t[r]].AllowDragAndDrop,isCalculatedField:e[t[r]].IsCalculatedField,showSubTotals:e[t[r]].ShowSubTotals,expandAll:e[t[r]].expandAll,groupName:e[t[r]].groupName});return i},e.frameContent=function(e,t,i,r){var a=[],n=r;if(n.dataSourceSettings.values.length>0&&!n.engineModule.isEmptyData&&(n.enableValueSorting||!n.engineModule.isEngineUpdated))for(var o=0,s="value"===t?i:0,l="value"===t?e.length:i,d=s;d<l;d++)if(e[d]){o="header"===t?d:o,a[o]={};for(var h=0;h<e[d].length;h++)e[d][h]&&(a[o][h]=e[d][h]);o++}return a},e.getLocalizedObject=function(e){var t=new Object;return t.Null=e.localeObj.getConstant("null"),t.Years=e.localeObj.getConstant("Years"),t.Quarters=e.localeObj.getConstant("Quarters"),t.Months=e.localeObj.getConstant("Months"),t.Days=e.localeObj.getConstant("Days"),t.Hours=e.localeObj.getConstant("Hours"),t.Minutes=e.localeObj.getConstant("Minutes"),t.Seconds=e.localeObj.getConstant("Seconds"),t.QuarterYear=e.localeObj.getConstant("QuarterYear"),t.Of=e.localeObj.getConstant("of"),t.Qtr=e.localeObj.getConstant("qtr"),t.Undefined=e.localeObj.getConstant("undefined"),t.GroupOutOfRange=e.localeObj.getConstant("groupOutOfRange"),t.Group=e.localeObj.getConstant("group"),t},e.updateReport=function(e,t){e.setProperties({dataSourceSettings:{rows:[]}},!0),e.setProperties({dataSourceSettings:{columns:[]}},!0),e.setProperties({dataSourceSettings:{formatSettings:[]}},!0);for(var i=0;i<t.Rows.length;i++)e.dataSourceSettings.rows.push({name:t.Rows[i].Name,caption:t.Rows[i].Caption,showNoDataItems:t.Rows[i].ShowNoDataItems,baseField:t.Rows[i].BaseField,baseItem:t.Rows[i].BaseItem,showFilterIcon:t.Rows[i].ShowFilterIcon,showSortIcon:t.Rows[i].ShowSortIcon,showEditIcon:t.Rows[i].ShowEditIcon,showRemoveIcon:t.Rows[i].ShowRemoveIcon,showSubTotals:t.Rows[i].ShowValueTypeIcon,allowDragAndDrop:t.Rows[i].AllowDragAndDrop,axis:t.Rows[i].Axis,dataType:t.Rows[i].DataType,isCalculatedField:t.Rows[i].IsCalculatedField,showValueTypeIcon:t.Rows[i].ShowValueTypeIcon,type:t.Rows[i].Type,expandAll:t.Rows[i].expandAll});for(var i=0;i<t.Columns.length;i++)e.dataSourceSettings.columns.push({name:t.Columns[i].Name,caption:t.Columns[i].Caption,showNoDataItems:t.Columns[i].ShowNoDataItems,baseField:t.Columns[i].BaseField,baseItem:t.Columns[i].BaseItem,showFilterIcon:t.Columns[i].ShowFilterIcon,showSortIcon:t.Columns[i].ShowSortIcon,showEditIcon:t.Columns[i].ShowEditIcon,showRemoveIcon:t.Columns[i].ShowRemoveIcon,showSubTotals:t.Columns[i].ShowValueTypeIcon,allowDragAndDrop:t.Columns[i].AllowDragAndDrop,axis:t.Columns[i].Axis,dataType:t.Columns[i].DataType,isCalculatedField:t.Columns[i].IsCalculatedField,showValueTypeIcon:t.Columns[i].ShowValueTypeIcon,type:t.Columns[i].Type,expandAll:t.Columns[i].expandAll});for(var i=0;i<t.FormatSettings.length;i++)e.dataSourceSettings.formatSettings.push({name:t.FormatSettings[i].Name,format:t.FormatSettings[i].Format,type:t.FormatSettings[i].Type,currency:t.FormatSettings[i].Currency,maximumFractionDigits:t.FormatSettings[i].MaximumFractionDigits,maximumSignificantDigits:t.FormatSettings[i].MaximumSignificantDigits,minimumFractionDigits:t.FormatSettings[i].MinimumFractionDigits,minimumIntegerDigits:t.FormatSettings[i].MinimumIntegerDigits,minimumSignificantDigits:t.FormatSettings[i].MinimumSignificantDigits,skeleton:t.FormatSettings[i].Skeleton,useGrouping:t.FormatSettings[i].UseGrouping})},e.generateUUID=function(){var e=(new Date).getTime(),t=performance&&performance.now&&1e3*performance.now()||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(i){var r=16*Math.random();return e>0?(r=(e+r)%16|0,e=Math.floor(e/16)):(r=(t+r)%16|0,t=Math.floor(t/16)),("x"===i?r:3&r|8).toString(16)})},e.applyCustomSort=function(e,t,i,r,a){var n,o=[];o=e.IsOrderChanged?e.members:"Ascending"===e.sortOrder||"None"===e.sortOrder||void 0===e.sortOrder?[].concat(e.members):[].concat(e.members).reverse();var s=[],l=void 0===i||"string"===i||"number"===i;"Grand Total"===t[0].actualText&&(n=t[0],t.shift());for(var d=0,h=0;d<t.length;d++){var p=t[d],u=a?p.formattedText:l?p.actualText:!0===i?p.actualText.toString():p.dateText;if(o[h]===u){if(t.splice(h++,0,p),t.splice(++d,1),!(h<o.length)){r||s.splice(--h,0,u);break}d=-1}d>=0&&!r&&(s[d]=u)}if(!r){for(var d=s.length;d<t.length;d++){var p=t[d],u=a?p.formattedText:l?p.actualText:!0===i?p.actualText.toString():p.dateText;s[d]=u}"Grand Total"===s[s.length-1]&&s.pop(),e.members=s}return n&&t.splice(0,0,n),t},e.applyHeadersSort=function(e,t,i){return e="datetime"===i||"date"===i||"time"===i?"Ascending"===t?e.sort(function(e,t){return e.dateText>t.dateText?1:t.dateText>e.dateText?-1:0}):"Descending"===t?e.sort(function(e,t){return e.dateText<t.dateText?1:t.dateText<e.dateText?-1:0}):e:!0===i?"Ascending"===t?e.sort(function(e,t){return"Grand Total"===e.actualText||"Grand Total"===t.actualText?0:"Out of Range"===e.actualText?1:"Out of Range"===t.actualText?-1:Number(e.actualText.toString().match(/\d+/))>Number(t.actualText.toString().match(/\d+/))?1:Number(t.actualText.toString().match(/\d+/))>Number(e.actualText.toString().match(/\d+/))?-1:0}):"Descending"===t?e.sort(function(e,t){return"Grand Total"===e.actualText||"Grand Total"===t.actualText?0:"Out of Range"===e.actualText?-1:"Out of Range"===t.actualText?1:Number(e.actualText.toString().match(/\d+/))<Number(t.actualText.toString().match(/\d+/))?1:Number(t.actualText.toString().match(/\d+/))<Number(e.actualText.toString().match(/\d+/))?-1:0}):e:"Ascending"===t?e.sort(function(e,t){return"Grand Total"===e.actualText||"Grand Total"===t.actualText?0:e.actualText>t.actualText?1:t.actualText>e.actualText?-1:0}):"Descending"===t?e.sort(function(e,t){return"Grand Total"===e.actualText||"Grand Total"===t.actualText?0:e.actualText<t.actualText?1:t.actualText<e.actualText?-1:0}):e},e.frameHeaderWithKeys=function(e){for(var t=Object.keys(e),i=0,r={};i<t.length;)r[t[i]]=e[t[i]],i++;return r},e.getPageSize=function(e){switch(e){case"Letter":return new n.SizeF(612,792);case"Note":return new n.SizeF(540,720);case"Legal":return new n.SizeF(612,1008);case"A0":return new n.SizeF(2380,3368);case"A1":return new n.SizeF(1684,2380);case"A2":return new n.SizeF(1190,1684);case"A3":return new n.SizeF(842,1190);case"A5":return new n.SizeF(421,595);case"A6":return new n.SizeF(297,421);case"A7":return new n.SizeF(210,297);case"A8":return new n.SizeF(148,210);case"A9":return new n.SizeF(105,148);case"B0":return new n.SizeF(2836,4008);case"B1":return new n.SizeF(2004,2836);case"B2":return new n.SizeF(1418,2004);case"B3":return new n.SizeF(1002,1418);case"B4":return new n.SizeF(709,1002);case"B5":return new n.SizeF(501,709);case"Archa":return new n.SizeF(648,864);case"Archb":return new n.SizeF(864,1296);case"Archc":return new n.SizeF(1296,1728);case"Archd":return new n.SizeF(1728,2592);case"Arche":return new n.SizeF(2592,3456);case"Flsa":return new n.SizeF(612,936);case"HalfLetter":return new n.SizeF(396,612);case"Letter11x17":return new n.SizeF(792,1224);case"Ledger":return new n.SizeF(1224,792);default:return new n.SizeF(595,842)}},e}())},function(e,i){e.exports=t},function(e,t){e.exports=i},function(e,t){e.exports=r},function(e,t){e.exports=a},function(e,t){e.exports=n},function(e,t){e.exports=o},function(e,t){e.exports=s},function(e,t){e.exports=l},function(e,t){e.exports=d},function(e,t,i){"use strict";var r=i(14);i.d(t,"a",function(){return r.a});var a=i(3);i.d(t,"b",function(){return a.a});var n=i(47);i.d(t,"c",function(){return n.a}),i.d(t,"d",function(){return n.b})},function(e,t,i){"use strict";i.d(t,"a",function(){return s});var r=i(0),a=(i.n(r),i(11)),n=(i.n(a),i(3)),o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++){t=arguments[i];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},o.apply(this,arguments)},s=function(){function e(){this.aggregatedValueMatrix=[],this.valueContent=[],this.formatFields={},this.groupingFieldsInfo={},this.dateFormatFunction={},this.calculatedFields={},this.calculatedFormulas={},this.valueAxis=0,this.saveDataHeaders={},this.columnCount=0,this.rowCount=0,this.columnPageCount=0,this.rowPageCount=0,this.colFirstLvl=0,this.rowFirstLvl=0,this.rowStartPos=0,this.colStartPos=0,this.enableValueSorting=!1,this.headerCollection={rowHeaders:[],columnHeaders:[],rowHeadersCount:0,columnHeadersCount:0},this.rMembers=[],this.cMembers=[],this.groupingFields={},this.isLastHeaderHasMeasures=!0,this.measureIndex=-1,this.isPagingOrVirtualizationEnabled=!1,this.valueMatrix=[],this.indexMatrix=[],this.memberCnt=-1,this.pageInLimit=!1,this.endPos=0,this.removeCount=0,this.colHdrBufferCalculated=!1,this.colValuesLength=1,this.rowValuesLength=1,this.slicedHeaders=[],this.fieldFilterMem={},this.filterPosObj={},this.selectedHeaders={selectedHeader:[],values:[]},this.rowGrandTotal=null,this.columnGrandTotal=null,this.removeRowGrandTotal=!1,this.removeColumnGrandTotal=!1,this.isValueHasAdvancedAggregate=!1,this.rawIndexObject={},this.valueAxisFields={},this.reformAxisCount=0,this.isEditing=!1,this.data=[],this.actualData=[],this.groupRawIndex={},this.fieldKeys={},this.allowDataCompression=!1,this.dataSourceSettings={},this.frameHeaderObjectsCollection=!1,this.headerObjectsCollection={},this.columnKeys={},this.fieldDrillCollection={},this.formatRegex=/(^[ncpae]{1})([0-1]?[0-9]|20)?$/i,this.measureNames={},this.enablePaging=!1,this.enableVirtualization=!1,this.enableHtmlSanitizer=!1,this.isParentLevelAdded=!0}return e.prototype.clearProperties=function(){this.isPagingOrVirtualizationEnabled||(this.columnKeys={},this.headerCollection={rowHeaders:[],columnHeaders:[],rowHeadersCount:0,columnHeadersCount:0}),this.aggregatedValueMatrix=[],this.enableValueSorting&&(this.valueContent=[]),this.saveDataHeaders={},this.rMembers=[],this.cMembers=[],this.slicedHeaders=[],this.fieldFilterMem={},this.filterPosObj={},this.selectedHeaders={selectedHeader:[],values:[]},this.rowGrandTotal=null,this.columnGrandTotal=null,this.rawIndexObject={},this.dataSourceSettings.valueIndex>-1&&(this.valueAxisFields={}),this.headerObjectsCollection={},this.fieldDrillCollection={}},e.prototype.renderEngine=function(e,t,o,s){this.getValueCellInfo=o,this.getHeaderSortInfo=s,this.formatFields={},this.dateFormatFunction={},this.calculatedFields={},this.calculatedFormulas={},this.valueAxis=0,this.saveDataHeaders={},this.columnCount=0,this.rowCount=0,this.columnPageCount=0,this.rowPageCount=0,this.colFirstLvl=0,this.rowFirstLvl=0,this.rowStartPos=0,this.colStartPos=0,this.dataSourceSettings.excludeFields=i.i(r.isNullOrUndefined)(e.excludeFields)?[]:e.excludeFields,this.enableValueSorting=!1,this.headerCollection={rowHeaders:[],columnHeaders:[],rowHeadersCount:0,columnHeadersCount:0},this.valueMatrix=[],this.indexMatrix=[],this.aggregatedValueMatrix=[],this.rMembers=[],this.cMembers=[],this.memberCnt=-1,this.pageInLimit=!1,this.endPos=0,this.removeCount=0,this.colHdrBufferCalculated=!1,this.colValuesLength=1,this.rowValuesLength=1,this.slicedHeaders=[],this.fieldFilterMem={},this.filterPosObj={},this.selectedHeaders={selectedHeader:[],values:[]},this.rowGrandTotal=null,this.columnGrandTotal=null,this.removeRowGrandTotal=!1,this.removeColumnGrandTotal=!1,this.isValueHasAdvancedAggregate=!1,this.rawIndexObject={},this.isLastHeaderHasMeasures=!0,this.isEditing=!1;var l;if(this.globalize=t&&t.globalize?t.globalize:new r.Internationalization,this.currencyCode=t&&t.currenyCode?t.currenyCode:void 0,this.localeObj=t?t.localeObj:void 0,this.fieldsType=t?t.fieldsType:{},this.clonedReport=t?t.clonedReport&&t.clonedReport.properties?t.clonedReport.properties:t.clonedReport:{},this.enablePaging=t.enablePaging,this.enableVirtualization=t.enableVirtualization,this.enableHtmlSanitizer=t.enableHtmlSanitizer,this.isPagingOrVirtualizationEnabled=this.enablePaging||this.enableVirtualization,this.enableSort=e.enableSorting,this.dataSourceSettings.alwaysShowValueHeader=e.alwaysShowValueHeader,this.dataSourceSettings.showHeaderWhenEmpty=!!i.i(r.isNullOrUndefined)(e.showHeaderWhenEmpty)||e.showHeaderWhenEmpty,this.dataSourceSettings.showSubTotals=!!i.i(r.isNullOrUndefined)(e.showSubTotals)||e.showSubTotals,this.dataSourceSettings.showRowSubTotals=!!i.i(r.isNullOrUndefined)(e.showRowSubTotals)||e.showRowSubTotals,this.dataSourceSettings.showColumnSubTotals=!!i.i(r.isNullOrUndefined)(e.showColumnSubTotals)||e.showColumnSubTotals,this.dataSourceSettings.showGrandTotals=!!i.i(r.isNullOrUndefined)(e.showGrandTotals)||e.showGrandTotals,this.dataSourceSettings.grandTotalsPosition=i.i(r.isNullOrUndefined)(e.grandTotalsPosition)?"Bottom":e.grandTotalsPosition,this.dataSourceSettings.showRowGrandTotals=!!i.i(r.isNullOrUndefined)(e.showRowGrandTotals)||e.showRowGrandTotals,this.dataSourceSettings.showColumnGrandTotals=!!i.i(r.isNullOrUndefined)(e.showColumnGrandTotals)||e.showColumnGrandTotals,this.showSubTotalsAtTop=this.dataSourceSettings.showSubTotals&&this.dataSourceSettings.showColumnSubTotals&&"Top"===e.subTotalsPosition,this.showSubTotalsAtBottom=this.dataSourceSettings.showSubTotals&&this.dataSourceSettings.showRowSubTotals&&"Bottom"===e.subTotalsPosition,this.allowValueFilter=e.allowValueFilter,this.isValueFilterEnabled=!1,this.enableValueSorting=!!t&&t.enableValueSorting,this.isDrillThrough=!!t&&(!!t.isDrillThrough&&t.isDrillThrough),this.valueContent=[],this.dataSourceSettings=n.a.getClonedDataSourceSettings(e),e.dataSource instanceof a.DataManager||(this.data=e.dataSource),this.data&&this.data[0]){if(!this.fieldList){"CSV"===e.type?this.fields=this.data.shift():this.fields=Object.keys(this.data[0]);for(var d=0;d<this.fields.length;d++)this.fieldKeys[this.fields[d]]="CSV"===e.type?d:this.fields[d]}t&&t.pageSettings&&t.allowDataCompression&&(this.actualData=this.data,this.data=this.getGroupedRawData(e)),this.dataSourceSettings.rows=e.rows?e.rows:[],this.dataSourceSettings.columns=e.columns?e.columns:[],this.dataSourceSettings.filters=e.filters?e.filters:[],this.dataSourceSettings.values=e.values?e.values:[],this.dataSourceSettings.formatSettings=e.formatSettings?e.formatSettings:[],this.dataSourceSettings.groupSettings=e.groupSettings?e.groupSettings:[],this.dataSourceSettings.calculatedFieldSettings=e.calculatedFieldSettings?e.calculatedFieldSettings:[],this.enableSort=void 0===e.enableSorting||e.enableSorting,this.dataSourceSettings.fieldMapping=e.fieldMapping?e.fieldMapping:[];for(var h=0,p=this.dataSourceSettings.values;h<p.length;h++){var u=p[h];this.valueAxisFields[u.name]=u}l=this.getGroupData(this.data);for(var d=0;d<this.fields.length;d++)this.fieldKeys[this.fields[d]]="CSV"===e.type?d:this.fields[d];this.validateFilters(e),this.isExpandAll=!(!this.isValueFiltersAvail||!e.allowValueFilter)||e.expandAll,this.drilledMembers=e.drilledMembers?this.isValueFiltersAvail&&e.allowValueFilter?[]:e.drilledMembers:[],this.isMultiMeasures=this.dataSourceSettings.values.length>1,this.valueAxis="row"===e.valueAxis?1:0,this.measureIndex=i.i(r.isNullOrUndefined)(e.valueIndex)?-1:e.valueIndex,this.emptyCellTextContent=e.emptyCellsTextContent?e.emptyCellsTextContent:"",this.rowValuesLength=1===this.valueAxis?this.dataSourceSettings.values.length:1,this.colValuesLength=0===this.valueAxis?this.dataSourceSettings.values.length:1,this.valueSortSettings=e.valueSortSettings||{sortOrder:"None",headerDelimiter:".",headerText:"",columnIndex:void 0},this.valueSortData=[],this.pageSettings=t?t.pageSettings?t.pageSettings:this.pageSettings:void 0,this.allowDataCompression=t&&t.allowDataCompression,this.savedFieldList=t?t.savedFieldList:void 0,this.getFieldList(l,this.enableSort,e.allowValueFilter),this.removeIrrelevantFields(Object.keys(this.fieldList)),this.fillFieldMembers(this.data,this.indexMatrix),this.updateSortSettings(e.sortSettings,this.enableSort),this.valueMatrix=this.generateValueMatrix(this.data),this.filterMembers=[];var c=this.dataSourceSettings.columns.length-1;for(this.columnKeys={};c>-1;)this.columnKeys[this.dataSourceSettings.columns[c].name]=this.dataSourceSettings.columns[c],c--;this.updateFilterMembers(e),this.generateGridData(e)}},e.prototype.removeIrrelevantFields=function(e){var t={};t[0]=this.dataSourceSettings.rows,t[1]=this.dataSourceSettings.columns,t[2]=this.dataSourceSettings.values,t[3]=this.dataSourceSettings.filters;for(var a=0;a<4;){if(t[a])for(var n=0;n<t[a].length;n++){var o=t[a][n].name;this.dataSourceSettings.excludeFields.indexOf(o)>-1||!i.i(r.isNullOrUndefined)(e)&&-1===e.indexOf(o)?(t[a].splice(n,1),n--):2===a&&(this.measureNames[o]=t[a][n].caption?t[a][n].caption:o,this.measureNames[t[a][n].caption?t[a][n].caption:o]=o)}a++}this.isMultiMeasures=this.dataSourceSettings.values.length>1,this.measureIndex=-1===this.measureIndex?this.valueAxis?t[0].length:t[1].length:this.measureIndex},e.prototype.updateDataSourceSettings=function(e,t){t&&(this.emptyCellTextContent=e.emptyCellsTextContent?e.emptyCellsTextContent:"",this.valueAxis="row"===e.valueAxis?1:0,this.rowValuesLength=1===this.valueAxis?this.dataSourceSettings.values.length:1,this.colValuesLength=0===this.valueAxis?this.dataSourceSettings.values.length:1,this.measureIndex=i.i(r.isNullOrUndefined)(e.valueIndex)?-1:e.valueIndex,this.enableSort=e.enableSorting,this.dataSourceSettings.alwaysShowValueHeader=e.alwaysShowValueHeader,this.dataSourceSettings.showHeaderWhenEmpty=!!i.i(r.isNullOrUndefined)(e.showHeaderWhenEmpty)||e.showHeaderWhenEmpty,this.dataSourceSettings.showSubTotals=!!i.i(r.isNullOrUndefined)(e.showSubTotals)||e.showSubTotals,this.dataSourceSettings.showRowSubTotals=!!i.i(r.isNullOrUndefined)(e.showRowSubTotals)||e.showRowSubTotals,this.dataSourceSettings.showColumnSubTotals=!!i.i(r.isNullOrUndefined)(e.showColumnSubTotals)||e.showColumnSubTotals,this.dataSourceSettings.showGrandTotals=!!i.i(r.isNullOrUndefined)(e.showGrandTotals)||e.showGrandTotals,this.dataSourceSettings.grandTotalsPosition=i.i(r.isNullOrUndefined)(e.grandTotalsPosition)?"Bottom":e.grandTotalsPosition,this.dataSourceSettings.showRowGrandTotals=!!i.i(r.isNullOrUndefined)(e.showRowGrandTotals)||e.showRowGrandTotals,this.dataSourceSettings.showColumnGrandTotals=!!i.i(r.isNullOrUndefined)(e.showColumnGrandTotals)||e.showColumnGrandTotals,this.showSubTotalsAtTop=this.dataSourceSettings.showSubTotals&&"Top"===e.subTotalsPosition&&e.showColumnSubTotals,this.showSubTotalsAtBottom=this.dataSourceSettings.showSubTotals&&"Bottom"===e.subTotalsPosition&&e.showRowSubTotals,this.allowValueFilter=e.allowValueFilter,this.dataSourceSettings.formatSettings=e.formatSettings?e.formatSettings:[],this.dataSourceSettings.groupSettings=e.groupSettings?e.groupSettings:[],this.dataSourceSettings.calculatedFieldSettings=e.calculatedFieldSettings?e.calculatedFieldSettings:[],this.enableSort=void 0===e.enableSorting||e.enableSorting,this.dataSourceSettings.fieldMapping=e.fieldMapping?e.fieldMapping:[],this.removeIrrelevantFields(Object.keys(this.fieldList)))},e.prototype.getGroupedRawData=function(e){this.data=[];for(var t=0,a=this.actualData;t<a.length;t++){var o=a[t];this.data[this.data.length]=n.a.frameHeaderWithKeys(o)}var s=e.values.filter(function(e){return"Count"===e.type||"DistinctCount"===e.type}).map(function(e){return e.name}),l=s.length>0,d=this.data,h=e.rows.concat(e.columns.concat(e.filters)).map(function(e){return e.name}),p={},u=[];this.groupRawIndex={};for(var c={},g=0,m=0;m<d.length;m++){var f=d[m],v=[];if(l)for(var S=0;S<s.length;S++)f[this.fieldKeys[s[S]]]=i.i(r.isNullOrUndefined)(f[this.fieldKeys[s[S]]])?f[this.fieldKeys[s[S]]]:1;for(var y=0;y<h.length;y++)v.push(f[this.fieldKeys[h[y]]]);var b=v.join("-");if(p[b]){for(var S=0;S<e.values.length;S++){var C=e.values[S].name,x=f[this.fieldKeys[C]],w=p[b],T=e.values[S].type;i.i(r.isNullOrUndefined)(x)||("number"==typeof x&&"DistinctCount"!==T||(T="Count"),i.i(r.isNullOrUndefined)(w[C])?w[C]="Product"===T?1:"Min"===T||"Max"===T?void 0:0:"number"!=typeof w[C]&&(w[C]=1),"Count"===T?w[C]+=1:"Min"===T?i.i(r.isNullOrUndefined)(w[C])||(w[C]=w[C]>x?x:w[C]):"Max"===T?i.i(r.isNullOrUndefined)(w[C])||(w[C]=w[C]<x?x:w[C]):"Product"===T?w[C]*=x:w[C]+=x)}this.isDrillThrough&&this.groupRawIndex[c[b]].push(m)}else p[b]=f,u.push(f),this.isDrillThrough&&(this.groupRawIndex[g]=[m],c[b]=g,g++)}return u},e.prototype.getGroupData=function(e){for(var t=this,a=e[0],o=this,s=0,l=this.dataSourceSettings.groupSettings;s<l.length;s++){var d=l[s],h=function(s){var l=s.name,d=s.caption;if(!(o.fields.indexOf(l)>-1))return{value:a};var h={},p=void 0;if("Date"===s.type&&o.groupingFields[l]||"Custom"===s.type&&o.groupingFields[l])return{value:a};if("Number"===s.type){if("number"!==n.a.getType(a[l])&&o.groupingFields[l])return{value:a};s.rangeInterval&&e.sort(function(e,i){return Number(e[t.fieldKeys[l]])>Number(i[t.fieldKeys[l]])?1:Number(i[t.fieldKeys[l]])>Number(e[t.fieldKeys[l]])?-1:0})}for(var u=e.length;u--;){var c=e[u];if(c[o.fieldKeys[l]]&&"Date"===s.type){var g=new Date(c[o.fieldKeys[l]].toString());if(!i.i(r.isNullOrUndefined)(g)&&s.groupInterval.length>0)for(var m=0,f=s.groupInterval.length;m<f;m++){var v=s.groupInterval[m],S=o.getRange(s,g.getTime()),y=n.a.resetTime(new Date);switch(v){case"Years":var b=m===s.groupInterval.length-1?l:l+"_date_group_years";h[b]=v,o.fieldKeys[b]="CSV"===o.dataSourceSettings.type?o.fieldKeys[b]?o.fieldKeys[b]:o.fields.length:b,-1===o.fields.indexOf(b)&&o.fields.push(b),c[o.fieldKeys[b]]=S?void 0:new Date(y.setFullYear(g.getFullYear())).toString();break;case"Quarters":var b=m===s.groupInterval.length-1?l:l+"_date_group_quarters";h[b]=v;var C=Math.ceil((g.getMonth()+1)/3);o.fieldKeys[b]="CSV"===o.dataSourceSettings.type?o.fieldKeys[b]?o.fieldKeys[b]:o.fields.length:b,-1===o.fields.indexOf(b)&&o.fields.push(b),c[o.fieldKeys[b]]=S?void 0:(o.localeObj?o.localeObj.getConstant("qtr"):"Qtr")+C.toString();break;case"QuarterYear":var b=m===s.groupInterval.length-1?l:l+"_date_group_quarterYear";h[b]=v;var C=Math.ceil((g.getMonth()+1)/3);o.fieldKeys[b]="CSV"===o.dataSourceSettings.type?o.fieldKeys[b]?o.fieldKeys[b]:o.fields.length:b,-1===o.fields.indexOf(b)&&o.fields.push(b),c[o.fieldKeys[b]]=S?void 0:(o.localeObj?o.localeObj.getConstant("qtr"):"Qtr")+C.toString()+" "+(o.localeObj?o.localeObj.getConstant("of"):"of")+" "+g.getFullYear().toString();break;case"Months":var b=m===s.groupInterval.length-1?l:l+"_date_group_months";h[b]=v,o.fieldKeys[b]="CSV"===o.dataSourceSettings.type?o.fieldKeys[b]?o.fieldKeys[b]:o.fields.length:b,-1===o.fields.indexOf(b)&&o.fields.push(b),c[o.fieldKeys[b]]=S?void 0:new Date(y.setMonth(g.getMonth(),1)).toString();break;case"Days":var b=m===s.groupInterval.length-1?l:l+"_date_group_days";h[b]=v,o.fieldKeys[b]="CSV"===o.dataSourceSettings.type?o.fieldKeys[b]?o.fieldKeys[b]:o.fields.length:b,-1===o.fields.indexOf(b)&&o.fields.push(b),c[o.fieldKeys[b]]=S?void 0:new Date(y.setMonth(g.getMonth(),g.getDate())).toString();break;case"Hours":var b=m===s.groupInterval.length-1?l:l+"_date_group_hours";h[b]=v,o.fieldKeys[b]="CSV"===o.dataSourceSettings.type?o.fieldKeys[b]?o.fieldKeys[b]:o.fields.length:b,-1===o.fields.indexOf(b)&&o.fields.push(b),c[o.fieldKeys[b]]=S?void 0:new Date(y.setHours(g.getHours())).toString();break;case"Minutes":var b=m===s.groupInterval.length-1?l:l+"_date_group_minutes";h[b]=v,o.fieldKeys[b]="CSV"===o.dataSourceSettings.type?o.fieldKeys[b]?o.fieldKeys[b]:o.fields.length:b,-1===o.fields.indexOf(b)&&o.fields.push(b),c[o.fieldKeys[b]]=S?void 0:new Date(y.setMinutes(g.getMinutes())).toString();break;case"Seconds":var b=m===s.groupInterval.length-1?l:l+"_date_group_seconds";h[b]=v,o.fieldKeys[b]="CSV"===o.dataSourceSettings.type?o.fieldKeys[b]?o.fieldKeys[b]:o.fields.length:b,-1===o.fields.indexOf(b)&&o.fields.push(b),c[o.fieldKeys[b]]=S?void 0:new Date(y.setSeconds(g.getSeconds())).toString()}}}else if(isNaN(Number(c[o.fieldKeys[l]]))||"Number"!==s.type){if(c[o.fieldKeys[l]]&&"Custom"===s.type&&s.customGroups&&s.customGroups.length>0){var b=l+"_custom_group",x=s.customGroups,w=void 0;o.groupingFieldsInfo[l]=l,o.groupingFieldsInfo[b]=l;for(var m=0,T=x.length;m<T;m++){var M=x[m];if(M.items&&M.items.length>1){p=b,o.fieldKeys[b]="CSV"===o.dataSourceSettings.type?o.fieldKeys[b]?o.fieldKeys[b]:o.fields.length:b,-1===o.fields.indexOf(b)&&o.fields.push(b);var _=-1!==n.a.inArray(c[o.fieldKeys[l]].toString(),M.items);c[o.fieldKeys[b]]=_?M.groupName&&""!==M.groupName?M.groupName:o.localeObj.getConstant("group")+" "+m:w&&w!==c[o.fieldKeys[l]].toString()?w:c[o.fieldKeys[l]].toString(),w=c[o.fieldKeys[b]]}}}}else{var S=o.getRange(s,Number(c[o.fieldKeys[l]]));c[o.fieldKeys[l]]=S?void 0:c[o.fieldKeys[l]]}for(var D=Object.keys(c),O=[],P=0,E=D;P<E.length;P++){var N=E[P];O.push(!!c[N])}a=-1===O.indexOf(!1)&&D.length===Object.keys(e[0]).length?c:a}if("Date"===s.type){for(var F=!1,I=[o.dataSourceSettings.rows,o.dataSourceSettings.columns,o.dataSourceSettings.values,o.dataSourceSettings.filters],L=Object.keys(h),A=Object.keys(L).length,R=void 0,k=0,j=I;k<j.length;k++){var H=j[k];if(!F&&H){for(var q=H.length,m=0;m<q;){if(H[m].name===l){F=!0;var V=H[m];H.splice(m,1);var B=o.dataSourceSettings.rows;for(B=B.concat(o.dataSourceSettings.columns,o.dataSourceSettings.values,o.dataSourceSettings.filters);A--;){var U=V.caption?V.caption:V.name;if(o.clonedReport){var G=o.clonedReport.rows;G=G.concat(o.clonedReport.columns,o.clonedReport.values,o.clonedReport.filters);var z=n.a.getFieldByName(L[A],G);z&&(U=z.caption?z.caption:z.name)}if(!n.a.getFieldByName(L[A],B)){R=h[L[A]],U=-1!==U.indexOf(" (")&&-1!==U.indexOf(")")?U.slice(U.indexOf("(")+1,U.length-1):U;var W={name:L[A],caption:(o.localeObj?o.localeObj.getConstant(R):R)+" ("+U+")",type:"Count",showNoDataItems:V.showNoDataItems,baseField:V.baseField,baseItem:V.baseItem,showFilterIcon:V.showFilterIcon,showSortIcon:V.showSortIcon,showEditIcon:V.showEditIcon,showRemoveIcon:V.showRemoveIcon,showSubTotals:V.showValueTypeIcon,allowDragAndDrop:V.allowDragAndDrop,expandAll:V.expandAll,groupName:V.groupName};H.splice(m,0,W),o.groupingFieldsInfo[W.name]=l}}break}if(H[m].name.indexOf(l)>-1){var Q=h[H[m].name],Y=H.filter(function(e){return e.name===l})[0],K=-1!==Y.caption.indexOf(" (")&&-1!==Y.caption.indexOf(")")?Y.caption.slice(Y.caption.indexOf("(")+1,Y.caption.length-1):Y.caption;H[m].caption=(o.localeObj?o.localeObj.getConstant(Q):Y)+" ("+K+")"}m++}if(F)break}}A=Object.keys(L).length;for(var X=o.getMappingField(l,o.clonedReport?o.clonedReport.fieldMapping:o.dataSourceSettings.fieldMapping),J=X.caption?X.caption:l;A--;){R=h[L[A]];for(var m=0,Z=o.dataSourceSettings.formatSettings.length;m<Z;m++)if(o.dataSourceSettings.formatSettings[m].name===L[A]){o.dataSourceSettings.formatSettings.splice(m,1);break}if("Quarters"!==R&&"QuarterYear"!==R){var $={name:L[A],type:["Years","Months","Days"].indexOf(R)>-1?"date":"time",format:"Years"===R?"yyyy":"Months"===R?"MMM":"Days"===R?"d-MMM":"Hours"===R?"hh a":"Minutes"===R?":mm":"Seconds"===R?":ss":void 0};o.dataSourceSettings.formatSettings.push($)}if(!F){var ee=o.getMappingField(L[A],o.dataSourceSettings.fieldMapping);if(L[A]!==l&&i.i(r.isNullOrUndefined)(ee.name)){var W={name:L[A],caption:(o.localeObj?o.localeObj.getConstant(R):R)+" ("+J+")"};o.dataSourceSettings.fieldMapping.push(W),o.groupingFieldsInfo[W.name]=l}else L[A]!==l&&(ee.caption=(o.localeObj?o.localeObj.getConstant(R):R)+" ("+J+")")}}if(!F){var ee=o.getMappingField(l,o.dataSourceSettings.fieldMapping);if(R=h[l],L[A]!==l&&i.i(r.isNullOrUndefined)(ee.name)){var W={name:l,caption:(o.localeObj?o.localeObj.getConstant(R):R)+" ("+J+")"};o.dataSourceSettings.fieldMapping.push(W),o.groupingFieldsInfo[W.name]=l}else ee.caption=(o.localeObj?o.localeObj.getConstant(R):R)+" ("+J+")"}}else if("Number"===s.type&&s.rangeInterval){var te=void 0,ie=[],re=[],ae=e.length,q=0;o.groupingFields[l]=l;for(var ne=void 0,oe=[];q<ae;){var se=Number(e[q][l]);re.push(se),isNaN(se)||-1!==ie.indexOf(se)||ie.push(se),q++}for(ae=e.length,q=0;q<ae;){var le=e[q];if(le&&!isNaN(Number(le[l]))){ne="string"==typeof s.endingAt?parseInt(s.endingAt,10):s.endingAt,te=ne||Math.max.apply(Math,ie);var de=Math.round(Number(le[l])),he=Math.round(de+(s.rangeInterval-1));if(de>=oe[0]&&de<=oe[oe.length-1]){var pe=oe[0],ue=oe[oe.length-1];le[l]=o.getNumberGroupHeaders(pe,ue,te)}else if(0===oe.length){for(var m=de;m<=he;m++)oe.push(m);var pe=oe[0],ue=oe[oe.length-1];le[l]=o.getNumberGroupHeaders(pe,ue,te)}else{var pe=oe[oe.length-1]+1,ue=pe+(s.rangeInterval-1),ce=!0;for(oe.splice(0,oe.length);ce;)de>=pe&&de<=ue&&(le[l]=o.getNumberGroupHeaders(pe,ue,te),oe.push(pe),oe.push(ue),ce=!1),pe=ue+1,ue=pe+(s.rangeInterval-1)}for(var D=Object.keys(le),O=[],ge=0,me=D;ge<me.length;ge++){var N=me[ge];O.push(!!le[N])}a=-1===O.indexOf(!1)&&D.length===Object.keys(e[0]).length?le:a}q++}for(var I=[o.dataSourceSettings.rows,o.dataSourceSettings.columns,o.dataSourceSettings.values,o.dataSourceSettings.filters],fe=0,ve=I;fe<ve.length;fe++){var Se=ve[fe],X=n.a.getFieldByName(l,Se);X&&(X=X.properties?X.properties:X,X.type="Count")}for(var m=0,ye=o.dataSourceSettings.formatSettings.length;m<ye;m++)if(o.dataSourceSettings.formatSettings[m].name===l){o.dataSourceSettings.formatSettings.splice(m,1);break}}else if("Custom"===s.type&&p){var be=p,F=!1,I=[o.dataSourceSettings.rows,o.dataSourceSettings.columns,o.dataSourceSettings.values,o.dataSourceSettings.filters],B=o.dataSourceSettings.rows;B=B.concat(o.dataSourceSettings.columns,o.dataSourceSettings.values,o.dataSourceSettings.filters);var Ce=[];d&&""!==d||(Ce=be.match(/_custom_group/g));for(var xe=n.a.getFieldByName(l.replace(/_custom_group/g,""),B),we=n.a.getFieldByName(be,B),Te=0,Me=I;Te<Me.length;Te++){var H=Me[Te];if(!F&&H){for(var q=H.length,m=0;m<q;){if(H[m].name===s.name&&!we){F=!0;var V=H[m],W={name:be,caption:d&&""!==d?d:(xe.caption?xe.caption:xe.name)+(Ce.length+1),type:"Count",showNoDataItems:V.showNoDataItems,baseField:V.baseField,baseItem:V.baseItem,showSubTotals:V.showValueTypeIcon,allowDragAndDrop:V.allowDragAndDrop,showFilterIcon:V.showFilterIcon,showSortIcon:V.showSortIcon,showRemoveIcon:V.showRemoveIcon,showEditIcon:V.showEditIcon,expandAll:V.expandAll,groupName:V.groupName};H.splice(m,0,W),o.groupingFieldsInfo[W.name]=l,o.groupingFieldsInfo[l]=l;break}if(H[m].name===be&&we){var W={name:we.name,caption:d&&""!==d?d:we.caption,type:we.type,showNoDataItems:we.showNoDataItems,baseField:we.baseField,baseItem:we.baseItem,showRemoveIcon:we.showRemoveIcon,showSubTotals:we.showValueTypeIcon,allowDragAndDrop:we.allowDragAndDrop,showFilterIcon:we.showFilterIcon,showSortIcon:we.showSortIcon,showEditIcon:we.showEditIcon,expandAll:we.expandAll,groupName:we.groupName};H.splice(m,1,W),o.groupingFieldsInfo[W.name]=l,o.groupingFieldsInfo[l]=l;break}m++}if(F)break}}var _e=n.a.getFieldByName(l,n.a.cloneFormatSettings(o.dataSourceSettings.formatSettings));_e&&(_e.name=be,o.dataSourceSettings.formatSettings.push(_e)),o.groupingFields[l]=l}o.groupingFields=i.i(r.extend)(o.groupingFields,h)}(d);if("object"==typeof h)return h.value}return a},e.prototype.getNumberGroupHeaders=function(e,t,i){return e===t?e.toString():i>=e&&i<=t?i===e?e.toString():e.toString()+"-"+i.toString():e.toString()+"-"+t.toString()},e.prototype.frameData=function(e){for(var t=Object.keys(e),i=0,r={};i<t.length;)r[t[i]]=void 0,i++;return r},e.prototype.getRange=function(e,t){var i;if("Date"===e.type){var r=new Date(t),a="string"==typeof e.startingAt?new Date(e.startingAt):e.startingAt,n="string"==typeof e.endingAt?new Date(e.endingAt):e.endingAt;i=!!(a&&r.getTime()<a.getTime()||n&&r.getTime()>n.getTime())}else{var o="string"==typeof e.startingAt?parseInt(e.startingAt,10):e.startingAt,s="string"==typeof e.endingAt?parseInt(e.endingAt,10):e.endingAt;i=!isNaN(o)&&t<o||!isNaN(s)&&t>s}return i},e.prototype.getPercentFormat=function(e,t){var a=i.i(r.isNullOrUndefined)(e[t])||i.i(r.isNullOrUndefined)(this.formatFields[t].format)?void 0:this.formatFields[t].format.toLowerCase().match(/p[0-9]/);return i.i(r.isNullOrUndefined)(a)?2:Number(this.formatFields[t].format.replace(/[^0-9]/g,""))},e.prototype.getFormattedFields=function(e){for(var t=this.dataSourceSettings.formatSettings.length;t--;)this.formatFields[this.dataSourceSettings.formatSettings[t].name]=this.dataSourceSettings.formatSettings[t],this.dataSourceSettings.formatSettings[t].type&&(this.dateFormatFunction[this.dataSourceSettings.formatSettings[t].name]={exactFormat:this.globalize.getDateFormat(this.dataSourceSettings.formatSettings[t]),fullFormat:this.globalize.getDateFormat({format:"yyyy/MM/dd/HH/mm/ss",type:this.dataSourceSettings.formatSettings[t].type})})},e.prototype.getFieldList=function(e,t,a){for(var o,s=this.dataSourceSettings.excludeFields.length-1;s>-1;){var l=this.fields.indexOf(this.dataSourceSettings.excludeFields[s]);-1!==l&&this.fields.splice(l,1),this.fieldList&&delete this.fieldList[this.dataSourceSettings.excludeFields[s]],s--}var d=this.fields,h=i.i(r.extend)([],this.dataSourceSettings.rows,null,!0);h=h.concat(this.dataSourceSettings.columns,this.dataSourceSettings.values,this.dataSourceSettings.filters),this.getFormattedFields(h),this.getCalculatedField(d),d=this.fields;var p=d.length,u=["string","number","datetime","date","boolean"];if(this.savedFieldList)for(this.fieldList=this.savedFieldList;p--;){var c=d[p],g=this.getMappingField(c,this.dataSourceSettings.fieldMapping);this.fieldList[c]?(this.fieldList[c].isSelected=!1,this.fieldList[c].index=p,this.fieldList[c].filter=[],this.fieldList[c].sort=t?"Ascending":"None",this.fieldList[c].isExcelFilter=!1,this.fieldList[c].filterType="",this.fieldList[c].showFilterIcon=!(g&&"showFilterIcon"in g)||g.showFilterIcon,this.fieldList[c].showRemoveIcon=!(g&&"showRemoveIcon"in g)||g.showRemoveIcon,this.fieldList[c].showSortIcon=!(g&&"showSortIcon"in g)||g.showSortIcon,this.fieldList[c].showEditIcon=!(g&&"showEditIcon"in g)||g.showEditIcon,this.fieldList[c].showValueTypeIcon=!(g&&"showValueTypeIcon"in g)||g.showValueTypeIcon,this.fieldList[c].allowDragAndDrop=!(g&&"allowDragAndDrop"in g)||g.allowDragAndDrop,this.fieldList[c].isCalculatedField=!!(g&&"isCalculatedField"in g)&&g.isCalculatedField,this.fieldList[c].showNoDataItems=!!(g&&"showNoDataItems"in g)&&g.showNoDataItems,this.fieldList[c].showSubTotals=!(g&&"showSubTotals"in g)||g.showSubTotals,this.fieldList[c].expandAll=!!(g&&"expandAll"in g)&&g.expandAll,this.fieldList[c].pid=g&&"groupName"in g&&g.groupName?g.groupName:this.groupingFieldsInfo[c]?this.groupingFieldsInfo[c]:void 0,this.isValueFiltersAvail&&a&&(this.fieldList[c].dateMember=[],this.fieldList[c].formattedMembers={},this.fieldList[c].members={}),this.updateMembersOrder(c)):(o=g&&"dataType"in g&&g.dataType&&u.indexOf(g.dataType.toLowerCase())>-1?g.dataType.toLowerCase():o,this.fieldList[c]={caption:g&&"caption"in g&&g.caption?g.caption:c,id:c,type:-1!==c.indexOf("_custom_group")||-1!==c.indexOf("_date_group")?"string":void 0===o||"undefined"===o?"number":o,isSelected:!1,sort:t?"Ascending":"None",filterType:"",index:p,filter:[],isCustomField:-1!==c.indexOf("_custom_group")||-1!==c.indexOf("_date_group"),showRemoveIcon:!(g&&"showRemoveIcon"in g)||g.showRemoveIcon,showFilterIcon:!(g&&"showFilterIcon"in g)||g.showFilterIcon,showSortIcon:!(g&&"showSortIcon"in g)||g.showSortIcon,showNoDataItems:!!(g&&"showNoDataItems"in g)&&g.showNoDataItems,isCalculatedField:!!(g&&"isCalculatedField"in g)&&g.isCalculatedField,showEditIcon:!(g&&"showEditIcon"in g)||g.showEditIcon,showValueTypeIcon:!(g&&"showValueTypeIcon"in g)||g.showValueTypeIcon,allowDragAndDrop:!(g&&"allowDragAndDrop"in g)||g.allowDragAndDrop,showSubTotals:!(g&&"showSubTotals"in g)||g.showSubTotals,expandAll:!!(g&&"expandAll"in g)&&g.expandAll,pid:g&&"groupName"in g&&g.groupName?g.groupName:this.groupingFieldsInfo[c]?this.groupingFieldsInfo[c]:void 0,aggregateType:g&&"type"in g?g.type:"number"===(-1!==c.indexOf("_custom_group")||-1!==c.indexOf("_date_group")?"string":void 0===o||"undefined"===o?"number":o)?"Sum":"Count",baseField:g&&"baseField"in g?g.baseField:void 0,baseItem:g&&"baseItem"in g?g.baseItem:void 0},this.updateMembersOrder(c))}else for(this.fieldList={};p--;){var c=d[p],g=this.getMappingField(c,this.dataSourceSettings.fieldMapping);o=g&&"dataType"in g&&g.dataType&&u.indexOf(g.dataType.toLowerCase())>-1?g.dataType.toLowerCase():n.a.getType(e[this.fieldKeys[c]]),this.fieldList[c]={id:c,pid:g&&"groupName"in g&&g.groupName?g.groupName:this.groupingFieldsInfo[c]?this.groupingFieldsInfo[c]:void 0,caption:g&&"caption"in g&&g.caption?g.caption:c,type:-1!==c.indexOf("_custom_group")||-1!==c.indexOf("_date_group")?"string":void 0===o||"undefined"===o?"number":o,filterType:"",index:p,filter:[],sort:t?"Ascending":"None",isSelected:!1,isCustomField:-1!==c.indexOf("_custom_group")||-1!==c.indexOf("_date_group"),showFilterIcon:!(g&&"showFilterIcon"in g)||g.showFilterIcon,showRemoveIcon:!(g&&"showRemoveIcon"in g)||g.showRemoveIcon,showSortIcon:!(g&&"showSortIcon"in g)||g.showSortIcon,showEditIcon:!(g&&"showEditIcon"in g)||g.showEditIcon,showValueTypeIcon:!(g&&"showValueTypeIcon"in g)||g.showValueTypeIcon,allowDragAndDrop:!(g&&"allowDragAndDrop"in g)||g.allowDragAndDrop,showSubTotals:!(g&&"showSubTotals"in g)||g.showSubTotals,showNoDataItems:!!(g&&"showNoDataItems"in g)&&g.showNoDataItems,isCalculatedField:!!(g&&"isCalculatedField"in g)&&g.isCalculatedField,expandAll:!!(g&&"expandAll"in g)&&g.expandAll,aggregateType:g&&"type"in g?g.type:"number"===(-1!==c.indexOf("_custom_group")||-1!==c.indexOf("_date_group")?"string":void 0===o||"undefined"===o?"number":o)?"Sum":"Count",baseField:g&&"baseField"in g?g.baseField:void 0,baseItem:g&&"baseItem"in g?g.baseItem:void 0},this.updateMembersOrder(c)}this.updateTreeViewData(h)},e.prototype.updateMembersOrder=function(e){for(var t=0,i=this.dataSourceSettings.sortSettings;t<i.length;t++){var r=i[t];if(e===r.name&&r.membersOrder){this.fieldList[e].membersOrder=r.membersOrder;break}}},e.prototype.getMappingField=function(e,t){var i={};if(t.length>0)for(var r=0,a=t.length;r<a;r++)if(t[r].name===e){i=t[r];break}return i},e.prototype.updateFieldList=function(e){for(var t=this.fields,i=t.length;i--;)this.fieldList[t[i]].isExcelFilter=e[t[i]].isExcelFilter},e.prototype.updateTreeViewData=function(e){for(var t=e.length,i=this.dataSourceSettings.calculatedFieldSettings.length;t--;)if(this.fieldList[e[t].name]){var r=this.fieldList[e[t].name];r.type=e[t].dataType?e[t].dataType.toLowerCase():r.type,r.caption=e[t].caption?e[t].caption:e[t].name,r.isSelected=!0,r.showNoDataItems=e[t].showNoDataItems,r.aggregateType=e[t].type,r.baseField=e[t].baseField,r.baseItem=e[t].baseItem,r.allowDragAndDrop=e[t].allowDragAndDrop,r.showFilterIcon=e[t].showFilterIcon,r.showSortIcon=e[t].showSortIcon,r.showRemoveIcon=e[t].showRemoveIcon,r.showValueTypeIcon=e[t].showValueTypeIcon,r.showEditIcon=e[t].showEditIcon,r.showSubTotals=e[t].showSubTotals,r.expandAll=e[t].expandAll}for(;i--;)this.fieldList[this.dataSourceSettings.calculatedFieldSettings[i].name]&&(this.fieldList[this.dataSourceSettings.calculatedFieldSettings[i].name].aggregateType="CalculatedField",this.fieldList[this.dataSourceSettings.calculatedFieldSettings[i].name].isCalculatedField=!0,this.fieldList[this.dataSourceSettings.calculatedFieldSettings[i].name].formula=this.dataSourceSettings.calculatedFieldSettings[i].formula)},e.prototype.getCalculatedField=function(e){for(var t=0,a=this.dataSourceSettings.calculatedFieldSettings;t<a.length;t++){var n=a[t];this.calculatedFields[n.name]=i.i(r.extend)({},n,null,!0),this.calculatedFields[n.name].actualFormula=n.formula}for(var o=Object.keys(this.calculatedFields),s=this,l=0,d=o.length;l<d;l++)!function(t,i){var r=s.calculatedFields[o[t]],a=r.properties,n=(a?a.formula:r.formula).trim(),l=n.replace(/"/g,"");r.formula=l.indexOf("^")>-1?s.powerFunction(l):l,-1===r.formula.indexOf("Math.min(")&&r.formula.indexOf("min(")>-1&&(r.formula=r.formula.replace(/min\(/g,"Math.min(")),-1===r.formula.indexOf("Math.max(")&&r.formula.indexOf("max(")>-1&&(r.formula=r.formula.replace(/max\(/g,"Math.max(")),-1===r.formula.indexOf("Math.abs(")&&r.formula.indexOf("abs(")>-1&&(r.formula=r.formula.replace(/abs\(/g,"Math.abs(")),r.name=a?a.name:r.name,e=e.filter(function(e){return e!==r.name}),e.push(r.name);for(var d=n.split('"'),h=0,p=d.length;h<p;h++){var u=d[h].trim(),c=u.split(/[ .:;?!~,`"&|()<>{}\[\]\r\n\/\\]+/),g=u.match(/^([^()]+)\((.*)\)$/),m="DistinctCount"===c[0]?"DistinctCount":"PopulationStDev"===c[0]?"PopulationStDev":"SampleStDev"===c[0]?"SampleStDev":"PopulationVar"===c[0]?"PopulationVar":"SampleVar"===c[0]?"SampleVar":c[0];if(-1!==["Sum","Count","Min","Max","Avg","Product","DistinctCount","PopulationStDev","SampleStDev","PopulationVar","SampleVar","Median"].indexOf(m)){var f=-1===e.indexOf(c[1])&&g[2]?e.indexOf(g[2]):e.indexOf(c[1]);s.calculatedFormulas[r.name]?s.calculatedFormulas[r.name].push({index:f,type:m,formula:u}):s.calculatedFormulas[r.name]=[{index:f,type:m,formula:u}]}}}(l);this.fields=e},e.prototype.validateFilters=function(e){this.isValueFiltersAvail=!1;var t=e.filterSettings?e.filterSettings:[],a=i.i(r.extend)([],this.dataSourceSettings.rows,null,!0);a=a.concat(this.dataSourceSettings.columns);for(var n=0,o=t;n<o.length;n++){for(var s=o[n],l=0,d=a;l<d.length;l++){var h=d[l];if(s.name===h.name&&"Value"===s.type){this.isValueFiltersAvail=!0;break}}if(this.isValueFiltersAvail)break}},e.prototype.validateValueFields=function(){this.isValueHasAdvancedAggregate=!1;for(var e=0,t=this.dataSourceSettings.values;e<t.length;e++){if(-1!==["DifferenceFrom","PercentageOfDifferenceFrom","PercentageOfParentRowTotal","PercentageOfParentColumnTotal","PercentageOfParentTotal","RunningTotals"].indexOf(t[e].type)){this.isValueHasAdvancedAggregate=!0;break}}},e.prototype.fillFieldMembers=function(e,t){for(var i=this.fields,a=e.length,n=this.fieldList,o=i.length,s=0;s<o;s++){var l=i[s];n[l].members&&!this.allowDataCompression||(n[l].members={}),n[l].formattedMembers&&!this.allowDataCompression||(n[l].formattedMembers={}),n[l].dateMember&&!this.allowDataCompression||(n[l].dateMember=[]);for(var d=n[l].members,h=Object.keys(d).length>0,p=n[l].formattedMembers,u=n[l].dateMember,c=0,g=0,m=n[l].expandAll,f=0;f<a;f++){var v=e[f][this.fieldKeys[l]];if(v=this.enableHtmlSanitizer?r.SanitizeHtmlHelper.sanitize(v):v,!h){var S=v,y=this.pageSettings&&this.formatFields[l]&&!this.valueAxisFields[l]?this.getFormattedValue(v,l):{formattedText:null===v?this.localeObj?this.localeObj.getConstant("null"):String(v):void 0===v?this.localeObj?l in this.groupingFields?this.localeObj.getConstant("groupOutOfRange"):this.localeObj.getConstant("undefined"):String(v):v.toString(),actualText:null===v?this.localeObj?this.localeObj.getConstant("null"):String(v):void 0===v?this.localeObj?l in this.groupingFields?this.localeObj.getConstant("groupOutOfRange"):this.localeObj.getConstant("undefined"):String(v):v};y.formattedText&&(S=y.formattedText),d.hasOwnProperty(v)?d[v].index.push(f):(c++,d[v]={index:[f],ordinal:c,isDrilled:!(!this.isExpandAll&&!m)},u.push({formattedText:y.formattedText,actualText:y.dateText?y.dateText:y.actualText})),p.hasOwnProperty(S)?p[S].index.push(f):(g++,p[S]={index:[f],ordinal:g,isDrilled:!(!this.isExpandAll&&!m)})}t[f]?t[f][s]=d[v].ordinal:(t[f]=[],t[f][s]=d[v].ordinal)}}},e.prototype.generateValueMatrix=function(e){for(var t=this.fields,a=e.length,n=[],o=t.length,s=this.fieldList;a--;){var l=o;for(n[a]=[];l--;){var d=t[l];n[a][l]="number"===s[d].type||i.i(r.isNullOrUndefined)(e[a][this.fieldKeys[d]])?i.i(r.isNullOrUndefined)(e[a][this.fieldKeys[d]])?e[a][this.fieldKeys[d]]:isNaN(Number(e[a][this.fieldKeys[d]]))?void 0:Number(e[a][this.fieldKeys[d]]):1}}return n},e.prototype.updateSortSettings=function(e,t){for(var i=0,r=e?e.length:0;i<r&&t;i++)this.fieldList[e[i].name]&&(this.fieldList[e[i].name].sort=e[i].order)},e.prototype.updateFilterMembers=function(e){var t=this.filterMembers,i={},r=this.getFilters(e,i),a=this.indexMatrix.length;if(r)for(var n=i.include.index,o=0;o<n.length;o++)void 0!==i.exclude&&void 0!==i.exclude.indexObject[n[o]]||t.push(n[o]);else for(var o=0;o<a;o++)void 0!==i.exclude&&void 0!==i.exclude.indexObject[o]||t.push(o)},e.prototype.getFilters=function(e,t){for(var i=e.filterSettings?e.filterSettings:[],r=!1,a=[],n=0,o=i.length;n<o;n++){var s=i[n].properties?i[n].properties:i[n];this.fieldList[s.name]&&this.fieldList[s.name].isSelected&&this.isValidFilterField(s,e.allowMemberFilter,e.allowLabelFilter)&&(this.applyLabelFilter(s),s&&(a=s.items),s.type&&"Include"===s.type?(this.frameFilterList(a,s.name,t,"include",s.showLabelFilter,r),r=!0):this.frameFilterList(a,s.name,t,"exclude",s.showLabelFilter),s.showLabelFilter&&(s.items=[],s.type=s.showDateFilter?"Date":s.showNumberFilter?"Number":"Label"))}return r},e.prototype.isValidFilterField=function(e,t,a){var n=e.name,o=!1,s=["Include","Exclude"],l=i.i(r.extend)([],this.dataSourceSettings.rows,null,!0);if(l=l.concat(this.dataSourceSettings.columns),this.fieldList[n].isSelected&&t&&s.indexOf(e.type)>=0){o=!0;for(var d=0,h=this.dataSourceSettings.values;d<h.length;d++){var p=h[d];if(n===p.name){o=!1;break}}}else if(a)for(var u=0,c=l;u<c.length;u++){var p=c[u];if(n===p.name&&["Label","Date","Number"].indexOf(e.type)>=0){o=!0;break}}return o},e.prototype.applyLabelFilter=function(e){if(["Label","Date","Number"].indexOf(e.type)>=0){var t=Object.keys(this.fieldList[e.name].members);if(e.showLabelFilter=!0,"Label"===e.type)e.items=this.getLabelFilterMembers(t,e.condition,e.value1,e.value2);else if("Date"===e.type){e.showDateFilter=!0;var i="string"==typeof e.value1?new Date(e.value1):e.value1,r="string"==typeof e.value2?new Date(e.value2):e.value2;e.items=this.getDateFilterMembers(t,e.name,e.condition,i,r)}else{e.showNumberFilter=!0,e.items=[];for(var a=0,n=t;a<n.length;a++){var o=n[a],s=this.getParsedValue(e.name,e.value1),l=this.getParsedValue(e.name,e.value2),d=this.getParsedValue(e.name,o);this.validateFilterValue(d,e.condition,s,l)&&e.items.push(o)}}var h=["DoesNotBeginWith","DoesNotContains","DoesNotEndsWith","DoesNotEquals","NotBetween"];e.type=e.condition?h.indexOf(e.condition)>-1&&!e.showNumberFilter?"Exclude":"Include":"Exclude"}else e.showLabelFilter=!1},e.prototype.getLabelFilterMembers=function(e,t,i,r){for(var a=[],n=0,o=e;n<o.length;n++){var s=o[n],l=s.toLowerCase();if(i.toString())switch(t){case"Equals":case"DoesNotEquals":l===i.toLowerCase()&&a.push(s);break;case"BeginWith":case"DoesNotBeginWith":0===l.indexOf(i.toLowerCase())&&a.push(s);break;case"EndsWith":case"DoesNotEndsWith":null!==l.match(i.toLowerCase()+"$")&&a.push(s);break;case"Contains":case"DoesNotContains":l.indexOf(i.toLowerCase())>-1&&a.push(s);break;case"GreaterThan":l>i.toLowerCase()&&a.push(s);break;case"GreaterThanOrEqualTo":l>=i.toLowerCase()&&a.push(s);break;case"LessThan":l<i.toLowerCase()&&a.push(s);break;case"LessThanOrEqualTo":l<=i.toLowerCase()&&a.push(s);break;case"Between":case"NotBetween":l>=i.toLowerCase()&&l<=r.toLowerCase()&&a.push(s);break;default:l===i.toLowerCase()&&a.push(s)}}return a},e.prototype.getDateFilterMembers=function(e,t,i,r,a){for(var n=[],o=0,s=e;o<s.length;o++){var l=s[o],d=new Date(l);if(r)switch(i){case"Equals":case"DoesNotEquals":this.getFormattedValue(d.toString(),t).formattedText===this.getFormattedValue(r.toString(),t).formattedText&&n.push(this.getFormattedValue(l,t).formattedText);break;case"After":d.getTime()>r.getTime()&&n.push(this.getFormattedValue(l,t).formattedText);break;case"AfterOrEqualTo":d.getTime()>=r.getTime()&&n.push(this.getFormattedValue(l,t).formattedText);break;case"Before":d.getTime()<r.getTime()&&n.push(this.getFormattedValue(l,t).formattedText);break;case"BeforeOrEqualTo":d.getTime()<=r.getTime()&&n.push(this.getFormattedValue(l,t).formattedText);break;case"Between":case"NotBetween":d.getTime()>=r.getTime()&&d.getTime()<=a.getTime()&&n.push(this.getFormattedValue(l,t).formattedText);break;default:this.getFormattedValue(d.toString(),t).formattedText===this.getFormattedValue(r.toString(),t).formattedText&&n.push(this.getFormattedValue(l,t).formattedText)}}return n},e.prototype.validateFilterValue=function(e,t,i,r){var a=!1;if("number"==typeof i)switch(t){case"Equals":e===i&&(a=!0);break;case"DoesNotEquals":e!==i&&(a=!0);break;case"GreaterThan":e>i&&(a=!0);break;case"GreaterThanOrEqualTo":e>=i&&(a=!0);break;case"LessThan":e<i&&(a=!0);break;case"LessThanOrEqualTo":e<=i&&(a=!0);break;case"Between":e>=i&&e<=r&&(a=!0);break;case"NotBetween":e>=i&&e<=r||(a=!0);break;default:e!==i&&(a=!0)}return a},e.prototype.frameFilterList=function(e,t,i,r,a,n){i[r]?this.updateFilter(e,t,i,r,a,n):(i[r]={indexObject:{},index:[]},this.updateFilter(e,t,i,r,a,n))},e.prototype.updateFilter=function(e,t,a,n,o,s){var l=0,d=this.fieldList[t];d.filter=e,d.filterType=n,d.isExcelFilter=o;var h=this.formatFields[t]&&["date","dateTime","time"].indexOf(this.formatFields[t].type)>-1||t in this.groupingFields?d.formattedMembers:d.members,p=s,u={},c={};for(u[n]={indexObject:{},index:[]},this.fieldFilterMem[t]={memberObj:{}};!i.i(r.isNullOrUndefined)(e[l]);){if(h[e[l]]){var g=h[e[l]].index;if("include"===n)for(var m=0,f=g.length;m<f;m++)p&&void 0===a[n].indexObject[g[m]]||(u[n].indexObject[g[m]]=g[m],u[n].index.push(g[m]));else{for(var m=0,f=g.length;m<f;m++)void 0===a[n].indexObject[g[m]]&&(a[n].indexObject[g[m]]=g[m],a[n].index.push(g[m]));this.fieldFilterMem[t].memberObj[e[l]]=e[l]}}l++}if("include"===n){a[n]=u[n];for(var m=0;m<e.length;m++)h[e[m]]&&(c[e[m]]=e[m]);for(var v=Object.keys(h),m=0,f=v.length;m<f;m++)void 0===c[v[m]]&&(this.fieldFilterMem[t].memberObj[v[m]]=v[m])}},e.prototype.applyValueFiltering=function(e,t,a,n,o,s,l){this.isValueFiltered=!1;var d=i.i(r.extend)({},"row"===l&&this.rowGrandTotal?this.rowGrandTotal:"column"===l&&this.columnGrandTotal?this.columnGrandTotal:"Top"!==this.dataSourceSettings.grandTotalsPosition?a[a.length-1]:a[0],null,!0);return this.getFilteredData(a,n,o,s,t,e.name,d,l),this.isValueFiltered&&(("row"===l&&null===this.rowGrandTotal||"column"===l&&null===this.columnGrandTotal)&&s.push(d),a=s),a},e.prototype.getFilteredData=function(e,t,a,n,o,s,l,d){for(var h=e.length,p=0;p<h;p++)if(a[s])if(e[p].level===o){this.isValueFiltered=!0,this.fieldList[s].isExcelFilter=!0;var u=0,c=a[s].measure,g=this.fieldList[c].index,m=this.fieldList[c].aggregateType;this.rawIndexObject={},u="row"===d?this.getAggregateValue(e[p].index,t.indexObject,g,m,!1):this.getAggregateValue(t.index,e[p].indexObject,g,m,!1);var f={fieldName:c,row:e[p],column:t,value:u,cellSets:this.getValueCellInfo?this.getCellSet(this.rawIndexObject):[],rowCellType:e[p].hasChild&&e[p].isDrilled?"subTotal":"grand sum"===e[p].type?"grandTotal":"value",columnCellType:t.hasChild&&t.isDrilled?"subTotal":"grand sum"===t.type?"grandTotal":"value",aggregateType:m,skipFormatting:!1};this.getValueCellInfo&&this.getValueCellInfo(f),u=f.value,this.rawIndexObject={};var v=this.getParsedValue(c,a[s].value1),S=this.getParsedValue(c,a[s].value2);if(this.validateFilterValue(u,a[s].condition,v,S)||"grand sum"===e[p].type)"grand sum"!==e[p].type&&(n.push(i.i(r.extend)({},e[p],null,!0)),n[n.length-1].isLevelFiltered=!0);else{var y=this.removefilteredData(e[p],this.valueFilteredData),b=y||e[p];this.validateFilteredParentData(b,this.valueFilteredData,l,0,o,d)}}else e[p].hasChild&&e[p].members.length>0&&"grand sum"!==e[p].type&&(n.push(i.i(r.extend)({},e[p],null,!0)),n[n.length-1].members=[],n[n.length-1].isLevelFiltered=!0,this.getFilteredData(e[p].members,t,a,n[n.length-1].members,o,s,l,d))},e.prototype.getParsedValue=function(e,t){var a=t?t.toString():"";if(this.formatFields[e]&&t){var n=i.i(r.extend)({},this.formatFields[e],null,!0);return delete n.name,this.globalize.parseNumber(a,n)}return this.globalize.parseNumber(a,{format:"N"})},e.prototype.removefilteredData=function(e,t){for(var a,n=i.i(r.extend)([],t,null,!0),o=0;o<n.length;o++){if(e.isLevelFiltered&&e.axis===n[o].axis&&e.valueSort.levelName===n[o].valueSort.levelName&&e.actualText===n[o].actualText&&e.axis===n[o].axis&&e.level===n[o].level&&e.ordinal===n[o].ordinal){a=n[o],t.splice(o,1);break}t[o].hasChild&&t[o].members.length>0&&this.removefilteredData(e,t[o].members)}return a},e.prototype.validateFilteredParentData=function(e,t,i,r,a,n){if(t.length>0)for(var o=0,s=t;o<s.length;o++){var l=s[o];if(l.level===r){if("row"===n)for(var d=e.index,h=0,p=d;h<p.length;h++){var u=p[h];i.index.indexOf(u)>=0&&i.index.splice(i.index.indexOf(u),1),e.valueSort.levelName.toString().indexOf(l.valueSort.levelName.toString())>=0&&l.level!==a&&l.index.indexOf(u)>=0&&l.index.splice(l.index.indexOf(u),1)}else for(var d=e.indexObject,c=0,g=Object.keys(d);c<g.length;c++){var u=g[c];d.hasOwnProperty(u)&&(delete i.indexObject[u],e.valueSort.levelName.toString().indexOf(l.valueSort.levelName.toString())>=0&&l.level!==a&&delete l.indexObject[u])}l&&l.members.length>0&&l.members[0].level===r+1&&l.members[0].level!==a&&this.validateFilteredParentData(e,l.members,i,r+1,a,n)}}else if("row"===n)for(var d=e.index,m=0,f=d;m<f.length;m++){var u=f[m];i.index.indexOf(u)>=0&&i.index.splice(i.index.indexOf(u),1)}else for(var d=e.indexObject,v=0,S=Object.keys(d);v<S.length;v++){var u=S[v];d.hasOwnProperty(u)&&delete i.indexObject[u]}},e.prototype.updateFramedHeaders=function(e,t,a,n,o){for(var s=0,l=e;s<l.length;s++){var d=l[s];this.isHeaderAvail=!1,(this.validateFilteredHeaders(d,a,o)||"grand sum"===d.type)&&("row"===o?this.rowCount+=this.rowValuesLength:this.columnCount+=this.colValuesLength,n.push(i.i(r.extend)({},d,null,!0)),n[n.length-1].members=[],d.hasChild&&d.isDrilled&&d.members.length>0&&this.updateFramedHeaders(d.members,t,a,n[n.length-1].members,o))}return this.filterFramedHeaders},e.prototype.validateFilteredHeaders=function(e,t,i){for(var r=0,a=t;r<a.length;r++){var n=a[r];if(!this.isHeaderAvail){if(e.actualText===n.actualText&&e.level===n.level&&e.valueSort.levelName===n.valueSort.levelName)return"row"===i?n.index.length>0?(this.isHeaderAvail=!0,e.index=n.index,!0):(this.isHeaderAvail=!1,e.index=n.index,!1):Object.keys(n.indexObject).length>0?(this.isHeaderAvail=!0,e.indexObject=n.indexObject,!0):(this.isHeaderAvail=!1,e.indexObject=n.indexObject,!1);n.hasChild&&n.members.length>0&&"grand sum"!==n.type&&this.validateFilteredHeaders(e,n.members,i)}}return this.isHeaderAvail},e.prototype.isEmptyDataAvail=function(e,t){this.isEmptyData=!1,e.length>0&&"grand sum"===e[e.length-1].type&&0===e[e.length-1].index.length&&(this.isEmptyData=!0),t.length>0&&"grand sum"===t[t.length-1].type&&0===Object.keys(t[t.length-1].indexObject).length&&(this.isEmptyData=!0),0!==e.length&&0!==t.length||(this.isEmptyData=!0)},e.prototype.updateGridData=function(e){this.updateDataSourceSettings(e,!0),this.data=e.dataSource,this.allowDataCompression&&(this.actualData=this.data,this.data=this.getGroupedRawData(e)),this.indexMatrix=[];for(var t=0,i=this.fields;t<i.length;t++){var r=i[t];this.fieldList[r].members={},this.fieldList[r].formattedMembers={},this.fieldList[r].dateMember=[]}this.fillFieldMembers(this.data,this.indexMatrix),this.valueMatrix=this.generateValueMatrix(this.data),this.filterMembers=[],this.cMembers=[],this.rMembers=[],this.updateFilterMembers(e),this.isEditing=!0,this.isDrillThrough=!0,this.generateGridData(e),this.isEditing=!1},e.prototype.generateGridData=function(e,t,a){void 0===t&&(t=!1),this.updateDataSourceSettings(e,t);var o=e.columns?e.columns:[],s=this.data,l=e.rows?e.rows:[],d=e.filterSettings,h=e.values?e.values:[];this.removeCount=0,this.isExpandAll=e.expandAll,this.drilledMembers=e.drilledMembers?e.drilledMembers:[],this.isEmptyData=!1;var p=[];if(l[0]&&l[0].showNoDataItems||o[0]&&o[0].showNoDataItems)for(var u=0;u<this.indexMatrix.length;u++)p.push(u);for(var u=0;u<this.filterMembers.length;u++)this.filterPosObj[this.filterMembers[u]]=this.filterMembers[u];this.valueSortSettings.columnIndex=void 0,this.validateValueFields(),this.frameDrillObject(),this.isValueFilterEnabled&&!this.isEditing||a||(this.isLastHeaderHasMeasures=!0,this.columnCount=0,this.rowCount=0,this.cMembers=[],this.rMembers=[],0!==l.length&&(this.rMembers=this.getIndexedHeaders(l,s,0,l[0].showNoDataItems?p:this.filterMembers,"row","",this.allowValueFilter)),0!==o.length&&(this.cMembers=this.getIndexedHeaders(o,s,0,o[0].showNoDataItems?p:this.filterMembers,"column","",this.allowValueFilter)),this.insertAllMembersCommon(),this.saveDataHeaders=this.isValueFiltersAvail&&e.allowValueFilter?{rowHeaders:i.i(r.extend)([],this.rMembers,null,!0),columnHeaders:i.i(r.extend)([],this.cMembers,null,!0)}:{}),this.pivotValues=[],this.headerContent=[],this.valueContent=[],this.valueFilteredData=[],this.filterFramedHeaders=[];var c=[],g=[],m=[],f=[],v=[],S=this.dataSourceSettings.values.length;if(this.isValueFiltersAvail&&e.allowValueFilter&&!a){this.valueFilteredData=[];var y=this.saveDataHeaders.rowHeaders,b=this.saveDataHeaders.columnHeaders;if(d.length>0){for(var C={},x={},w=0,T=h;w<T.length;w++){var M=T[w];x[M.name]=M}for(var _=0,D=d;_<D.length;_++){var O=D[_];y=m.length>0?m:y,b=f.length>0?f:b,this.valueFilteredData=[];var P=O.properties?O.properties:O;if("Value"===P.type&&this.fieldList[O.name]&&this.fieldList[O.name].isSelected){C[O.name]=O,P.items=[];for(var E=!1,N=l.length,F=o.length,I=0;I<N;I++)if(P.name===l[I].name&&x[P.measure]&&!E){E=!0,m=this.applyValueFiltering(l[I],I,y,this.columnGrandTotal?this.columnGrandTotal:"Top"===this.dataSourceSettings.grandTotalsPosition&&this.dataSourceSettings.showGrandTotals?b[0]:b[b.length-1],C,this.valueFilteredData,"row");break}for(var L=0;L<F;L++)if(P.name===o[L].name&&x[P.measure]&&!E){E=!0,f=this.applyValueFiltering(o[L],L,b,this.rowGrandTotal?this.rowGrandTotal:"Top"===this.dataSourceSettings.grandTotalsPosition&&this.dataSourceSettings.showGrandTotals?y[0]:y[y.length-1],C,this.valueFilteredData,"column");break}}}}m=m.length>0?m:y,f=f.length>0?f:b,this.isEmptyDataAvail(m,f);var A=n.a.getClonedFieldList(this.fieldList);this.indexMatrix=[];var R=this.data[0];this.getFieldList(R,this.enableSort,e.allowValueFilter),this.fillFieldMembers(this.data,this.indexMatrix),this.updateSortSettings(e.sortSettings,this.enableSort),this.valueMatrix=this.generateValueMatrix(this.data),this.filterMembers=[],this.updateFilterMembers(e),this.isLastHeaderHasMeasures=!0,this.rMembers=0!==l.length?this.getIndexedHeaders(l,s,0,l[0].showNoDataItems?p:this.filterMembers,"row",""):[],this.cMembers=0!==o.length?this.getIndexedHeaders(o,s,0,o[0].showNoDataItems?p:this.filterMembers,"column",""):[],this.insertAllMembersCommon(),this.updateFieldList(A),this.rowCount=0,this.columnCount=0,this.rMembers=this.updateFramedHeaders(this.rMembers,this.rMembers,m,this.filterFramedHeaders,"row"),this.filterFramedHeaders=[],this.cMembers=this.updateFramedHeaders(this.cMembers,this.cMembers,f,this.filterFramedHeaders,"column"),this.isValueFilterEnabled=!0}a||this.applyValueSorting(),this.isPagingOrVirtualizationEnabled&&(a?(this.rMembers=a.rowHeaders,this.cMembers=a.columnHeaders,this.rowCount=a.rowHeadersCount,this.columnCount=a.columnHeadersCount):(this.headerCollection.rowHeaders=this.rMembers,this.headerCollection.columnHeaders=this.cMembers,this.headerCollection.rowHeadersCount=this.rowCount,this.headerCollection.columnHeadersCount=this.columnCount),this.calculatePagingValues()),!this.valueAxis&&this.isLastHeaderHasMeasures&&this.getAggregatedHeaders(l,o,this.rMembers,this.cMembers,h),this.getHeaderData(l,o,h,v,this.cMembers,g,this.pivotValues,0,this.valueAxis?1:S),this.insertSubTotals(),this.getTableData(v.length>0?v:this.rMembers,c,g,0,this.pivotValues,S,0,this.rowGrandTotal?this.rowGrandTotal:this.rMembers[this.rMembers.length-1],this.columnGrandTotal?this.columnGrandTotal:this.cMembers[this.cMembers.length-1]),this.applyAdvancedAggregate(c,g,this.pivotValues),this.isEngineUpdated=!0,this.isEmptyDataAvail(this.rMembers,this.cMembers),this.clearProperties()},e.prototype.updateHeaders=function(e,t){e=i.i(r.isNullOrUndefined)(e)?!(!this.dataSourceSettings.showGrandTotals||!this.dataSourceSettings.showRowGrandTotals)||!(this.dataSourceSettings.rows.length>0):e,(this.pageSettings&&this.removeRowGrandTotal||!e&&!this.rowGrandTotal)&&"grand sum"===this.rMembers[this.rMembers.length-1].type&&(this.rMembers=this.rMembers.slice(0,this.rMembers.length-1)),t=i.i(r.isNullOrUndefined)(t)?!(!this.dataSourceSettings.showGrandTotals||!this.dataSourceSettings.showColumnGrandTotals)||!(this.dataSourceSettings.columns.length>0):t,(this.pageSettings&&this.removeColumnGrandTotal||!t&&!this.columnGrandTotal)&&"grand sum"===this.cMembers[this.cMembers.length-1].type&&(this.cMembers=this.cMembers.slice(0,this.cMembers.length-1))},e.prototype.updatePivotValues=function(e){var t=!(!this.dataSourceSettings.showGrandTotals||!this.dataSourceSettings.showRowGrandTotals)||!(this.dataSourceSettings.rows.length>0),i=!(!this.dataSourceSettings.showGrandTotals||!this.dataSourceSettings.showColumnGrandTotals)||!(this.dataSourceSettings.columns.length>0);if(e&&this.updateHeaders(t,i),(this.pageSettings&&this.removeRowGrandTotal||!t&&!this.rowGrandTotal)&&this.valueContent.length>0){var r=1;this.valueAxis&&this.dataSourceSettings.values.length>0&&(r=1+this.dataSourceSettings.values.length),this.pivotValues[this.pivotValues.length-r]&&"grand sum"===this.pivotValues[this.pivotValues.length-r][0].type&&(this.pivotValues=this.pivotValues.slice(0,this.pivotValues.length-r),this.valueContent=this.valueContent.slice(0,this.valueContent.length-r))}if((this.pageSettings&&this.removeColumnGrandTotal||!i&&!this.columnGrandTotal)&&this.headerContent.length>0){var r=this.dataSourceSettings.values.length;if(this.valueAxis&&this.dataSourceSettings.values.length>0&&(r=1),this.pivotValues[0][this.pivotValues[0].length-r]&&"grand sum"===this.pivotValues[0][this.pivotValues[0].length-r].type)for(var a=0;a<this.pivotValues.length;a++)if(this.pivotValues[a]&&(this.pivotValues[a]=this.pivotValues[a].slice(0,this.pivotValues[a].length-r)),this.headerContent[a])for(var n=this.pivotValues[a].length;n<this.pivotValues[a].length+r;n++)delete this.headerContent[a][n]}this.removeRowGrandTotal=this.removeColumnGrandTotal=!1},e.prototype.onDrill=function(e){this.frameDrillObject(e);var t=this.getHeadersInfo(e.fieldName,e.axis);this.performDrillOperation(t.headers,e,t.fields,t.position,0),this.headerCollection.rowHeadersCount=this.rowCount,this.headerCollection.columnHeadersCount=this.columnCount,"row"===t.axis?this.headerCollection.rowHeaders=t.headers:this.headerCollection.columnHeaders=t.headers,this.updateEngine()},e.prototype.onSort=function(e){var t=this.getHeadersInfo(e.name,"");this.fieldList[e.name].sort=e.order,this.performSortOperation(t.headers,e,t,0),this.updateEngine()},e.prototype.onFilter=function(e,t){this.updateDataSourceSettings(t,!0);var i=this.getHeadersInfo(e.name,"");this.isLastHeaderHasMeasures=!!(this.valueAxis&&"row"===i.axis||!this.valueAxis&&"column"===i.axis)||this.isLastHeaderHasMeasures,"Include"===e.type&&e.items.length===this.fieldList[e.name].dateMember.length?(this.fieldList[e.name].filter=[],this.fieldList[e.name].filterType=""):(this.fieldList[e.name].filter=e.items,this.fieldList[e.name].filterType=e.type);for(var r={},a=0,n=this.filterMembers;a<n.length;a++){var o=n[a];r[o]=o}this.filterMembers=[],this.fieldFilterMem={},this.updateFilterMembers(t);for(var s=this.filterMembers.filter(function(e){return void 0===r[e]}),l={},d=0,h=e.items;d<h.length;d++){var p=h[d];l[p]=p}if(this.dataSourceSettings.rows[0]&&this.dataSourceSettings.rows[0].showNoDataItems||this.dataSourceSettings.columns[0]&&this.dataSourceSettings.columns[0].showNoDataItems){var u=[];this.filterPosObj={};for(var c=0;c<s.length;c++)this.filterPosObj[s[c]]=s[c];for(var c=0;c<this.indexMatrix.length;c++)u.push(c);s=u}this.performFilterCommonUpdate(e,i,s),this.frameHeaderObjectsCollection=!1,this.headerObjectsCollection={},this.updateEngine()},e.prototype.onAggregation=function(e){this.fieldList[e.name].aggregateType=e.type,this.rMembers=this.headerCollection.rowHeaders,this.cMembers=this.headerCollection.columnHeaders,this.allowDataCompression&&(this.data=this.getGroupedRawData(this.dataSourceSettings),this.valueMatrix=this.generateValueMatrix(this.data)),this.updateEngine()},e.prototype.onCalcOperation=function(e,t){this.dataSourceSettings.calculatedFieldSettings=t.calculatedFieldSettings?t.calculatedFieldSettings:[],this.dataSourceSettings.values=t.values?t.values:[],this.rMembers=this.headerCollection.rowHeaders,this.cMembers=this.headerCollection.columnHeaders,this.getCalculatedField(this.fields),this.fieldList[e.name]?this.fieldList[e.name].formula=e.formula:(this.fieldList[e.name]={id:e.name,caption:e.name,type:"number",aggregateType:"CalculatedField",filterType:"",index:this.fields.length-1,filter:[],sort:this.enableSort?"Ascending":"None",isSelected:!0,isExcelFilter:!1,formula:e.formula},1===this.valueAxis?this.headerCollection.rowHeadersCount=this.rowCount=this.rowCount/(this.dataSourceSettings.values.length-1)*this.dataSourceSettings.values.length:this.headerCollection.columnHeadersCount=this.columnCount=this.columnCount/(this.dataSourceSettings.values.length-1)*this.dataSourceSettings.values.length),this.updateEngine()},e.prototype.performDrillOperation=function(e,t,i,r,a){for(var n=0;n<e.length;){if(r===a){var o=e[n].valueSort.levelName.split(this.valueSortSettings.headerDelimiter);if(t.memberName===o.join(t.delimiter?t.delimiter:"**")){if("down"===t.action){e[n].isDrilled=!0,e[n].members=this.getIndexedHeaders(i,this.data,r+1,e[n].index,t.axis,t.memberName.split(t.delimiter?t.delimiter:"**").join(this.valueSortSettings.headerDelimiter));var s=void 0;if("row"===t.axis)s=this.applyValueSorting(e[n].members,this.cMembers),e[n].members=s.rMembers;else{var l=this.dataSourceSettings.showSubTotals&&this.dataSourceSettings.showColumnSubTotals&&i[r].showSubTotals;this.columnCount-=l?0:this.colValuesLength,s=this.applyValueSorting(this.rMembers,e[n].members),e[n].members=s.cMembers}}else e[n].isDrilled=!1,this.updateHeadersCount(e[n].members,t.axis,r,i,"minus",!0),e[n].members=[];break}}else e[n].members.length>0&&(e[n].members=this.performDrillOperation(e[n].members,t,i,r,a+1));n++}return e},e.prototype.performSortOperation=function(e,t,i,r){for(var a=0;a<e.length;){if(i.position===r){e=this.getSortedHeaders(e,t.order.toString());break}e[a].members.length>0&&(e[a].members=this.performSortOperation(e[a].members,t,i,r+1)),a++}return e},e.prototype.performFilterDeletion=function(e,t,i,r,a){for(var n=0,o=!0,s=this;n<e.length&&o;)!function(){if(i.position===a){var l=s;e=e.filter(function(e){return!l.fieldFilterMem[t.name].memberObj[e.formattedText]||"grand sum"===e.type}),o=!1}else e[n].members.length>0&&(e[n].members=s.performFilterDeletion(e[n].members,t,i,r,a+1));n++}();var l=this;return e.filter(function(e){return e.members.length>0||"grand sum"===e.type||l.matchIndexes(e.indexObject,r)})},e.prototype.matchIndexes=function(e,t){var i=Object.keys(e),r=i.length;if(0===r)return!0;for(;r>-1;){if(void 0!==t[e[i[r]]])return!0;r--}return!1},e.prototype.performFilterAddition=function(e,t,i){for(var r=0,a=this;r<e.length;)!function(){var n=e[r].valueSort.levelName;if(a.headerObjectsCollection[n]){for(var o={},s=0,l=e[r].members;s<l.length;s++){var d=l[s];o[d.valueSort.levelName.toString()]=d.valueSort.levelName.toString()}var h=a.headerObjectsCollection[n].filter(function(e){return!o[e.valueSort.levelName.toString()]});e[r].members=e[r].members.concat(h),e[r].members=a.getSortedHeaders(e[r].members,a.fieldList[i.fields[e[r].members[0].level].name].sort),delete a.headerObjectsCollection[n]}e[r].members.length>0&&(e[r].members=a.performFilterAddition(e[r].members,t,i)),r++}();return e},e.prototype.performFilterCommonUpdate=function(e,t,i){if("row"===t.axis||"column"===t.axis){for(var r="row"===t.axis?this.rMembers:this.cMembers,a={},n=0,o=this.filterMembers;n<o.length;n++){var s=o[n];a[s]=s}if(this.fieldFilterMem[e.name]&&(r=this.performFilterDeletion(t.headers,e,t,a,0)),i.length>0&&t.fields.length>0){if(this.frameHeaderObjectsCollection=!0,t.fields.filter(function(e){return e.showNoDataItems}).length>0)for(var l=0;l<this.data.length;l++)i.push(l);this.headerObjectsCollection.parent=this.getIndexedHeaders(t.fields,this.data,0,i,t.axis,""),r=this.performFilterAddition(r,t.fields,t);for(var d={},h=0,p=r;h<p.length;h++){var u=p[h];d[u.valueSort.levelName.toString()]=u.valueSort.levelName.toString()}var c=this.headerObjectsCollection.parent.filter(function(e){return!d[e.valueSort.levelName.toString()]}),g=r.filter(function(e){return"grand sum"===e.type});g.length>0&&r.pop(),r=this.getSortedHeaders(r.concat(c),this.fieldList[t.fields[0].name].sort).concat(g),"row"===t.axis?(this.cMembers=this.getIndexedHeaders(this.dataSourceSettings.columns,this.data,0,this.filterMembers,"column",""),this.insertAllMember(this.cMembers,this.filterMembers,"","column")):(this.rMembers=this.getIndexedHeaders(this.dataSourceSettings.rows,this.data,0,this.filterMembers,"row",""),this.insertAllMember(this.rMembers,this.filterMembers,"","row"))}"row"===t.axis?this.rowCount=0:this.columnCount=0,this.updateHeadersCount(r,t.axis,0,t.fields,"plus",!1),"row"===t.axis?(t.position>0&&this.insertPosition(this.dataSourceSettings.rows,this.data,0,this.filterMembers,"row","",r),this.insertTotalPosition(r),this.rMembers=this.headerCollection.rowHeaders=r,this.headerCollection.rowHeadersCount=this.rowCount):(t.position>0&&this.insertPosition(this.dataSourceSettings.columns,this.data,0,this.filterMembers,"column","",r),this.insertTotalPosition(r),this.cMembers=this.headerCollection.columnHeaders=r,this.headerCollection.columnHeadersCount=this.columnCount)}else{var m=this.dataSourceSettings.rows[0]&&this.dataSourceSettings.rows[0].showNoDataItems||this.dataSourceSettings.columns[0]&&this.dataSourceSettings.columns[0].showNoDataItems;this.dataSourceSettings.rows.length>0&&(this.rMembers=this.getIndexedHeaders(this.dataSourceSettings.rows,this.data,0,m?i:this.filterMembers,"row","")),this.dataSourceSettings.columns.length>0&&(this.cMembers=this.getIndexedHeaders(this.dataSourceSettings.columns,this.data,0,m?i:this.filterMembers,"column","")),this.insertAllMembersCommon(),this.rowCount=0,this.columnCount=0,this.updateHeadersCount(this.cMembers,"column",0,this.dataSourceSettings.columns,"plus",!1),this.updateHeadersCount(this.rMembers,"row",0,this.dataSourceSettings.rows,"plus",!1),m&&(this.insertPosition(this.dataSourceSettings.rows,this.data,0,this.filterMembers,"row","",this.rMembers),this.insertPosition(this.dataSourceSettings.columns,this.data,0,this.filterMembers,"column","",this.cMembers)),this.headerCollection.rowHeaders=this.rMembers,this.headerCollection.rowHeadersCount=this.rowCount,this.headerCollection.columnHeaders=this.cMembers,this.headerCollection.columnHeadersCount=this.columnCount}this.applyValueSorting()},e.prototype.getHeadersInfo=function(e,t){this.rMembers=this.headerCollection.rowHeaders,this.cMembers=this.headerCollection.columnHeaders,t=""===t?this.getAxisByFieldName(e):t;for(var i="row"===t?this.rMembers:this.cMembers,r="row"===t?this.dataSourceSettings.rows:this.dataSourceSettings.columns,a=0,n=0,o=r;n<o.length;n++){if(o[n].name===e)break;a++}return{axis:t,fields:r,headers:i,position:a}},e.prototype.updateEngine=function(){this.removeCount=0,this.validateValueFields(),this.calculatePagingValues(),this.pivotValues=[],this.headerContent=[],this.valueContent=[];var e=[],t=[],i=[],r=this.dataSourceSettings.values.length;this.getAggregatedHeaders(this.dataSourceSettings.rows,this.dataSourceSettings.columns,this.rMembers,this.cMembers,this.dataSourceSettings.values),this.getHeaderData(this.dataSourceSettings.rows,this.dataSourceSettings.columns,this.dataSourceSettings.values,i,this.cMembers,t,this.pivotValues,0,this.valueAxis?1:r),this.insertSubTotals(),this.getTableData(i.length>0?i:this.rMembers,e,t,0,this.pivotValues,r,0,this.rowGrandTotal?this.rowGrandTotal:this.rMembers[this.rMembers.length-1],this.columnGrandTotal?this.columnGrandTotal:this.cMembers[this.cMembers.length-1]),this.applyAdvancedAggregate(e,t,this.pivotValues),this.isEngineUpdated=!0,this.isEmptyDataAvail(this.rMembers,this.cMembers)},e.prototype.getAxisByFieldName=function(e){for(var t=0,i="";t<4&&""===i;){switch(t){case 0:i=this.getFieldByName(e,this.dataSourceSettings.rows)?"row":"";break;case 1:i=this.getFieldByName(e,this.dataSourceSettings.columns)?"column":""}t++}return i},e.prototype.getFieldByName=function(e,t){return new a.DataManager({json:t}).executeLocal((new a.Query).where("name","equal",e))[0]},e.prototype.updateHeadersCount=function(e,t,i,r,a,n){var o=0,s=r[i],l=!0;for(l="column"===t?this.dataSourceSettings.showSubTotals&&this.dataSourceSettings.showColumnSubTotals&&s.showSubTotals:!(this.dataSourceSettings.showSubTotals&&this.dataSourceSettings.showRowSubTotals&&s)||s.showSubTotals;o<e.length;)"row"===t?this.rowCount=this.rowCount-("plus"===a?-(1===this.valueAxis?this.dataSourceSettings.values.length:1):1===this.valueAxis?this.dataSourceSettings.values.length:1):this.columnCount=this.columnCount-("plus"===a?-(1===this.valueAxis?1:this.dataSourceSettings.values.length):1===this.valueAxis?1:this.dataSourceSettings.values.length),e[o].members.length>0&&this.updateHeadersCount(e[o].members,t,i+1,r,a,!0),o++;"column"===t&&!l&&n&&(this.columnCount+="plus"===a?-this.colValuesLength:this.colValuesLength)},e.prototype.getSortedHeaders=function(e,t){var i="Grand Total"!==e[0].actualText?e[0].valueSort.axis:e[1].valueSort.axis,r=!(this.formatFields&&this.formatFields[i]&&this.formatFields[i].type),a=this.fieldList[i];if(r){if(a&&"number"===a.type&&e.length>0&&"string"==typeof e[0].actualText){for(var n=[],o=[],s=[],l=0;l<e.length;l++)if(isNaN(e[l].actualText.toString().charAt(0)))n.push(e[l]);else{if(""!==e[l].actualText){o.push(e[l]);break}s.push(e[l])}return o.length>0&&(o=this.sortHeaders(i,a,e,a.sort,a.isAlphanumeric)),e}return this.sortHeaders(i,a,e,t,a.type)}return this.sortHeaders(i,a,e,t,a.type)},e.prototype.sortHeaders=function(e,t,i,r,a){var o=!1,s=this.fieldList[e]&&this.fieldList[e].membersOrder?this.fieldList[e].membersOrder.slice():[],l={fieldName:e,sortOrder:r,members:s&&s.length>0?s:Object.keys(t.members),IsOrderChanged:!1};a="datetime"===a||"date"===a||"time"===a?this.formatFields[e]&&["date","dateTime","time"].indexOf(this.formatFields[e].type)>-1?a:"string":a;var d="datetime"===a||"date"===a||"time"===a;if(s&&s.length>0?n.a.applyCustomSort(l,i,a):(n.a.applyHeadersSort(i,r,a),o=!0),o&&this.getHeaderSortInfo){for(var h=[],p=0,u=0;p<i.length;p++){var c=i[p],g=d?c.dateText:c.actualText;"Grand Total"!==c.actualText&&(h[u++]=g)}l.members=h}return this.getHeaderSortInfo&&this.getHeaderSortInfo(l),l.IsOrderChanged&&n.a.applyCustomSort(l,i,a,!0),i},e.prototype.applyValueSorting=function(e,t){var i=!1;if(void 0===e||void 0===t){if(this.valueSortHeaderText=void 0,this.enableValueSorting&&this.valueSortSettings.headerText&&!this.valueSortHeaderText&&""!==this.valueSortSettings.headerText&&this.dataSourceSettings.values.length>0){this.valueSortHeaderText=this.valueSortSettings.headerText;for(var r=this.valueSortHeaderText.split(this.valueSortSettings.headerDelimiter),a=0,n=this.dataSourceSettings.values;a<n.length;a++){var o=n[a],s=o.caption?o.caption:o.name,l=r.indexOf(s);if(l>-1){r.splice(l,1),r.push(s),this.valueSortHeaderText=r.join(this.valueSortSettings.headerDelimiter);break}}}e=this.rMembers,t=this.cMembers,i=!0}if(this.valueSortHeaderText){for(var r=this.valueSortHeaderText.split(this.valueSortSettings.headerDelimiter),d="",h=void 0,p=void 0,u=void 0,c=0;c<this.dataSourceSettings.values.length;c++){if(this.dataSourceSettings.values[c].caption===r[r.length-1]){u=this.dataSourceSettings.values[c].name;break}u=r[r.length-1]}if((1===this.dataSourceSettings.values.length&&0===this.dataSourceSettings.columns.length||this.dataSourceSettings.values.length>1)&&u&&this.fieldList[u]){for(var c=0;c<r.length-1;c++)d=""===d?r[c]:d+this.valueSortSettings.headerDelimiter+r[c];h=this.fieldList[u].index,p=this.fieldList[u].aggregateType}else{if(this.dataSourceSettings.alwaysShowValueHeader&&1!==r.length)for(var c=0;c<r.length-1;c++)d=""===d?r[c]:d+this.valueSortSettings.headerDelimiter+r[c];else d=this.valueSortHeaderText;h=this.fieldList[this.dataSourceSettings.values[0].name].index,p=this.fieldList[this.dataSourceSettings.values[0].name].aggregateType}var g=void 0;0===this.valueAxis?(g=this.getMember(t,d))&&(e=this.sortByValueRow(e,g,this.valueSortSettings.sortOrder,h,p)):(g=this.getMember(e,d))&&(t=this.sortByValueRow(t,g,this.valueSortSettings.sortOrder,h,p)),i&&(this.rMembers=e,this.cMembers=t,this.isPagingOrVirtualizationEnabled&&(this.headerCollection.rowHeaders=this.rMembers,this.headerCollection.columnHeaders=this.cMembers))}return{rMembers:e,cMembers:t}},e.prototype.getMember=function(e,t){for(var i,r=e.length,a=0;a<r;a++){if(e[a].valueSort.levelName===t){i=e[a];break}if(e[a].members.length>0&&(i=this.getMember(e[a].members,t)),i)return i}return i},e.prototype.sortByValueRow=function(e,t,i,r,a){for(var n=[],o=0,s=e;o<s.length;o++){var l=s[o];if("grand sum"===l.type)n.push({header:l});else{this.rawIndexObject={};var d=this.getAggregateValue(l.index,t.indexObject,r,a,!1),h={fieldName:this.fields[r],row:l,column:t,value:d,cellSets:this.getValueCellInfo?this.getCellSet(this.rawIndexObject):[],rowCellType:l.hasChild&&l.isDrilled?"subTotal":"grand sum"===l.type?"grandTotal":"value",columnCellType:t.hasChild&&t.isDrilled?"subTotal":"grand sum"===t.type?"grandTotal":"value",aggregateType:a,skipFormatting:!1};this.getValueCellInfo&&this.getValueCellInfo(h),d=h.value,this.rawIndexObject={},n.push({header:l,value:d})}}n.sort(function(e,t){return"Descending"===i?(t.value||"grand sum"===t.header.type?t.value:0)-(e.value||"grand sum"===e.header.type?e.value:0):(e.value||"grand sum"===e.header.type?e.value:0)-(t.value||"grand sum"===t.header.type?t.value:0)}),e=n.map(function(e){return e.header});for(var p=0,u=e;p<u.length;p++){var l=u[p];l.members.length>0&&(l.members=this.sortByValueRow(l.members,t,i,r,a))}return e},e.prototype.insertAllMembersCommon=function(){this.rowGrandTotal=this.columnGrandTotal=null;var e=!(!this.dataSourceSettings.showGrandTotals||!this.dataSourceSettings.showRowGrandTotals)||!(this.dataSourceSettings.rows.length>0),t=!(!this.dataSourceSettings.showGrandTotals||!this.dataSourceSettings.showColumnGrandTotals)||!(this.dataSourceSettings.columns.length>0);this.isValueHasAdvancedAggregate?(this.insertAllMember(this.rMembers,this.filterMembers,"","row"),e&&(this.rowCount+=this.rowValuesLength),this.insertAllMember(this.cMembers,this.filterMembers,"","column"),t&&(this.columnCount+=this.colValuesLength)):(e?(this.insertAllMember(this.rMembers,this.filterMembers,"","row"),this.rowCount+=this.rowValuesLength):this.rowGrandTotal=this.insertAllMember([],this.filterMembers,"","row")[0],t?(this.insertAllMember(this.cMembers,this.filterMembers,"","column"),this.columnCount+=this.colValuesLength):this.columnGrandTotal=this.insertAllMember([],this.filterMembers,"","column")[0])},e.prototype.insertSubTotals=function(){for(var e=this.pivotValues.length,t=0;t<e;t++){var a=this.pivotValues[t];if(a)for(var n=void 0,o=1,s=a.length,l=void 0,d=1,h=this.showSubTotalsAtTop?this.reformAxisCount:s,p=this.showSubTotalsAtTop?d:h-1,u=void 0,c=void 0;d<h;){var g=a[p];if(g){n&&(n.colSpan=o,n.colIndex=this.showSubTotalsAtTop?n.colIndex+(o-1):n.colIndex-(o-1)),this.showSubTotalsAtTop&&(u=c=this.getMemberSpanCount(this.pivotValues[t],p)),l={index:g.index,indexObject:g.indexObject},g.index=[],g.indexObject={},n=i.i(r.extend)({},g,null,!0),g.index=l.index,g.indexObject=l.indexObject;for(var m=t+1;this.pivotValues[m]&&!this.pivotValues[m][p];){var f=this.pivotValues[t][p];f.isDrilled||!this.valueAxis&&!this.isLastHeaderHasMeasures&&f.members&&f.members.length>0&&m>this.measureIndex||(f.rowSpan=m-t+1,n.rowSpan=m-t+1);var v="sum"===g.type||"grand sum"===g.type?g.type:"sum";this.pivotValues[m][p]=this.headerContent[m][p]={type:v,formattedText:"sum"===g.type||"grand sum"===g.type?g.formattedText:g.formattedText+" Total",axis:"column",hierarchyName:g.hierarchyName,level:-1,colIndex:p,rowIndex:m,valueSort:g.valueSort},g.valueSort&&g.valueSort[this.valueSortSettings.headerText]&&(this.valueSortSettings.columnIndex=p);var S=!1;"grand sum"===v?(f.rowSpan=m-t+1,n.rowSpan=m-t+1):"sum"!==f.type&&(f.isDrilled||this.valueAxisFields[f.actualText]&&!this.valueAxis&&!this.isLastHeaderHasMeasures&&f.members&&f.members.length>0)?(this.pivotValues[t+1][p].rowSpan=m-t,S=!0):this.pivotValues[m][p].rowSpan=-1,m>t+1&&("sum"===f.type||S)&&(this.pivotValues[m][p].rowSpan=-1),m++}o=1}else a[p]=this.headerContent[t][p]=i.i(r.extend)({},n,null,!0),a[p].index=this.headerContent[t][p].index=l.index,a[p].indexObject=this.headerContent[t][p].indexObject=l.indexObject,o++,this.showSubTotalsAtTop?(c--,a[p].colSpan=c,a[p].colIndex=a[p].colIndex+(o-1)):(a[p].colSpan=o,a[p].colIndex=a[p].colIndex-(o-1));if(1===p&&n&&(this.showSubTotalsAtTop?(n.colSpan=u,n.colIndex=n.colIndex+(o-1)):(n.colSpan=o,n.colIndex=n.colIndex-(o-1))),this.showSubTotalsAtTop&&(a[p+1]||p+1===this.reformAxisCount)){var y=this.pivotValues[t][p-o+1];y.colSpan=u,this.pivotValues[t][p-o+1]=y}p=this.showSubTotalsAtTop?p+1:p-1,d++}}},e.prototype.getMemberSpanCount=function(e,t){for(var i=1,r=t+1;r<this.reformAxisCount&&!e[r];r++)i++;return i},e.prototype.frameDrillObject=function(e){void 0===e&&(e=null),this.fieldDrillCollection={};for(var t=0;t<this.drilledMembers.length;t++){for(var i=this.drilledMembers[t],r=!1,a=1,n=!1,o=this.fieldList[i.name],s=o&&o.expandAll,l=0;l<this.dataSourceSettings.rows.length;l++)if(this.dataSourceSettings.rows[l].name===i.name){var d=this.valueAxis&&(this.isMultiMeasures||this.dataSourceSettings.alwaysShowValueHeader)&&this.measureIndex>-1&&this.measureIndex<=l;a=(d?l+1:l)+1,r=!!d,n=!0;break}if(!n)for(var l=0;l<this.dataSourceSettings.columns.length;l++)if(this.dataSourceSettings.columns[l].name===i.name){var d=!this.valueAxis&&(this.isMultiMeasures||this.dataSourceSettings.alwaysShowValueHeader)&&this.measureIndex>-1&&this.measureIndex<=l;a=(d?l+1:l)+1,r=!!d,n=!0;break}for(var h=0,p=i.items;h<p.length;h++){var u=p[h],c=u.split(i.delimiter);if(a===c.length){var g=i.name+this.valueSortSettings.headerDelimiter+c.join(this.valueSortSettings.headerDelimiter);if(this.fieldDrillCollection[g]=g,r){var m=!1;if(this.isExpandAll||s)for(var f=0,v=this.dataSourceSettings.values;f<v.length;f++){var S=v[f],y=S.caption?S.caption:S.name;if(c[this.measureIndex]=y,!(i.items.indexOf(c.join(i.delimiter))>-1)){m=!1;break}m=!0}((this.isExpandAll||s)&&m||!this.isExpandAll||!s)&&(c=u.split(i.delimiter),c.splice(this.measureIndex,1),e&&e.memberName===u&&(e.memberName=c.join(i.delimiter)),g=i.name+this.valueSortSettings.headerDelimiter+c.join(this.valueSortSettings.headerDelimiter),this.fieldDrillCollection[g]=g)}}}}},e.prototype.getIndexedHeaders=function(e,t,a,n,o,s,l){var d=[];if(e&&e.length>0){var h=e.length,p={},u=e[a].name,c=e[a],g=this.fieldList[u];if(i.i(r.isNullOrUndefined)(this.reportDataType)){this.reportDataType={};for(var m=0;m<this.dataSourceSettings.rows.length;m++)this.reportDataType[this.dataSourceSettings.rows[m].name]=this.dataSourceSettings.rows[m].dataType;for(var m=0;m<this.dataSourceSettings.columns.length;m++)this.reportDataType[this.dataSourceSettings.columns[m].name]=this.dataSourceSettings.columns[m].dataType;for(var m=0;m<this.dataSourceSettings.values.length;m++)this.reportDataType[this.dataSourceSettings.values[m].name]=this.dataSourceSettings.values[m].dataType}g.type=i.i(r.isNullOrUndefined)(this.reportDataType[g.id])?g.type:this.reportDataType[g.id];var f=!1,v=this.formatFields[u]&&["date","dateTime","time"].indexOf(this.formatFields[u].type)>-1,S=n.length<1&&a>0||c.showNoDataItems,y={};if(S){for(var b=Object.keys(g.members),C=0,x=b.length;C<x;C++)(this.dataSourceSettings.showHeaderWhenEmpty||this.localeObj&&b[C]!==this.localeObj.getConstant("undefined"))&&(y[b[C]]=b[C]);n.length<1&&(f=!0,n.length=b.length)}for(var C=0,x=n.length;C<x;C++){var w={};i.i(r.isNullOrUndefined)(e[a].showSubTotals)||e[a].showSubTotals||(w.showSubTotals=!1),w.hasChild=a<h-1,w.level=a,w.axis=o,w.colSpan=1;var T=f?g.members[Object.keys(y)[0]].ordinal:this.indexMatrix[n[C]][g.index],M=f?Object.keys(y)[0]:t[n[C]][this.fieldKeys[u]];if(M=this.enableHtmlSanitizer?r.SanitizeHtmlHelper.sanitize(M):M,!(i.i(r.isNullOrUndefined)(M)||this.localeObj&&M===this.localeObj.getConstant("undefined"))||this.dataSourceSettings.showHeaderWhenEmpty){if(delete y[M],!S||!this.fieldFilterMem[u]||this.fieldFilterMem[u].memberObj[M]!==M){var _=v||this.formatFields[u]?{actualText:M,formattedText:g.dateMember[T-1].formattedText,dateText:g.dateMember[T-1].actualText}:{formattedText:null===M?this.localeObj?this.localeObj.getConstant("null"):String(M):void 0===M&&this.localeObj?u in this.groupingFields?this.localeObj.getConstant("groupOutOfRange"):this.localeObj.getConstant("undefined"):String(M),actualText:null===M?this.localeObj?this.localeObj.getConstant("null"):String(M):void 0===M?this.localeObj?u in this.groupingFields?this.localeObj.getConstant("groupOutOfRange"):this.localeObj.getConstant("undefined"):String(M):M};w.actualText=_.actualText,w.formattedText=_.formattedText,v&&(w.dateText=_.dateText);var D=!S||void 0!==this.filterPosObj[n[C]]&&!f;if(p&&p[T])D&&(p[T].index.push(n[C]),p[T].indexObject[n[C]]=n[C]);else{p[T]={index:[],indexObject:{}},w.index=p[T].index,w.indexObject=p[T].indexObject,D&&(w.index=p[T].index=[n[C]],p[T].indexObject[n[C]]=n[C],w.indexObject=p[T].indexObject),w.ordinal=T,w.valueSort={},w.valueSort.axis=u,0!==a?(w.valueSort.levelName=s+this.valueSortSettings.headerDelimiter+w.formattedText,w.valueSort[s+this.valueSortSettings.headerDelimiter+w.formattedText]=1,w.valueSort.uniqueName=s+this.valueSortSettings.headerDelimiter+(w.actualText?w.actualText:w.formattedText),w.valueSort[s+this.valueSortSettings.headerDelimiter+(w.actualText?w.actualText:w.formattedText)]=1):(w.valueSort[w.formattedText]=1,w.valueSort.levelName=w.formattedText,w.valueSort[w.actualText?w.actualText:w.formattedText]=1,w.valueSort.uniqueName=w.actualText?w.actualText:w.formattedText);var O=w.valueSort.axis+this.valueSortSettings.headerDelimiter+w.valueSort.levelName,P=this.isExpandAll||c&&c.expandAll;w.isDrilled=!(!l||!this.isValueFiltersAvail)||(w.hasChild&&this.fieldDrillCollection[O]?!P:P),w.members=[],d.push(w)}S&&!f&&a>0&&C+1===n.length&&Object.keys(y).length>0&&(f=!0,x=Object.keys(y).length,C=-1)}}else S&&!f&&a>0&&C+1===n.length&&Object.keys(y).length>0&&(x=Object.keys(y).length,f=!0,C=-1)}o===this.dataSourceSettings.valueAxis&&this.measureIndex===a&&(this.dataSourceSettings.values.length>1||this.dataSourceSettings.alwaysShowValueHeader)&&(this.isLastHeaderHasMeasures=!1);for(var E=0,N=d.length;E<N;E++){this.frameHeaderObjectsCollection||("row"===o?this.rowCount+=this.rowValuesLength:this.columnCount+=this.colValuesLength);var F=null;if(d[E].valueSort&&d[E].valueSort.levelName&&(F=d[E].valueSort.levelName),s=F||d[E].formattedText,!this.dataSourceSettings.showHeaderWhenEmpty&&h-1>a&&d[E].index&&d[E].index.length>0)if(S&&e[a+1]&&e[a+1].name&&Object.keys(this.fieldList[e[a+1].name].members).length>0)d[E].hasChild=!0;else{for(var I=d[E].index.length,L=0,A=0;A<I;A++){var M=t[d[E].index[A]][this.fieldKeys[e[a+1].name]];(i.i(r.isNullOrUndefined)(M)||this.localeObj&&M===this.localeObj.getConstant("undefined"))&&L++}d[E].hasChild=L!==I}if(h-1>a&&d[E].isDrilled){this.columnCount-=this.dataSourceSettings.showSubTotals&&this.dataSourceSettings.showColumnSubTotals&&c.showSubTotals||"column"!==o?0:this.colValuesLength;var R=d[E].index;d[E].members=this.getIndexedHeaders(e,t,a+1,void 0===R?[]:R,o,s,l),this.frameHeaderObjectsCollection&&(this.headerObjectsCollection[s]=d[E].members)}}if(this.enableSort){if(v)return this.sortHeaders(u,g,d,g.sort,"date");if("number"===g.type&&d.length>0&&"string"==typeof d[0].actualText&&d[0].actualText.match(/[a-zA-Z]+/g)){for(var k=[],j=void 0,H=[],q=[],m=0;m<d.length;m++)if(isNaN(d[m].actualText.toString().charAt(0)))k.push(d[m]),j||"None"===g.sort||"Out of Range"===d[m].actualText&&(j=d[m],d.splice(m,1));else{if(""!==d[m].actualText){this.fieldList[u].isAlphanumeric=!0,H.push(d[m]);break}q.push(d[m])}return j&&("Ascending"===g.sort?"Grand Total"===d[0].actualText?d.splice(1,0,j):d.splice(0,0,j):"Grand Total"===d[d.length-1].actualText?d.splice(d.length-1,0,j):d.splice(d.length,0,j)),H.length>0&&this.sortHeaders(u,g,d,g.sort,g.isAlphanumeric),d}return this.sortHeaders(u,g,d,g.sort,g.type)}return d}return d},e.prototype.getOrderedIndex=function(e){for(var t={},i=0;i<e.length;i++)"grand sum"!==e[i].type&&(t[e[i].ordinal]=i);return t},e.prototype.insertPosition=function(e,t,i,r,a,n,o){var s=[],l=this.getOrderedIndex(o);if(e){for(var d={},h=e[i].name,p=this.fieldList[h],u=0,c=r.length;u<c;u++){var g={},m=this.indexMatrix[r[u]][p.index],f=o[l[m]],v=t[r[u]][this.fieldKeys[h]];v=null===v?this.localeObj?this.localeObj.getConstant("null"):String(v):v;var S=this.formatFields[h]&&["date","dateTime","time"].indexOf(this.formatFields[h].type)>-1?this.getFormattedValue(v,h):{formattedText:v.toString(),actualText:v.toString()};f&&f.formattedText===S.formattedText&&(d&&d[m]?(d[m].index.push(r[u]),d[m].indexObject[r[u]]=r[u]):(d[m]={index:[],indexObject:{}},f.index=d[m].index=[r[u]],d[m].indexObject[r[u]]=r[u],f.indexObject=d[m].indexObject,f.valueSort={},f.valueSort.axis=h,0!==i?(f.valueSort.levelName=n+this.valueSortSettings.headerDelimiter+f.formattedText,f.valueSort[n+this.valueSortSettings.headerDelimiter+f.formattedText]=1,f.valueSort.uniqueName=n+this.valueSortSettings.headerDelimiter+(f.actualText?f.actualText:f.formattedText),f.valueSort[n+this.valueSortSettings.headerDelimiter+(f.actualText?f.actualText:f.formattedText)]=1):(f.valueSort[f.formattedText]=1,f.valueSort.levelName=f.formattedText,f.valueSort[f.actualText?f.actualText:f.formattedText]=1,f.valueSort.uniqueName=f.actualText?f.actualText:f.formattedText),g.members=[],s.push(g)))}for(var y=o.length-s.length;y>0;)s.push({members:[]}),y--;for(var b=0,C=s.length;b<C;b++)if(o[b].members.length>0){var x=null;o[b].valueSort&&o[b].valueSort.levelName&&(x=o[b].valueSort.levelName),n=x||o[b].formattedText,s[b].members=this.insertPosition(e,t,i+1,o[b].index,a,n,o[b].members)}return s}return s},e.prototype.insertTotalPosition=function(e){var t=e[e.length-1];if(t&&"grand sum"===t.type){t.index=this.filterMembers,t.indexObject={};for(var i=0,r=this.filterMembers.length;i<r;i++)t.indexObject[this.filterMembers[i]]=this.filterMembers[i]}return e},e.prototype.calculatePagingValues=function(){if(this.isPagingOrVirtualizationEnabled){1===this.valueAxis?this.rowValuesLength=this.dataSourceSettings.values.length:this.colValuesLength=this.dataSourceSettings.values.length,this.columnPageCount=Math.ceil(this.columnCount/this.pageSettings.columnPageSize),this.rowPageCount=Math.ceil(this.rowCount/this.pageSettings.rowPageSize),this.pageSettings.currentColumnPage=this.pageSettings.currentColumnPage>=this.columnPageCount?this.columnPageCount:this.pageSettings.currentColumnPage,this.pageSettings.currentRowPage=this.pageSettings.currentRowPage>=this.rowPageCount?this.rowPageCount:this.pageSettings.currentRowPage;var e=this.enablePaging?1:3;this.memberCnt=this.enablePaging?0:-this.rowValuesLength,this.rowStartPos=(this.pageSettings.currentRowPage*this.pageSettings.rowPageSize-this.pageSettings.rowPageSize)*(this.enablePaging?1:this.rowValuesLength)+(this.enablePaging?1:0);var t=this.enablePaging?this.rowStartPos:this.rowStartPos+this.pageSettings.rowPageSize*e*this.rowValuesLength>this.rowCount?this.rowCount-this.pageSettings.rowPageSize*e*this.rowValuesLength:this.rowStartPos;t<0&&(t=this.rowStartPos=0,this.pageSettings.currentRowPage=1),this.rowFirstLvl=(this.rowStartPos-t)%this.pageSettings.rowPageSize,this.rowStartPos=t,this.endPos=this.rowStartPos+this.pageSettings.rowPageSize*e*(this.enablePaging?1:this.rowValuesLength)-(this.enablePaging?1:0),this.endPos=this.endPos>this.rowCount+1?this.rowCount+1:this.endPos,this.rMembers=this.performSlicing(this.rMembers,[],this.rowStartPos,"row"),this.memberCnt=this.enablePaging?0:-this.colValuesLength,this.pageInLimit=!1,this.colHdrBufferCalculated=!1,this.colStartPos=(this.pageSettings.currentColumnPage*this.pageSettings.columnPageSize-this.pageSettings.columnPageSize)*(this.enablePaging?1:this.colValuesLength)+(this.enablePaging?1:0),t=this.enablePaging?this.colStartPos:this.colStartPos+this.pageSettings.columnPageSize*e*this.colValuesLength>this.columnCount?this.columnCount-this.pageSettings.columnPageSize*e*this.colValuesLength:this.colStartPos,t<0&&(t=this.colStartPos=0,this.pageSettings.currentColumnPage=1),this.colFirstLvl=(this.colStartPos-t)%this.pageSettings.columnPageSize,this.colStartPos=t,this.endPos=this.colStartPos+this.pageSettings.columnPageSize*e*(this.enablePaging?1:this.colValuesLength)-(this.enablePaging?1:0),this.endPos=this.endPos>this.columnCount+1?this.columnCount+1:this.endPos,this.cMembers=this.performSlicing(this.cMembers,[],this.colStartPos,"column"),this.memberCnt=-1,this.pageInLimit=!1,this.isValueHasAdvancedAggregate?("grand sum"!==this.rMembers[this.rMembers.length-1].type&&"grand sum"===this.headerCollection.rowHeaders[this.headerCollection.rowHeaders.length-1].type&&(this.rMembers.push(this.headerCollection.rowHeaders[this.headerCollection.rowHeaders.length-1]),this.removeRowGrandTotal=!0),"grand sum"!==this.cMembers[this.cMembers.length-1].type&&"grand sum"===this.headerCollection.columnHeaders[this.headerCollection.columnHeaders.length-1].type&&(this.cMembers.push(this.headerCollection.columnHeaders[this.headerCollection.columnHeaders.length-1]),this.removeColumnGrandTotal=!0)):(this.rowGrandTotal=this.rowGrandTotal?this.rowGrandTotal:this.headerCollection.rowHeaders[this.headerCollection.rowHeaders.length-1],this.columnGrandTotal=this.columnGrandTotal?this.columnGrandTotal:this.headerCollection.columnHeaders[this.headerCollection.columnHeaders.length-1])}},e.prototype.performSlicing=function(e,t,i,r){for(var a=0;e[a]&&!(this.enablePaging&&this.endPos<=this.memberCnt&&0!==a);){if(this.memberCnt+=e[a].level<=this.measureIndex?"column"===r?this.colValuesLength:this.rowValuesLength:1,i<=this.memberCnt&&this.endPos>=this.memberCnt&&!this.pageInLimit&&("column"===r?this.colFirstLvl=this.colFirstLvl+e[a].level:this.rowFirstLvl=this.rowFirstLvl+e[a].level,this.isParentLevelAdded="column"===r?!(this.colFirstLvl>0):!(this.rowFirstLvl>0),this.pageInLimit=!0),this.pageInLimit&&!this.enablePaging&&this.endPos<=this.memberCnt){if("column"!==r)break;if(0===e[a].members.length){if(this.colHdrBufferCalculated)break;this.colHdrBufferCalculated=!0,this.endPos+=e[a].level*this.colValuesLength}else if(this.colHdrBufferCalculated)break}if(t.push(e[a].members.length>0?this.removeChildMembers(e[a]):e[a]),e[a].members.length>0&&("column"===r?this.memberCnt-=this.dataSourceSettings.showSubTotals&&this.dataSourceSettings.showColumnSubTotals&&this.columnKeys[e[a].valueSort.axis].showSubTotals?0:this.colValuesLength:this.showSubTotalsAtBottom&&this.memberCnt++,t[t.length-1].members=this.performSlicing(e[a].members,[],i,r)),!this.isParentLevelAdded&&this.enablePaging&&(this.memberCnt+=(t[t.length-1].level<=this.measureIndex?"column"===r?this.colValuesLength:this.rowValuesLength:1)*t[t.length-1].level,this.isParentLevelAdded=!0),this.pageInLimit||t.pop(),0===e[a].level&&this.pageInLimit&&this.endPos<=this.memberCnt)break;a++}return t},e.prototype.removeChildMembers=function(e){for(var t=Object.keys(e),i=0,r={};i<t.length;)r[t[i]]=e[t[i]],"members"===t[i]&&(r.members=[]),i++;return r},e.prototype.insertAllMember=function(e,t,i,r){var a=e.length;i=" Total";var n={hasChild:!1,index:t,level:0,axis:r,isDrilled:!1,indexObject:{},members:[],actualText:"Grand"+i,formattedText:"Grand"+i,ordinal:a,type:"grand sum",valueSort:{}};n.valueSort[n.formattedText]=1,n.valueSort.levelName=n.formattedText,n.valueSort[n.actualText]=1,n.valueSort.uniqueName=n.actualText;for(var o=0,s=t.length;o<s;o++)n.indexObject[t[o]]=t[o];return"Top"===this.dataSourceSettings.grandTotalsPosition&&this.dataSourceSettings.showGrandTotals?e.unshift(n):e.push(n),e},e.prototype.getTableData=function(e,t,a,o,s,l,d,h,p,u){for(var c=e.length,g=0;g<c;g++){var m=!this.valueAxis&&!this.isLastHeaderHasMeasures&&s.length<this.dataSourceSettings.columns.length+1?this.dataSourceSettings.columns.length+1:s.length,f=e[g];t[m]=f;var v=m-Number(Object.keys(t)[0]),S=!t[m].members.length;f.colIndex=0,f.rowIndex=m;var y=!1,b=this.dataSourceSettings.valueSortSettings.headerDelimiter;if(this.valueAxis&&0===this.dataSourceSettings.rows.length&&this.dataSourceSettings.values.length>1&&(this.rowIndex=i.i(r.isNullOrUndefined)(this.rowIndex)&&!S&&0===this.dataSourceSettings.rows.length?f.index:this.rowIndex,y=this.valueAxis&&0===this.dataSourceSettings.rows.length&&f.valueSort.levelName&&0!==f.valueSort.levelName.toString().indexOf("Grand Total"+b),this.valueAxis&&0===this.dataSourceSettings.rows.length&&0===f.valueSort.levelName.toString().indexOf("Grand Total"+b)&&(f.index=this.rowIndex)),y)S||this.recursiveRowData(e,t,a,m,s,l,S,g,0,d,h,p);else{var C=!1;if(this.showSubTotalsAtBottom&&t[o]&&t[o].hasChild)for(var x=void 0,w=0,T=t[o].members;w<T.length;w++)if(x=T[w],"value"===x.type){C=!0;break}if(C&&!t[m].isSum&&t[m].members&&0===t[m].members.length)continue;if(s[m]?s[m][0]=this.valueContent[v][0]=n.a.frameHeaderWithKeys(f):(s[m]=[],this.valueContent[v]={},s[m][0]=this.valueContent[v][0]=n.a.frameHeaderWithKeys(f)),this.valueAxis&&(this.isMultiMeasures||this.dataSourceSettings.alwaysShowValueHeader)){var M=m,_=v,D=m,O=!1;if(((0!==d||0!==this.measureIndex)&&!S||S)&&"value"===f.type&&!f.valueSort.axis||d>this.measureIndex&&"row"===f.axis&&f.valueSort.axis)for(var P=0,E=!1,N=f.valueSort.uniqueName?f.valueSort.uniqueName.toString().split(this.valueSortSettings.headerDelimiter):[],F=0,I=1,L=a.length;F<L;++F){if(!E)for(P=0;P<l;P++)if(N.indexOf(this.dataSourceSettings.values[P].name)>-1){E=!0,O=!0;break}if(d>this.measureIndex&&"row"===f.axis&&f.valueSort.axis)this.updateRowData(e,a,m,s,P,g,F,I,v,h,p);else{if(!t[o]){O=!1;break}var A=this.showSubTotalsAtBottom&&u?u:o;this.updateRowData(t,a,m,s,P,A,F,I,v,h,p)}I=s[m].length}if(!O)for(var F=0,I=1,L=a.length;F<L;++F)I=s[m].length,s[M][I]=this.valueContent[_][I]={axis:"value",actualText:"",colSpan:1,colIndex:I,formattedText:"",hasChild:!1};this.recursiveRowData(e,t,a,D,s,l,S,g,l,d,h,p)}else{for(var F=0,I=1,L=a.length;F<L;++F)for(var R=a[F].valueSort.uniqueName?a[F].valueSort.uniqueName.toString().split(this.valueSortSettings.headerDelimiter):[],P=0;P<l;P++)this.valueAxis||this.isLastHeaderHasMeasures?(this.updateRowData(e,a,m,s,P,g,F,I,v,h,p),I=s[m].length):R.indexOf(this.dataSourceSettings.values[P].name)>-1&&(this.updateRowData(e,a,m,s,P,g,F,I,v,h,p),I=s[m].length);this.recursiveRowData(e,t,a,m,s,l,S,g,0,d,h,p)}}}},e.prototype.insertRowSubTotals=function(e,t,i,r,a,o,s,l){var d=!!e[i].type&&("value"===e[i].type&&e[i].valueSort.levelName!==e[i].actualText);if(e[i].hasChild&&e[i].isDrilled&&e[i].members.length>0){var h=[],p=n.a.frameHeaderWithKeys(e[i]);if("value"===e[i].members[0].type){for(var u=0,c=[],g=1,m=0,f=p.members;m<f.length;m++){var v=f[m];"value"===v.type&&(c[c.length]=v)}for(;u<c.length;){var S=n.a.frameHeaderWithKeys(c[u]),y=void 0;for(g;g<e.length;g++)if(e[g]&&e[g].valueSort.levelName===S.valueSort.levelName){y=e.indexOf(e[g]);break}y>-1&&(h[h.length]=y),S.formattedText=p.formattedText+" "+S.formattedText,S.isSum=!0,S.members=[],this.getTableData([S],e,t,i,r,a,o,s,l),u++}}else{p.formattedText=p.formattedText+" Total",p.members=[],p.isDrilled=!1,p.hasChild=!1,p.isSum=!0,p.type="sum";var b=d?this.getParentIndex(e,p):0;this.getTableData([p],e,t,i,r,a,o,s,l,b),h=[i]}for(var y=0;y<h.length;y++){var C=r[h[y]];C=C.map(function(e){return e.formattedText=0===e.colIndex?e.formattedText:"",e}),r[h[y]]=C}}},e.prototype.getParentIndex=function(e,t){for(var i=0,r=e.length-1;r>0;r--)if(t.level===e[r].level&&e[r].index){i=r;break}return i},e.prototype.getAggregatedHeaders=function(e,t,i,r,a){this.selectedHeaders={selectedHeader:[],values:[]};for(var n=a.length,o=0;o<n;o++)switch(a[o].type){case"DifferenceFrom":case"PercentageOfDifferenceFrom":var s=void 0,l=void 0;this.selectedHeaders.values.push(a[o].name),a[o].baseField&&a[o].baseItem?(s=a[o].baseField,l=a[o].baseItem):this.valueAxis&&(this.isMultiMeasures||this.dataSourceSettings.alwaysShowValueHeader)&&t.length>0?(s=t[0].name,l=Object.keys(this.fieldList[t[0].name].members)[0]):e.length>0&&(s=e[0].name,l=Object.keys(this.fieldList[e[0].name].members)[0]);for(var d=!1,h=0,p=e;h<p.length;h++){if(p[h].name===s){this.getAggregatedHeaderData(i,a[o].name,l,!1,"row",a[o].type,this.selectedHeaders.selectedHeader,o),d=!0;break}}if(!d)for(var u=0,c=t;u<c.length;u++){var g=c[u];if(g.name===s){this.getAggregatedHeaderData(r,a[o].name,l,!1,"column",a[o].type,this.selectedHeaders.selectedHeader,o);break}}break;case"PercentageOfParentRowTotal":case"PercentageOfParentColumnTotal":this.selectedHeaders.values.push(a[o].name),this.getAggregatedHeaderData("PercentageOfParentRowTotal"===a[o].type?i:r,a[o].name,void 0,!1,"PercentageOfParentRowTotal"===a[o].type?"row":"column",a[o].type,this.selectedHeaders.selectedHeader,o);break;case"RunningTotals":this.selectedHeaders.values.push(a[o].name),this.getAggregatedHeaderData(this.valueAxis&&(this.isMultiMeasures||this.dataSourceSettings.alwaysShowValueHeader)?r:i,a[o].name,void 0,!1,this.valueAxis&&(this.isMultiMeasures||this.dataSourceSettings.alwaysShowValueHeader)?"column":"row",a[o].type,this.selectedHeaders.selectedHeader,o);break;case"PercentageOfParentTotal":var s=void 0;this.selectedHeaders.values.push(a[o].name),a[o].baseField?s=a[o].baseField:this.valueAxis&&(this.isMultiMeasures||this.dataSourceSettings.alwaysShowValueHeader)&&t.length>0?s=t[0].name:e.length>0&&(s=e[0].name);for(var d=!1,m=e.length,f=0;f<m;f++)if(e[f].name===s){var v=f>=this.measureIndex?f+1:f;this.getAggregatedHeaderData(i,a[o].name,void 0,!1,"row",a[o].type,this.selectedHeaders.selectedHeader,o,v),d=!0;break}if(!d)for(var m=t.length,f=0;f<m;f++)if(t[f].name===s){var v=f;this.valueAxis||this.isLastHeaderHasMeasures||(v=f>=this.measureIndex?f+1:f),this.getAggregatedHeaderData(r,a[o].name,void 0,!1,"column",a[o].type,this.selectedHeaders.selectedHeader,o,v);break}}},e.prototype.getAggregatedHeaderData=function(e,t,a,n,o,s,l,d,h){for(var p=0,u=e;p<u.length;p++){var c=u[p];switch(s){case"DifferenceFrom":case"PercentageOfDifferenceFrom":if(-1!==c.valueSort.levelName.toString().split(this.valueSortSettings.headerDelimiter).indexOf(a)){var g=[];if(!n&&"row"===o)for(var m=0,f=e;m<f.length;m++){var v=f[m];v.level>=c.level&&g.push(v)}if(l.push(this.updateSelectedHeaders(a,c.level,o,n,t,s,c.valueSort.levelName,n?[c]:"column"===o?e:g,d+1)),c.members.length>0){var S=!1,y=[];if("row"===o)for(var b=0,C=c.members;b<C.length;b++){var x=C[b];if("value"!==x.type||0!==x.members.length){y.push(x),S=!1;break}S=!0}(!S&&y.length>0||"column"===o)&&this.getAggregatedHeaderData("column"===o?c.members:y,t,a,!0,o,s,l[l.length-1].childMembers,d)}}else c.members.length>0&&this.getAggregatedHeaderData(c.members,t,a,!1,o,s,l,d);break;case"RunningTotals":case"PercentageOfParentRowTotal":case"PercentageOfParentColumnTotal":"grand sum"===c.type?l.push(this.updateSelectedHeaders(void 0,c.level,o,!1,t,s,c.valueSort.levelName,e,d+1)):c.members.length>0&&(l.push(this.updateSelectedHeaders(void 0,c.level,o,!1,t,s,c.valueSort.levelName,c.members,d+1)),this.getAggregatedHeaderData(c.members,t,void 0,!1,o,s,l,d));break;case"PercentageOfParentTotal":if("grand sum"!==c.type)if(c.valueSort.levelName.split(this.valueSortSettings.headerDelimiter).length-1===h)if(c.members.length>0){if(n)for(var w=l[l.length-1].aggregateHeaders,T=0,M=c.members;T<M.length;T++){var x=M[T];w.push(i.i(r.extend)({},x,null,!0))}else{var _=i.i(r.extend)([],c.members,null,!0);l.push(this.updateSelectedHeaders(void 0,c.level,o,!1,t,s,c.valueSort.levelName,_,d+1));var w=l[l.length-1].aggregateHeaders;w.push(i.i(r.extend)({},c,null,!0))}this.getAggregatedHeaderData(c.members,t,void 0,!0,o,s,l,d,h+1)}else n||l.push(this.updateSelectedHeaders(void 0,c.level,o,!1,t,s,c.valueSort.levelName,[c],d+1));else c.members.length>0&&this.getAggregatedHeaderData(c.members,t,void 0,!1,o,s,l,d,h)}}},e.prototype.updateSelectedHeaders=function(e,t,a,n,o,s,l,d,h){return{name:e,level:t,axis:a,isChild:n,value:o,type:s,uniqueName:l,aggregateHeaders:i.i(r.extend)([],d,null,!0),childMembers:[],valueCount:h}},e.prototype.applyAdvancedAggregate=function(e,t,i){if(this.aggregatedValueMatrix=[],this.selectedHeaders.values.length>0){for(var r={},a=[],n=[],o=!1,s=i.length,l=0;l<s;l++)if(void 0!==i[l]&&void 0!==i[l][0]){if(!o)for(var d=i[l].length,h=0;h<d;h++){var p=i[l][h].actualText;"value"===i[l][h].axis&&-1!==this.selectedHeaders.values.indexOf(p)&&(a.push(h),o=!0)}var u=this.showSubTotalsAtBottom&&i[l][0].isDrilled&&i[l][0].hasChild;if(!u&&a.length>0&&"value"===i[l][a[0]].axis&&-1!==this.selectedHeaders.values.indexOf(i[l][a[0]].actualText)){n.push(l);for(var c=0,g=a;c<g.length;c++){var m=g[c];r[l+","+m]=[l,m]}}}this.updateAggregates(e,t,i,this.selectedHeaders.selectedHeader,a,n,r);for(var f=Object.keys(r),v=0,S=f;v<S.length;v++){var m=S[v];i[r[m][0]][r[m][1]].formattedText=this.selectedHeaders.selectedHeader.length>0?this.emptyCellTextContent:"#N/A",this.aggregatedValueMatrix[r[m][0]]||(this.aggregatedValueMatrix[r[m][0]]=[]),this.aggregatedValueMatrix[r[m][0]][r[m][1]]=0}this.updatePivotValues(!0)}},e.prototype.updateAggregates=function(e,t,a,n,o,s,l){for(var d=0,h=n;d<h.length;d++){var p=h[d],u=p.aggregateHeaders,c=p.value,g=p.type,m=p.uniqueName,f=p.axis,v="row"===f,S=void 0,y=[],b=[],C=[],x=[],w=[],T=[];if(-1!==["DifferenceFrom","PercentageOfDifferenceFrom","PercentageOfParentRowTotal","PercentageOfParentColumnTotal","PercentageOfParentTotal","RunningTotals"].indexOf(p.type))if(v){if("RunningTotals"!==p.type)for(var M=0,_=s;M<_.length;M++){var D=_[M];if(void 0!==e[D]&&e[D].valueSort[m]){S=e[D],w=0===this.valueAxis||this.valueAxis&&a[D]&&a[D][1]&&a[D][1].actualText===c?a[D]:[];break}}}else{for(var O=a.length,P=0;P<O&&(void 0!==a[P]&&void 0===a[P][0]);P++)C.push(a[P]);for(var E=C.length;E--;){var N=C[E][o[0]],F=N.actualText;-1===this.selectedHeaders.values.indexOf(F)&&(b=C[E],E=0)}if("RunningTotals"!==p.type){for(var I=b.length,L=0;L<I;L++){var A=!1;if(void 0!==b[L]&&b[L].valueSort[m]){S=b[L];for(var R=a.length,P=0;P<R;P++){var N=a[P];void 0!==N&&void 0!==N[0]&&"value"===N[L].axis&&-1!==this.selectedHeaders.values.indexOf(N[L].actualText)&&(A=!0,T[P]=N[L],x.push(P))}if(A)break}}if(0===T.length&&0===x.length)for(var I=b.length,L=0;L<I;L++){var A=!1;if(void 0!==b[L]&&0===b[L].valueSort.levelName.indexOf(m)){S=b[L];for(var k=a.length,j=0;j<k;j++){var N=a[j];void 0!==N&&void 0!==N[0]&&"value"===N[L].axis&&-1!==this.selectedHeaders.values.indexOf(N[L].actualText)&&(A=!0,x.push(j))}if(A)break}}}}switch(p.type){case"DifferenceFrom":case"PercentageOfDifferenceFrom":var H=p.isChild;if(v){if(H)for(var q=m.split(this.valueSortSettings.headerDelimiter),V=0,B=s;V<B.length;V++){var U=B[V];if(void 0!==e[U]){var G=e[U].valueSort.levelName.split(this.valueSortSettings.headerDelimiter);if(-1!==G.indexOf(q[q.length-1])&&S&&e[U].level===S.level)for(var z=0,W=o;z<W.length;z++){var Q=W[z],Y=a[U][Q];"value"===Y.axis&&Y.actualText===c&&(y.push([U,Q]),l[U+","+Q]&&delete l[U+","+Q])}}}else for(var K=0,X=u;K<X.length;K++)for(var J=X[K],Z=0,$=s;Z<$.length;Z++){var D=$[Z];if(void 0!==e[D]&&e[D].valueSort[J.valueSort.levelName]&&e[D].level===S.level&&"grand sum"!==e[D].type)for(var ee=0,te=o;ee<te.length;ee++){var Q=te[ee],Y=a[D][Q];"value"===Y.axis&&Y.actualText===c&&(y.push([D,Q]),l[D+","+Q]&&delete l[D+","+Q])}}for(var ie=0,re=y;ie<re.length;ie++){var Q=re[ie],Y=a[Q[0]][Q[1]],ae=i.i(r.isNullOrUndefined)(w[Q[1]].actualValue)?0:w[Q[1]].actualValue,ne=(i.i(r.isNullOrUndefined)(Y.actualValue)?0:Y.actualValue)-ae;ne=isNaN(ne)?0:0===Y.value&&0===w[Q[1]].value?0:ne,this.aggregatedValueMatrix[Q[0]]||(this.aggregatedValueMatrix[Q[0]]=[]),"DifferenceFrom"===g?(this.aggregatedValueMatrix[Q[0]][Q[1]]=ne,Y.formattedText=0===ne?this.emptyCellTextContent:this.getFormattedValue(ne,c).formattedText):(ne=0===ae?0:ne/ae,this.aggregatedValueMatrix[Q[0]][Q[1]]=ne,Y.formattedText=Y.showSubTotals?0!==ne?this.globalize.formatNumber(ne,{format:"P",maximumFractionDigits:this.getPercentFormat(this.formatFields,Y.actualText)}):this.emptyCellTextContent:Y.formattedText)}}else{if(H)for(var q=m.split(this.valueSortSettings.headerDelimiter),I=b.length,oe=0;oe<I;oe++){var A=!1;if(void 0!==b[oe]){var G=b[oe].valueSort.levelName.split(this.valueSortSettings.headerDelimiter);if(-1!==G.indexOf(q[q.length-1])&&b[oe].level===S.level){for(var se=0,le=x;se<le.length;se++){var Q=le[se],Y=a[Q][oe];"value"===Y.axis&&Y.actualText===c&&(A=!0,y.push([Q,oe]),l[Q+","+oe]&&delete l[Q+","+oe])}if(A)break}}}else for(var de=0,he=u;de<he.length;de++)for(var J=he[de],I=b.length,L=0;L<I;L++){var A=!1;if(void 0!==b[L]&&b[L].valueSort[J.valueSort.levelName]&&S&&b[L].level===S.level&&"grand sum"!==b[L].type){for(var pe=0,ue=x;pe<ue.length;pe++){var Q=ue[pe],Y=a[Q][L];"value"===Y.axis&&Y.actualText===c&&(A=!0,y.push([Q,L]),l[Q+","+L]&&delete l[Q+","+L])}if(A)break}}var ce=void 0;0===T.length&&(ce=this.getSelectedColumn(p.uniqueName,t));for(var ge=0,me=y;ge<me.length;ge++){var Q=me[ge],Y=a[Q[0]][Q[1]],fe=0;if(0===T.length){var ve=this.getSelectedRow(Y.rowHeaders,e);fe=this.getAggregateValue(ve.index,ce.indexObject,this.fieldList[c].index,p.type,!1)}else fe=T[Q[0]].value;var ne=Y.value-fe;ne=isNaN(ne)?0:ne,this.aggregatedValueMatrix[Q[0]]||(this.aggregatedValueMatrix[Q[0]]=[]),"DifferenceFrom"===g?(Y.formattedText=0===ne?this.emptyCellTextContent:this.getFormattedValue(ne,c).formattedText,this.aggregatedValueMatrix[Q[0]][Q[1]]=ne):(ne=0===T[Q[0]].value?0:ne/T[Q[0]].value,Y.formattedText=0!==ne?this.globalize.formatNumber(ne,{format:"P",maximumFractionDigits:this.getPercentFormat(this.formatFields,Y.actualText)}):this.emptyCellTextContent,this.aggregatedValueMatrix[Q[0]][Q[1]]=ne)}}p.childMembers.length>0&&this.updateAggregates(e,t,a,p.childMembers,o,s,l);break;case"PercentageOfParentRowTotal":case"PercentageOfParentColumnTotal":case"PercentageOfParentTotal":if(v){for(var Se=0,ye=u;Se<ye.length;Se++)for(var J=ye[Se],be=0,Ce=s;be<Ce.length;be++){var P=Ce[be];if(void 0!==e[P]&&e[P].valueSort[J.valueSort.levelName]&&e[P].level===J.level)for(var xe=0,we=o;xe<we.length;xe++){var Q=we[xe],Y=a[P][Q];"value"===Y.axis&&Y.actualText===c&&(y.push([P,Q]),l[P+","+Q]&&delete l[P+","+Q])}}for(var Te=0,Me=y;Te<Me.length;Te++){var P=Me[Te],Y=a[P[0]][P[1]],_e=0;_e=0===w.length&&S?this.getAggregateValue(S.index,t[P[1]-1].indexObject,this.fieldList[c].index,p.type,!1):w[P[1]]?w[P[1]].actualValue:0;var ne=Y.value/_e;ne=isNaN(ne)?0:ne,Y.formattedText=Y.showSubTotals?0!==ne?this.globalize.formatNumber(ne,{format:"P",maximumFractionDigits:this.getPercentFormat(this.formatFields,Y.actualText)}):this.emptyCellTextContent:Y.formattedText,this.aggregatedValueMatrix[P[0]]||(this.aggregatedValueMatrix[P[0]]=[]),this.aggregatedValueMatrix[P[0]][P[1]]=ne}}else{for(var De=0,Oe=u;De<Oe.length;De++)for(var J=Oe[De],I=b.length,j=0;j<I;j++){var A=!1;if(void 0!==b[j]&&b[j].valueSort[J.valueSort.levelName]){for(var Pe=0,Ee=x;Pe<Ee.length;Pe++){var Q=Ee[Pe],Ne=this.showSubTotalsAtBottom&&a[Q][0].isDrilled&&a[Q][0].hasChild;if(!Ne){var Y=a[Q][j];"value"===Y.axis&&Y.actualText===c&&(A=!0,y.push([Q,j]),l[Q+","+j]&&delete l[Q+","+j])}}if(A)break}}var Fe=void 0;0===T.length&&(Fe=this.getSelectedColumn(p.uniqueName,t));for(var Ie=0,Le=y;Ie<Le.length;Ie++){var P=Le[Ie],Y=a[P[0]][P[1]],Ae=0;if(0===T.length){var ve=this.getSelectedRow(Y.rowHeaders,e);Ae=this.getAggregateValue(ve.index,Fe.indexObject,this.fieldList[c].index,p.type,!1)}else Ae=T[P[0]].value;var Re=Y.value/Ae;Re=isNaN(Re)?0:Re,Y.formattedText=0!==Re?this.globalize.formatNumber(Re,{format:"P",maximumFractionDigits:this.getPercentFormat(this.formatFields,Y.actualText)}):this.emptyCellTextContent,this.aggregatedValueMatrix[P[0]]||(this.aggregatedValueMatrix[P[0]]=[]),this.aggregatedValueMatrix[P[0]][P[1]]=Re}}break;case"RunningTotals":if(v)for(var ke=0,je=o;ke<je.length;ke++)for(var Q=je[ke],ne=0,He=0,qe=u;He<qe.length;He++)for(var J=qe[He],Ve=0,Be=s;Ve<Be.length;Ve++){var U=Be[Ve];if(void 0!==e[U]){var Y=a[U][Q];if(void 0!==e[U]&&e[U].valueSort[J.valueSort.levelName]&&e[U].level===J.level&&"value"===Y.axis&&Y.actualText===c){"grand sum"!==e[U].type&&(ne+=Y.showSubTotals||!i.i(r.isNullOrUndefined)(Y.actualValue)&&isNaN(Y.actualValue)?i.i(r.isNullOrUndefined)(Y.value)||isNaN(Y.value)?null:Y.value:Y.actualValue,Y.formattedText=Y.showSubTotals?0===ne&&Y.actualValue&&0!==Y.actualValue?"":this.getFormattedValue(ne,c).formattedText:Y.formattedText,this.aggregatedValueMatrix[U]||(this.aggregatedValueMatrix[U]=[]),this.aggregatedValueMatrix[U][Q]=ne),l[U+","+Q]&&delete l[U+","+Q];break}}}else for(var Ue=0,Ge=s;Ue<Ge.length;Ue++){var D=Ge[Ue];if(void 0!==a[D])for(var ne=0,ze=0,We=u;ze<We.length;ze++)for(var J=We[ze],Qe=e[D].hasChild&&e[D].isDrilled&&(!i.i(r.isNullOrUndefined)(e[D].showSubTotals)&&!e[D].showSubTotals||!this.dataSourceSettings.showSubTotals||!this.dataSourceSettings.showRowSubTotals),I=b.length,L=0;L<I;L++){var Y=a[D][L];if(void 0!==b[L]&&b[L].valueSort[J.valueSort.levelName]&&"value"===Y.axis&&Y.actualText===c){"grand sum"!==b[L].type&&(i.i(r.isNullOrUndefined)(Y.value)||(ne+=Y.value),Y.formattedText=Qe?"":this.getFormattedValue(ne,c).formattedText,this.aggregatedValueMatrix[D]||(this.aggregatedValueMatrix[D]=[]),this.aggregatedValueMatrix[D][L]=ne),l[D+","+L]&&delete l[D+","+L];break}}}}}},e.prototype.getSelectedColumn=function(e,t){for(var i={axis:"column",index:[],indexObject:{}},r=0,a=t;r<a.length;r++){var n=a[r];n&&n.valueSort&&0===n.valueSort.levelName.indexOf(e)&&(i.index=i.index.concat(n.index).sort(function(e,t){return e-t}),i.indexObject=o({},i.indexObject,n.indexObject))}return i},e.prototype.getSelectedRow=function(e,t){for(var i=0,r=t;i<r.length;i++){var a=r[i];if(a){if(a.valueSort&&a.valueSort.levelName===e)return a;if(""===e&&"grand sum"===a.type)return a}}return null},e.prototype.recursiveRowData=function(e,t,a,n,o,s,l,d,h,p,u,c){l||this.getTableData(t[n].members,t,a,n,o,s,p+1,u,c),this.showSubTotalsAtBottom&&(i.i(r.isNullOrUndefined)(e[d].showSubTotals)||e[d].showSubTotals)&&this.insertRowSubTotals(t,a,n,o,s,p,u,c),this.isPagingOrVirtualizationEnabled||(t[n].members=[])},e.prototype.updateRowData=function(e,t,a,n,o,s,l,d,h,p,u){var c=this.fieldList[this.dataSourceSettings.values[o].name].index,g=this.fieldList[this.dataSourceSettings.values[o].name].aggregateType,m=this.dataSourceSettings.values[o].name,f=[],v={},S=0,y=0;switch(g){case"Index":f=[[e[s],t[l]],[e[s],u],[p,t[l]],[p,u]];for(var b=["cVal","rTotalVal","cTotalVal","gTotalVal"],C=0,x=0,w=f;x<w.length;x++){var T=w[x];v[b[C]]=this.getAggregateValue(T[0].index,T[1].indexObject,c,g,0!==C),C++}var M=v.cVal*v.gTotalVal/(v.rTotalVal*v.cTotalVal);S=!(e[s].members.length>0&&e[s].hasChild&&e[s].isDrilled)||(i.i(r.isNullOrUndefined)(e[s].showSubTotals)||e[s].showSubTotals)&&this.dataSourceSettings.showRowSubTotals&&this.dataSourceSettings.showSubTotals?i.i(r.isNullOrUndefined)(v.cVal)?v.cVal:isNaN(M)?0:M:void 0,y=i.i(r.isNullOrUndefined)(v.cVal)?v.cVal:isNaN(M)?0:M;break;case"PercentageOfGrandTotal":case"PercentageOfColumnTotal":case"PercentageOfRowTotal":f=[[e[s],t[l]]],f.push("PercentageOfGrandTotal"===g?[p,u]:"PercentageOfColumnTotal"===g?[p,t[l]]:[e[s],u]);for(var b=["cVal","gTotalVal"],C=0,_=0,D=f;_<D.length;_++){var T=D[_];v[b[C]]=this.getAggregateValue(T[0].index,T[1].indexObject,c,g,0!==C),C++}var M=v.cVal/v.gTotalVal;S=!(e[s].members.length>0&&e[s].hasChild&&e[s].isDrilled)||(i.i(r.isNullOrUndefined)(e[s].showSubTotals)||e[s].showSubTotals)&&this.dataSourceSettings.showSubTotals&&this.dataSourceSettings.showRowSubTotals?i.i(r.isNullOrUndefined)(v.cVal)?v.cVal:isNaN(M)?0:M:void 0,y=i.i(r.isNullOrUndefined)(v.cVal)?v.cVal:isNaN(M)?0:M;break;default:var M=this.getAggregateValue(e[s].index,t[l].indexObject,c,g,!1);S=!(e[s].members.length>0&&e[s].hasChild&&e[s].isDrilled)||(i.i(r.isNullOrUndefined)(e[s].showSubTotals)||e[s].showSubTotals)&&this.dataSourceSettings.showSubTotals&&this.dataSourceSettings.showRowSubTotals?M:void 0,y=M}var O={fieldName:this.dataSourceSettings.values[o].name,row:e[s],column:t[l],value:S,cellSets:this.getValueCellInfo?this.getCellSet(this.rawIndexObject):[],rowCellType:e[s].hasChild&&e[s].isDrilled?"subTotal":"grand sum"===e[s].type?"grandTotal":"value",columnCellType:t[l].hasChild&&t[l].isDrilled?"subTotal":"grand sum"===t[l].type?"grandTotal":"value",aggregateType:g,skipFormatting:!1};this.getValueCellInfo&&this.getValueCellInfo(O),S=O.value;var P=e[s].hasChild||t[l].hasChild||"grand sum"===e[s].type||"grand sum"===t[l].type||this.showSubTotalsAtBottom&&e[s].isSum,E="grand sum"===e[s].type||"grand sum"===t[l].type,N=e[s].members.length>0&&e[s].hasChild&&e[s].isDrilled&&(!i.i(r.isNullOrUndefined)(e[s].showSubTotals)&&!e[s].showSubTotals||!this.dataSourceSettings.showSubTotals||!this.dataSourceSettings.showRowSubTotals),F=N?"":void 0===S?this.emptyCellTextContent:"Count"===g||"DistinctCount"===g?S.toLocaleString():this.getFormattedValue(S,m).formattedText;!isNaN(S)&&!i.i(r.isNullOrUndefined)(S)&&["PercentageOfGrandTotal","PercentageOfColumnTotal","PercentageOfRowTotal"].indexOf(g)>=0?F=this.globalize.formatNumber(S,{format:"P",maximumFractionDigits:this.getPercentFormat(this.formatFields,O.fieldName)}):N||!isNaN(S)||i.i(r.isNullOrUndefined)(S)||-1===["PopulationStDev","SampleStDev","PopulationVar","SampleVar"].indexOf(g)||(F="#DIV/0!",S=0),F=O.skipFormatting?i.i(r.isNullOrUndefined)(S)?this.emptyCellTextContent:S.toString():F,n[a][d]=this.valueContent[h][d]={axis:"value",actualText:m,indexObject:this.isDrillThrough?this.rawIndexObject:{},rowHeaders:"grand sum"===e[s].type?"":e[s].valueSort.levelName,columnHeaders:"grand sum"===t[l].type?"":t[l].valueSort.levelName,formattedText:F,value:S,hierarchyName:t[l].hierarchyName,actualValue:y,rowIndex:a,colIndex:d,isSum:P,isGrandSum:E,showSubTotals:!N},this.rawIndexObject={}},e.prototype.getCellSet=function(e){for(var t=[],i=Object.keys(e),r=0,a=i;r<a.length;r++){var n=a[r];this.data[parseInt(n,10)]&&t.push(this.data[parseInt(n,10)])}return t},e.prototype.updateValueMembers=function(e,t,a,o,s,l,d){var h=a&&!i.i(r.isNullOrUndefined)(a.levelName)?a.levelName.toString():void 0,p=a&&!i.i(r.isNullOrUndefined)(a.uniqueName)?a.uniqueName.toString():void 0;if(e)for(var u=0;u<l;u++){var c=this.dataSourceSettings.values[u],g=c.caption?c.caption:c.name,m={axis:this.valueAxis?"row":"column",rowIndex:this.valueAxis?0:t&&d<=t.rowIndex?t.rowIndex+1:d,actualText:c.name,formattedText:g,level:0,valueSort:{},members:[],type:this.valueAxis?"value":t?t.type:null,index:!this.valueAxis&&t?t.index:null,indexObject:!this.valueAxis&&t?t.indexObject:null};s.length>0&&(m.showSubTotals=c.showSubTotals);var f=m.valueSort;f.axis=this.valueAxis?void 0:c.name,f[(h?h+this.valueSortSettings.headerDelimiter:"")+g]=1,f[(p?p+this.valueSortSettings.headerDelimiter:"")+c.name]=1,f.levelName=(h?h+this.valueSortSettings.headerDelimiter:"")+g,f.uniqueName=(p?p+this.valueSortSettings.headerDelimiter:"")+c.name,o.push(m),this.updateValueMembers(!1,t,f,m.members,s,l,d+1)}else for(var v=0,S=s.length;v<S;v++){var y=n.a.frameHeaderWithKeys(s[v]);y.members=[],y.rowIndex=this.valueAxis?y.rowIndex:d<0?0:d;var b={};b.axis=y.valueSort.axis,b[(h?h+this.valueSortSettings.headerDelimiter:"")+y.formattedText]=1,b[(p?p+this.valueSortSettings.headerDelimiter:"")+y.actualText]=1,b.levelName=(h?h+this.valueSortSettings.headerDelimiter:"")+y.formattedText,b.uniqueName=(p?p+this.valueSortSettings.headerDelimiter:"")+y.actualText,y.hierarchyName=y.valueSort.uniqueName,y.valueSort=b;var C=b.axis+this.valueSortSettings.headerDelimiter+b.levelName,x=this.fieldList[b.axis];y.isDrilled&&((this.isExpandAll||x.expandAll)&&this.fieldDrillCollection[C]||!this.isExpandAll&&!x.expandAll&&!this.fieldDrillCollection[C])&&(y.isDrilled=!1),o.push(y),y.isDrilled&&s[v].members.length>0?(this.valueAxis&&d<this.measureIndex&&this.measureIndex!==d+1&&(!s[v].hasChild||(i.i(r.isNullOrUndefined)(s[v].showSubTotals)||s[v].showSubTotals)&&this.dataSourceSettings.showSubTotals&&this.dataSourceSettings.showRowSubTotals)&&this.updateValueMembers(!0,y,b,o[o.length-1].members,[],l,d),this.updateValueMembers(this.measureIndex===d+1,y,b,o[o.length-1].members,s[v].members,l,d+1),!this.valueAxis&&d<this.measureIndex&&this.measureIndex!==d+1&&(!s[v].hasChild||(i.i(r.isNullOrUndefined)(s[v].showSubTotals)||s[v].showSubTotals)&&this.dataSourceSettings.showSubTotals&&this.dataSourceSettings.showColumnSubTotals)&&this.updateValueMembers(!0,y,b,o[o.length-1].members,[],l,d)):d<this.measureIndex&&this.updateValueMembers(!0,y,b,o[o.length-1].members,[],l,d)}},e.prototype.reArrangeValueMember=function(e){for(var t=[],i=0,r=e;i<r.length;i++){var a=r[i];this.valueAxisFields[a.actualText]&&(t[t.length]=a)}return t.concat(e).slice(0,e.length)},e.prototype.frameDefinedHeaderData=function(e,t,a,o,s,l){for(var d=0,h=e.length;d<h;d++){var p=!0;!(e[d].members.length>0)||(i.i(r.isNullOrUndefined)(e[d].showSubTotals)||e[d].showSubTotals)&&this.dataSourceSettings.showSubTotals&&this.dataSourceSettings.showColumnSubTotals||(p=!1);var u=this.measureIndex<o&&p?1:this.measureIndex>o&&e[d].members.length>0||this.measureIndex!==o+1||!e[d].isDrilled?this.measureIndex===o&&0!==this.measureIndex&&p?1:this.measureIndex>o&&p&&e[d].valueSort&&e[d].valueSort.axis&&this.measureNames[e[d].valueSort.axis.toString()]?1:0:0!==this.measureIndex&&p?1:0;if(e[d].members.length){var c=void 0,g=e[d].members;this.showSubTotalsAtTop?o+1<this.measureIndex&&p?(c=s,g=this.reArrangeValueMember(g)):c=s+u:c=s,this.frameDefinedHeaderData(g,t,a,o+1,c,l)}var m=this.measureIndex>o&&e[d].valueSort&&e[d].valueSort.axis&&this.measureNames[e[d].valueSort.axis.toString()]?this.measureIndex:o;s=this.showSubTotalsAtTop?s+1:t.length+u,t[s-1]||(t[s-1]=n.a.frameHeaderWithKeys(e[d])),e[d].colIndex=s,a[m]?a[m][s]=this.headerContent[m][s]=n.a.frameHeaderWithKeys(e[d]):(a[m]=[],this.headerContent[m]={},a[m][s]=this.headerContent[m][s]=n.a.frameHeaderWithKeys(e[d])),this.isPagingOrVirtualizationEnabled||this.showSubTotalsAtTop&&0===u||t[s-1]&&(t[s-1].members=[]),this.showSubTotalsAtTop&&(s=t.length,d+1===h&&0===e[d].level&&(this.reformAxisCount=t.length+1))}},e.prototype.getHeaderData=function(e,t,a,o,s,l,d,h,p){if(!this.valueAxis&&!this.isLastHeaderHasMeasures){var u=[];if(this.dataSourceSettings.showGrandTotals&&this.dataSourceSettings.showColumnGrandTotals&&"grand sum"===s[s.length-1].type)this.updateValueMembers(0===this.measureIndex&&s.length>1,null,null,u,s.slice(0,s.length-1),p,0),this.updateValueMembers(!1,null,null,u,s.slice(s.length-1,s.length),p,-1);else if("Top"===this.dataSourceSettings.grandTotalsPosition&&this.dataSourceSettings.showGrandTotals&&0===this.measureIndex)this.updateValueMembers(!1,null,null,u,s.slice(0,1),p,-1),this.updateValueMembers(0===this.measureIndex&&s.length>1,null,null,u,s.slice(1,s.length),p,0);else{var c=0===t.length&&1===s.length&&"grand sum"===s[0].type;this.updateValueMembers(!c&&0===this.measureIndex,null,null,u,s,p,c?-1:0)}if(this.getAggregatedHeaders(e,t,this.rMembers,u,a),this.selectedHeaders.values.length>0)for(var g=this.selectedHeaders.selectedHeader.length,m=0;m<g;m++){var f=this.selectedHeaders.selectedHeader[m];if("column"===f.axis)if(f.uniqueName===f.value)this.selectedHeaders.selectedHeader.splice(m,1),m--,g--;else if("Grand Total"===f.uniqueName)for(var v=f.aggregateHeaders.length,S=0;S<v;S++)if(f.aggregateHeaders[S]&&f.aggregateHeaders[S].members.length>0)for(var y=0,b=f.aggregateHeaders[S].members;y<b.length;y++){var C=b[y];C.actualText===f.value&&(f.aggregateHeaders[S]=C,"grand sum"===C.type&&(f.uniqueName=C.valueSort.levelName))}}return void this.frameDefinedHeaderData(u,l,d,0,this.showSubTotalsAtTop?0:1,p)}if(0===o.length&&this.valueAxis&&(this.isMultiMeasures||this.dataSourceSettings.alwaysShowValueHeader)&&this.dataSourceSettings.values.length>0){if(this.dataSourceSettings.showGrandTotals&&this.dataSourceSettings.showRowGrandTotals&&"grand sum"===this.rMembers[this.rMembers.length-1].type)this.updateValueMembers(0===this.measureIndex&&this.rMembers.length>1,null,null,o,this.rMembers.slice(0,this.rMembers.length-1),this.dataSourceSettings.values.length,0),this.updateValueMembers(!1,null,null,o,this.rMembers.slice(this.rMembers.length-1,this.rMembers.length),this.dataSourceSettings.values.length,-1);else if("Top"===this.dataSourceSettings.grandTotalsPosition&&this.dataSourceSettings.showGrandTotals&&0===this.measureIndex)this.updateValueMembers(!1,null,null,o,this.rMembers.slice(0,1),this.dataSourceSettings.values.length,-1),this.updateValueMembers(0===this.measureIndex&&this.rMembers.length>1,null,null,o,this.rMembers.slice(1,this.rMembers.length),this.dataSourceSettings.values.length,0);else{var x=0===e.length&&1===this.rMembers.length&&"grand sum"===this.rMembers[0].type;this.updateValueMembers(!x&&0===this.measureIndex,null,null,o,this.rMembers,this.dataSourceSettings.values.length,x?-1:0)}if(this.getAggregatedHeaders(e,t,o,s,a),this.selectedHeaders.values.length>0)for(var g=this.selectedHeaders.selectedHeader.length,m=0;m<g;m++){var f=this.selectedHeaders.selectedHeader[m];if("row"===f.axis)for(var w=f.aggregateHeaders.length,S=0;S<w;S++)if(f.aggregateHeaders[S].actualText===f.value)if(-1!==f.aggregateHeaders[S].valueSort.levelName.indexOf(f.uniqueName))f.uniqueName=f.aggregateHeaders[S].valueSort.levelName,f.aggregateHeaders.splice(S,1),S--,w--;else for(var T=f.aggregateHeaders[S].members.length,M=0;M<T;M++){var C=f.aggregateHeaders[S].members[M];if("value"!==C.type&&C.level===f.aggregateHeaders[S].level){var _=i.i(r.extend)([],f.aggregateHeaders[S].members,null,!0);f.aggregateHeaders=[].concat(f.aggregateHeaders,_,f.aggregateHeaders.splice(S)),f.aggregateHeaders.splice(_.length+S,1),S=_.length+S-1,w=f.aggregateHeaders.length}}else if(f.aggregateHeaders[S].actualText!==f.value&&f.aggregateHeaders[S].members.length>0)for(var T=f.aggregateHeaders[S].members.length,M=0;M<T;M++){var C=f.aggregateHeaders[S].members[M];if(C.actualText===f.value){f.uniqueName===f.aggregateHeaders[S].valueSort.levelName&&(f.uniqueName=C.valueSort.levelName),f.aggregateHeaders[S].members.splice(M,1),f.aggregateHeaders[S]=C;break}}}}for(var D=s.length,O=this.dataSourceSettings.columns.length,P=this.valueSortSettings.headerText,E=0;E<D;E++){var N=!i.i(r.isNullOrUndefined)(s[E].showSubTotals)&&!s[E].showSubTotals;s[E].members.length&&this.getHeaderData(e,t,a,o,s[E].members,l,d,this.showSubTotalsAtTop&&!N?h+1:h,p);var F=!0;h=this.showSubTotalsAtTop?h:l.length,!N&&this.dataSourceSettings.showSubTotals&&this.dataSourceSettings.showColumnSubTotals?l[h]=n.a.frameHeaderWithKeys(s[E]):(s[E].members.length>0?(this.removeCount++,F=!1):l[this.showSubTotalsAtTop?h:l.length]=n.a.frameHeaderWithKeys(s[E]),h=this.showSubTotalsAtTop?h:l.length-1);var I=s[E].level;s[E].rowIndex=I;var L=h*p+(this.showSubTotalsAtTop?1:p);s[E].colIndex=L,d[I]?d[I][L]=this.headerContent[I][L]=n.a.frameHeaderWithKeys(s[E]):(d[I]=[],this.headerContent[I]={},d[I][L]=this.headerContent[I][L]=n.a.frameHeaderWithKeys(s[E]));var A=0===this.dataSourceSettings.columns.length&&1===this.dataSourceSettings.values.length;if((this.isMultiMeasures||this.dataSourceSettings.alwaysShowValueHeader||A)&&!this.valueAxis&&F)for(var R=0;R<p;R++){var k=this.dataSourceSettings.values[R].caption?this.dataSourceSettings.values[R].caption:this.dataSourceSettings.values[R].name,j={axis:"column",actualText:this.dataSourceSettings.values[R].name,formattedText:k,level:0,valueSort:{},colIndex:h*p+1+R,rowIndex:O};d[O]?d[O][h*p+1+R]=this.headerContent[O][h*p+1+R]=j:(d[O]=[],this.headerContent[O]={},d[O][h*p+1+R]=this.headerContent[O][h*p+1+R]=j);var H=d[O][h*p+1+R].valueSort;H[s[E].valueSort.levelName+this.valueSortSettings.headerDelimiter+k]=1,H.levelName=s[E].valueSort.levelName+this.valueSortSettings.headerDelimiter+k,H[s[E].valueSort.uniqueName+this.valueSortSettings.headerDelimiter+this.dataSourceSettings.values[R].name]=1,H.uniqueName=s[E].valueSort.uniqueName+this.valueSortSettings.headerDelimiter+this.dataSourceSettings.values[R].name,H&&H[P]&&(this.valueSortSettings.columnIndex=h*p+1+R)}else s[E].valueSort&&s[E].valueSort[P]&&(this.valueSortSettings.columnIndex=h*p+1);this.isPagingOrVirtualizationEnabled||(l[h].members=[]),this.showSubTotalsAtTop&&(h=l.length,0===s[E].level&&E+1===D&&(this.reformAxisCount=l.length*p+1))}},e.prototype.getAggregateValue=function(e,t,a,n,o){var s=0,l=0,d=0,h=!0,p=!1;switch(n.toLowerCase()){case"median":for(var u=[],c=0;void 0!==e[s];)void 0!==t[e[s]]&&(p=!0,this.rawIndexObject[e[s]]=e[s],i.i(r.isNullOrUndefined)(this.valueMatrix[e[s]][a])||u.push(this.valueMatrix[e[s]][a])),s++;var g=u.length;g>0&&(u.sort(function(e,t){return e-t}),g%2==0?(c=g/2<=1?0:g/2-1,l=(u[c]+u[c+1])/2):(c=(g+1)/2<=1?0:(g+1)/2-1,l=u[c]));break;case"count":for(;void 0!==e[s];)void 0!==t[e[s]]&&(p=!0,this.rawIndexObject[e[s]]=e[s],l+=i.i(r.isNullOrUndefined)(this.valueMatrix[e[s]][a])?0:this.allowDataCompression?this.valueMatrix[e[s]][a]:1),s++;break;case"distinctcount":for(var m=[];void 0!==e[s];){if(void 0!==t[e[s]]){this.rawIndexObject[e[s]]=e[s],p=!0;var f=this.data[e[s]][this.fieldKeys[this.fields[a]]];if(!i.i(r.isNullOrUndefined)(f)){var v=f.toString();(0===m.length||m.length>0&&-1===m.indexOf(v))&&(l+=this.allowDataCompression&&"number"==typeof f?f:1,m.push(v))}}s++}break;case"product":for(;void 0!==e[s];){if(void 0!==t[e[s]]){this.rawIndexObject[e[s]]=e[s],p=!0;var v=this.valueMatrix[e[s]][a];i.i(r.isNullOrUndefined)(v)?h&&(l=v):(l=h||i.i(r.isNullOrUndefined)(l)?1:l,l*=v),h=!1}s++}break;case"populationstdev":case"samplestdev":case"populationvar":case"samplevar":for(var S=0,f=0,y=[],b=0,C=0,x=0;void 0!==e[s];){if(void 0!==t[e[s]]){p=!0,this.rawIndexObject[e[s]]=e[s];var v=this.valueMatrix[e[s]][a];i.i(r.isNullOrUndefined)(v)||(f+=v,y.push(v),S++)}s++}if(S>0){b=f/S;for(var w=0,T=y;w<T.length;w++){var M=T[w];x+=Math.pow(M-b,2)}C=-1!==["populationstdev","samplestdev"].indexOf(n.toLowerCase())?Math.sqrt(x/("populationstdev"===n.toLowerCase()?S:S-1)):x/("populationvar"===n.toLowerCase()?S:S-1),l=0===C?NaN:C}else l=f;break;case"min":var _=!0;for(l=void 0;void 0!==e[s];)void 0!==t[e[s]]&&void 0!==this.valueMatrix[e[s]][a]&&(p=!0,this.rawIndexObject[e[s]]=e[s],i.i(r.isNullOrUndefined)(l)&&i.i(r.isNullOrUndefined)(this.valueMatrix[e[s]][a])?l=this.valueMatrix[e[s]][a]:_?(l=this.valueMatrix[e[s]][a],_=!1):l=this.valueMatrix[e[s]][a]<l?this.valueMatrix[e[s]][a]:l),s++;break;case"max":for(var D=!0;void 0!==e[s];)void 0!==t[e[s]]&&void 0!==this.valueMatrix[e[s]][a]&&(p=!0,this.rawIndexObject[e[s]]=e[s],D?(l=this.valueMatrix[e[s]][a],D=!1):l=this.valueMatrix[e[s]][a]>l?this.valueMatrix[e[s]][a]:l),s++;break;case"calculatedfield":p=!0;var O=this.calculatedFields[this.fields[a]],P=O.formula,E={};if(this.calculatedFormulas[O.name])for(var N=this.calculatedFormulas[O.name],g=0,F=N.length;g<F;g++){var I=N[g],L=E[I.formula];if(void 0===L){var A=I.type;L=this.getAggregateValue(e,t,I.index,A,!1),E[I.formula]=L}P=P.replace(I.formula,String(L))}l=this.evaluate(P),l=l===1/0||l===-1/0?1/0:void 0===l||isNaN(l)?void 0:JSON.parse(String(l));break;default:for(l=void 0;void 0!==e[s];){if(void 0!==t[e[s]]){p=!0,o||(this.rawIndexObject[e[s]]=e[s]);var v=this.valueMatrix[e[s]][a];i.i(r.isNullOrUndefined)(l)&&i.i(r.isNullOrUndefined)(v)?l=v:(i.i(r.isNullOrUndefined)(l)&&(l=0),l+=i.i(r.isNullOrUndefined)(v)?0:v),i.i(r.isNullOrUndefined)(v)||d++}s++}}return n&&"avg"===n.toLowerCase()&&0!==l&&!i.i(r.isNullOrUndefined)(l)?l/d:p?l:void 0},e.prototype.evaluate=function(e){return Function('"use strict";return ('+e+")")()},e.prototype.getFormattedValue=function(e,t){var a=null===e?this.localeObj?this.localeObj.getConstant("null"):String(e):void 0===e?this.localeObj?t in this.groupingFields?this.localeObj.getConstant("groupOutOfRange"):this.localeObj.getConstant("undefined"):String(e):e,n={formattedText:a.toString(),actualText:a,dateText:a};if(this.formatFields[t]&&this.formatFields[t].format&&!i.i(r.isNullOrUndefined)(e))try{var o=this.formatFields[t].properties?this.formatFields[t].properties:this.formatFields[t],s=i.i(r.extend)({},o,null,!0);if(delete s.name,!s.minimumSignificantDigits&&s.minimumSignificantDigits<1&&delete s.minimumSignificantDigits,!s.maximumSignificantDigits&&s.maximumSignificantDigits<1&&delete s.maximumSignificantDigits,s.type)n.formattedText=this.dateFormatFunction[t].exactFormat(new Date(e)),n.actualText=e;else{if(delete s.type,s.format&&!this.formatRegex.test(s.format)){var l=s.format.match(/^(('[^']+'|''|[^*#@0,.])*)(\*.)?((([0#,]*[0,]*[0#]*)(\.[0#]*)?)|([#,]*@+#*))(E\+?0+)?(('[^']+'|''|[^*#@0,.E])*)$/),d=!0;if(i.i(r.isNullOrUndefined)(s.minimumFractionDigits)&&delete s.minimumFractionDigits,i.i(r.isNullOrUndefined)(s.maximumFractionDigits)&&delete s.maximumFractionDigits,i.i(r.isNullOrUndefined)(s.minimumIntegerDigits)&&delete s.minimumIntegerDigits,i.i(r.isNullOrUndefined)(l)&&(l=s.format.match(/^(('[^']+'|''|[^*@0])*)(\*.)?((([0#,]*[0,]*[0#]*)(\.[0#]*)?)|([#,]*@+#*))(E\+?0+)?(('[^']+'|''|[^*#@,.E])*)$/),delete s.useGrouping,d=!1),l&&l.length>5){var h=l[6];d&&(s.useGrouping=-1!==h.indexOf(","))}}n.formattedText=this.globalize.formatNumber(isNaN(Number(e))?e:Number(e),s),n.actualText=isNaN(Number(e))?e:Number(e),n.dateText=isNaN(Number(e))?e:Number(e)}"None"!==this.fieldList[t].sort&&s.type&&["date","dateTime","time"].indexOf(this.formatFields[t].type)>-1&&(n.dateText=this.dateFormatFunction[t].fullFormat(new Date(e))),this.fieldList[t].isCustomField&&(n.formattedText="NaN"===n.formattedText?a.toString():n.formattedText,n.dateText="NaN"===n.dateText?a.toString():n.dateText)}catch(e){if(!this.fieldList[t].isCustomField)throw e}finally{this.fieldList[t].isCustomField&&(n.formattedText=i.i(r.isNullOrUndefined)(n.formattedText)||"NaN"===n.formattedText?a.toString():n.formattedText,n.dateText=i.i(r.isNullOrUndefined)(n.dateText)||"NaN"===n.dateText?a.toString():n.dateText)}return n},e.prototype.powerFunction=function(e){if(e.indexOf("^")>-1){for(var t=[];e.indexOf("(")>-1;)e=e.replace(/(\([^\(\)]*\))/g,function(e,i){return t.push(i),"~"+(t.length-1)});for(t.push(e),e="~"+(t.length-1);e.indexOf("~")>-1;)e=e.replace(new RegExp("~(\\d+)","g"),function(e,i){return t[i].replace(/(\w*)\^(\w*)/g,"Math.pow($1,$2)")})}return e},e}()},function(e,t,i){"use strict";i.d(t,"a",function(){return r});var r=function(){function e(){}return e.getClonedPivotValues=function(e){for(var t=[],i=0;i<e.length;i++)if(e[i]){t[i]=[];for(var r=0;r<e[i].length;r++)e[i][r]&&(t[i][r]=this.getClonedPivotValueObj(e[i][r]))}return t},e.getClonedPivotValueObj=function(e){var t=0,i={};if(null!==e&&void 0!==e)for(var r=Object.keys(e);t<r.length;)i[r[t]]=e[r[t]],t++;else i=e;return i},e.isContainCommonElements=function(e,t){for(var i=0,r=e.length;i<r;i++)for(var a=0,n=t.length;a<n;a++)if(t[a]===e[i])return!0;return!1},e}()},function(e,t,i){"use strict";i.d(t,"a",function(){return s});var r=i(0),a=(i.n(r),i(3)),n=i(23),o=i(2),s=function(){function e(){this.fieldList={},this.columnCount=0,this.rowCount=0,this.colFirstLvl=0,this.rowFirstLvl=0,this.pageColStartPos=0,this.enableSort=!1,this.enableValueSorting=!1,this.dataFields={},this.formatFields={},this.filterMembers={},this.drilledSets={},this.aggregatedValueMatrix=[],this.mappingFields={},this.customRegex=/^(('[^']+'|''|[^*#@0,.])*)(\*.)?((([0#,]*[0,]*[0#]*)(\.[0#]*)?)|([#,]*@+#*))(E\+?0+)?(('[^']+'|''|[^*#@0,.E])*)$/,this.formatRegex=/(^[ncpae]{1})([0-1]?[0-9]|20)?$/i,this.pivotValues=[],this.valueContent=[],this.headerContent=[],this.rowStartPos=0,this.pageRowStartPos=0,this.tupColumnInfo=[],this.tupRowInfo=[],this.gridJSON="",this.namedSetsPosition={},this.colDepth=0,this.totalCollection=[],this.parentObjCollection={},this.curDrillEndPos=-1,this.headerGrouping={},this.lastLevel=[],this.showRowSubTotals=!0,this.showColumnSubTotals=!0,this.hideRowTotalsObject={},this.hideColumnTotalsObject={},this.sortObject={},this.isColDrill=!1}return e.prototype.renderEngine=function(e,t,i){this.isEmptyData=!1,this.getHeaderSortInfo=i,this.mdxQuery="",this.isMeasureAvail=!1,this.allowMemberFilter=!1,this.allowLabelFilter=!1,this.allowValueFilter=!1,this.isMondrian=!1,this.aggregatedValueMatrix=[],this.measureReportItems=[],this.calcChildMembers=[],this.selectedItems=[],this.savedFieldList=void 0,this.savedFieldListData=void 0,this.formatFields={},this.filterMembers={},this.dataFields={},this.valueAxis="",this.columnCount=0,this.rowCount=0,this.colFirstLvl=0,this.rowFirstLvl=0,this.pageColStartPos=0,this.enableValueSorting=!1,this.sortObject={},this.globalize=new r.Internationalization,this.locale=this.globalize.getCulture(),this.localeObj=t?t.localeObj:void 0,this.enableValueSorting=!!t&&t.enableValueSorting,e.url&&(this.dataSourceSettings=e,this.valueAxis="row"===e.valueAxis?"row":"column",this.getAxisFields(),this.formats=e.formatSettings?e.formatSettings:[],this.enableSort=void 0===e.enableSorting||e.enableSorting,this.valueSortSettings=e.valueSortSettings?e.valueSortSettings:void 0,this.filterSettings=e.filterSettings?e.filterSettings:[],this.sortSettings=e.sortSettings?e.sortSettings:[],this.allowMemberFilter=!!e.allowMemberFilter,this.allowLabelFilter=!!e.allowLabelFilter,this.allowValueFilter=!!e.allowValueFilter,this.drilledMembers=e.drilledMembers?this.updateDrilledItems(e.drilledMembers):[],this.calculatedFieldSettings=e.calculatedFieldSettings?e.calculatedFieldSettings:[],this.emptyCellTextContent=e.emptyCellsTextContent?e.emptyCellsTextContent:"",this.pageSettings=t?t.pageSettings?t.pageSettings:this.pageSettings:void 0,this.isPaging=!(!this.pageSettings||!t.enablePaging&&!t.enableVirtualization),this.frameSortObject(),this.getFormattedFields(this.formats),this.savedFieldList=t?t.savedFieldList:void 0,this.savedFieldListData=t?t.savedFieldListData:void 0,this.fieldListData=[],this.fieldListObj={},this.setNamedSetsPosition(),this.savedFieldList&&this.savedFieldListData?this.updateFieldlist(!0):this.getFieldList(e),this.loadCalculatedMemberElements(this.calculatedFieldSettings),this.measureReportItems=[],this.updateFilterItems(this.filterSettings),this.generateGridData(e))},e.prototype.generateGridData=function(e,t){var i=!(!t||"navPaging"!==t||!this.isPaging||void 0===this.pageSettings);this.rows.length>0||this.columns.length>0||this.values.length>0||this.filters.length>0?n.a.getCellSets(e,this,i):(n.a.getCellSets(e,this,!0,void 0,!0),this.generateEngine(void 0,void 0,{dataSourceSettings:e,action:"loadTableElements"}))},e.prototype.generatePagingData=function(e,t,i){var r=[].slice.call(e.querySelectorAll("Axes, CellData")),a=r[1]?r[1].querySelectorAll("FmtValue"):null;a&&a.length>0&&(this.columnCount=Number(a[0].textContent),this.rowCount=Number(a[1].textContent));var o=i.dataSourceSettings;n.a.getCellSets(o,this,!0)},e.prototype.scrollPage=function(){n.a.getCellSets(this.dataSourceSettings,this,!0)},e.prototype.generateEngine=function(e,t,a){"down"!==a.action&&(this.pivotValues=[],this.valueContent=[],this.headerContent=[],this.colDepth=0,this.tupColumnInfo=[],this.tupRowInfo=[],this.colMeasures={},this.colMeasurePos=void 0,this.rowMeasurePos=void 0,this.rowStartPos=-1),this.xmlDoc=e?e.cloneNode(!0):void 0,this.request=t,this.customArgs=a,this.totalCollection=[],this.parentObjCollection={},this.curDrillEndPos=-1,this.onDemandDrillEngine=[],this.getSubTotalsVisibility(),this.xmlaCellSet=e?e.querySelectorAll("Axes, CellData"):void 0;var n=this.xmlaCellSet&&this.xmlaCellSet.length>0?[].slice.call(this.xmlaCellSet[0].querySelectorAll('Axis[name|="Axis0"] Tuple')):[],o=this.xmlaCellSet&&this.xmlaCellSet.length>0?[].slice.call(this.xmlaCellSet[0].querySelectorAll('Axis[name|="Axis1"] Tuple')):[],s=this.xmlaCellSet&&this.xmlaCellSet.length>1?[].slice.call(this.xmlaCellSet[1].querySelectorAll("Cell")):[];if(this.drilledMembers.length>0){var l=this.getMeasureInfo(),d=void 0;d=this.frameMeasureOrder(l,"column",n,s,n.length),n=d.orderedHeaderTuples,s=d.orderedValueTuples,d=this.frameMeasureOrder(l,"row",o,s,n.length),o=d.orderedHeaderTuples,s=d.orderedValueTuples}if("down"===a.action&&this.updateTupCollection("row"===a.drillInfo.axis?o.length:n.length),"down"===a.action&&"column"!==a.drillInfo.axis||(this.olapValueAxis=i.i(r.isNullOrUndefined)(this.getValueAxis(void 0,void 0))?"column":"row",this.frameColumnHeader(n),this.isPaging||this.performColumnSorting()),"down"===a.action&&"row"!==a.drillInfo.axis||(this.frameRowHeader(o),this.isPaging||this.performRowSorting()),this.frameValues(s,n.length),this.performColumnSpanning(),!this.isPaging&&this.enableSort)for(var h=0;h<this.headerContent.length;h++)this.headerContent[h]=this.pivotValues[h];this.isEngineUpdated=!0,this.isEmptyData=0===n.length},e.prototype.getSubTotalsVisibility=function(){this.showRowSubTotals=this.dataSourceSettings.showRowSubTotals&&this.dataSourceSettings.showSubTotals,this.showColumnSubTotals=this.dataSourceSettings.showColumnSubTotals&&this.dataSourceSettings.showSubTotals,this.showSubTotalsAtTop=this.showColumnSubTotals&&"Top"===this.dataSourceSettings.subTotalsPosition,this.showSubTotalsAtBottom=this.showRowSubTotals&&"Bottom"===this.dataSourceSettings.subTotalsPosition,this.hideRowTotalsObject={},this.hideColumnTotalsObject={};var e=1;do{if(1===e){if(this.showColumnSubTotals)for(var t=0;t<this.dataSourceSettings.columns.length;t++)!1===this.dataSourceSettings.columns[t].showSubTotals&&(this.hideColumnTotalsObject[this.dataSourceSettings.columns[t].name]=t)}else if(this.showRowSubTotals)for(var i=0;i<this.dataSourceSettings.rows.length;i++)!1===this.dataSourceSettings.rows[i].showSubTotals&&(this.hideRowTotalsObject[this.dataSourceSettings.rows[i].name]=i);e++}while(e<3)},e.prototype.frameRowHeader=function(e){var t=this;this.headerGrouping={},this.lastLevel=[];var i=!0,r=this.pivotValues.length,a=[],n=[];"down"!==this.customArgs.action?(a=this.pivotValues,n=this.valueContent):r=this.customArgs.drillInfo.currentCell.rowIndex+1,this.rowStartPos=this.rowStartPos>0?this.rowStartPos:r;for(var o,s,l,d=0,h=[],p={},u=[],c=!1,g=-1,m=-1,f=[],v=[{axis:"row",colIndex:0,formattedText:"Grand Total",hasChild:!1,level:-1,rowIndex:0,index:[],type:"grand sum",ordinal:0,colSpan:1,rowSpan:1,memberType:2,isDrilled:!1,valueSort:{"Grand Total":1,levelName:"Grand Total"}}],S=[],y=this.customArgs.drillInfo&&"row"===this.customArgs.drillInfo.axis?this.customArgs.drillInfo.currentCell.ordinal+1:0;d<e.length;){var b=e[d].querySelectorAll("Member");S=this.frameTupCollection(b,S,d+y,this.tupRowInfo,this.showRowSubTotals,this.hideRowTotalsObject,"row"),d++}d=0;var C,x=e.length;if("down"===this.customArgs.action){var w=this.customArgs.drillInfo.currentCell.ordinal+1;d=w,x+=w,s=this.tupRowInfo[w-1].allCount,o=this.tupRowInfo[w-1].allStartPos,C=this.tupRowInfo[w-1]}for(var T=d,M=0,_=!1,D=[];d<x;){var b=e["down"===this.customArgs.action?d-(this.customArgs.drillInfo.currentCell.ordinal+1):d].querySelectorAll("Member"),O=0,P=void 0,E=this.tupRowInfo[d].allCount,N=this.tupRowInfo[d].allStartPos,F=this.tupRowInfo[d].measure,I=this.tupRowInfo[d].typeCollection,L=this.tupRowInfo[d].drillStartPos,A=this.tupRowInfo[d].startDrillUniquename;if(0===d||d===T){for(var R="down"===this.customArgs.action?this.tupRowInfo[0].members:b;O<R.length;)"1"===R[O].querySelector("MEMBER_TYPE").textContent&&0===Number(R[O].querySelector("LNum").textContent)?f[O]=0:f[O]=Number(R[O].querySelector("LNum").textContent),"1"===R[O].querySelector("MEMBER_TYPE").textContent?(p[O]=0,g=-1===g?O:g,m=O):(p[O]=1,c="3"!==R[O].querySelector("MEMBER_TYPE").textContent||c),O++;l=I.indexOf("3")}if(O=0,0===d&&(b.length>E+(F?1:0)||1===b.length&&F)&&v.pop(),0===d&&this.isPaging?0===v.length:!c||E===s||N!==o||1===b.length&&F){var k=this.checkAttributeDrill(this.tupRowInfo[d].drillInfo,"rows"),j=!(L>-1)||(!(E>0)||(k||N>L));j=C&&j&&L>-1?C.startDrillUniquename!==A||!(m>C.measurePosition||C.measureName===this.tupRowInfo[d].measureName||N!==L+1&&this.tupRowInfo[d].measurePosition!==L+1):j;var H=!(g>-1&&E>0)||(k||N>m);if(_="Top"===this.dataSourceSettings.grandTotalsPosition&&0===this.olapRowValueIndex&&"row"===this.olapValueAxis&&this.dataSourceSettings.showGrandTotals&&this.dataSourceSettings.showRowGrandTotals&&("row"!==this.olapValueAxis||this.dataSourceSettings.rows.length>1),_&&1===v.length&&(v=this.frameGrandTotalValues(e,v,I,l)),b.length===E+(F?1:0)&&F&&!_){var q="Grand Total."+b[l].querySelector("Caption").textContent,V="3"===I[l]&&this.dataFields[this.getUniqueName(b[l].querySelector("UName").textContent)]&&this.dataFields[this.getUniqueName(b[l].querySelector("UName").textContent)].caption?this.dataFields[this.getUniqueName(b[l].querySelector("UName").textContent)].caption:b[l].querySelector("Caption").textContent;v=this.frameGrandTotalAxisSet(v,this.getUniqueName(b[l].querySelector("UName").textContent),V,r,d,Number(I[l]),b[l].querySelector("PARENT_UNIQUE_NAME")?b[l].querySelector("PARENT_UNIQUE_NAME").textContent:void 0,b[l].querySelector("LName").textContent,b[l].getAttribute("Hierarchy"),{levelName:q,axis:b[l].getAttribute("Hierarchy")}),v[v.length-1].valueSort["Grand Total."+b[l].querySelector("Caption").textContent]=1}else if(0!==N&&(0!==l||1!==N)&&j&&H){"Top"===this.dataSourceSettings.grandTotalsPosition&&i&&this.dataSourceSettings.showGrandTotals&&("row"!==this.olapValueAxis||this.dataSourceSettings.rows.length>1)&&(this.insertRowGrandTotal(v,n,a,e,r),r=this.pivotValues.length,i=!1),C=this.tupRowInfo[d];var B=r,U=O;P={};for(var G=!1;O<b.length;){var z=b[O];if(z.querySelector("UName").textContent!==h[O]&&"2"!==I[O]&&(!(Object.keys(P).length>0?P.isDrilled&&!this.fieldList[P.hierarchy].isHierarchy:G)||"3"===I[O]&&p[O-1]&&0!==p[O+1])){var W=Number(z.querySelector("LNum").textContent)-(p[O]&&"3"!==I[O]?1:f[O]),Q=!!this.namedSetsPosition.row[O],Y=this.getUniqueName(z.querySelector("UName").textContent),K=this.getDepth(this.tupRowInfo[d],Y,Number(I[O])),q=this.getCaptionCollectionWithMeasure(this.tupRowInfo[d]);if(this.showSubTotalsAtBottom&&r>this.rowStartPos&&(B=r=this.insertRowSubTotal(a,n,D,r,W,q)),!(this.isPaging&&a[M][0]&&this.fieldList[a[M][0].hierarchy]&&this.fieldList[a[M][0].hierarchy].isHierarchy&&a[M][0].hasChild&&!a[M][0].isDrilled&&!this.rows[O].isNamedSet&&(0===this.rows[O].name.indexOf("[Measures]")||this.fieldList[z.getAttribute("Hierarchy")]&&(this.fieldList[z.getAttribute("Hierarchy")].isHierarchy||this.fieldList[z.getAttribute("Hierarchy")].hasAllMember))&&a[M][0].depth<K)){a[r]=[{axis:"row",actualText:Y,colIndex:0,formattedText:"3"===I[O]&&this.dataFields[Y]&&this.dataFields[Y].caption?this.dataFields[Y].caption:z.querySelector("Caption").textContent,hasChild:!!(this.fieldList[z.getAttribute("Hierarchy")]&&this.fieldList[z.getAttribute("Hierarchy")].isHierarchy&&O<this.rows.length-1&&!this.rows[O+1].isNamedSet&&this.rows[O+1].name.indexOf("[Measures]")<0&&this.fieldList[this.rows[O+1].name]&&this.fieldList[this.rows[O+1].name].hasAllMember)||Number(z.querySelector("CHILDREN_CARDINALITY").textContent)>0,level:W,depth:K,rowIndex:r,index:[],ordinal:d,type:"header",colSpan:1,rowSpan:1,memberType:Number(I[O]),isDrilled:!(!this.fieldList[z.getAttribute("Hierarchy")]||!this.fieldList[z.getAttribute("Hierarchy")].isHierarchy||this.isAttributeDrill(z.getAttribute("Hierarchy"),this.tupRowInfo[d].drillInfo,"rows"))||this.tupRowInfo[d].drillInfo[O].isDrilled,parentUniqueName:z.querySelector("PARENT_UNIQUE_NAME")?z.querySelector("PARENT_UNIQUE_NAME").textContent:void 0,levelUniqueName:z.querySelector("LName").textContent,hierarchy:z.getAttribute("Hierarchy"),isNamedSet:Q,valueSort:{levelName:"",axis:z.getAttribute("Hierarchy")}}],P="3"!==I[O]?a[r][0]:P,P||u.push(z.querySelector("Caption").textContent),a[r][0].valueSort.levelName=q,a[r][0].valueSort[q]=1,n[r-this.rowStartPos]={},n[r-this.rowStartPos][0]=a[r][0],F&&l>O&&(h[l]="");for(var X=O+1;X<b.length;X++)h[X]="";h[O]=z.querySelector("UName").textContent,M=3!==Number(I[O])?r:M,r++,U=O}}else"2"===I[O]?U=O:this.tupRowInfo[d].drillInfo[O].isDrilled&&0===p[O]&&(G=!0);this.tupRowInfo[d].drillInfo[O].isDrilled&&this.tupRowInfo[d].showTotals&&(this.tupRowInfo[d].showTotals=!!this.showRowSubTotals&&void 0===this.hideRowTotalsObject[this.tupRowInfo[d].drillInfo[O].hierarchy]),O++}B<r&&U>=b.length-1&&(a[r-1][0].ordinal=d,"header"===a[r-1][0].type&&delete a[r-1][0].type)}s=E,o=N}d++}this.showSubTotalsAtBottom&&D.length>0&&(D.reverse(),D.forEach(function(e){a[r]=[e],n[r-t.rowStartPos]={},n[r-t.rowStartPos][0]=a[r][0],r++})),("Top"!==this.dataSourceSettings.grandTotalsPosition||"row"===this.olapValueAxis&&1===this.dataSourceSettings.rows.length&&"Top"===this.dataSourceSettings.grandTotalsPosition||0===this.dataSourceSettings.rows.length)&&this.insertRowGrandTotal(v,n,a,e,r)},e.prototype.insertRowSubTotal=function(e,t,i,r,n,o){var s=a.a.frameHeaderWithKeys(e[r-1][0]);if(s.level<n&&"grand sum"!==s.type&&(s.isDrilled||3===s.memberType))if(3===s.memberType){for(var l=[],d=1;3===e[r-d][0].memberType;)l[l.length]=e[r-d][0],d++;if(e[r-d][0].isDrilled&&0!==l.length){for(var h=0,p=l.length;h<p;h++)l[h].formattedText=e[r-d][0].formattedText+" "+l[h].formattedText,l[h].isSum=!0,l[h].type="sum",l[h].parentUniqueName=e[r-d][0].levelUniqueName,i[i.length]=l[h];d--,r-=d}}else s.hasChild=!1,s.isDrilled=!1,s.isSum=!0,s.type="sum",s.formattedText=s.formattedText+" Total",i[Object.keys(i).length]=s;if(i.length>0)for(var u=i.length-1,c=i[u].valueSort.levelName.split(".").length,g=o.split(".").length;c>=g&&(e[r]=[i[u]],t[r-this.rowStartPos]={},t[r-this.rowStartPos][0]=e[r][0],r++,i.splice(i.length-1,1),Object.keys(i).length>0);)u--,c=i[u].valueSort.levelName.split(".").length;return r},e.prototype.insertRowGrandTotal=function(e,t,i,r,a){if(e.length>1&&3!==e[0].memberType&&(e[0].ordinal=-1),"down"!==this.customArgs.action){if(this.dataSourceSettings.showGrandTotals&&this.dataSourceSettings.showRowGrandTotals)for(var n=0;n<e.length;n++)e[n].rowIndex=a,i[a]=[e[n]],t[a-this.rowStartPos]={},t[a-this.rowStartPos][0]=i[a][0],a++}else this.updateRowEngine(i,t,r.length),this.onDemandDrillEngine=i;return e},e.prototype.getValueAxis=function(e,t){this.olapValueAxis=e,this.olapRowValueIndex=t;for(var i=0;i<this.dataSourceSettings.rows.length;i++)if("[Measures]"===this.dataSourceSettings.rows[i].name){this.olapValueAxis="row",this.olapRowValueIndex=i;break}return this.olapValueAxis},e.prototype.frameGrandTotalAxisSet=function(e,t,i,r,a,n,o,s,l,d){return e.push({axis:"row",actualText:t,colIndex:0,formattedText:i,hasChild:!1,level:-1,rowIndex:r,index:[],ordinal:a,colSpan:1,rowSpan:1,memberType:n,isDrilled:!1,parentUniqueName:o,levelUniqueName:s,hierarchy:l,valueSort:d}),e},e.prototype.getDepth=function(e,t,i){var r=e.uNameCollection.indexOf(t),a=e.uNameCollection.substring(0,r)+(3===i?"":t),n=a.split("::[").map(function(e){return"["===e[0]?e:"["+e});3===i&&this.rowMeasurePos===n.length&&n.push(t);for(var o=-1,s=0;s<n.length;s++){o+=n[s].split("~~").length}return o},e.prototype.checkAttributeDrill=function(e,t){for(var i=!1,r=0;r<e.length&&!(i=this.isAttributeDrill(e[r].hierarchy,e,t));r++);return i},e.prototype.frameTupCollection=function(e,t,a,n,o,s,l){for(var d,h,p,u,c,g,m=0,f=0,v=[],S=[],y=[],b="",C="",x=!0,w=-1;m<e.length;){var T=e[m],M=Number(T.querySelector("LNum").textContent),_=T.querySelector("UName").textContent;Number(T.querySelector("MEMBER_TYPE").textContent)>3&&(T.querySelector("MEMBER_TYPE").textContent=0===_.indexOf("[Measures]")?"3":"1");var D=0===_.indexOf("[Measures]")?"3":Number(T.querySelector("MEMBER_TYPE").textContent)>3?"1":T.querySelector("MEMBER_TYPE").textContent,O=T.querySelector("Caption").textContent;this.fieldList[O]&&"CalculatedField"===this.fieldList[O].type&&(O=this.fieldList[O].caption,T.querySelector("Caption").textContent=O);var P=T.getAttribute("Hierarchy"),E=T.querySelector("PARENT_UNIQUE_NAME")?T.querySelector("PARENT_UNIQUE_NAME").textContent:"";if("2"===D?(this.isPaging||f++,p=i.i(r.isNullOrUndefined)(p)?m:p):"3"===D?(u=T,c=_,g=m,"column"===l?(this.colMeasures[_]=T,this.colMeasurePos=m):this.rowMeasurePos=m):w=s[P],"2"!==D){if(this.headerGrouping[m]){if(M>this.lastLevel[m])this.lastLevel[m]=M;else if(M<this.lastLevel[m]){for(var N=this.lastLevel[m];N>=M;)delete this.headerGrouping[m].UName[N],delete this.headerGrouping[m].Caption[N],N--;this.lastLevel[m]=M}this.headerGrouping[m].UName[M]=_,this.headerGrouping[m].Caption[M]=O}else this.lastLevel[m]=M,this.headerGrouping[m]={UName:(d={},d[M]=_,d),Caption:(h={},h[M]=O,h)};if(this.isPaging)for(var F=E;this.drilledSets[F];){var I=this.drilledSets[F].querySelector("Caption").textContent,L=Number(this.drilledSets[F].querySelector("LNum").textContent);this.headerGrouping[m].UName[L]=F,this.headerGrouping[m].Caption[L]=I,F=null===this.drilledSets[F].querySelector("PARENT_UNIQUE_NAME")?"":this.drilledSets[F].querySelector("PARENT_UNIQUE_NAME").textContent}for(var A="",R=Object.keys(this.headerGrouping[m].UName),k=0;k<R.length;k++){var j=R[k];A=0===k?this.headerGrouping[m].UName[j]:A+"~~"+this.headerGrouping[m].UName[j]}b=""===b?A:b+"::"+A;for(var H="",q=Object.keys(this.headerGrouping[m].Caption),k=0;k<q.length;k++){var j=q[k];H=0===k?this.headerGrouping[m].Caption[j]:H+"~~"+this.headerGrouping[m].Caption[j]}m!==g&&(C=""===C?H:C+"::"+H)}if(v.push(D),S.push(M),(i.i(r.isNullOrUndefined)(t[m])||t[m]<M)&&(t[m]=M),y.push({level:M,uName:_,hierarchy:P,isDrilled:!1}),n[a-1]&&"1"===n[a-1].typeCollection[m]&&y[m].level>n[a-1].drillInfo[m].level){var V=b.split(/~~|::\[/).map(function(e){return"["===e[0]?e:"["+e});V.pop();var B=V.join("~~");this.setDrillInfo(E,B,m,a,n)}m++}return w>-1&&(x="2"!==v[w+1]),n[a]={allCount:f,allStartPos:p,measure:u,measureName:c,measurePosition:g,members:e,typeCollection:v,uNameCollection:b,captionCollection:C,levelCollection:S,drillInfo:y,drillStartPos:-1,drillEndPos:-1,showTotals:!(!o&&f>0&&p>(0===g?1:0))&&x},t},e.prototype.getCaptionCollectionWithMeasure=function(e){var t=e.captionCollection;if(e.measure){var i=e.measure.querySelector("Caption").textContent,r=e.uNameCollection.split(/[~~::]+/g).indexOf(e.measureName),a=e.captionCollection.split(/[~~::]+/g);a.splice(r,0,i),t=a.join(".")}else{var a=e.captionCollection.split(/[~~::]+/g);t=a.join(".")}return t},e.prototype.setNamedSetsPosition=function(){this.namedSetsPosition={};var e=0;do{for(var t={},i=e?this.dataSourceSettings.rows:this.dataSourceSettings.columns,r=0;r<i.length;r++)i[r].isNamedSet&&(t[r]=i[r].name);this.namedSetsPosition[e?"row":"column"]=t,e++}while(e<2)},e.prototype.updateRowEngine=function(e,t,i){for(var r=this.pivotValues.length-1,a=Object.keys(e).length;r>this.customArgs.drillInfo.currentCell.rowIndex;)this.pivotValues[r+a]=this.pivotValues[r],this.pivotValues[r+a][0].ordinal+=i,this.pivotValues[r+a][0].rowIndex+=a,this.valueContent[r+a-this.rowStartPos]=this.valueContent[r-this.rowStartPos],r--;for(var n=0;n<e.length;n++)this.pivotValues[n]=e[n],this.valueContent[Number(n)-this.rowStartPos]=t[Number(n)-this.rowStartPos];this.pivotValues[this.customArgs.drillInfo.currentCell.rowIndex][0].isDrilled=!0},e.prototype.updateTupCollection=function(e){for(var t="row"===this.customArgs.drillInfo.axis?this.tupRowInfo:this.tupColumnInfo,i=t.length-1;i>this.customArgs.drillInfo.currentCell.ordinal;)t[i+e]=t[i],i--},e.prototype.frameGrandTotalValues=function(e,t,i,r){for(var a=0,n=!1;a<e.length&&!n;){var o=e["down"===this.customArgs.action?a-(this.customArgs.drillInfo.currentCell.ordinal+1):a].querySelectorAll("Member"),s=this.tupRowInfo[a].allCount,l=this.tupRowInfo[a].allStartPos,d=this.tupRowInfo[a].measure,h=this.tupRowInfo[a].typeCollection,p=this.tupRowInfo[a].drillStartPos;this.tupRowInfo[a].startDrillUniquename;if(0===a&&(o.length>s+(d?1:0)||1===o.length&&d)&&t.pop(),0!==a||!this.isPaging||0===t.length){var u=this.checkAttributeDrill(this.tupRowInfo[a].drillInfo,"rows"),c=!(p>-1)||(!(s>0)||(u||l>p));if(c=c,o.length===s+(d?1:0)&&d){var g="Grand Total."+o[r].querySelector("Caption").textContent,m="3"===h[r]&&this.dataFields[this.getUniqueName(o[r].querySelector("UName").textContent)]&&this.dataFields[this.getUniqueName(o[r].querySelector("UName").textContent)].caption?this.dataFields[this.getUniqueName(o[r].querySelector("UName").textContent)].caption:o[r].querySelector("Caption").textContent;t=this.frameGrandTotalAxisSet(t,this.getUniqueName(o[r].querySelector("UName").textContent),m,this.pivotValues.length,a,Number(h[r]),o[r].querySelector("PARENT_UNIQUE_NAME")?o[r].querySelector("PARENT_UNIQUE_NAME").textContent:void 0,o[r].querySelector("LName").textContent,o[r].getAttribute("Hierarchy"),{levelName:g,axis:o[r].getAttribute("Hierarchy")}),t[t.length-1].valueSort["Grand Total."+o[r].querySelector("Caption").textContent]=1}s,l}n=this.dataSourceSettings.values.length+1===t.length,a++}return t},e.prototype.frameColumnHeader=function(e){var t=this;this.headerGrouping={},this.lastLevel=[];for(var i=0,r=[],a=[],n=[],o=-1,s=-1,l=this.customArgs.drillInfo&&"column"===this.customArgs.drillInfo.axis?this.customArgs.drillInfo.currentCell.ordinal+1:0;i<e.length;){var d=e[i].querySelectorAll("Member");r=this.frameTupCollection(d,r,i+l,this.tupColumnInfo,this.showColumnSubTotals,this.hideColumnTotalsObject,"column"),i++}if(e.length>0)for(var d=e[0].querySelectorAll("Member"),h=0;h<d.length;)n[h]="1"===d[h].querySelector("MEMBER_TYPE").textContent&&0===Number(d[h].querySelector("LNum").textContent)?0:Number(d[h].querySelector("LNum").textContent),"1"!==d[h].querySelector("MEMBER_TYPE").textContent||!this.isPaging&&0!==Number(d[h].querySelector("LNum").textContent)?a[h]=1:(a[h]=0,o=-1===o?h:o,s=h),h++;i=0;for(var p,u=1,c={},g=!0,m=!1,f=this;i<e.length;)!function(){var l=e[i].querySelectorAll("Member"),d=f.tupColumnInfo[i].allCount,h=f.tupColumnInfo[i].allStartPos,v=f.tupColumnInfo[i].measure,S=f.tupColumnInfo[i].typeCollection,y=f.tupColumnInfo[i].drillInfo,b=f.tupColumnInfo[i].drillStartPos,C=f.tupColumnInfo[i].startDrillUniquename,x=f.tupColumnInfo[i].endDrillUniquename,w=f.tupColumnInfo[i].drillEndPos,T=f.tupColumnInfo[i].levelCollection,M="2"!==S[0]&&("3"!==S[0]||"2"!==S[1]),_=0;r.map(function(e,i){_+=0===a[i]?e+(1-(n[i]>1?1:n[i])):0===e?t.isPaging&&"2"===S[i]?0:1:e}),f.colDepth=f.colDepth>_?f.colDepth:_,0===i&&l.length>d+(v?1:0)&&(m=!0,M=d>0&&M?h>o:M);var D=!1;if("Top"===f.dataSourceSettings.grandTotalsPosition&&f.dataSourceSettings.showGrandTotals&&f.dataSourceSettings.showColumnGrandTotals){for(var O=0,P=0;P<l.length;P++)0===l[P].querySelector("Caption").textContent.indexOf("All")&&O++;D=O===("column"===f.olapValueAxis?f.dataSourceSettings.columns.length-1:f.dataSourceSettings.columns.length)}if((M||D)&&(0===d||D)){var E=[-1,-1,-1];f.tupColumnInfo[i-1]&&0===f.tupColumnInfo[i-1].allCount?E=f.levelCompare(T,f.tupColumnInfo[i-1].levelCollection):m&&p&&(E=f.levelCompare(T,p.levelCollection)),f.tupColumnInfo[i].drillStartPos<0||f.showSubTotalsAtTop?(!g&&E[0]>-1&&E[2]>-1&&(u=f.mergeTotCollection(u,d,r,n,a,h,y,E)),f.setParentCollection(l),f.frameCommonColumnLoop(l,i,u,r,a,n),f.tupColumnInfo[i].showTotals||u--,!g&&E[0]>-1&&E[2]>-1&&(u=f.mergeTotCollection(u,d,r,n,a,h,y,E)),g=!1,f.isColDrill?f.isColDrill=!1:u++):c.drillStartPos===b&&c.startDrillUniquename===C&&c.allCount!==d||(!g&&E[0]>-1&&E[2]>-1&&(u=f.mergeTotCollection(u,d,r,n,a,h,y,E),g=!0),f.setParentCollection(l),(!m||s<=b)&&(D||(f.totalCollection[f.totalCollection.length]={allCount:d,ordinal:i,members:l,drillInfo:y}),c.allCount=d,c.allStartPos=h,c.drillStartPos=b,c.startDrillUniquename=C,c.endDrillUniquename=x)),p=f.tupColumnInfo[i]}var N=f.checkAttributeDrill(f.tupColumnInfo[i].drillInfo,"columns");if(d>0&&(!m||M&&(N||s<h))&&(d===c.allCount||h!==c.allStartPos)){var F=w===b||c.endDrillUniquename===x,I=h!==c.allStartPos?c.startDrillUniquename!==C:F;b>-1&&!I||(g||(u=f.mergeTotCollection(u,d,r,n,a,h,y),g=!0),f.setParentCollection(l),m&&b>-1&&!(s<=b)||(D||(f.totalCollection[f.totalCollection.length]={allCount:d,ordinal:i,members:l,allStartPos:h,drillInfo:y}),c.allCount=d,c.allStartPos=h,c.drillStartPos=b,c.startDrillUniquename=C,c.endDrillUniquename=x))}i++}();if(this.totalCollection.length>0)if(Object.keys(this.colMeasures).length>1)this.orderTotals(u,r,a,n);else{this.totalCollection=this.totalCollection.reverse();for(var v=0,S=this.totalCollection;v<S.length;v++){var y=S[v],b=0===this.tupColumnInfo[y.ordinal].measurePosition?1===this.tupColumnInfo[y.ordinal].allStartPos:0===this.tupColumnInfo[y.ordinal].allStartPos;if(!b||this.dataSourceSettings.showGrandTotals&&this.dataSourceSettings.showColumnGrandTotals){this.frameCommonColumnLoop(y.members,y.ordinal,u,r,n,a);var C=this.checkAttributeDrill(this.tupColumnInfo[y.ordinal].drillInfo,"columns");(this.tupColumnInfo[y.ordinal].showTotals||C)&&u++}}}},e.prototype.orderTotals=function(e,t,i,r){for(var a={},n=1,o=0,s=this.totalCollection;o<s.length;o++){var l=s[o];if(!(0===this.tupColumnInfo[l.ordinal].measurePosition?1===this.tupColumnInfo[l.ordinal].allStartPos:0===this.tupColumnInfo[l.ordinal].allStartPos)||this.dataSourceSettings.showGrandTotals&&this.dataSourceSettings.showColumnGrandTotals){var d=this.tupColumnInfo[l.ordinal].measure.querySelector("UName").textContent;a[d]?(a[d].coll.push(l),a[d].count++,n=n<a[d].count?a[d].count:n):a[d]={coll:[l],count:1}}}for(var h=Object.keys(a),p=n-1;p>-1;){for(var u=0,c=h;u<c.length;u++){var g=c[u],l=a[g].coll[p];l&&(this.frameCommonColumnLoop(l.members,l.ordinal,e,t,i,r),this.tupColumnInfo[l.ordinal].showTotals&&e++)}p--}},e.prototype.setParentCollection=function(e){for(var t=0;e.length>t;){var i=e[t],r=Number(i.querySelector("MEMBER_TYPE").textContent)>2?"3":i.querySelector("MEMBER_TYPE").textContent,a=Number(i.querySelector("LNum").textContent),n=i.querySelector("UName").textContent,o=i.querySelector("PARENT_UNIQUE_NAME")?i.querySelector("PARENT_UNIQUE_NAME").textContent:"",s=!0,l=!1;if(this.parentObjCollection[t]){var d=Object.keys(this.parentObjCollection[t]),h=this.parentObjCollection[t][a-1];s=h?o===h.querySelector("UName").textContent:0===d.length,l="1"===this.tupColumnInfo[0].typeCollection[t]}"2"===r?delete this.parentObjCollection[t]:(!this.isPaging&&!l||s||delete this.parentObjCollection[t],this.parentObjCollection[t]?this.parentObjCollection[t][a]&&this.parentObjCollection[t][a].querySelector("UName").textContent===n||(this.parentObjCollection[t][a]=i):(this.parentObjCollection[t]={},this.parentObjCollection[t][a]=i)),t++}},e.prototype.setDrillInfo=function(e,t,i,r,a){for(r--;a[r]&&a[r].drillInfo[i].uName===e;){if(a[r].uNameCollection.split(/~~|::\[/).map(function(e){return"["===e[0]?e:"["+e}).join("~~").indexOf(t)<0)break;a[r].drillInfo[i].isDrilled=!0,this.curDrillEndPos<=i&&(a[r].drillEndPos=this.curDrillEndPos=i,a[r].endDrillUniquename=e),(a[r].drillStartPos>i||-1===a[r].drillStartPos)&&(a[r].drillStartPos=i),a[r].startDrillUniquename=e,r--}},e.prototype.levelCompare=function(e,t){for(var i=[-1,0],r=0;r<t.length;r++)if(e[r]!==t[r]){i=[r,e[r],t[r]-e[r]];break}return i},e.prototype.mergeTotCollection=function(e,t,a,n,o,s,l,d){for(var h=i.i(r.isNullOrUndefined)(s)?d[0]:s-(this.colMeasurePos===s-1?2:1),p=l[h]&&l[h].level,u=this.getLevelsAsString(h-1,l),c={},g=1,m=!1,f=0,v=this.totalCollection;f<v.length;f++){var S=v[f];if(m||S.allCount<=t&&(!(p>-1&&S.drillInfo[h])||S.drillInfo[h].level>=p&&this.getLevelsAsString(h-1,S.drillInfo)===u)){var y=this.tupColumnInfo[S.ordinal].measure?this.tupColumnInfo[S.ordinal].measure.querySelector("UName").textContent:"measure";c[y]?(c[y].coll.push(S),c[y].count++,g=g<c[y].count?c[y].count:g):c[y]={coll:[S],count:1},m=!1}}for(var b=Object.keys(c),C=g-1;C>-1;){for(var x=0,w=b;x<w.length;x++){var T=w[x],M=c[T].coll[C];if(M){(!(0===this.tupColumnInfo[M.ordinal].measurePosition?1===this.tupColumnInfo[M.ordinal].allStartPos:0===this.tupColumnInfo[M.ordinal].allStartPos)||this.dataSourceSettings.showGrandTotals&&this.dataSourceSettings.showColumnGrandTotals)&&(this.frameCommonColumnLoop(M.members,M.ordinal,e,a,o,n),this.tupColumnInfo[M.ordinal].showTotals&&e++),this.totalCollection.pop()}}C--}return e},e.prototype.getLevelsAsString=function(e,t){for(var i=[],r=0;r<e;r++)i[r]=t[r].level;return i.length>0?i.toString():""},e.prototype.frameCommonColumnLoop=function(e,t,i,r,a,n){var o,s=-1;if(this.tupColumnInfo[t].showTotals)for(var l=0,d=0;l<e.length;)d+=n[l]>0&&this.getMeasurePosition(this.tupColumnInfo[t].uNameCollection,this.tupColumnInfo[t].measurePosition)!==l?r[l]:r[l]+(1-a[l]),this.tupColumnInfo[t].drillInfo[l].isDrilled&&this.tupColumnInfo[t].showTotals&&(this.tupColumnInfo[t].showTotals=!!this.showColumnSubTotals&&void 0===this.hideColumnTotalsObject[this.tupColumnInfo[t].drillInfo[l].hierarchy],d-=r[l]-this.tupColumnInfo[t].levelCollection[l],s=this.tupColumnInfo[t].showTotals?-1:d-1),l++;var h=this.checkAttributeDrill(this.tupColumnInfo[t].drillInfo,"columns");if(this.tupColumnInfo[t].showTotals||h)for(var p=0,u=0,c={};p<e.length;){for(var g=e[p],m=Number(g.querySelector("MEMBER_TYPE").textContent)>2?"3":g.querySelector("MEMBER_TYPE").textContent,f=0,v="2"!==m?n[p]?1:a[p]:1;v<=("3"===m?1:r[p]);v++){var S=!1;this.pivotValues[u]||(this.pivotValues[u]=[]),Number(e[p].querySelector("LNum").textContent)>v&&"2"!==m?(this.parentObjCollection[p][v]||this.getDrilledParent(e[p],v,this.parentObjCollection[p]),this.parentObjCollection[p][v]&&(g=this.parentObjCollection[p][v]),S=!0):(g=e[p],f++),"2"!==m&&(c[g.querySelector("UName").textContent]=g.querySelector("Caption").textContent);for(var y="",b=Object.keys(c),C=0;C<b.length;C++){var x=b[C];y=0===C?c[x]:y+this.valueSortSettings.headerDelimiter+c[x]}var w=!!this.namedSetsPosition.column[p],T=this.getUniqueName(g.querySelector("UName").textContent),M=this.getDepth(this.tupColumnInfo[t],T,Number(m));if(this.isPaging&&this.pivotValues[u-1]&&this.pivotValues[u-1][i]&&this.fieldList[this.pivotValues[u-1][i].hierarchy]&&this.fieldList[this.pivotValues[u-1][i].hierarchy].isHierarchy&&this.pivotValues[u-1][i].hasChild&&!this.pivotValues[u-1][i].isDrilled&&!this.columns[p].isNamedSet&&this.fieldList[g.getAttribute("Hierarchy")]&&(this.fieldList[g.getAttribute("Hierarchy")].isHierarchy||this.fieldList[g.getAttribute("Hierarchy")].hasAllMember)&&this.pivotValues[u-1][i].depth<M){this.isColDrill=!0;break}this.pivotValues[u][i]={axis:"column",actualText:T,colIndex:i,formattedText:"3"===m&&this.dataFields[T]&&this.dataFields[T].caption?this.dataFields[T].caption:g.querySelector("Caption").textContent,hasChild:!!(this.fieldList[g.getAttribute("Hierarchy")]&&this.fieldList[g.getAttribute("Hierarchy")].isHierarchy&&p<this.columns.length-1&&!this.columns[p+1].isNamedSet&&this.columns[p+1].name.indexOf("[Measures]")<0&&this.fieldList[this.columns[p+1].name]&&this.fieldList[this.columns[p+1].name].hasAllMember)||Number(g.querySelector("CHILDREN_CARDINALITY").textContent)>0,level:f>1?-1:Number(g.querySelector("LNum").textContent)-(n[p]&&"3"!==m?1:0),rowIndex:u,ordinal:t,memberType:Number(m),depth:M,isDrilled:!(!this.fieldList[g.getAttribute("Hierarchy")]||!this.fieldList[g.getAttribute("Hierarchy")].isHierarchy||this.isAttributeDrill(g.getAttribute("Hierarchy"),this.tupColumnInfo[t].drillInfo,"columns"))||(S||this.tupColumnInfo[t].drillInfo[p].isDrilled),parentUniqueName:g.querySelector("PARENT_UNIQUE_NAME")?g.querySelector("PARENT_UNIQUE_NAME").textContent:void 0,levelUniqueName:g.querySelector("LName").textContent,hierarchy:g.getAttribute("Hierarchy"),isNamedSet:w,valueSort:(o={levelName:y},o[y]=1,o.axis=g.getAttribute("Hierarchy"),o)},this.headerContent[u]||(this.headerContent[u]={}),this.headerContent[u][i]=this.pivotValues[u][i],u++}p++}else if(s>-1)this.pivotValues[s][i-1].ordinal=t;else if(this.tupColumnInfo[t].allCount>0){for(var l=0,d=0;l<this.tupColumnInfo[t].allStartPos;)d+=n[l]>0&&this.getMeasurePosition(this.tupColumnInfo[t].uNameCollection,this.tupColumnInfo[t].measurePosition)!==l?r[l]:r[l]+(1-a[l]),l++;this.tupColumnInfo[t].allStartPos===this.tupColumnInfo[t].measurePosition+1?d-=r[this.tupColumnInfo[t].allStartPos-2]-this.tupColumnInfo[t].levelCollection[this.tupColumnInfo[t].allStartPos-2]+1:d-=r[this.tupColumnInfo[t].allStartPos-1]-this.tupColumnInfo[t].levelCollection[this.tupColumnInfo[t].allStartPos-1],this.pivotValues[d-1]&&(this.pivotValues[d-1][i-1].ordinal=t)}},e.prototype.isAttributeDrill=function(e,t,i){var r=!1;if(!this.isAdjacentToMeasure(e,i))for(var a=0;a<this.drilledMembers.length;a++)if(this.drilledMembers[a].name===e)for(var n=0;n<this.drilledMembers[a].items.length;n++){for(var o=this.drilledMembers[a].delimiter,s=this.drilledMembers[a].items[n].split(o),l="",d=0;d<s.length;d++)t[d]&&t[d].uName&&(l=l+(""===l?"":this.drilledMembers[a].delimiter)+t[d].uName);if(l===this.drilledMembers[a].items[n]){r=!0;break}}return r},e.prototype.isAdjacentToMeasure=function(e,t){for(var i=!1,r="rows"===t?this.rows:this.columns,a=0;a<r.length;a++)if(r[a].name===e&&r[a+1]&&("[Measures]"===r[a+1].name||r[a+1].isNamedSet||this.fieldList[r[a+1].name]&&!this.fieldList[r[a+1].name].hasAllMember)){i=!0;break}return i},e.prototype.getDrilledParent=function(e,t,i){for(var r=Number(e.querySelector("LNum").textContent),a=e,n=r-1;n>=t;n--){var o=this.drilledSets[a.querySelector("PARENT_UNIQUE_NAME").textContent];if(!o)break;i[n]=o,a=o}},e.prototype.performRowSorting=function(){var e;if(this.enableSort&&this.tupRowInfo.length>0){for(var t=this.pivotValues.length,i={},r={},n=[],o=!1,s=this.tupRowInfo[0].typeCollection.lastIndexOf("1"),l=void 0,d=this.colDepth;d<t;d++){var h=this.pivotValues[d][0];if(!this.showSubTotalsAtBottom||!h.isSum||3===h.memberType){var p=this.tupRowInfo[h.ordinal],u=p?0===p.measurePosition&&3===h.memberType?p.measureName:p.uNameCollection:"";if(""!==u){s>-1&&(u=this.frameUniqueName(u,h,p));var c=u.split(/~~|::\[/).length;if(3===h.memberType&&this.tupRowInfo[0].measurePosition>0){var g=this.getParentUname(u,h,!0,!0);r[g]?r[g].push(h):r[g]=[h]}else i[c]?i[c][u]=[h]:i[c]=(e={},e[u]=[h],e)}o&&n.push(h),"grand sum"===h.type&&(o=!0)}}for(var m=Object.keys(r).length>0&&this.tupRowInfo[0].measurePosition>0,f=Object.keys(i).map(function(e){return Number(e)}).sort(function(e,t){return e>t?1:t>e?-1:0}),v={},S=f.length-1;S>=0;S--){for(var y={},b=i[f[S]],C=Object.keys(b),x=0;x<C.length;x++){var g=0===S?"parent":this.getParentUname(C[x],b[C[x]][0],m,!1);y[g]?y[g].push(b[C[x]][0]):y[g]=[b[C[x]]][0]}for(var w=Object.keys(y),T=0;T<w.length;T++)y[w[T]]=this.sortRowHeaders(y[w[T]]);if(v[f[S+1]])for(var T=0;T<w.length;T++){for(var M=[],_=y[w[T]],D=0;D<_.length;D++){var O=this.tupRowInfo[_[D].ordinal],P=0===O.measurePosition&&3===_[D].memberType?O.measureName:O.uNameCollection;M.push(_[D]),s>-1&&(P=this.frameUniqueName(P,_[D],O));var E=!1;if(m){var g=this.getParentUname(P,_[D],m,!0);if(r[g]){r[g]=this.sortRowHeaders(r[g]);var N=P.lastIndexOf("::[")===P.indexOf("::[Measures]"),F=P.split("::[").length-1===O.measurePosition,I=!O.drillInfo[O.measurePosition-1].isDrilled,L=O.members.length>O.measurePosition+1;if(N&&F&&I&&L){E=!0;for(var A=0;A<r[g].length;A++){M.push(r[g][A]);var R=P.substring(0,P.indexOf("::[Measures]"))+"::"+r[g][A].actualText;v[f[S+1]][R]&&(M=M.concat(v[f[S+1]][R]))}}else l=this.showSubTotalsAtBottom&&M[M.length-1].isDrilled,M=M.concat(r[g])}}if(!E&&v[f[S+1]][P])if(this.showSubTotalsAtBottom&&3===M[M.length-1].memberType&&M[M.length-1].level>-1&&l){for(var k=[],j=0,H=M.length-1;H>=0;H--){if(3!==M[H].memberType){k=k.reverse(),j=H+1;break}k[k.length]=M[H]}M=M.slice(0,j).concat(v[f[S+1]][P]).concat(k)}else{var h=M[M.length-1],q=void 0;this.showSubTotalsAtBottom&&h.isDrilled&&(q=a.a.frameHeaderWithKeys(h),q.hasChild=!1,q.isDrilled=!1,q.isSum=!0,q.formattedText=q.formattedText+" Total"),M=M.concat(v[f[S+1]][P]),q&&(M[M.length]=q)}}y[w[T]]=M}else if(m)for(var T=0;T<w.length;T++){for(var _=y[w[T]],M=[],D=0;D<_.length;D++){M.push(_[D]);var P=this.tupRowInfo[_[D].ordinal].uNameCollection;s>-1&&(P=this.frameUniqueName(P,_[D],this.tupRowInfo[_[D].ordinal]));var g=this.getParentUname(P,_[D],!0,!0);r[g]&&(r[g]=this.sortRowHeaders(r[g]),M=M.concat(r[g]))}y[w[T]]=M}v[f[S]]=y}var V=0,B=0,U=0;o=!1,n=this.sortRowHeaders(n);for(var d=this.colDepth;d<t;d++){"Top"===this.dataSourceSettings.grandTotalsPosition&&this.dataSourceSettings.showGrandTotals&&this.dataSourceSettings.showRowGrandTotals&&("column"===this.olapValueAxis&&this.colDepth+1===d||"row"===this.olapValueAxis&&this.colDepth+this.dataSourceSettings.values.length+1===d)&&(V=0,o=!1);var G=o?n:v[f[0]].parent,z="Top"===this.dataSourceSettings.grandTotalsPosition&&this.dataSourceSettings.showGrandTotals&&this.dataSourceSettings.showRowGrandTotals&&this.colDepth===d?G.length:o?V-B:V;G[z]&&(this.pivotValues[d]=[G[z]],this.pivotValues[d][0].rowIndex=d,this.valueContent[U][0]=this.pivotValues[d][0]),V++,U++,"grand sum"===this.pivotValues[d][0].type&&(o=!0,B=V)}}},e.prototype.performColumnSorting=function(){if(this.enableSort)for(var e=0;e<this.dataSourceSettings.columns.length;e++){for(var t=[],a=0,n=[],o=0;o<this.pivotValues.length;o++){var s=this.pivotValues[o],l=void 0,d=void 0,h={},p=1;n[a]=[],t[a]=[];var u=1,c=s[u].hierarchy,g=s[u].levelUniqueName;for(u;u<s.length;u++)if(!s[u].isNamedSet){if(2!==s[u].memberType&&"[Measures]"!==s[u].hierarchy&&-1!==s[u].level){if(i.i(r.isNullOrUndefined)(h[s[u].formattedText])||i.i(r.isNullOrUndefined)(this.pivotValues[o-1]))h[s[u].formattedText]=h[s[u].formattedText]?h[s[u].formattedText]:[],h[s[u].formattedText][s[u].colIndex]=s[u];else if(h[s[u].formattedText]&&this.pivotValues[o-1]){var m=this.pivotValues[o-1][s[u].colIndex],f=Number(Object.keys(h[s[u].formattedText])[0]),v=h[s[u].formattedText][f].colIndex,S=this.pivotValues[o-1][v];if(m.formattedText!==S.formattedText){var y=Object.keys(h);y=this.sortColumnHeaders(y,this.sortObject[s[u-1].levelUniqueName]||this.sortObject[s[u].hierarchy],c,g),t[a]=i.i(r.isNullOrUndefined)(t[a])?[]:t[a];for(var b=0;b<y.length;b++)for(var C=Object.keys(h[y[b]]).length,x=0;x<C;x++)p=0===t[a].length?1:0,t[a][t[a].length+p]=h[y[b]][Number(Object.keys(h[y[b]])[x])];h={},h[s[u].formattedText]=[],h[s[u].formattedText][s[u].colIndex]=s[u]}else h[s[u].formattedText][s[u].colIndex]=s[u]}}else if(Object.keys(h).length>0){n[a][n[a].length+p]=s[u],l=Object.keys(h),l=this.sortColumnHeaders(l,this.sortObject[s[u-1].levelUniqueName]||this.sortObject[s[u].hierarchy],c,g),t[a]=i.i(r.isNullOrUndefined)(t[a])?[]:t[a];for(var w=0;w<l.length;w++)for(var T=Object.keys(h[l[w]]).length,M=0;M<T;M++)p=0===t[a].length?1:0,t[a][t[a].length+p]=h[l[w]][Number(Object.keys(h[l[w]])[M])]}else(-1===s[u].level||0===s[u].level)&&Object.keys(h).length>=0&&"[Measures]"!==s[u].hierarchy&&(n[a][n[a].length+p]=s[u]);if(-1!==s[u].level&&1===Object.keys(h).length&&"[Measures]"!==s[u].hierarchy&&!i.i(r.isNullOrUndefined)(s[u+1])&&-1===s[u+1].level){var _=Object.keys(h[s[u].formattedText]).length,D=Object.keys(h[s[u].formattedText]);if(_>1)for(var O=0;O<_;O++)p=0===n[a].length?1:0,n[a][n[a].length+p]=h[s[u].formattedText][Number(D[O])];else n[a][n[a].length+p]=s[u]}if(Object.keys(n[a]).length>0){p=0===t[a].length?1:0;var P=n[a].length;if(P>2)for(var E=1;E<P;E++)p=0===t[a].length?1:0,t[a][t[a].length+p]=n[a][E];else t[a][t[a].length+p]=n[a][1]||n[a][0];h={},n[a]=[]}}if(Object.keys(h).length>0){n[a][n[a].length+p]=s[u],d=Object.keys(h);var N=this.sortObject[s[u-1].levelUniqueName]||this.sortObject[s[u-1].hierarchy];l=this.sortColumnHeaders(d,N,c,g),t[a]=i.i(r.isNullOrUndefined)(t[a])?[]:t[a];for(var F=0;F<d.length;F++)for(var I=Object.keys(h[d[F]]).length,M=0;M<I;M++)p=0===t[a].length?1:0,t[a][t[a].length+p]=h[l[F]][Number(Object.keys(h[d[F]])[M])]}for(var L=1;L<t[a].length;L++)this.pivotValues[a][L]=t[a][L];for(var A=o;A<this.pivotValues.length;A++){var R=i.i(r.extend)({},this.pivotValues[A+1],null,!0),k=i.i(r.extend)({},this.pivotValues[A],null,!0);if(Object.keys(R).length===Object.keys(k).length&&Object.keys(R).length>2){for(var j=1;j<this.pivotValues[o].length;j++)Object.keys(R).length>0&&k[j].colIndex!==R[j].colIndex&&(this.pivotValues[A+1][j]=R[k[j].colIndex]);break}}a++,h={}}for(var H=0;H<this.pivotValues.length;H++)for(var s=this.pivotValues[H],o=1;o<s.length;o++)s[o].colIndex=o}},e.prototype.frameUniqueName=function(e,t,i){var r=e.indexOf(t.actualText.toString()+"::[Measures]")>-1;e=e.substring(0,e.indexOf(t.actualText.toString()))+t.actualText.toString();var a=e.split("::[").length<=this.getMeasurePosition(e,i.measurePosition);return e+=r||a?"::"+i.measureName:""},e.prototype.getMeasurePosition=function(e,t){for(var i=t,r=e.split("::["),a=0;a<r.length;a++)if(r[a]&&r[a].indexOf("Measures")>-1){i=a;break}return i},e.prototype.sortRowHeaders=function(e){if(e.length>0&&3!==e[0].memberType&&!e[0].isNamedSet){for(var t=[],i=0;i<e.length;i++)t[i]=e[i].actualText;var r=!1,n="Grand Total"!==e[0].actualText?e[0].hierarchy:e[1].hierarchy,o=this.fieldList[n]&&this.fieldList[n].membersOrder?this.fieldList[n].membersOrder.slice():[],s={fieldName:n,levelName:e[0].levelUniqueName,sortOrder:this.sortObject[e[0].hierarchy]||this.sortObject[e[0].levelUniqueName],members:o&&o.length>0?o:t,IsOrderChanged:!1};if(o&&o.length>0?a.a.applyCustomSort(s,e,"string",!1,!0):("Ascending"===s.sortOrder||void 0===s.sortOrder?e.sort(function(e,t){return e.formattedText>t.formattedText?1:t.formattedText>e.formattedText?-1:0}):"Descending"===s.sortOrder&&e.sort(function(e,t){return e.formattedText<t.formattedText?1:t.formattedText<e.formattedText?-1:0}),r=!0),r&&this.getHeaderSortInfo){for(var l=[],d=0,h=0;d<e.length;d++)"Grand Total"!==e[d].actualText&&(l[h++]=e[d].formattedText);s.members=l}return this.getHeaderSortInfo&&this.getHeaderSortInfo(s),s.IsOrderChanged&&a.a.applyCustomSort(s,e,"string",!0,!0),e}return e},e.prototype.sortColumnHeaders=function(e,t,i,r){var a=!1,n=this.fieldList[i]&&this.fieldList[i].membersOrder?this.fieldList[i].membersOrder.slice():[],o={fieldName:i,levelName:r,sortOrder:t,members:n&&n.length>0?n:e,IsOrderChanged:!1};if(n&&n.length>0?this.applyCustomSort(e,o):("Ascending"===o.sortOrder||void 0===o.sortOrder?e.sort(function(e,t){return e>t?1:t>e?-1:0}):"Descending"===o.sortOrder&&e.sort(function(e,t){return e<t?1:t<e?-1:0}),a=!0),a&&this.getHeaderSortInfo){for(var s=[],l=0,d=0;l<e.length;l++)"Grand Total"!==e[l]&&(s[d++]=e[l]);o.members=s}return this.getHeaderSortInfo&&this.getHeaderSortInfo(o),o.IsOrderChanged&&this.applyCustomSort(e,o,!0),e},e.prototype.applyCustomSort=function(e,t,i){var r,a=[],n=[];a=t.IsOrderChanged?t.members:"Ascending"===t.sortOrder||"None"===t.sortOrder||void 0===t.sortOrder?[].concat(t.members):[].concat(t.members).reverse(),"Grand Total"===e[0]&&(r=e[0],e.shift());for(var o=0,s=0;o<e.length;o++){var l=e[o];if(a[s]===l){if(e.splice(s++,0,l),e.splice(++o,1),!(s<a.length)){i||n.splice(--s,0,l);break}o=-1}o>=0&&!i&&(n[o]=e[o])}if(!i){for(var o=n.length;o<e.length;o++)n[o]=e[o];"Grand Total"===n[n.length-1]&&n.pop(),t.members=n}return r&&e.splice(0,0,r),e},e.prototype.frameSortObject=function(){if(this.enableSort)for(var e=0;e<this.sortSettings.length;e++)this.sortObject[this.sortSettings[e].name]=this.sortSettings[e].order},e.prototype.getParentUname=function(e,t,i,r){var a="";if(i&&!r){for(var n=this.tupRowInfo[t.ordinal],o=[],s={},l=0;l<e.length;l++)"~"!==e[l]&&":"!==e[l]||(o.push(l),s[l]=e[l]+e[l],l++);if(this.getMeasurePosition(e,n.measurePosition)>=e.split("::[").length-1)a=o[o.length-2]>-1?e.substring(0,o[o.length-2])+s[o[o.length-1]]+n.measureName:"parent";else{var d=e.lastIndexOf("~~")>e.lastIndexOf("::[")?e.lastIndexOf("~~"):e.lastIndexOf("::[");a=d>-1?e.substring(0,d):"parent"}}else{var d=e.lastIndexOf("~~")>e.lastIndexOf("::[")?e.lastIndexOf("~~"):e.lastIndexOf("::[");a=d>-1?e.substring(0,d):"parent"}return a},e.prototype.performColumnSpanning=function(){for(var e={},t=this.rowStartPos-1,i=Object.keys(this.colMeasures).length;t>-1;){e[t]={};for(var r=this.pivotValues[t].length-1;r>0;){e[t][r]=1;var a=this.pivotValues[t][r+1],n=this.pivotValues[t+1]&&this.rowStartPos-t>1?this.pivotValues[t+1][r]:void 0,o=this.pivotValues[t][r],s=!1,l=!1,d=this.tupColumnInfo[o.ordinal],h=d.allStartPos>("3"===d.typeCollection[0]?1:0),p=this.checkAttributeDrill(d.drillInfo,"columns");if(this.showSubTotalsAtTop&&o.isDrilled&&a&&a.actualText!==o.actualText&&o.level>-1&&(o.ordinal=this.getOrdinal(o,this.pivotValues[t+1])),n&&a&&(2===o.memberType||-1===o.level?a.actualText===o.actualText:3===o.memberType&&o.actualText===a.actualText||a.valueSort.levelName===o.valueSort.levelName)&&(2===o.memberType?h&&"sum"!==a.type?o.colSpan=1:o.colSpan=a.colSpan+1>(d.measurePosition>t?i:0)?1:a.colSpan+1:(o.colSpan=a.colSpan+1,o.ordinal=a.ordinal),s=!0),2===o.memberType){if(h)p||(o.type="sum"),o.formattedText="Total",o.valueSort[o.valueSort.levelName.toString()]=1;else{var u="Grand Total";n&&i>0&&(u=3===n.memberType?"Grand Total."+n.formattedText:n.valueSort.levelName),o.type="grand sum",o.formattedText="Grand Total",o.valueSort.levelName=u,o.valueSort[u.toString()]=1}o.hasChild=!1}else-1===o.level&&(o.type="sum",o.formattedText="Total",o.hasChild=!1,o.valueSort[o.valueSort.levelName.toString()]=1);n?2===o.memberType&&2===n.memberType||n.actualText===o.actualText?(e[t][r]=e[t+1]?e[t+1][r]+1:1,0===t||1===o.memberType&&o.level>-1&&1===n.memberType&&-1===n.level?(o.rowSpan=!o.isDrilled||this.fieldList[o.hierarchy]&&this.fieldList[o.hierarchy].isHierarchy&&!o.hasChild?e[t+1][r]+1:1,n.rowSpan=!n.isDrilled||this.fieldList[n.hierarchy]&&this.fieldList[n.hierarchy].isHierarchy&&!n.hasChild||-1!==n.level?n.rowSpan:e[t+1][r]):3===o.memberType?o.rowSpan=1:o.rowSpan=-1,l=!0):!o.isDrilled||this.fieldList[o.hierarchy]&&this.fieldList[o.hierarchy].isHierarchy&&!o.hasChild||-1!==o.level||2!==n.memberType?(o.rowSpan=0===t?e[t][r]:-1,n.rowSpan=n.level>-1&&(!n.isDrilled||this.fieldList[n.hierarchy]&&this.fieldList[n.hierarchy].isHierarchy&&!n.hasChild)||2!==o.memberType&&2===n.memberType?e[t+1][r]:1):(e[t][r]=e[t+1]?e[t+1][r]+1:1,o.rowSpan=-1,l=!0):o.rowSpan=o.level>-1||1===this.rowStartPos?e[t][r]:-1,s||(o.colSpan=1),l||(e[t][r]=1),r--}t--}},e.prototype.getOrdinal=function(e,t){for(var i=0,r=e.colIndex;r>0;r--)if(-1===t[r].level){i=t[r].ordinal;break}return i},e.prototype.frameValues=function(e,t){var a=this.colDepth,n=this.pivotValues.length,o=0;if("down"===this.customArgs.action){var s=Object.keys(this.onDemandDrillEngine);a=Number(s[0]),n=Number(s[s.length-1])+1,o=this.onDemandDrillEngine[a][0].ordinal}for(var l={},d=0;d<e.length;d++)l[Number(e[d].getAttribute("CellOrdinal"))]=e[d];for(var h=a;h<n;h++)for(var p=this.pivotValues[h],u=p[0].ordinal,d=1;d<this.pivotValues[0].length;d++)if(this.pivotValues[this.colDepth-1][d]){var c=this.pivotValues[this.colDepth-1][d].ordinal,g=this.pivotValues[this.colDepth-1][d],m=3===p[0].memberType?p[0].actualText.toString():this.tupColumnInfo[g.ordinal]&&this.tupColumnInfo[g.ordinal].measure?this.tupColumnInfo[g.ordinal].measure.querySelector("UName").textContent:p[0].actualText;if("header"===p[0].type)p[d]={axis:"value",actualText:this.getUniqueName(m),formattedText:"",value:0,colIndex:d,rowIndex:h};else{var f=void 0,v="0",S=this.getUniqueName(m),y=!0,b=!this.fieldList[p[0].hierarchy]||!this.fieldList[p[0].hierarchy].isHierarchy||p[0].isDrilled;y=this.tupRowInfo[u]?this.tupRowInfo[u].showTotals:this.dataSourceSettings.showGrandTotals&&this.dataSourceSettings.showRowGrandTotals;var C=l[(u-o)*t+c];f=this.showSubTotalsAtBottom&&p[0].isDrilled?"":!y&&b?"":i.i(r.isNullOrUndefined)(C)||i.i(r.isNullOrUndefined)(C.querySelector("FmtValue"))?this.emptyCellTextContent:C.querySelector("FmtValue").textContent,v=!y&&b?"0":i.i(r.isNullOrUndefined)(C)||i.i(r.isNullOrUndefined)(C.querySelector("Value"))?null:C.querySelector("Value").textContent,f=this.showSubTotalsAtBottom&&p[0].isDrilled?"":y&&!i.i(r.isNullOrUndefined)(v)?this.getFormattedValue(Number(v),S,""!==f?f:v):f;var x=!this.tupColumnInfo[c]||(this.tupColumnInfo[c].allCount>0||this.tupColumnInfo[c].drillStartPos>-1)||!this.tupRowInfo[u]||this.tupRowInfo[u].allCount>0||this.tupRowInfo[u].drillStartPos>-1,w=!!this.tupRowInfo[u]&&(0===this.tupRowInfo[u].measurePosition?1===this.tupRowInfo[u].allStartPos:0===this.tupRowInfo[u].allStartPos)||!!this.tupColumnInfo[c]&&(0===this.tupColumnInfo[c].measurePosition?1===this.tupColumnInfo[c].allStartPos:0===this.tupColumnInfo[c].allStartPos);p[d]={axis:"value",actualText:S,formattedText:f,colOrdinal:c,rowOrdinal:u,columnHeaders:this.tupColumnInfo[c]?this.tupColumnInfo[c].captionCollection:"",rowHeaders:this.tupRowInfo[u]?this.tupRowInfo[u].captionCollection:"",value:i.i(r.isNullOrUndefined)(v)?null:Number(v),colIndex:d,rowIndex:h,isSum:x,isGrandSum:w}}this.valueContent[h-this.rowStartPos][d]=p[d]}},e.prototype.getFormattedValue=function(e,t,a){var n=a;if(this.formatFields[t]&&!i.i(r.isNullOrUndefined)(e)){var o=this.formatFields[t].properties?this.formatFields[t].properties:this.formatFields[t],s=i.i(r.extend)({},o,null,!0);if(delete s.name,!s.minimumSignificantDigits&&s.minimumSignificantDigits<1&&delete s.minimumSignificantDigits,!s.maximumSignificantDigits&&s.maximumSignificantDigits<1&&delete s.maximumSignificantDigits,s.type)n=this.globalize.formatDate(new Date(e.toString()),s);else{if(delete s.type,s.format&&!this.formatRegex.test(s.format)){var l=s.format.match(this.customRegex),d=l[6];s.useGrouping=-1!==d.indexOf(",")}n=this.globalize.formatNumber(e,s)}}return n},e.prototype.getMeasureInfo=function(){for(var e,t="column",i=[],r=0,a=this.values;r<a.length;r++){var n=a[r];i[i.length]=n.isCalculatedField?this.fieldList[n.name].tag:n.name}if(i.length>1){if(this.isMeasureAvail){for(var o=!1,s=0,l=this.rows.length;s<l;s++)if("[measures]"===this.rows[s].name.toLowerCase()){t="row",e=s,o=!0;break}if(!o)for(var s=0,l=this.columns.length;s<l;s++)if("[measures]"===this.columns[s].name.toLowerCase()){t="column",e=s,o=!0;break}}else t=this.valueAxis,e="row"===t?this.rows.length-1:this.columns.length-1;return{measureAxis:t,measureIndex:e,valueInfo:i}}return{measureAxis:t,measureIndex:-1,valueInfo:[]}},e.prototype.frameMeasureOrder=function(e,t,i,r,a){var n=[],o=[],s=[],l={},d=[],h=e.measureAxis,p=e.measureIndex,u=e.valueInfo;if(h===t&&u.length>0){for(var c={},g=[],m=0,f=i.length;m<f;m++){for(var v=i[m],S=[].slice.call(v.querySelectorAll("Member")),y="",b="",C=0;C<S.length;)y=y+(""!==y?"~~":"")+S[C].querySelector("UName").textContent,C===p&&0===p?b=y:C===p-1&&(b=y),C++;c[b]?c[b][c[b].length]=y:(c[b]=[y],g[g.length]=b),l[y]={index:m,node:v},d[d.length]=y}if(d.length>0&&g.length>0)if(0===p)for(var x=0,w=u;x<w.length;x++)for(var T=w[x],M=0,_=g;M<_.length;M++){var D=_[M];if(D===T)for(var O=0,P=c[D];O<P.length;O++){var y=P[O];s[s.length]=l[y].index,n[n.length]=l[y].node}}else for(var E=0,N=g;E<N.length;E++)for(var D=N[E],F=0,I=u;F<I.length;F++)for(var L=I[F],A=0,R=c[D];A<R.length;A++){var y=R[A],k=y.split("~~");k[p]===L&&(s[s.length]=l[y].index,n[n.length]=l[y].node)}if(r.length>0){for(var j=[],H=[],q=0,V=0,m=0,B=r.length;m<B;m++)q>a-1?(V++,q=0,j[V]||(j[V]=[]),j[V][q]=m,q++):(j[V]||(j[V]=[]),j[V][q]=m,q++),H[H.length]=Number(r[m].getAttribute("CellOrdinal"));if("column"===h){if(j.length>0&&j[0].length===s.length)for(var C=0,B=s.length;C<B;C++)for(var m=0;m<j.length;){var U=m*a+C,G=H[U].toString(),z=r[Number(j[m][s[C]])];z.setAttribute("CellOrdinal",G.toString()),o[U]=z,m++}}else if(j.length===s.length)for(var C=0,B=s.length;C<B;C++)for(var m=0;m<j[s[C]].length;){var U=C*a+m,G=H[U].toString(),z=r[Number(j[s[C]][m])];z.setAttribute("CellOrdinal",G.toString()),o[o.length]=z,m++}}return{orderedHeaderTuples:n,orderedValueTuples:o}}return{orderedHeaderTuples:i,orderedValueTuples:r}},e.prototype.getDrilledSets=function(e,t,a,n){for(var o=[],s=t.actualText.toString(),l="row"===n?this.tupRowInfo:this.tupColumnInfo,d=l[t.ordinal],h=l[0].typeCollection.indexOf("3"),p=0===h?1:0,u=0,c="1"===l[0].typeCollection[a];u<l.length;)(i.i(r.isNullOrUndefined)(l[u].allStartPos)||l[u].allStartPos>p)&&(o[o.length]=l[u].uNameCollection),u++;for(var g=e.split("::[").map(function(e){return"["===e[0]?e:"["+e}),m=[],f=0;f<=a;f++)if(g[f])if((c||this.isPaging)&&f===a){for(var v=g[f].split("~~"),S=v.indexOf(s),y=[],b=0;b<=S;b++)y.push(v[b]);m[m.length]=y.length>0?y.join("~~"):g[f]}else m[m.length]=g[f];e=m.join("::");for(var C=[],x={},w=0,T=o;w<T.length;w++){var M=T[w];if(0===M.indexOf(e)&&(C.push(M),this.isPaging)){var _=M.split("::[")[a];_="["===_[0]?_:"["+_;for(var D=_.split("~~"),O=D.indexOf(s);O<D.length;O++)x[D[O]]=D[O]}}if(this.isPaging){for(var P=d.uNameCollection.split("::[").map(function(e){return"["===e[0]?e:"["+e}),E=[],O=0;O<P.length;O++)O!==a&&(E[O]=P[O]);for(var D=Object.keys(x),O=0;O<D.length;O++)E[a]=D[O],C.push(E.join("::"))}for(var N={},F=0,I=C;F<I.length;F++){for(var L=I[F],A=L.split("::[").map(function(e){return"["===e[0]?e:"["+e}),R="",k=0;k<=a;k++){var j=A[k];if(j){var H=j.split("~~");R=R+(""!==R?"~~":"")+H[H.length-1]}}N[R]=R}return N},e.prototype.updateDrilledInfo=function(e){this.dataSourceSettings=e,this.drilledMembers=e.drilledMembers?this.updateDrilledItems(e.drilledMembers):[],this.generateGridData(e)},e.prototype.updateCalcFields=function(e,t){this.dataSourceSettings=e,this.calculatedFieldSettings=e.calculatedFieldSettings?e.calculatedFieldSettings:[],this.getAxisFields(),this.updateFieldlist(),this.loadCalculatedMemberElements(this.calculatedFieldSettings),this.dataFields[t.name]?this.generateGridData(e):n.a.getCellSets(e,this,!0,void 0,!0)},e.prototype.onSort=function(e){this.dataSourceSettings=e,this.sortSettings=e.sortSettings?e.sortSettings:[],this.getAxisFields(),this.frameSortObject(),this.updateFieldlist(),this.xmlaCellSet.length>0&&this.xmlDoc?this.generateEngine(this.xmlDoc,this.request,this.customArgs):this.generateGridData(e)},e.prototype.updateFieldlist=function(e){for(var t=0;t<this.savedFieldListData.length;){var i=this.savedFieldListData[t].id,r=this.savedFieldListData[t].pid;if(this.savedFieldList[i]){var a=this.enableSort?this.sortObject[i]?this.sortObject[i]:"Ascending":"None";this.savedFieldList[i].isSelected=!1,this.savedFieldList[i].isExcelFilter=!1,this.savedFieldList[i].sort=a,this.savedFieldList[i].allowDragAndDrop=!0,this.savedFieldList[i].showFilterIcon=!0,this.savedFieldList[i].showSortIcon=!0,this.savedFieldList[i].showEditIcon=!0,this.savedFieldList[i].showRemoveIcon=!0,this.savedFieldList[i].showValueTypeIcon=!0,this.savedFieldList[i].showSubTotals=!0,this.savedFieldListData[t].sort=a,this.savedFieldListData[t].allowDragAndDrop=!0,this.savedFieldListData[t].showFilterIcon=!0,this.savedFieldListData[t].showSortIcon=!0,this.savedFieldListData[t].showEditIcon=!0,this.savedFieldListData[t].showRemoveIcon=!0,this.savedFieldListData[t].showValueTypeIcon=!0,this.savedFieldListData[t].showSubTotals=!0,e&&(this.savedFieldList[i].filter=[],this.savedFieldList[i].actualFilter=[])}if(this.dataFields[i]&&this.savedFieldList[i]&&this.selectedItems.indexOf(i)>-1?(this.savedFieldList[i].isSelected=!0,this.savedFieldList[i].allowDragAndDrop=!this.dataFields[i]||this.dataFields[i].allowDragAndDrop,this.savedFieldList[i].showFilterIcon=!this.dataFields[i]||this.dataFields[i].showFilterIcon,this.savedFieldList[i].showSortIcon=!this.dataFields[i]||this.dataFields[i].showSortIcon,this.savedFieldList[i].showEditIcon=!this.dataFields[i]||this.dataFields[i].showEditIcon,this.savedFieldList[i].showRemoveIcon=!this.dataFields[i]||this.dataFields[i].showRemoveIcon,this.savedFieldList[i].showValueTypeIcon=!this.dataFields[i]||this.dataFields[i].showValueTypeIcon,this.savedFieldList[i].showSubTotals=!this.dataFields[i]||this.dataFields[i].showSubTotals,this.savedFieldListData[t].isSelected=!0,this.savedFieldListData[t].allowDragAndDrop=!this.dataFields[i]||this.dataFields[i].allowDragAndDrop,this.savedFieldListData[t].showFilterIcon=!this.dataFields[i]||this.dataFields[i].showFilterIcon,this.savedFieldListData[t].showSortIcon=!this.dataFields[i]||this.dataFields[i].showSortIcon,this.savedFieldListData[t].showEditIcon=!this.dataFields[i]||this.dataFields[i].showEditIcon,this.savedFieldListData[t].showRemoveIcon=!this.dataFields[i]||this.dataFields[i].showRemoveIcon,this.savedFieldListData[t].showValueTypeIcon=!this.dataFields[i]||this.dataFields[i].showValueTypeIcon,this.savedFieldListData[t].showSubTotals=!this.dataFields[i]||this.dataFields[i].showSubTotals):this.dataFields[r]&&this.savedFieldList[r]&&this.selectedItems.indexOf(r)>-1?this.savedFieldListData[t].isSelected=!0:this.savedFieldListData[t].isSelected=!1,this.savedFieldList[i]&&this.savedFieldList[i].isCalculatedField||"[calculated members].[_0]"===i.toLowerCase()){for(var n=!1,o=0,s=this.calculatedFieldSettings;o<s.length;o++){var l=s[o];if(i===l.name){var d=l.formula,h=l.formatString;this.savedFieldListData[t].formula=d,this.savedFieldListData[t].formatString=h,this.savedFieldListData[t].parentHierarchy=d.toLowerCase().indexOf("measure")>-1?void 0:l.hierarchyUniqueName,this.savedFieldList[i].formula=d,this.savedFieldList[i].formatString=h,this.savedFieldList[i].parentHierarchy=this.savedFieldListData[t].parentHierarchy,n=!0}}(!n||"[calculated members].[_0]"===i.toLowerCase()&&0===this.calculatedFieldSettings.length)&&(this.savedFieldListData.splice(t,1),t--,this.savedFieldList[i]&&delete this.savedFieldList[i])}t++}this.fieldList=this.savedFieldList,this.fieldListData=this.savedFieldListData},e.prototype.updateFieldlistData=function(e,t){for(var i=0,r=this.fieldListData;i<r.length;i++){var a=r[i];if(a.id===e){a.isSelected=!!t;break}}},e.prototype.getFormattedFields=function(e){this.formatFields={};for(var t=e.length;t--;)this.formatFields[e[t].name]=e[t]},e.prototype.getFieldList=function(e){var t={catalog:e.catalog,cube:e.cube,url:e.url,LCID:e.localeIdentifier.toString(),request:"MDSCHEMA_HIERARCHIES",roles:e.roles};this.getTreeData(t,this.getFieldListItems.bind(this),{dataSourceSettings:e,action:"loadFieldElements"})},e.prototype.getTreeData=function(e,t,i){var r=this.getConnectionInfo(e.url,e.LCID),a='<Envelope xmlns="http://schemas.xmlsoap.org/soap/envelope/"><Header/><Body><Discover xmlns="urn:schemas-microsoft-com:xml-analysis"><RequestType>'+e.request+"</RequestType><Restrictions><RestrictionList><CATALOG_NAME>"+e.catalog+"</CATALOG_NAME><CUBE_NAME>"+e.cube+"</CUBE_NAME></RestrictionList></Restrictions><Properties><PropertyList><Catalog>"+e.catalog+"</Catalog> <LocaleIdentifier>"+r.LCID+"</LocaleIdentifier>"+(e.roles?"<Roles>"+e.roles+"</Roles>":"")+"</PropertyList></Properties></Discover></Body></Envelope>";this.doAjaxPost("POST",r.url,a,t,i)},e.prototype.getAxisFields=function(){this.rows=this.dataSourceSettings.rows?this.dataSourceSettings.rows:[],this.columns=this.dataSourceSettings.columns?this.dataSourceSettings.columns:[],this.filters=this.dataSourceSettings.filters?this.dataSourceSettings.filters:[],this.values=this.dataSourceSettings.values?this.dataSourceSettings.values:[];var e=i.i(r.extend)([],this.rows,null,!0);e=e.concat(this.columns,this.values,this.filters);for(var t=e.length;t--;)this.dataFields[e[t].name]=e[t],"[measures]"===e[t].name.toLowerCase()?this.isMeasureAvail=!0:this.selectedItems.push(e[t].name);if(this.mappingFields={},this.dataSourceSettings.fieldMapping)for(var a=0,n=this.dataSourceSettings.fieldMapping;a<n.length;a++){var o=n[a];this.mappingFields[o.name]=o}if(!this.isMeasureAvail&&this.values.length>0){var s={name:"[Measures]",caption:"Measures",showRemoveIcon:!0,allowDragAndDrop:!0};"row"===this.valueAxis?this.rows.push(s):this.columns.push(s),this.isMeasureAvail=!0}},e.prototype.getAggregateType=function(e,t){var i;switch(t){case"1":i="Sum";break;case"2":i="Count";break;case"3":i="Min";break;case"4":i="Max";break;case"5":i="Avg";break;case"8":i="DistinctCount";break;case"127":i="CalculatedField";break;default:i=void 0}return i||void 0},e.prototype.getUniqueName=function(e){for(var t=e,i=0,r=this.calculatedFieldSettings;i<r.length;i++){var a=r[i];if(e===(a.formula.toLowerCase().indexOf("measure")>-1?"[Measures].":a.hierarchyUniqueName+".")+"["+a.name+"]"){t=a.name;break}}return t},e.prototype.updateFilterItems=function(e){var t=i.i(r.extend)([],this.rows,null,!0);t=t.concat(this.columns);for(var n=0,o=e;n<o.length;n++){var s=o[n];if("Include"===s.type&&this.allowMemberFilter){var l=this.fieldList[s.name].members,d=l&&Object.keys(l).length>0;this.fieldList[s.name].actualFilter=s.items.slice();var h=i.i(r.extend)([],s.items,null,!0);if(d)for(var p=0;p<h.length;){var u=[];u=this.getParentNode(h[p],l,u);for(var c=0,g=u;c<g.length;c++){var m=g[c],f=a.a.inArray(m,s.items);-1!==f&&s.items.splice(f,1)}p++}for(var v=[],S=0,y=s.items;S<y.length;S++){var b=y[S];v.push(b),d?this.fieldList[s.name].filter.push(l[b].caption):this.fieldList[s.name].filter.push(b)}this.filterMembers[s.name]=v,this.fieldList[s.name].isExcelFilter=!1}else if((this.allowValueFilter||this.allowLabelFilter)&&-1!==["Date","Label","Number","Value"].indexOf(s.type))for(var C=0,x=t;C<x.length;C++){var w=x[C];if(w.name===s.name){var T=this.filterMembers[s.name];T&&"object"==typeof T[0]&&T[0].type===s.type?T[T.length]=s:this.filterMembers[s.name]=[s],this.fieldList[s.name].isExcelFilter=!0;break}}}},e.prototype.getParentNode=function(e,t,i){if(t[e].parent&&e!==t[e].parent){var r=t[e].parent;i.push(r),this.getParentNode(r,t,i)}return i},e.prototype.updateDrilledItems=function(e){var t=[],a=i.i(r.extend)([],this.rows,null,!0);a=a.concat(this.columns);for(var n=0,o=e;n<o.length;n++)for(var s=o[n],l=0,d=a;l<d.length;l++){var h=d[l];if(s.name===h.name){t.push(s);break}}return t},e.prototype.getDrillThroughData=function(e,t){for(var i,r=this.tupColumnInfo[e.colOrdinal]&&this.tupColumnInfo[e.colOrdinal].uNameCollection&&""!==this.tupColumnInfo[e.colOrdinal].uNameCollection?this.tupColumnInfo[e.colOrdinal].uNameCollection.split("::[").map(function(e){return"["===e[0]?e:"["+e}):[],a=this.tupRowInfo[e.rowOrdinal]&&this.tupRowInfo[e.rowOrdinal].uNameCollection&&""!==this.tupRowInfo[e.rowOrdinal].uNameCollection?this.tupRowInfo[e.rowOrdinal].uNameCollection.split("::[").map(function(e){return"["===e[0]?e:"["+e}):[],n=[],o="",s=0;s<this.filters.length;s++)if(i=this.filterMembers[this.filters[s].name]){for(var l=0;l<i.length;l++)o+=i[l],o=l<i.length-1?o+",":o+"";n[s]=o,o=""}for(var s=0;s<n.length;s++)o=""===o?"{"+n[s]+"}":o+",{"+n[s]+"}";for(var d="",h="",s=0;s<r.length;s++)d=(d.length>0?d+",":"")+(r[s].split("~~").length>1?r[s].split("~~")[r[s].split("~~").length-1]:r[s]);for(var s=0;s<a.length;s++)h=(h.length>0?h+",":"")+(a[s].split("~~").length>1?a[s].split("~~")[a[s].split("~~").length-1]:a[s]);var p="DRILLTHROUGH MAXROWS "+t+" Select("+(d.length>0?d:"")+(d.length>0&&h.length>0?",":"")+(h.length>0?h:"")+") on 0 from "+(""===o?"["+this.dataSourceSettings.cube+"]":"(SELECT ("+o+") ON COLUMNS FROM ["+this.dataSourceSettings.cube+"])");p=p.replace(/&/g,"&amp;");var u=this.getSoapMsg(this.dataSourceSettings,p),c=this.getConnectionInfo(this.dataSourceSettings.url,this.dataSourceSettings.localeIdentifier);this.doAjaxPost("POST",c.url,u,this.drillThroughSuccess.bind(this),{dataSourceSettings:this.dataSourceSettings,action:"drillThrough"})},e.prototype.drillThroughSuccess=function(e){var t=[].slice.call(e.querySelectorAll("row")),i="";if(t.length>0){for(var r=[],a=0;a<t.length;){for(var n=[].slice.call(t[a].children),o=0;o<n.length;)r.push('"'+n[o].tagName+'":"'+n[o].textContent+'"'),o++;a++}for(var s=r[0],l=0;l<r.length;)Object.keys(JSON.parse("[{"+r[l]+"}]")[0])[0]!==Object.keys(JSON.parse("[{"+s+"}]")[0])[0]?(i+=","+r[l],l++):(i+=""===i?"[{"+r[l]:"}, {"+r[l],l++);i+="}]"}else for(var d=[].slice.call(e.querySelectorAll("faultstring")),a=0;a<d.length;)i+=d[a].textContent,a++;this.gridJSON=i},e.prototype.getFilterMembers=function(e,t,i,r,a){var n,o=this.fieldList[t].levels,s=this.fieldList[t].levelCount;return n=a?"Descendants({"+o[s].id+"}, "+o[i-1].id+", "+(i-s==1?"SELF)":"SELF_AND_BEFORE)"):t+", Descendants({"+o[0].id+"}, "+o[i-1].id+", SELF_AND_BEFORE)",this.fieldList[t].levelCount=i,r||this.getMembers(e,t,!1,n,a),n},e.prototype.getMembers=function(e,t,i,r,a){var n,o="DIMENSION PROPERTIES PARENT_UNIQUE_NAME, HIERARCHY_UNIQUE_NAME, CHILDREN_CARDINALITY, MEMBER_TYPE, MEMBER_VALUE",s=this.fieldList[t].hasAllMember,l=(s?t:t+".LEVELS(0)").replace(/\&/g,"&amp;");n=i?"SELECT ({"+l+".ALLMEMBERS})"+o+" ON 0 FROM ["+e.cube+"]":"SELECT ({"+(r||(s?l+", "+l+".CHILDREN":l+".ALLMEMBERS"))+"})"+o+" ON 0 FROM ["+e.cube+"]";var d=this.getSoapMsg(e,n),h=this.getConnectionInfo(e.url,e.localeIdentifier);a||(this.fieldList[t].filterMembers=[],this.fieldList[t].childMembers=[],this.fieldList[t].searchMembers=[],this.fieldList[t].members={},this.fieldList[t].currrentMembers={}),this.doAjaxPost("POST",h.url,d,this.generateMembers.bind(this),{dataSourceSettings:e,fieldName:t,loadLevelMembers:a,action:"fetchMembers"})},e.prototype.getChildMembers=function(e,t,i){var r="SELECT ({"+t.replace(/\&/g,"&amp;")+".CHILDREN})DIMENSION PROPERTIES PARENT_UNIQUE_NAME, HIERARCHY_UNIQUE_NAME, CHILDREN_CARDINALITY, MEMBER_TYPE, MEMBER_VALUE ON 0 FROM ["+e.cube+"]",a=this.getSoapMsg(e,r),n=this.getConnectionInfo(e.url,e.localeIdentifier);this.doAjaxPost("POST",n.url,a,this.generateMembers.bind(this),{dataSourceSettings:e,fieldName:i,action:"fetchChildMembers"})},e.prototype.getCalcChildMembers=function(e,t){this.calcChildMembers=[];var i="SELECT ({"+t.replace(/\&/g,"&amp;")+".MEMBERS})DIMENSION PROPERTIES PARENT_UNIQUE_NAME, HIERARCHY_UNIQUE_NAME, CHILDREN_CARDINALITY, MEMBER_TYPE, MEMBER_VALUE ON 0 FROM ["+e.cube+"]",r=this.getConnectionInfo(e.url,e.localeIdentifier),a=this.getSoapMsg(e,i);this.doAjaxPost("POST",r.url,a,this.generateMembers.bind(this),{dataSourceSettings:e,action:"fetchCalcChildMembers"})},e.prototype.getSearchMembers=function(e,t,i,r,a,n){if(this.fieldList[t].searchMembers=[],this.fieldList[t].currrentMembers={},""!==i){var o=t.replace(/\&/g,"&amp;"),s="WITH SET [SearchMembersSet] AS &#39;FILTER("+(a?o+".ALLMEMBERS, ":"{"+(n>1?this.getFilterMembers(e,t,n,!0):o+", "+o+".CHILDREN")+"},")+"(INSTR(1, "+o+'.CurrentMember.member_caption, "'+i+'") > 0))&#39;SET [SearchParentsSet] AS &#39;GENERATE([SearchMembersSet], ASCENDANTS([SearchMembersSet].Current))&#39;SET [SearchSet] AS &#39;HIERARCHIZE(DISTINCT({[SearchMembersSet], [SearchParentsSet]}))&#39;SELECT SUBSET([SearchSet], 0, '+r+")DIMENSION PROPERTIES PARENT_UNIQUE_NAME, HIERARCHY_UNIQUE_NAME, CHILDREN_CARDINALITY, MEMBER_TYPE, MEMBER_VALUE ON 0 FROM ["+e.cube+"]",l=this.getSoapMsg(e,s),d=this.getConnectionInfo(e.url,e.localeIdentifier);this.doAjaxPost("POST",d.url,l,this.generateMembers.bind(this),{dataSourceSettings:e,fieldName:t,action:"fetchSearchMembers"})}},e.prototype.generateMembers=function(e,t,i){for(var r,a=[].slice.call(e.querySelectorAll('Axis[name="Axis0"] Tuple')),n=i.fieldName,o={},s=0,l=a;s<l.length;s++){var d=l[s],h=d.querySelector("Member"),p=h.querySelector("MEMBER_TYPE").textContent,u=h.querySelector("UName").textContent,c=h.querySelector("Caption").textContent,g=h.querySelector("PARENT_UNIQUE_NAME")?h.querySelector("PARENT_UNIQUE_NAME").textContent:"",m={"data-fieldName":n,"data-memberId":u};if(""===g&&"1"===p)o={hasChildren:!!d.querySelector("CHILDREN_CARDINALITY")&&"0"!==d.querySelector("CHILDREN_CARDINALITY").textContent,isSelected:!1,id:u,tag:u,name:c,caption:c,htmlAttributes:m},"fetchMembers"===i.action||"fetchChildMembers"===i.action?(this.fieldList[n].members[u]={name:u,caption:c,parent:void 0,isNodeExpand:!1,isSelected:!1},this.fieldList[n].filterMembers.push(o),this.fieldList[n].childMembers.push(o)):"fetchSearchMembers"===i.action?(this.fieldList[n].currrentMembers[u]={name:u,caption:c,parent:void 0,isNodeExpand:!1,isSelected:!1},this.fieldList[n].searchMembers.push(o),o.expanded=!0):this.calcChildMembers.push(o);else if(""!==g&&"1"===p)if(g===r&&"1"===p)o={hasChildren:!!d.querySelector("CHILDREN_CARDINALITY")&&"0"!==d.querySelector("CHILDREN_CARDINALITY").textContent,id:u,name:c,isSelected:!1,caption:c,htmlAttributes:m,tag:u},"fetchMembers"===i.action||"fetchChildMembers"===i.action?(this.fieldList[n].filterMembers.push(o),this.fieldList[n].childMembers.push(o),this.fieldList[n].members[u]={name:u,caption:c,parent:void 0,isNodeExpand:!1,isSelected:!1}):"fetchSearchMembers"===i.action?(o.expanded=!0,this.fieldList[n].searchMembers.push(o),this.fieldList[n].currrentMembers[u]={name:u,caption:c,parent:void 0,isNodeExpand:!1,isSelected:!1}):this.calcChildMembers.push(o);else{if("fetchMembers"===i.action&&this.fieldList[n].members[u])continue;var f=!!i.loadLevelMembers&&this.fieldList[n].members[g].isSelected;o={hasChildren:!!d.querySelector("CHILDREN_CARDINALITY")&&"0"!==d.querySelector("CHILDREN_CARDINALITY").textContent,htmlAttributes:m,isSelected:!1,id:u,pid:g,name:c,caption:c,tag:u},"fetchMembers"===i.action||"fetchChildMembers"===i.action?(this.fieldList[n].isHierarchy=!1,this.fieldList[n].filterMembers.push(o),this.fieldList[n].childMembers.push(o),this.fieldList[n].members[u]={name:u,caption:c,parent:g,isNodeExpand:!1,isSelected:f}):"fetchSearchMembers"===i.action?(this.fieldList[n].searchMembers.push(o),o.expanded=!0,this.fieldList[n].currrentMembers[u]={name:u,caption:c,parent:g,isNodeExpand:!1,isSelected:!1}):this.calcChildMembers.push(o)}else"2"===p&&(r=u)}},e.prototype.getFieldListItems=function(e,t,i){for(var r={},a=[],n=[].slice.call(e.querySelectorAll("row")),o=0,s=n;o<s.length;o++){var l=s[o],d=[].slice.call(l.querySelectorAll("ALL_MEMBER")).length>0,h=l.querySelector("DIMENSION_UNIQUE_NAME").textContent,p=l.querySelector("HIERARCHY_UNIQUE_NAME").textContent,u=h===p&&"[measures]"!==h.toLowerCase()&&"[measures]"!==p.toLowerCase();a.push({pid:this.isMondrian||u?h+"~#^Dim":h,id:p,name:l.querySelector("HIERARCHY_CAPTION").textContent,caption:l.querySelector("HIERARCHY_CAPTION").textContent,tag:p,hasAllMember:d,allMember:d?l.querySelectorAll("ALL_MEMBER")[0].textContent:void 0,type:"string"})}r={hierarchy:a,hierarchySuccess:e,measures:[]},this.fieldListObj=r;var c={catalog:i.dataSourceSettings.catalog,cube:i.dataSourceSettings.cube,url:i.dataSourceSettings.url,LCID:i.dataSourceSettings.localeIdentifier.toString(),request:"MDSCHEMA_DIMENSIONS",roles:i.dataSourceSettings.roles};this.getTreeData(c,this.loadDimensionElements.bind(this),i)},e.prototype.loadCalculatedMemberElements=function(e){if(e.length>0){var t=this.fieldListData,i={hasChildren:!0,isSelected:!1,id:"[Calculated Members].[_0]",name:"[Calculated Members].[_0]",caption:"Calculated Members",spriteCssClass:"e-calcMemberGroupCDB "+o.a,tag:"[Calculated Members].[_0]",type:"string"};t.length>0&&"[measures]"===t[0].id.toLowerCase()&&t.splice(0,0,i);for(var r=0,a=e;r<a.length;r++){var n=a[r];if(!this.fieldList[n.name]){var s=n.formula,l=s.toLowerCase().indexOf("measure")>-1?"[Measures].":n.hierarchyUniqueName+".",d=l+"["+n.name+"]",h=this.dataFields[n.name]&&this.dataFields[n.name].caption?this.dataFields[n.name].caption:this.mappingFields[n.name]&&this.mappingFields[n.name].caption?this.mappingFields[n.name].caption:n.name,p=n.formatString,u={hasChildren:!1,isSelected:!1,id:n.name,pid:"[Calculated Members].[_0]",name:n.name,caption:h,spriteCssClass:"e-calc-member "+(s.toLowerCase().indexOf("measure")>-1?"e-calc-measure-icon":"e-calc-dimension-icon")+" "+o.a,tag:d,formula:s,formatString:p,aggregateType:void 0,type:"CalculatedField",filter:[],dateMember:[],sort:"Ascending",actualFilter:[],filterMembers:[],childMembers:[],searchMembers:[],members:{},currrentMembers:{},isHierarchy:!0,isExcelFilter:!1,isCalculatedField:!0,allowDragAndDrop:this.dataFields[n.name]?this.dataFields[n.name].allowDragAndDrop:!this.mappingFields[n.name]||this.mappingFields[n.name].allowDragAndDrop,showFilterIcon:this.dataFields[n.name]?this.dataFields[n.name].showFilterIcon:!this.mappingFields[n.name]||this.mappingFields[n.name].showFilterIcon,showSortIcon:this.dataFields[n.name]?this.dataFields[n.name].showSortIcon:!this.mappingFields[n.name]||this.mappingFields[n.name].showSortIcon,showEditIcon:this.dataFields[n.name]?this.dataFields[n.name].showEditIcon:!this.mappingFields[n.name]||this.mappingFields[n.name].showEditIcon,showRemoveIcon:this.dataFields[n.name]?this.dataFields[n.name].showRemoveIcon:!this.mappingFields[n.name]||this.mappingFields[n.name].showRemoveIcon,showValueTypeIcon:this.dataFields[n.name]?this.dataFields[n.name].showValueTypeIcon:!this.mappingFields[n.name]||this.mappingFields[n.name].showValueTypeIcon,showSubTotals:this.dataFields[n.name]?this.dataFields[n.name].showSubTotals:!this.mappingFields[n.name]||this.mappingFields[n.name].showSubTotals,fieldType:s.toLowerCase().indexOf("measure")>-1?"Measure":"Dimension",parentHierarchy:s.toLowerCase().indexOf("measure")>-1?void 0:n.hierarchyUniqueName};t.push(u),this.fieldList[u.id]=u,this.updateMembersOrder(n.name)}}}},e.prototype.loadDimensionElements=function(e,t,a){for(var n=[],s=[].slice.call(e.querySelectorAll("row")),l={},d=0,h=s;d<h.length;d++){var p=h[d],u=p.querySelector("DIMENSION_UNIQUE_NAME").textContent,c=p.querySelector("DEFAULT_HIERARCHY").textContent,g=p.querySelector("DIMENSION_CAPTION").textContent,m=u===c;u.toLowerCase().indexOf("[measure")>=0?l={hasChildren:!0,isSelected:!1,id:u,name:u,caption:g,spriteCssClass:"[measures]"===u.toLowerCase()?"e-measureGroupCDB-icon "+o.a:"e-dimensionCDB-icon "+o.a,tag:u,type:"string"}:i.i(r.isNullOrUndefined)(s[0].querySelector("HIERARCHY_CAPTION"))&&n.push({hasChildren:!0,isSelected:!1,id:this.isMondrian||m?u+"~#^Dim":u,name:u,caption:g,spriteCssClass:"e-dimensionCDB-icon "+o.a,tag:u,defaultHierarchy:p.querySelector("DEFAULT_HIERARCHY").textContent,type:"string"})}n.splice(0,0,l),this.fieldListData=n;var f={catalog:a.dataSourceSettings.catalog,cube:a.dataSourceSettings.cube,url:a.dataSourceSettings.url,LCID:a.dataSourceSettings.localeIdentifier.toString(),request:"MDSCHEMA_SETS",roles:a.dataSourceSettings.roles};this.getTreeData(f,this.loadNamedSetElements.bind(this),a)},e.prototype.loadNamedSetElements=function(e,t,a){var n=i.i(r.extend)([],this.rows,null,!0);n=n.concat(this.columns,this.filters);for(var s=this.fieldListData,l=[],d=0,h=n;d<h.length;d++){var p=h[d];l.push(p.name)}for(var u=[],c=[].slice.call(e.querySelectorAll("row")),g=0,m=c;g<m.length;g++){var p=m[g];u.indexOf(p.querySelector("DIMENSIONS").textContent.split(".")[0])>=0||(s.push({hasChildren:!0,isSelected:!1,pid:p.querySelector("DIMENSIONS").textContent.split(".")[0],id:p.querySelector("SET_DISPLAY_FOLDER").textContent+"_"+p.querySelector("DIMENSIONS").textContent.split(".")[0],name:p.querySelector("SET_DISPLAY_FOLDER").textContent,spriteCssClass:"e-folderCDB-icon "+o.a+" namedSets",caption:p.querySelector("SET_DISPLAY_FOLDER").textContent,type:"string"}),u.push(p.querySelector("DIMENSIONS").textContent.split(".")[0]));var f="["+p.querySelector("SET_NAME").textContent.trim()+"]",v={hasChildren:!0,isNamedSets:!0,isSelected:l.indexOf("["+p.querySelector("SET_NAME").textContent+"]")>=0,pid:p.querySelector("SET_DISPLAY_FOLDER").textContent+"_"+p.querySelector("DIMENSIONS").textContent.split(".")[0],id:f,name:p.querySelector("SET_CAPTION").textContent,caption:this.dataFields[f]&&this.dataFields[f].caption?this.dataFields[f].caption:this.mappingFields[f]&&this.mappingFields[f].caption?this.mappingFields[f].caption:p.querySelector("SET_CAPTION").textContent,spriteCssClass:"e-namedSetCDB-icon "+o.a,tag:p.querySelector("EXPRESSION").textContent,type:"string",filter:[],dateMember:[],actualFilter:[],filterMembers:[],childMembers:[],searchMembers:[],members:{},currrentMembers:{},isHierarchy:!0,isExcelFilter:!1,allowDragAndDrop:this.dataFields[f]?this.dataFields[f].allowDragAndDrop:!this.mappingFields[f]||this.mappingFields[f].allowDragAndDrop,showFilterIcon:this.dataFields[f]?this.dataFields[f].showFilterIcon:!this.mappingFields[f]||this.mappingFields[f].showFilterIcon,showSortIcon:this.dataFields[f]?this.dataFields[f].showSortIcon:!this.mappingFields[f]||this.mappingFields[f].showSortIcon,showEditIcon:this.dataFields[f]?this.dataFields[f].showEditIcon:!this.mappingFields[f]||this.mappingFields[f].showEditIcon,showRemoveIcon:this.dataFields[f]?this.dataFields[f].showRemoveIcon:!this.mappingFields[f]||this.mappingFields[f].showRemoveIcon,showValueTypeIcon:this.dataFields[f]?this.dataFields[f].showValueTypeIcon:!this.mappingFields[f]||this.mappingFields[f].showValueTypeIcon,showSubTotals:this.dataFields[f]?this.dataFields[f].showSubTotals:!this.mappingFields[f]||this.mappingFields[f].showSubTotals};s.push(v),this.fieldList[f]=v,this.updateMembersOrder(f)}a.hierarchy=this.fieldListData,a.hierarchySuccess=this.fieldListObj.hierarchySuccess,this.loadHierarchyElements(a)},e.prototype.loadHierarchyElements=function(e){var t=e.hierarchySuccess,a=e.hierarchy,n=i.i(r.extend)([],this.rows,null,!0);n=n.concat(this.columns,this.filters);for(var s=[],l=0,d=n;l<d.length;l++){var h=d[l];s.push(h.name)}for(var p=[].slice.call(t.querySelectorAll("row")),u=0,c=p;u<c.length;u++){var h=c[u],g=h.querySelector("DIMENSION_UNIQUE_NAME").textContent,m=h.querySelector("HIERARCHY_UNIQUE_NAME").textContent,f=[].slice.call(h.querySelectorAll("ALL_MEMBER")).length>0,v=void 0;if(f){var S=h.querySelectorAll("ALL_MEMBER")[0].textContent.replace(/[\]']+/g,"").split(".");v=S[S.length-1].trim()}else v=void 0;for(var y=h.querySelector("HIERARCHY_DISPLAY_FOLDER")?h.querySelector("HIERARCHY_DISPLAY_FOLDER").textContent:"",b=[],C=0,x=a;C<x.length;C++){var w=x[C];w.tag===g&&b.push(w)}if(b.length>0){var T=g===m&&"[measures]"!==g.toLowerCase()&&"[measures]"!==m.toLowerCase();if("[measures]"!==g.toLowerCase()&&"[measures]"!==m.toLowerCase()){var M=g+(this.isMondrian||T?"~#^Dim":"");if(""!==y){for(var _=g+(this.isMondrian||T?"~#^Dim":"")+"_"+y,D=[],O=0,P=a;O<P.length;O++){var w=P[O];w.tag===_&&w.pid===M&&D.push(w)}if(0===D.length){var E={hasChildren:!0,isSelected:!1,pid:g+(this.isMondrian||T?"~#^Dim":""),id:_,name:y,spriteCssClass:"e-folderCDB-icon "+o.a,tag:_,caption:y,type:"string"};a.push(E)}M=_}var N={hasChildren:!h.querySelector("HIERARCHY_ORIGIN")||"2"!==h.querySelector("HIERARCHY_ORIGIN").textContent&&"6"!==h.querySelector("HIERARCHY_ORIGIN").textContent,isSelected:s.indexOf(m)>=0,pid:M,id:m,name:h.querySelector("HIERARCHY_CAPTION").textContent,spriteCssClass:(h.querySelector("HIERARCHY_ORIGIN")?"2"!==h.querySelector("HIERARCHY_ORIGIN").textContent&&"6"!==h.querySelector("HIERARCHY_ORIGIN").textContent?"e-hierarchyCDB-icon":"e-attributeCDB-icon":"e-hierarchyCDB-icon")+" "+o.a,hasAllMember:f,allMember:v,tag:m,caption:this.dataFields[m]&&this.dataFields[m].caption?this.dataFields[m].caption:this.mappingFields[m]&&this.mappingFields[m].caption?this.mappingFields[m].caption:h.querySelector("HIERARCHY_CAPTION").textContent,type:"string",filter:[],dateMember:[],sort:this.enableSort?this.sortObject[m]?this.sortObject[m]:"Ascending":"None",actualFilter:[],filterMembers:[],childMembers:[],searchMembers:[],members:{},currrentMembers:{},levels:[],levelCount:1,isHierarchy:!!h.querySelector("HIERARCHY_ORIGIN")&&("2"===h.querySelector("HIERARCHY_ORIGIN").textContent||"6"===h.querySelector("HIERARCHY_ORIGIN").textContent),isExcelFilter:!1,allowDragAndDrop:this.dataFields[m]?this.dataFields[m].allowDragAndDrop:!this.mappingFields[m]||this.mappingFields[m].allowDragAndDrop,showFilterIcon:this.dataFields[m]?this.dataFields[m].showFilterIcon:!this.mappingFields[m]||this.mappingFields[m].showFilterIcon,showSortIcon:this.dataFields[m]?this.dataFields[m].showSortIcon:!this.mappingFields[m]||this.mappingFields[m].showSortIcon,showEditIcon:this.dataFields[m]?this.dataFields[m].showEditIcon:!this.mappingFields[m]||this.mappingFields[m].showEditIcon,showRemoveIcon:this.dataFields[m]?this.dataFields[m].showRemoveIcon:!this.mappingFields[m]||this.mappingFields[m].showRemoveIcon,showValueTypeIcon:this.dataFields[m]?this.dataFields[m].showValueTypeIcon:!this.mappingFields[m]||this.mappingFields[m].showValueTypeIcon,showSubTotals:this.dataFields[m]?this.dataFields[m].showSubTotals:!this.mappingFields[m]||this.mappingFields[m].showSubTotals};a.push(N),this.fieldList[m]=N,this.updateMembersOrder(m)}}}var F={catalog:e.dataSourceSettings.catalog,cube:e.dataSourceSettings.cube,url:e.dataSourceSettings.url,LCID:e.dataSourceSettings.localeIdentifier.toString(),request:"MDSCHEMA_LEVELS",roles:e.dataSourceSettings.roles};this.getTreeData(F,this.loadLevelElements.bind(this),e)},e.prototype.updateMembersOrder=function(e){for(var t=0,i=this.sortSettings;t<i.length;t++){var r=i[t];if(e===r.name&&r.membersOrder){this.fieldList[e].membersOrder=r.membersOrder;break}}},e.prototype.loadLevelElements=function(e,t,i){var r=[],a=this.fieldListData;r=[];for(var n=[].slice.call(e.querySelectorAll("row")),s=0,l=n;s<l.length;s++){var d=l[s];if(1!==parseInt(d.querySelector("LEVEL_TYPE").textContent,10)&&"[measures]"!==d.querySelector("HIERARCHY_UNIQUE_NAME").textContent.toLowerCase()){var h=d.querySelector("HIERARCHY_UNIQUE_NAME").textContent,p=d.querySelector("LEVEL_UNIQUE_NAME").textContent,u=d.querySelector("LEVEL_CAPTION").textContent,c={hasChildren:!1,isChecked:!1,isSelected:this.fieldList[h].isSelected,pid:h,id:p,name:u,tag:p,spriteCssClass:"e-level-members e-hierarchy-level-"+parseInt(d.querySelector("LEVEL_NUMBER").textContent,10)+"-icon "+o.a,caption:u,type:"string"};r.push(c),this.fieldList[h]&&this.fieldList[h].spriteCssClass&&-1===this.fieldList[h].spriteCssClass.indexOf("e-attributeCDB-icon")?(this.fieldList[h].levels.push(c),this.fieldList[h].isHierarchy=!1):this.fieldList[h].isHierarchy=!0}}this.fieldListData=a=a.concat(r);var g={catalog:i.dataSourceSettings.catalog,cube:i.dataSourceSettings.cube,url:i.dataSourceSettings.url,LCID:i.dataSourceSettings.localeIdentifier.toString(),request:"MDSCHEMA_MEASURES",roles:i.dataSourceSettings.roles};this.getTreeData(g,this.loadMeasureElements.bind(this),i)},e.prototype.loadMeasureElements=function(e,t,a){for(var n,s=this.fieldListData,l=[],d=i.i(r.extend)([],this.values,null,!0),h=[],p=0,u=d;p<u.length;p++){var c=u[p];h.push(c.name)}if("en-US"!==this.locale){var g={catalog:a.dataSourceSettings.catalog,cube:a.dataSourceSettings.cube,url:a.dataSourceSettings.url,LCID:a.dataSourceSettings.localeIdentifier.toString(),request:"MDSCHEMA_MEASUREGROUPS",roles:a.dataSourceSettings.roles};this.getTreeData(g,this.loadMeasureGroups.bind(this),a)}for(var m=[].slice.call(e.querySelectorAll("row")),f=0,v=m;f<v.length;f++){var c=v[f],S=i.i(r.isNullOrUndefined)(c.querySelector("MEASUREGROUP_NAME"))?"":c.querySelector("MEASUREGROUP_NAME").textContent,y=c.querySelector("MEASURE_UNIQUE_NAME").textContent,b=c.querySelector("DEFAULT_FORMAT_STRING")?c.querySelector("DEFAULT_FORMAT_STRING").textContent:"#,#",C=c.querySelector("MEASURE_AGGREGATOR")?c.querySelector("MEASURE_AGGREGATOR").textContent:"1";if(!(l.indexOf(S)>=0)){if("en-US"!==this.locale){for(var x=[],w=0,T=this.fieldListObj.measuresGroups;w<T.length;w++){var M=T[w];M.querySelector("MEASUREGROUP_NAME").textContent===S&&x.push(M)}n=x.length>0?x[0].querySelector("MEASUREGROUP_CAPTION").textContent:S}else n=S;""!==S&&(s.push({hasChildren:!0,isChecked:!1,isSelected:!1,pid:"[Measures]",id:S,name:n,spriteCssClass:"e-measureCDB e-folderCDB-icon "+o.a,tag:S,caption:n,aggregateType:this.getAggregateType(S,C),type:"string"}),l.push(S))}var _={hasChildren:!1,isSelected:h.indexOf(y)>=0,pid:""===S?"[Measures]":S,id:y,name:c.querySelector("MEASURE_CAPTION").textContent,spriteCssClass:"e-measure-icon "+o.a,tag:y,caption:this.dataFields[y]&&this.dataFields[y].caption?this.dataFields[y].caption:this.mappingFields[y]&&this.mappingFields[y].caption?this.mappingFields[y].caption:c.querySelector("MEASURE_CAPTION").textContent,aggregateType:this.getAggregateType(y,C),type:"number",filter:[],actualFilter:[],filterMembers:[],childMembers:[],searchMembers:[],members:{},currrentMembers:{},formatString:b,allowDragAndDrop:this.dataFields[y]?this.dataFields[y].allowDragAndDrop:!this.mappingFields[y]||this.mappingFields[y].allowDragAndDrop,showFilterIcon:this.dataFields[y]?this.dataFields[y].showFilterIcon:!this.mappingFields[y]||this.mappingFields[y].showFilterIcon,showSortIcon:this.dataFields[y]?this.dataFields[y].showSortIcon:!this.mappingFields[y]||this.mappingFields[y].showSortIcon,showEditIcon:this.dataFields[y]?this.dataFields[y].showEditIcon:!this.mappingFields[y]||this.mappingFields[y].showEditIcon,showRemoveIcon:this.dataFields[y]?this.dataFields[y].showRemoveIcon:!this.mappingFields[y]||this.mappingFields[y].showRemoveIcon,showValueTypeIcon:this.dataFields[y]?this.dataFields[y].showValueTypeIcon:!this.mappingFields[y]||this.mappingFields[y].showValueTypeIcon,showSubTotals:this.dataFields[y]?this.dataFields[y].showSubTotals:!this.mappingFields[y]||this.mappingFields[y].showSubTotals};s.push(_),this.fieldList[y]=_,h.indexOf(y)>=0&&h.splice(h.indexOf(y),1)}this.measureReportItems=h},e.prototype.loadMeasureGroups=function(e){i.i(r.isNullOrUndefined)(this.fieldListObj)&&(this.fieldListObj={}),this.fieldListObj.measuresGroups=[].slice.call(e.querySelectorAll("row"))},e.prototype.doAjaxPost=function(e,t,i,a,n){new r.Ajax({mode:!1,contentType:"text/xml",url:t,data:i,dataType:"xml",type:e,beforeSend:this.beforeSend.bind(this),onSuccess:function(e,t){var i=new DOMParser,r=i.parseFromString(e,"text/xml");a(r,t,n)},onFailure:function(e){return e}}).send()},e.prototype.beforeSend=function(e){this.dataSourceSettings.authentication.userName&&this.dataSourceSettings.authentication.password&&e.httpRequest.setRequestHeader("Authorization","Basic "+btoa(this.dataSourceSettings.authentication.userName+":"+this.dataSourceSettings.authentication.password))},e.prototype.getSoapMsg=function(e,t){var i="",r="",a=this.getConnectionInfo(e.url,e.localeIdentifier);return this.isMondrian?(r="",i='<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"><SOAP-ENV:Body><Execute xmlns="urn:schemas-microsoft-com:xml-analysis"><Command><Statement><![CDATA['+t+"]]></Statement></Command><Properties><PropertyList><DataSourceInfo>"+r+"</DataSourceInfo><Catalog>"+e.catalog+"</Catalog><AxisFormat>TupleFormat</AxisFormat><Content>Data</Content><Format>Multidimensional</Format></PropertyList></Properties></Execute></SOAP-ENV:Body></SOAP-ENV:Envelope>"):i='<Envelope xmlns="http://schemas.xmlsoap.org/soap/envelope/"> <Header></Header> <Body> <Execute xmlns="urn:schemas-microsoft-com:xml-analysis"> <Command> <Statement> '+t+" </Statement> </Command> <Properties> <PropertyList> <Catalog>"+e.catalog+"</Catalog> <LocaleIdentifier>"+a.LCID+"</LocaleIdentifier>"+(e.roles?"<Roles>"+e.roles+"</Roles>":"")+"</PropertyList> </Properties> </Execute> </Body> </Envelope>",i},e.prototype.getConnectionInfo=function(e,t){var a={url:"",LCID:i.i(r.isNullOrUndefined)(t)?"1033":t.toString()};if(""!==e)for(var n=0,o=e.split(";");n<o.length;n++){var s=o[n];s.toLowerCase().indexOf("locale")<0&&0===a.url.length?a.url=s:s.toLowerCase().indexOf("locale")>=0&&(a.LCID=s.replace(/ /g,"").split("=")[1])}return a},e.prototype.getMDXQuery=function(e){return n.a.getCellSets(e,this,!0,void 0,!0),this.mdxQuery},e}()},function(e,t,i){"use strict";i.d(t,"a",function(){return d});var r=i(27),a=i(26),n=i(28),o=i(25),s=i(33),l=i(34),d=function(){function e(e){return this.currentTreeItems=[],this.savedTreeFilterPos={},this.currentTreeItemsPos={},this.searchTreeItems=[],this.isDataOverflow=!1,this.isDateField=!1,this.element=e.element,this.moduleName=e.moduleName,this.dataSourceSettings=e.dataSourceSettings,this.engineModule=e.pivotEngine,this.enableRtl=e.enableRtl,this.enableHtmlSanitizer=e.enableHtmlSanitizer,this.isAdaptive=e.isAdaptive,this.renderMode=e.renderMode,this.parentID=e.id,this.localeObj=e.localeObj,this.dataType=e.dataType,this.cssClass=e.cssClass,this.nodeStateModified=new n.a(this),this.dataSourceUpdate=new o.a(this),this.eventBase=new a.a(this),this.filterDialog=new l.a(this),this.errorDialog=new s.a(this),this.keyboardModule=new r.a(this),this}return e.prototype.destroy=function(){this.keyboardModule&&(this.keyboardModule.destroy(),this.keyboardModule=null)},e}()},function(e,t,i){"use strict";i.d(t,"a",function(){return p});var r=i(0),a=(i.n(r),i(2)),n=i(5),o=(i.n(n),i(4)),s=(i.n(o),i(9)),l=(i.n(s),i(7)),d=(i.n(l),i(1)),h=i(3),p=function(){function e(e){this.menuInfo=[],this.stringAggregateTypes=["Count","DistinctCount"],this.parent=e}return e.prototype.render=function(e,t){this.parentElement=t,this.openContextMenu(e)},e.prototype.openContextMenu=function(e){var t=this,i=e.target.parentElement.getAttribute("data-uid"),r=h.a.getFieldInfo(i,this.parent);this.buttonElement=e.target.parentElement;var a="number"!==this.parent.engineModule.fieldList[i].type?1:0;if(this.summaryTypes=this.getMenuItem(a).slice(),this.parent.actionObj.actionName=d._76,this.parent.actionObj.fieldInfo=r.fieldItem,!this.parent.actionBeginMethod()){var n={cancel:!1,fieldName:i,aggregateTypes:this.summaryTypes,displayMenuCount:7},o="pivotfieldlist"===this.parent.getModuleName()&&this.parent.isPopupView?this.parent.pivotGridModule:this.parent;try{o.trigger(d._9,n,function(i){if(!i.cancel){t.summaryTypes=i.aggregateTypes,t.createContextMenu(a,i.displayMenuCount),t.currentMenu=e.target;var r=t.currentMenu.getBoundingClientRect();t.parent.enableRtl?t.menuInfo[a].open(r.top+(window.scrollY||document.documentElement.scrollTop),r.left-105):t.menuInfo[a].open(r.top+(window.scrollY||document.documentElement.scrollTop),r.left)}})}catch(e){this.parent.actionFailureMethod(e)}}},e.prototype.createContextMenu=function(e,t){var a=this,o=[];o[e]=[],this.menuInfo[e]&&!this.menuInfo[e].isDestroyed&&this.menuInfo[e].destroy();for(var s=[],l=0;l<this.summaryTypes.length;l++){var d=this.summaryTypes[l];e?this.stringAggregateTypes.indexOf(d)>-1&&s.indexOf(d)<0&&(o[e].push({text:this.parent.localeObj.getConstant(d),id:this.parent.element.id+"StringMenu_"+d}),s.push(d)):this.parent.getAllSummaryType().indexOf(d)>-1&&s.indexOf(d)<0&&(o[e].push({text:this.parent.localeObj.getConstant(d),id:this.parent.element.id+"_"+d}),s.push(d))}o[e].length>t&&(o[e].splice(t),o[e].push({text:this.parent.localeObj.getConstant("MoreOption"),id:this.parent.element.id+"_MoreOption"}));var h={items:o[e],enableRtl:this.parent.enableRtl,locale:this.parent.locale,cssClass:this.parent.cssClass,beforeOpen:this.beforeMenuOpen.bind(this,e),onClose:function(){i.i(r.select)("#"+a.buttonElement.id,a.parentElement).focus()},select:this.selectOptionInContextMenu.bind(this)},p=document.getElementById(this.parent.element.id+(e?"valueFieldStringContextMenu":"valueFieldContextMenu"));null!==p?p.innerHTML="":p=i.i(r.createElement)("ul",{id:this.parent.element.id+(e?"valueFieldStringContextMenu":"valueFieldContextMenu")}),this.parent.element.appendChild(p),this.menuInfo[e]=new n.ContextMenu(h),this.menuInfo[e].isStringTemplate=!0,this.menuInfo[e].appendTo(p)},e.prototype.getMenuItem=function(e){for(var t=[],i=0;i<this.parent.aggregateTypes.length;i++){var r=this.parent.aggregateTypes[i];e?this.stringAggregateTypes.indexOf(r)>-1&&-1===t.indexOf(r)&&t.push(r):this.parent.getAllSummaryType().indexOf(r)>-1&&-1===t.indexOf(r)&&t.push(r)}return t},e.prototype.beforeMenuOpen=function(e,t){t.element.style.zIndex=(this.menuInfo[e].element.style.zIndex+3).toString(),t.element.style.display="inline"},e.prototype.createValueSettingsDialog=function(e,t,n){var s=this;this.parentElement=t;var l=i.i(r.createElement)("div",{id:this.parentElement.id+"_ValueDialog",className:"e-value-field-settings",attrs:{"data-field":e.getAttribute("data-uid")?e.getAttribute("data-uid"):e.getAttribute("data-field")}});this.parentElement.appendChild(l),this.valueDialog=new o.Dialog({animationSettings:{effect:"Fade"},allowDragging:!0,header:this.parent.localeObj.getConstant("valueFieldSettings"),content:this.createFieldOptions(e,n),isModal:!0,visible:!0,showCloseIcon:!0,enableRtl:this.parent.enableRtl,locale:this.parent.locale,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,width:"320px",height:"auto",position:{X:"center",Y:"center"},buttons:[{click:this.updateValueSettings.bind(this),buttonModel:{cssClass:a.d+(this.parent.cssClass?" "+this.parent.cssClass:""),content:this.parent.localeObj.getConstant("ok"),isPrimary:!0}},{click:function(){s.valueDialog.hide()},buttonModel:{cssClass:a.e+(this.parent.cssClass?" "+this.parent.cssClass:""),content:this.parent.localeObj.getConstant("cancel")}}],closeOnEscape:"pivotfieldlist"!==this.parent.getModuleName()||"Popup"!==this.parent.renderMode,target:this.parentElement,overlayClick:function(){s.removeDialog()},close:this.removeDialog.bind(this),cssClass:this.parent.cssClass}),this.valueDialog.isStringTemplate=!0,this.valueDialog.appendTo(l)},e.prototype.createFieldOptions=function(e,t){var n=e.getAttribute("data-caption"),o=t&&"MoreOption"!==t?t:e.getAttribute("data-type"),d=e.getAttribute("data-basefield"),h=e.getAttribute("data-baseitem");o="undefined"!==o.toString()?o:"Sum";for(var p=[],u=this.parent.aggregateTypes,c=[],g=0;g<u.length;g++)this.parent.getAllSummaryType().indexOf(u[g])>-1&&c.indexOf(u[g])<0&&(p.push({value:u[g],text:this.parent.localeObj.getConstant(u[g])}),c.push(u[g]));var m=["DifferenceFrom","PercentageOfDifferenceFrom"],f=["DifferenceFrom","PercentageOfDifferenceFrom","PercentageOfParentTotal"],v=i.i(r.extend)([],this.parent.dataSourceSettings.rows,null,!0);v=v.concat(this.parent.dataSourceSettings.columns);for(var S=[],y=[],b=0,C=v;b<C.length;b++){var x=C[b],w=x.name,T=x.caption?x.caption:x.name;S.push({value:w,text:T})}0===Object.keys(S).length?(S.push({value:"",text:""}),d="",y=[]):(d=d&&"undefined"!==d.toString()&&"null"!==d.toString()?d:S[0].value,y=Object.keys(this.parent.engineModule.fieldList["undefined"!==d.toString()?d:S[0].value].formattedMembers)),h="undefined"!==h.toString()?h:y[0];var M=i.i(r.createElement)("div",{className:"e-value-field-div-content",id:this.parentElement.id+"_field_div_content",attrs:{"data-type":o,"data-caption":n,"data-basefield":d,"data-baseitem":h}}),_=i.i(r.createElement)("div",{className:"e-field-name-text-container"}),D=i.i(r.createElement)("div",{className:"e-field-option-container"}),O=i.i(r.createElement)("div",{className:"e-type-option-container"}),P=i.i(r.createElement)("div",{className:"e-base-field-option-container"}),E=i.i(r.createElement)("div",{className:"e-base-item-option-container"}),N=i.i(r.createElement)("div",{className:"e-field-name-title"});N.innerText=this.parent.localeObj.getConstant("sourceName")+" ";var F=i.i(r.createElement)("div",{className:"e-field-name-content"});F.innerText=this.parent.enableHtmlSanitizer?r.SanitizeHtmlHelper.sanitize(e.getAttribute("data-uid")?e.getAttribute("data-uid"):e.getAttribute("data-field")):e.getAttribute("data-uid")?e.getAttribute("data-uid"):e.getAttribute("data-field"),this.buttonElement=this.buttonElement?this.buttonElement:document.querySelector("."+F.innerText);var I=i.i(r.createElement)("div",{className:"e-type-option-text"});I.innerText=this.parent.localeObj.getConstant("sourceCaption");var L=i.i(r.createElement)("div",{className:"e-base-field-option-text"});L.innerText=this.parent.localeObj.getConstant("summarizeValuesBy");var A=i.i(r.createElement)("div",{className:"e-base-item-option-text"});A.innerText=this.parent.localeObj.getConstant("baseField");var R=i.i(r.createElement)("div",{className:"e-type-option-text"});R.innerText=this.parent.localeObj.getConstant("baseItem");var k=i.i(r.createElement)("div",{className:"e-caption-input-container"}),j=i.i(r.createElement)("div",{id:this.parentElement.id+"_type_option"}),H=i.i(r.createElement)("div",{id:this.parentElement.id+"_base_field_option"}),q=i.i(r.createElement)("div",{id:this.parentElement.id+"_base_item_option"}),V=i.i(r.createElement)("input",{id:this.parentElement.id+"type_input_option",className:"e-caption-input-text",attrs:{type:"text"}});_.appendChild(N),_.appendChild(F),k.appendChild(I),k.appendChild(V),O.appendChild(L),P.appendChild(A),E.appendChild(R),O.appendChild(j),P.appendChild(H),E.appendChild(q),D.appendChild(_),D.appendChild(k),D.appendChild(O),D.appendChild(P),D.appendChild(E),M.appendChild(D);var B=this,U=new l.DropDownList({dataSource:p,enableRtl:this.parent.enableRtl,locale:this.parent.locale,fields:{value:"value",text:"text"},value:o,cssClass:a._11+(this.parent.cssClass?" "+this.parent.cssClass:""),width:"100%",change:function(e){G.enabled=-1!==f.indexOf(e.value),z.enabled=-1!==m.indexOf(e.value),z.enabled&&1===z.dataSource.length&&(z.dataSource=y,z.dataBind())}});U.isStringTemplate=!0,U.appendTo(j);var G=new l.DropDownList({dataSource:S,enableRtl:this.parent.enableRtl,locale:this.parent.locale,fields:{value:"value",text:"text"},value:d,enabled:-1!==f.indexOf(o),cssClass:a._11+(this.parent.cssClass?" "+this.parent.cssClass:""),width:"100%",change:function(e){y=Object.keys(B.parent.engineModule.fieldList[e.value].formattedMembers),z.dataSource=y,z.value=y[0],z.filterBarPlaceholder=B.parent.localeObj.getConstant("example")+" "+y[0],z.itemData=null,z.dataBind()}});G.isStringTemplate=!0,G.appendTo(H);var z=new l.DropDownList({dataSource:y,enableRtl:this.parent.enableRtl,locale:this.parent.locale,value:h,allowFiltering:!0,filterBarPlaceholder:this.parent.localeObj.getConstant("example")+" "+y[0],enabled:-1!==m.indexOf(o),cssClass:a._12+(this.parent.cssClass?" "+this.parent.cssClass:""),width:"100%"});z.isStringTemplate=!0,z.appendTo(q);var W=new s.MaskedTextBox({placeholder:"Enter field caption",enableRtl:this.parent.enableRtl,locale:this.parent.locale,value:n,width:"100%",cssClass:this.parent.cssClass});return W.isStringTemplate=!0,W.appendTo(V),M},e.prototype.selectOptionInContextMenu=function(e){if(null!==e.item.text){var t=this.currentMenu.parentElement,n=h.a.getFieldInfo(t?t.getAttribute("data-uid"):"",this.parent);if(this.parent.actionObj.actionName=d._76,this.parent.actionObj.fieldInfo=n.fieldItem,this.parent.actionBeginMethod())return;var o=e.item.id.split("_").pop();try{if("MoreOption"===o||"PercentageOfDifferenceFrom"===o||"PercentageOfParentTotal"===o||"DifferenceFrom"===o)this.createValueSettingsDialog(t,this.parentElement,o);else{var s=t.getAttribute("data-uid"),l=this.parent.dataSourceSettings.values,p=t.querySelector("."+a._13),u=e.item.text+" "+this.parent.localeObj.getConstant("of")+" "+this.parent.engineModule.fieldList[s].caption;u=this.parent.enableHtmlSanitizer?r.SanitizeHtmlHelper.sanitize(u):u,p.innerText=u,p.setAttribute("title",u),t.setAttribute("data-type",o);for(var c=0;c<this.parent.dataSourceSettings.values.length;c++)if(this.parent.dataSourceSettings.values[c].name===s){var g=i.i(r.extend)({},l[c].properties?l[c].properties:l[c],null,!0);g.type=o,this.parent.engineModule.fieldList[s].aggregateType=o,l.splice(c,1,g),this.parent.lastAggregationInfo=g}this.updateDataSource()}}catch(e){this.parent.actionFailureMethod(e)}}},e.prototype.updateDataSource=function(e){this.parent.allowDeferLayoutUpdate&&"pivotview"!==this.parent.getModuleName()?"pivotfieldlist"===this.parent.getModuleName()&&"Popup"===this.parent.renderMode?(this.parent.pivotGridModule.setProperties({dataSourceSettings:this.parent.dataSourceSettings.properties},!0),this.parent.pivotGridModule.notify(d._17,this),this.parent.pivotGridModule.engineModule=this.parent.engineModule):this.parent.triggerPopulateEvent():this.parent.updateDataSource(e)},e.prototype.updateValueSettings=function(){var e,t=this.valueDialog.element,n=i.i(r.getInstance)(i.i(r.select)("#"+this.parentElement.id+"type_input_option"),s.MaskedTextBox),o=i.i(r.getInstance)(i.i(r.select)("#"+this.parentElement.id+"_type_option"),l.DropDownList),d=i.i(r.getInstance)(i.i(r.select)("#"+this.parentElement.id+"_base_field_option"),l.DropDownList),p=i.i(r.getInstance)(i.i(r.select)("#"+this.parentElement.id+"_base_item_option"),l.DropDownList),u=t.getAttribute("data-field");if(this.parentElement.querySelector("."+a._14)&&(e=this.parentElement.querySelector("."+a._14+"."+u.replace(/[^A-Z0-9]/gi,""))),e){var c=e.querySelector("."+a._13),g=this.parent.localeObj.getConstant(o.value)+" "+this.parent.localeObj.getConstant("of")+" "+n.value;g=this.parent.enableHtmlSanitizer?r.SanitizeHtmlHelper.sanitize(g):g,c.innerText=g,c.setAttribute("title",g),e.setAttribute("data-type",o.value),e.setAttribute("data-caption",n.value),e.setAttribute("data-basefield",d.value),e.setAttribute("data-baseitem",p.value)}var m=h.a.getFieldByName(u,this.parent.dataSourceSettings.values);m=m.properties?m.properties:m,m.caption=n.value,m.type=o.value,m.baseField=d.value,m.baseItem=p.value,this.valueDialog.close(),this.parent.lastAggregationInfo=m,this.updateDataSource(!0)},e.prototype.removeDialog=function(){this.buttonElement&&i.i(r.select)("#"+this.buttonElement.id,this.parentElement)&&i.i(r.select)("#"+this.buttonElement.id,this.parentElement).focus(),this.valueDialog&&!this.valueDialog.isDestroyed&&this.valueDialog.destroy(),document.getElementById(this.parentElement.id+"_ValueDialog")&&i.i(r.remove)(document.getElementById(this.parentElement.id+"_ValueDialog"))},e.prototype.destroy=function(){this.parent.isDestroyed||this.menuInfo&&(void 0===this.menuInfo[1]||this.menuInfo[1].isDestroyed||this.menuInfo[1].destroy(),void 0===this.menuInfo[0]||this.menuInfo[0].isDestroyed||this.menuInfo[0].destroy())},e}()},function(e,t,i){"use strict";i.d(t,"a",function(){return o}),i.d(t,"b",function(){return s}),i.d(t,"c",function(){return l}),i.d(t,"d",function(){return d}),i.d(t,"e",function(){return h}),i.d(t,"f",function(){return p}),i.d(t,"g",function(){return u}),i.d(t,"h",function(){return c}),i.d(t,"i",function(){return g}),i.d(t,"j",function(){return m}),i.d(t,"k",function(){return f}),i.d(t,"l",function(){return v}),i.d(t,"m",function(){return S}),i.d(t,"n",function(){return y});var r=i(0),a=(i.n(r),this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}()),n=this&&this.__decorate||function(e,t,i,r){var a,n=arguments.length,o=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(n<3?a(o):n>3?a(t,i,o):a(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),n([i.i(r.Property)()],t.prototype,"name",void 0),n([i.i(r.Property)()],t.prototype,"caption",void 0),n([i.i(r.Property)("Sum")],t.prototype,"type",void 0),n([i.i(r.Property)()],t.prototype,"axis",void 0),n([i.i(r.Property)(!1)],t.prototype,"showNoDataItems",void 0),n([i.i(r.Property)()],t.prototype,"baseField",void 0),n([i.i(r.Property)()],t.prototype,"baseItem",void 0),n([i.i(r.Property)(!0)],t.prototype,"showSubTotals",void 0),n([i.i(r.Property)(!1)],t.prototype,"isNamedSet",void 0),n([i.i(r.Property)(!1)],t.prototype,"isCalculatedField",void 0),n([i.i(r.Property)(!0)],t.prototype,"showFilterIcon",void 0),n([i.i(r.Property)(!0)],t.prototype,"showSortIcon",void 0),n([i.i(r.Property)(!0)],t.prototype,"showRemoveIcon",void 0),n([i.i(r.Property)(!0)],t.prototype,"showValueTypeIcon",void 0),n([i.i(r.Property)(!0)],t.prototype,"showEditIcon",void 0),n([i.i(r.Property)(!0)],t.prototype,"allowDragAndDrop",void 0),n([i.i(r.Property)()],t.prototype,"dataType",void 0),n([i.i(r.Property)(!1)],t.prototype,"expandAll",void 0),n([i.i(r.Property)()],t.prototype,"groupName",void 0),t}(r.ChildProperty),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t}(o),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),n([i.i(r.Property)()],t.prototype,"backgroundColor",void 0),n([i.i(r.Property)()],t.prototype,"color",void 0),n([i.i(r.Property)()],t.prototype,"fontFamily",void 0),n([i.i(r.Property)()],t.prototype,"fontSize",void 0),t}(r.ChildProperty),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),n([i.i(r.Property)()],t.prototype,"name",void 0),n([i.i(r.Property)("Include")],t.prototype,"type",void 0),n([i.i(r.Property)()],t.prototype,"items",void 0),n([i.i(r.Property)("DoesNotEquals")],t.prototype,"condition",void 0),n([i.i(r.Property)()],t.prototype,"value1",void 0),n([i.i(r.Property)()],t.prototype,"value2",void 0),n([i.i(r.Property)()],t.prototype,"measure",void 0),n([i.i(r.Property)(1)],t.prototype,"levelCount",void 0),n([i.i(r.Property)()],t.prototype,"selectedField",void 0),t}(r.ChildProperty),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),n([i.i(r.Property)()],t.prototype,"measure",void 0),n([i.i(r.Property)()],t.prototype,"label",void 0),n([i.i(r.Property)()],t.prototype,"conditions",void 0),n([i.i(r.Property)()],t.prototype,"value1",void 0),n([i.i(r.Property)()],t.prototype,"value2",void 0),n([i.i(r.Property)()],t.prototype,"style",void 0),n([i.i(r.Property)(!0)],t.prototype,"applyGrandTotals",void 0),t}(r.ChildProperty),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),n([i.i(r.Property)()],t.prototype,"name",void 0),n([i.i(r.Property)("Ascending")],t.prototype,"order",void 0),n([i.i(r.Property)([])],t.prototype,"membersOrder",void 0),t}(r.ChildProperty),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),n([i.i(r.Property)()],t.prototype,"name",void 0),n([i.i(r.Property)()],t.prototype,"minimumFractionDigits",void 0),n([i.i(r.Property)()],t.prototype,"maximumFractionDigits",void 0),n([i.i(r.Property)()],t.prototype,"minimumSignificantDigits",void 0),n([i.i(r.Property)()],t.prototype,"maximumSignificantDigits",void 0),n([i.i(r.Property)(!0)],t.prototype,"useGrouping",void 0),n([i.i(r.Property)()],t.prototype,"skeleton",void 0),n([i.i(r.Property)()],t.prototype,"type",void 0),n([i.i(r.Property)()],t.prototype,"currency",void 0),n([i.i(r.Property)()],t.prototype,"minimumIntegerDigits",void 0),n([i.i(r.Property)()],t.prototype,"format",void 0),t}(r.ChildProperty),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),n([i.i(r.Property)()],t.prototype,"name",void 0),n([i.i(r.Property)()],t.prototype,"groupInterval",void 0),n([i.i(r.Property)()],t.prototype,"startingAt",void 0),n([i.i(r.Property)()],t.prototype,"endingAt",void 0),n([i.i(r.Property)("Date")],t.prototype,"type",void 0),n([i.i(r.Property)()],t.prototype,"rangeInterval",void 0),n([i.i(r.Property)()],t.prototype,"caption",void 0),n([i.i(r.Property)()],t.prototype,"customGroups",void 0),t}(r.ChildProperty),g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),n([i.i(r.Property)()],t.prototype,"groupName",void 0),n([i.i(r.Property)([])],t.prototype,"items",void 0),t}(r.ChildProperty),m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),n([i.i(r.Property)()],t.prototype,"name",void 0),n([i.i(r.Property)()],t.prototype,"formula",void 0),n([i.i(r.Property)()],t.prototype,"hierarchyUniqueName",void 0),n([i.i(r.Property)()],t.prototype,"formatString",void 0),t}(r.ChildProperty),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),n([i.i(r.Property)()],t.prototype,"name",void 0),n([i.i(r.Property)()],t.prototype,"items",void 0),n([i.i(r.Property)()],t.prototype,"delimiter",void 0),t}(r.ChildProperty),v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),n([i.i(r.Property)()],t.prototype,"headerText",void 0),n([i.i(r.Property)(".")],t.prototype,"headerDelimiter",void 0),n([i.i(r.Property)("None")],t.prototype,"sortOrder",void 0),n([i.i(r.Property)()],t.prototype,"measure",void 0),t}(r.ChildProperty),S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),n([i.i(r.Property)()],t.prototype,"userName",void 0),n([i.i(r.Property)()],t.prototype,"password",void 0),t}(r.ChildProperty),y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),n([i.i(r.Property)("Local")],t.prototype,"mode",void 0),n([i.i(r.Property)()],t.prototype,"catalog",void 0),n([i.i(r.Property)()],t.prototype,"cube",void 0),n([i.i(r.Property)()],t.prototype,"roles",void 0),n([i.i(r.Property)("Relational")],t.prototype,"providerType",void 0),n([i.i(r.Property)()],t.prototype,"url",void 0),n([i.i(r.Property)(1033)],t.prototype,"localeIdentifier",void 0),n([i.i(r.Property)()],t.prototype,"dataSource",void 0),n([i.i(r.Collection)([],o)],t.prototype,"rows",void 0),n([i.i(r.Collection)([],o)],t.prototype,"columns",void 0),n([i.i(r.Collection)([],o)],t.prototype,"values",void 0),n([i.i(r.Collection)([],o)],t.prototype,"filters",void 0),n([i.i(r.Collection)([],o)],t.prototype,"fieldMapping",void 0),n([i.i(r.Property)([])],t.prototype,"excludeFields",void 0),n([i.i(r.Property)(!1)],t.prototype,"expandAll",void 0),n([i.i(r.Property)("column")],t.prototype,"valueAxis",void 0),n([i.i(r.Property)(-1)],t.prototype,"valueIndex",void 0),n([i.i(r.Collection)([],d)],t.prototype,"filterSettings",void 0),n([i.i(r.Collection)([],p)],t.prototype,"sortSettings",void 0),n([i.i(r.Property)(!0)],t.prototype,"enableSorting",void 0),n([i.i(r.Property)("JSON")],t.prototype,"type",void 0),n([i.i(r.Property)(!0)],t.prototype,"allowMemberFilter",void 0),n([i.i(r.Property)(!1)],t.prototype,"allowLabelFilter",void 0),n([i.i(r.Property)(!1)],t.prototype,"allowValueFilter",void 0),n([i.i(r.Property)(!0)],t.prototype,"showSubTotals",void 0),n([i.i(r.Property)(!0)],t.prototype,"showRowSubTotals",void 0),n([i.i(r.Property)(!0)],t.prototype,"showColumnSubTotals",void 0),n([i.i(r.Property)("Auto")],t.prototype,"subTotalsPosition",void 0),n([i.i(r.Property)(!0)],t.prototype,"showGrandTotals",void 0),n([i.i(r.Property)("Bottom")],t.prototype,"grandTotalsPosition",void 0),n([i.i(r.Property)(!0)],t.prototype,"showRowGrandTotals",void 0),n([i.i(r.Property)(!0)],t.prototype,"showColumnGrandTotals",void 0),n([i.i(r.Property)(!1)],t.prototype,"alwaysShowValueHeader",void 0),n([i.i(r.Property)(!0)],t.prototype,"showHeaderWhenEmpty",void 0),n([i.i(r.Property)(!0)],t.prototype,"showAggregationOnValueField",void 0),n([i.i(r.Collection)([],u)],t.prototype,"formatSettings",void 0),n([i.i(r.Collection)([],f)],t.prototype,"drilledMembers",void 0),n([i.i(r.Complex)({},v)],t.prototype,"valueSortSettings",void 0),n([i.i(r.Collection)([],m)],t.prototype,"calculatedFieldSettings",void 0),n([i.i(r.Collection)([],h)],t.prototype,"conditionalFormatSettings",void 0),n([i.i(r.Property)()],t.prototype,"emptyCellsTextContent",void 0),n([i.i(r.Collection)([],c)],t.prototype,"groupSettings",void 0),n([i.i(r.Complex)({},S)],t.prototype,"authentication",void 0),t}(r.ChildProperty)},function(e,t,i){"use strict";i.d(t,"a",function(){return f});var r=i(0),a=(i.n(r),i(11)),n=(i.n(a),i(14)),o=i(1),s=i(2),l=i(17),d=i(61),h=i(19),p=i(4),u=(i.n(p),i(3)),c=i(16),g=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),m=this&&this.__decorate||function(e,t,i,r){var a,n=arguments.length,o=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(n<3?a(o):n>3?a(t,i,o):a(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},f=function(e){function t(t,i){var r=e.call(this,t,i)||this;return r.pivotChange=!1,r.isRequiredUpdate=!0,r.lastSortInfo={},r.lastFilterInfo={},r.lastAggregationInfo={},r.lastCalcFieldInfo={},r.isPopupView=!1,r.enableValueSorting=!1,r.request=new XMLHttpRequest,r.remoteData=[],r.actionObj={},r.destroyEngine=!1,r.defaultFieldListOrder="None",r.isDeferUpdateApplied=!1,r}return g(t,e),t.prototype.requiredModules=function(){var e=[];return this.allowCalculatedField&&e.push({args:[this],member:"calculatedField"}),e},t.prototype.getAllSummaryType=function(){return["Sum","Count","DistinctCount","Product","Min","Max","Avg","Median","Index","PopulationVar","SampleVar","PopulationStDev","SampleStDev","RunningTotals","PercentageOfGrandTotal","PercentageOfColumnTotal","PercentageOfRowTotal","PercentageOfParentColumnTotal","PercentageOfParentRowTotal","DifferenceFrom","PercentageOfDifferenceFrom","PercentageOfParentTotal"]},t.prototype.preRender=function(){this.dataSourceSettings&&"SSAS"===this.dataSourceSettings.providerType?(this.olapEngineModule=new c.a,this.dataType="olap"):(this.engineModule=new n.a,this.dataType="pivot"),this.isAdaptive=r.Browser.isDevice,this.globalize=new r.Internationalization(this.locale),this.renderModule=new d.a(this),this.defaultLocale={staticFieldList:"Pivot Field List",fieldList:"Field List",dropFilterPrompt:"Drop filter here",dropColPrompt:"Drop column here",dropRowPrompt:"Drop row here",dropValPrompt:"Drop value here",addPrompt:"Add field here",adaptiveFieldHeader:"Choose field",centerHeader:"Drag fields between axes below:",add:"add",drag:"Drag",filter:"Filter",filtered:"Filtered",sort:"Sort",remove:"Remove",filters:"Filters",rows:"Rows",columns:"Columns",values:"Values",CalculatedField:"Calculated Field",createCalculatedField:"Create Calculated Field",fieldName:"Enter the field name",error:"Error",invalidFormula:"Invalid formula.",dropText:'Example: ("Sum(Order_Count)" + "Sum(In_Stock)") * 250',dropTextMobile:"Add fields and edit formula here.",dropAction:"Calculated field cannot be place in any other region except value axis.",search:"Search",close:"Close",cancel:"Cancel",delete:"Delete",alert:"Alert",warning:"Warning",ok:"OK",allFields:"All Fields",formula:"Formula",fieldExist:"A field already exists in this name. Please enter a different name.",confirmText:"A calculation field already exists in this name. Do you want to replace it?",noMatches:"No matches",format:"Summaries values by",edit:"Edit",clear:"Clear",clearCalculatedField:"Clear edited field info",editCalculatedField:"Edit calculated field",sortAscending:"Sort ascending order",sortDescending:"Sort descending order",sortNone:"Sort data order",formulaField:"Drag and drop fields to formula",dragField:"Drag field to formula",clearFilter:"Clear",by:"by",enterValue:"Enter value",chooseDate:"Enter date",all:"All",multipleItems:"Multiple items",Equals:"Equals",DoesNotEquals:"Does Not Equal",BeginWith:"Begins With",DoesNotBeginWith:"Does Not Begin With",EndsWith:"Ends With",DoesNotEndsWith:"Does Not End With",Contains:"Contains",DoesNotContains:"Does Not Contain",GreaterThan:"Greater Than",GreaterThanOrEqualTo:"Greater Than Or Equal To",LessThan:"Less Than",LessThanOrEqualTo:"Less Than Or Equal To",Between:"Between",NotBetween:"Not Between",Before:"Before",BeforeOrEqualTo:"Before Or Equal To",After:"After",AfterOrEqualTo:"After Or Equal To",member:"Member",label:"Label",date:"Date",value:"Value",labelTextContent:"Show the items for which the label",dateTextContent:"Show the items for which the date",valueTextContent:"Show the items for which",And:"and",Sum:"Sum",Count:"Count",DistinctCount:"Distinct Count",Product:"Product",Avg:"Avg",Median:"Median",Min:"Min",Max:"Max",Index:"Index",SampleStDev:"Sample StDev",PopulationStDev:"Population StDev",SampleVar:"Sample Var",PopulationVar:"Population Var",RunningTotals:"Running Totals",DifferenceFrom:"Difference From",PercentageOfDifferenceFrom:"% of Difference From",PercentageOfGrandTotal:"% of Grand Total",PercentageOfColumnTotal:"% of Column Total",PercentageOfRowTotal:"% of Row Total",PercentageOfParentTotal:"% of Parent Total",PercentageOfParentColumnTotal:"% of Parent Column Total",PercentageOfParentRowTotal:"% of Parent Row Total",MoreOption:"More...",Years:"Years",Quarters:"Quarters",Months:"Months",Days:"Days",Hours:"Hours",Minutes:"Minutes",Seconds:"Seconds",apply:"Apply",valueFieldSettings:"Value field settings",sourceName:"Field name :",sourceCaption:"Field caption",summarizeValuesBy:"Summarize values by",baseField:"Base field",baseItem:"Base item",example:"e.g:",editorDataLimitMsg:" more items. Search to refine further.",deferLayoutUpdate:"Defer Layout Update",null:"null",undefined:"undefined",groupOutOfRange:"Out of Range",fieldDropErrorAction:"The field you are moving cannot be placed in that area of the report",memberType:"Field Type",selectedHierarchy:"Parent Hierarchy",formatString:"Format",expressionField:"Expression",olapDropText:"Example: [Measures].[Order Quantity] + ([Measures].[Order Quantity] * 0.10)",customFormat:"Enter custom format string",numberFormatString:"Example: C, P, 0000 %, ###0.##0#, etc.",Measure:"Measure",Dimension:"Dimension",Standard:"Standard",Currency:"Currency",Percent:"Percent",Custom:"Custom",blank:"(Blank)",fieldTooltip:'Drag and drop fields to create an expression. And, if you want to edit the existing calculated fields! You can achieve it by simply selecting the field under "Calculated Members".',fieldTitle:"Field Name",QuarterYear:"Quarter Year",caption:"Field Caption",copy:"Copy",of:"of",group:"Group",removeCalculatedField:"Are you sure you want to delete this calculated field?",yes:"Yes",no:"No",None:"None"},this.localeObj=new r.L10n(this.getModuleName(),this.defaultLocale,this.locale),this.isDragging=!1,this.captionData=[],this.wireEvent()},t.prototype.frameCustomProperties=function(e,t){this.pivotGridModule&&this.pivotGridModule.updatePageSettings(!1);var i=this.pivotGridModule?this.pivotGridModule.pageSettings:this.pageSettings,r=!!this.pivotGridModule&&this.pivotGridModule.enablePaging,a=!!this.pivotGridModule&&this.pivotGridModule.enableVirtualization,n=this.pivotGridModule?this.pivotGridModule.enableHtmlSanitizer:this.enableHtmlSanitizer,o=this.pivotGridModule?this.pivotGridModule.localeObj:this.staticPivotGridModule?this.staticPivotGridModule.localeObj:this.localeObj,s=!this.pivotGridModule||(this.pivotGridModule.allowDrillThrough||this.pivotGridModule.editSettings.allowEditing),l=this.pivotGridModule?this.pivotGridModule.enableValueSorting:void 0;return"olap"===this.dataType?{mode:"",savedFieldList:t||void 0,savedFieldListData:e||void 0,pageSettings:i,enableValueSorting:l,isDrillThrough:s,localeObj:o,enableVirtualization:a}:{mode:"",savedFieldList:void 0,pageSettings:i,enableValueSorting:l,isDrillThrough:s,localeObj:o,clonedReport:this.clonedReport,globalize:this.globalize,currenyCode:this.currencyCode,enablePaging:r,enableVirtualization:a,enableHtmlSanitizer:n}},t.prototype.render=function(){if("pivot"===this.dataType&&this.dataSourceSettings.url&&""!==this.dataSourceSettings.url)if("Server"===this.dataSourceSettings.mode)this.guid=u.a.generateUUID(),this.getEngine("initialRender",null,null,null,null,null,null);else{var e=new r.Fetch(this.dataSourceSettings.url,"GET");e.send().then(function(e){return"string"==typeof e?e:e.text()}).then(this.onReadyStateChange.bind(this))}else this.initialLoad()},t.prototype.getEngine=function(e,t,i,r,a,n,s,l,d){var h=this;this.currentAction=e,this.pivotGridModule&&this.pivotGridModule.updatePageSettings(!1);var p={pageSettings:this.pivotGridModule?JSON.parse(this.pivotGridModule.getPersistData()).pageSettings:void 0,enableValueSorting:this.pivotGridModule?this.pivotGridModule.enableValueSorting:void 0,enableDrillThrough:!this.pivotGridModule||(this.pivotGridModule.allowDrillThrough||this.pivotGridModule.editSettings.allowEditing),locale:JSON.stringify(u.a.getLocalizedObject(this))};this.request.open("POST",this.dataSourceSettings.url,!0);var c={request:this.request,dataSourceSettings:JSON.parse(this.getPersistData()).dataSourceSettings,action:e,customProperties:{},internalProperties:p,drillItem:t,sortItem:i,aggregatedItem:r,calculatedItem:a,filterItem:n,memberName:s,fetchRawDataArgs:l,editArgs:d,hash:this.guid,isGroupingUpdated:"onRefresh"===this.currentAction&&this.dataSourceSettings.groupSettings.length>0||!(!this.pivotGridModule||!this.pivotGridModule.groupingModule)&&this.pivotGridModule.groupingModule.isUpdate};this.trigger(o._12,c,function(e){h.request=e.request,c.internalProperties=e.internalProperties,c.customProperties=e.customProperties,c.dataSourceSettings=e.dataSourceSettings,c.calculatedItem=e.calculatedItem,c.drillItem=e.drillItem,c.editArgs=e.editArgs,c.fetchRawDataArgs=e.fetchRawDataArgs,c.filterItem=e.filterItem,c.hash=e.hash,c.memberName=e.memberName,c.sortItem=e.sortItem}),this.request.withCredentials=!1,this.request.onreadystatechange=this.onSuccess.bind(this),this.request.setRequestHeader("Content-type","application/json"),this.request.send(JSON.stringify(c))},t.prototype.onSuccess=function(){if(this.request.readyState===XMLHttpRequest.DONE){try{var e=JSON.parse(this.request.responseText);if("fetchFieldMembers"===this.currentAction){for(var t=JSON.parse(e.members),i=[],r={},a={},n=0;n<t.length;n++)i.push({formattedText:t[n].FormattedText,actualText:t[n].ActualText}),r[t[n].FormattedText]={},a[t[n].ActualText]={};this.engineModule.fieldList[e.memberName].dateMember=i,this.engineModule.fieldList[e.memberName].formattedMembers=r,this.engineModule.fieldList[e.memberName].members=a,this.pivotButtonModule.updateFilterEvents()}else{var o=u.a.formatFieldList(JSON.parse(e.fieldList));if(this.engineModule.fieldList)for(var s=Object.keys(this.engineModule.fieldList),n=0;n<s.length;n++)this.engineModule.fieldList[s[n]]&&o[s[n]]&&(o[s[n]].dateMember=this.engineModule.fieldList[s[n]].dateMember,o[s[n]].formattedMembers=this.engineModule.fieldList[s[n]].formattedMembers,o[s[n]].members=this.engineModule.fieldList[s[n]].members);this.engineModule.fieldList=o,this.engineModule.fields=JSON.parse(e.fields),this.engineModule.rowCount=JSON.parse(e.pivotCount).RowCount,this.engineModule.columnCount=JSON.parse(e.pivotCount).ColumnCount,this.engineModule.rowStartPos=JSON.parse(e.pivotCount).RowStartPosition,this.engineModule.colStartPos=JSON.parse(e.pivotCount).ColumnStartPosition,this.engineModule.rowFirstLvl=JSON.parse(e.pivotCount).RowFirstLevel,this.engineModule.colFirstLvl=JSON.parse(e.pivotCount).ColumnFirstLevel;for(var l=void 0,d=u.a.formatPivotValues(JSON.parse(e.pivotValue)),h=0;h<d.length;h++)if(d[h]&&d[h][0]&&"row"===d[h][0].axis){l=h;break}this.engineModule.headerContent=u.a.frameContent(d,"header",l,this),this.engineModule.pageSettings=this.pivotGridModule?this.pivotGridModule.pageSettings:void 0;var p=JSON.parse(e.dataSourceSettings).ValueSortSettings;this.engineModule.valueSortSettings={headerText:p.HeaderText,headerDelimiter:p.HeaderDelimiter,sortOrder:p.SortOrder,columnIndex:p.ColumnIndex},this.engineModule.pivotValues=d}}catch(e){this.engineModule.pivotValues=[]}"fetchFieldMembers"!==this.currentAction&&(this.initEngine(),this.calculatedFieldModule&&this.calculatedFieldModule.isRequireUpdate&&(this.calculatedFieldModule.endDialog(),this.calculatedFieldModule.isRequireUpdate=!1),this.pivotGridModule&&this.pivotGridModule.calculatedFieldModule&&this.pivotGridModule.calculatedFieldModule.isRequireUpdate&&(this.pivotGridModule.calculatedFieldModule.endDialog(),this.pivotGridModule.calculatedFieldModule.isRequireUpdate=!1))}},t.prototype.onReadyStateChange=function(e){var t=[];if("CSV"===this.dataSourceSettings.type)for(var a=e.split(/\r?\n|\r/),n=0;n<a.length;n++)i.i(r.isNullOrUndefined)(a[n])||""===a[n]||t.push(a[n].split(","));else try{t=JSON.parse(e)}catch(e){t=[]}t&&t.length>0&&this.setProperties({dataSourceSettings:{dataSource:t}},!0),this.initialLoad()},t.prototype.initialLoad=function(){var e=this,t={dataSourceSettings:this.dataSourceSettings,defaultFieldListOrder:this.defaultFieldListOrder};this.trigger(o.a,t,function(a){e.dataSourceSettings=a.dataSourceSettings,e.defaultFieldListOrder=t.defaultFieldListOrder,i.i(r.addClass)([e.element],s._167),e.enableRtl?i.i(r.addClass)([e.element],s._30):i.i(r.removeClass)([e.element],s._30),e.isAdaptive?i.i(r.addClass)([e.element],s._168):i.i(r.removeClass)([e.element],s._168),e.cssClass&&i.i(r.addClass)([e.element],e.cssClass),e.notify(o._16,{})})},t.prototype.wireEvent=function(){this.on(o._16,this.generateData,this),this.on(o._22,this.fieldListRender,this)},t.prototype.unWireEvent=function(){this.pivotGridModule&&this.pivotGridModule.isDestroyed||(this.off(o._16,this.generateData),this.off(o._22,this.fieldListRender))},t.prototype.getPersistData=function(){var e=["dataSourceSettings"];return this.addOnPersist(e)},t.prototype.getModuleName=function(){return"pivotfieldlist"},t.prototype.onPropertyChanged=function(t,a){for(var n=!1,l=0,d=Object.keys(t);l<d.length;l++){var h=d[l];switch(h){case"locale":e.prototype.refresh.call(this);break;case"dataSourceSettings":if((i.i(r.isNullOrUndefined)(t.dataSourceSettings.dataSource)||t.dataSourceSettings.groupSettings&&t.dataSourceSettings.groupSettings.length>0)&&("olap"!==this.dataType||i.i(r.isNullOrUndefined)(t.dataSourceSettings.url))||("olap"!==this.dataType&&(i.i(r.isNullOrUndefined)(this.savedDataSourceSettings)||(u.a.updateDataSourceSettings(this.staticPivotGridModule,this.savedDataSourceSettings),this.savedDataSourceSettings=void 0),t.dataSourceSettings.dataSource&&0===t.dataSourceSettings.dataSource.length&&!i.i(r.isNullOrUndefined)(this.staticPivotGridModule)&&(this.savedDataSourceSettings=u.a.getClonedDataSourceSettings(this.staticPivotGridModule.dataSourceSettings),this.staticPivotGridModule.setProperties({dataSourceSettings:{rows:[]}},!0),this.staticPivotGridModule.setProperties({dataSourceSettings:{columns:[]}},!0),this.staticPivotGridModule.setProperties({dataSourceSettings:{values:[]}},!0),this.staticPivotGridModule.setProperties({dataSourceSettings:{filters:[]}},!0))),"pivot"===this.dataType?(this.engineModule.fieldList=null,this.engineModule.isEmptyData=!0,this.engineModule.data=[]):"olap"===this.dataType&&(this.olapEngineModule.fieldList={},this.olapEngineModule.fieldListData=void 0,this.olapEngineModule.isEmptyData=!0),i.i(r.isNullOrUndefined)(this.staticPivotGridModule)||(this.staticPivotGridModule.pivotValues=[]),this.initialLoad()),u.a.isButtonIconRefesh(h,a,t)){if(this.isPopupView&&this.pivotGridModule&&this.pivotGridModule.showGroupingBar&&this.pivotGridModule.groupingBarModule){var p=u.a.cloneFieldSettings(this.dataSourceSettings.filters),c=u.a.cloneFieldSettings(this.dataSourceSettings.values),g=u.a.cloneFieldSettings(this.dataSourceSettings.rows),m=u.a.cloneFieldSettings(this.dataSourceSettings.columns);this.pivotGridModule.setProperties({dataSourceSettings:{rows:g,columns:m,values:c,filters:p}},!0),this.pivotGridModule.axisFieldModule.render()}else if(!this.isPopupView&&this.staticPivotGridModule&&!this.staticPivotGridModule.isDestroyed){var f=this.staticPivotGridModule;if(f.showGroupingBar&&f.groupingBarModule&&f.axisFieldModule.render(),f.showFieldList&&f.pivotFieldListModule){var g=u.a.cloneFieldSettings(f.dataSourceSettings.rows),m=u.a.cloneFieldSettings(f.dataSourceSettings.columns),c=u.a.cloneFieldSettings(f.dataSourceSettings.values),p=u.a.cloneFieldSettings(f.dataSourceSettings.filters);f.pivotFieldListModule.setProperties({dataSourceSettings:{rows:g,columns:m,values:c,filters:p}},!0),f.pivotFieldListModule.axisFieldModule.render(),f.pivotFieldListModule.treeViewModule.fieldTable&&!f.isAdaptive&&f.pivotFieldListModule.notify(o._24,{})}}this.axisFieldModule.render(),this.treeViewModule.fieldTable&&!this.isAdaptive&&this.notify(o._24,{})}break;case"aggregateTypes":this.axisFieldModule&&this.axisFieldModule.render(),this.pivotGridModule&&this.pivotGridModule.axisFieldModule&&(this.pivotGridModule.setProperties({aggregateTypes:t.aggregateTypes},!0),this.pivotGridModule.axisFieldModule.render());break;case"showValuesButton":this.axisFieldModule&&this.axisFieldModule.render(),this.pivotGridModule&&this.pivotGridModule.showGroupingBar&&this.pivotGridModule.groupingBarModule&&this.pivotGridModule.axisFieldModule&&(this.pivotGridModule.setProperties({showValuesButton:t.showValuesButton},!0),this.pivotGridModule.axisFieldModule.render());break;case"enableRtl":this.enableRtl?i.i(r.addClass)([this.element],s._30):i.i(r.removeClass)([this.element],s._30),n=!0;break;case"enableFieldSearching":this.refresh()}n&&this.fieldListRender()}},t.prototype.initEngine=function(){var e=this;if("pivot"===this.dataType){var t=i.i(r.isNullOrUndefined)(this.dataSourceSettings.dataSource)?i.i(r.isNullOrUndefined)(this.engineModule.data)?void 0:this.engineModule.data[0]:this.dataSourceSettings.dataSource[0];if(t&&this.pivotCommon){var a="[object Array]"===Object.prototype.toString.call(t);if(a&&"JSON"===this.dataSourceSettings.type)return void this.pivotCommon.errorDialog.createErrorDialog(this.localeObj.getConstant("error"),this.localeObj.getConstant("invalidJSON"));if(!a&&"CSV"===this.dataSourceSettings.type)return void this.pivotCommon.errorDialog.createErrorDialog(this.localeObj.getConstant("error"),this.localeObj.getConstant("invalidCSV"))}}var n={dataSourceSettings:u.a.getClonedDataSourceSettings(this.dataSourceSettings)},s=this.isPopupView?this.pivotGridModule:this;s.trigger(o.b,n,function(t){if(u.a.updateDataSourceSettings(e,t.dataSourceSettings),"pivot"===e.dataType){if(e.dataSourceSettings.groupSettings&&e.dataSourceSettings.groupSettings.length>0){var i=e.dataSourceSettings.dataSource;e.clonedDataSet=e.clonedDataSet?e.clonedDataSet:u.a.getClonedData(i);var r=JSON.parse(e.getPersistData()).dataSourceSettings;r.dataSource=[],e.clonedReport=e.clonedReport?e.clonedReport:r}var a=e.frameCustomProperties();a.enableValueSorting=e.staticPivotGridModule?e.staticPivotGridModule.enableValueSorting:e.enableValueSorting,"Server"!==e.dataSourceSettings.mode&&e.engineModule.renderEngine(e.dataSourceSettings,a,e.aggregateCellInfo?e.getValueCellInfo.bind(e):void 0,e.onHeadersSort?e.getHeaderSortInfo.bind(e):void 0),e.pivotFieldList=e.engineModule.fieldList;var n={pivotFieldList:e.pivotFieldList,pivotValues:e.engineModule.pivotValues},l=e;s.trigger(o.c,n,function(e){l.pivotFieldList=e.pivotFieldList,l.engineModule.pivotValues=e.pivotValues,l.notify(o._22,{}),l.trigger(o.o)})}else if("olap"===e.dataType){e.olapEngineModule.renderEngine(e.dataSourceSettings,e.frameCustomProperties(e.olapEngineModule.fieldListData,e.olapEngineModule.fieldList),e.onHeadersSort?e.getHeaderSortInfo.bind(e):void 0),e.pivotFieldList=e.olapEngineModule.fieldList;var n={pivotFieldList:e.pivotFieldList,pivotValues:e.olapEngineModule.pivotValues},d=e;s.trigger(o.c,n,function(e){d.pivotFieldList=e.pivotFieldList,d.olapEngineModule.pivotValues=e.pivotValues,d.notify(o._22,{}),d.trigger(o.o)})}}),"None"!==this.defaultFieldListOrder&&this.treeViewModule.fieldTable&&!this.isAdaptive&&this.notify(o._24,{})},t.prototype.generateData=function(){this.pivotFieldList={},this.dataSourceSettings&&(this.dataSourceSettings.dataSource||this.dataSourceSettings.url)?""!==this.dataSourceSettings.url&&"olap"===this.dataType||this.dataSourceSettings.dataSource.length>0?("pivot"===this.dataType&&(this.engineModule.data=this.dataSourceSettings.dataSource),this.initEngine()):this.dataSourceSettings.dataSource instanceof a.DataManager?"pivot"===this.dataType&&this.remoteData.length>0?(this.engineModule.data=this.remoteData,this.initEngine()):setTimeout(this.getData.bind(this),100):this.notify(o._22,{}):(this.notify(o._22,{}),this.trigger(o.o))},t.prototype.getValueCellInfo=function(e){var t=e;return this.trigger(o.W,t),t},t.prototype.getHeaderSortInfo=function(e){var t=e;return this.trigger(o.X,t),t},t.prototype.getData=function(){this.dataSourceSettings.dataSource.executeQuery(new a.Query).then(this.executeQuery.bind(this))},t.prototype.executeQuery=function(e){this.engineModule.data=e.result,this.initEngine()},t.prototype.fieldListRender=function(){this.element.innerHTML="";var e;"Popup"===this.renderMode&&this.dialogRenderer.fieldListDialog&&!this.dialogRenderer.fieldListDialog.isDestroyed&&(e=this.dialogRenderer.fieldListDialog.visible,this.dialogRenderer.fieldListDialog.destroy(),i.i(r.remove)(document.getElementById(this.element.id+"_Container"))),this.renderModule.render(),"Popup"===this.renderMode?(this.fieldListSpinnerElement=this.dialogRenderer.fieldListDialog.element,e&&this.dialogRenderer.fieldListDialog.show()):this.fieldListSpinnerElement=this.element.querySelector(".e-pivotfieldlist-container"),this.spinnerTemplate?i.i(p.createSpinner)({target:this.fieldListSpinnerElement,template:this.spinnerTemplate,cssClass:this.cssClass?this.cssClass:void 0},this.createElement):i.i(p.createSpinner)({target:this.fieldListSpinnerElement,cssClass:this.cssClass?this.cssClass:void 0},this.createElement);var t={pivotEngine:"olap"===this.dataType?this.olapEngineModule:this.engineModule,dataSourceSettings:this.dataSourceSettings,id:this.element.id,element:document.getElementById(this.element.id+"_Container"),moduleName:this.getModuleName(),enableRtl:this.enableRtl,enableHtmlSanitizer:this.enableHtmlSanitizer,isAdaptive:this.isAdaptive,renderMode:this.renderMode,localeObj:this.localeObj,dataType:this.dataType,cssClass:this.cssClass};this.pivotCommon=new l.a(t),this.pivotCommon.control=this,this.allowDeferLayoutUpdate&&(this.clonedDataSource=i.i(r.extend)({},this.dataSourceSettings,null,!0),"olap"===this.dataType&&(this.clonedFieldListData=u.a.cloneOlapFieldSettings(this.olapEngineModule.fieldListData)),this.clonedFieldList=u.a.getClonedFieldList(this.pivotFieldList))},t.prototype.getFieldCaption=function(e){this.getFields(e);var t="olap"===this.dataType?this.olapEngineModule:this.engineModule;if(this.captionData.length>0&&t&&t.fieldList)for(var i=this.captionData.length;i--;)if(this.captionData[i])for(var r=0,a=this.captionData[i];r<a.length;r++){var n=a[r];n&&t.fieldList[n.name]&&(n.caption?t.fieldList[n.name].caption=n.caption:t.fieldList[n.name].caption=n.name)}},t.prototype.getFields=function(e){this.captionData=[e.rows,e.columns,e.values,e.filters]},t.prototype.updateDataSource=function(e,t){this.pivotGridModule&&this.pivotGridModule.showWaitingPopup(),i.i(p.showSpinner)(this.fieldListSpinnerElement);var a=this,n=a.isPopupView?a.pivotGridModule:a,s=!1,l=a.pivotGridModule&&(a.pivotGridModule.enableVirtualization||a.pivotGridModule.enablePaging)?a.pivotGridModule.pageSettings:void 0,d=Object.keys(a.lastCalcFieldInfo).length>0,h=Object.keys(a.lastSortInfo).length>0,c=Object.keys(a.lastAggregationInfo).length>0,g=Object.keys(a.lastFilterInfo).length>0,m={dataSourceSettings:u.a.getClonedDataSourceSettings(a.dataSourceSettings)};n.trigger(o.b,m,function(o){if(l&&(h||g||c||d)||(u.a.updateDataSourceSettings(a,o.dataSourceSettings),u.a.updateDataSourceSettings(a.pivotGridModule,o.dataSourceSettings)),i.i(r.isNullOrUndefined)(t)){if("pivot"===a.dataType){var p=a.frameCustomProperties();h?(a.pivotGridModule&&a.pivotGridModule.setProperties({dataSourceSettings:{valueSortSettings:{headerText:""}}},!0),a.setProperties({dataSourceSettings:{valueSortSettings:{headerText:""}}},!0),p.enableValueSorting=!1):p.enableValueSorting=a.staticPivotGridModule?a.staticPivotGridModule.enableValueSorting:a.enableValueSorting,p.savedFieldList=a.pivotFieldList,l&&(h||g||c||d)&&!a.allowDeferLayoutUpdate?(h&&(a.pivotGridModule.setProperties({dataSourceSettings:{valueSortSettings:{headerText:""}}},!0),"Server"===n.dataSourceSettings.mode?n.getEngine("onSort",null,a.lastSortInfo,null,null,null,null):a.engineModule.onSort(a.lastSortInfo),a.lastSortInfo={}),g&&("Server"===n.dataSourceSettings.mode?n.getEngine("onFilter",null,null,null,null,a.lastFilterInfo,null):a.engineModule.onFilter(a.lastFilterInfo,a.dataSourceSettings),a.lastFilterInfo={}),c&&("Server"===n.dataSourceSettings.mode?n.getEngine("onAggregation",null,null,a.lastAggregationInfo,null,null,null):a.engineModule.onAggregation(a.lastAggregationInfo),a.lastAggregationInfo={}),d&&("Server"===n.dataSourceSettings.mode?n.getEngine("onCalcOperation",null,null,null,a.lastCalcFieldInfo,null,null):a.engineModule.onCalcOperation(a.lastCalcFieldInfo,a.dataSourceSettings),a.lastCalcFieldInfo={})):("Server"===a.dataSourceSettings.mode?h?n.getEngine("onSort",null,a.lastSortInfo,null,null,null,null):c?n.getEngine("onAggregation",null,null,a.lastAggregationInfo,null,null,null):d?n.getEngine("onCalcOperation",null,null,null,a.lastCalcFieldInfo,null,null):g?n.getEngine("onFilter",null,null,null,null,a.lastFilterInfo,null):n.getEngine("onDrop",null,null,null,null,null,null):a.engineModule.renderEngine(a.dataSourceSettings,p,a.aggregateCellInfo?a.getValueCellInfo.bind(a):void 0,a.onHeadersSort?a.getHeaderSortInfo.bind(a):void 0),a.lastSortInfo={},a.lastAggregationInfo={},a.lastCalcFieldInfo={},a.lastFilterInfo={})}else s=a.updateOlapDataSource(a,h,d,s);a.getFieldCaption(a.dataSourceSettings)}else a.axisFieldModule.render(),a.isRequiredUpdate=!1;a.enginePopulatedEventMethod(a,e,s)})},t.prototype.enginePopulatedEventMethod=function(e,t,a){var n=this,s=e.isPopupView?e.pivotGridModule:e,l={dataSourceSettings:e.dataSourceSettings,pivotFieldList:"pivot"===e.dataType?e.engineModule.fieldList:e.olapEngineModule.fieldList,pivotValues:"pivot"===e.dataType?e.engineModule.pivotValues:e.olapEngineModule.pivotValues};s.trigger(o.c,l,function(s){e.dataSourceSettings=s.dataSourceSettings,e.pivotCommon.dataSourceSettings=e.dataSourceSettings,e.pivotFieldList=s.pivotFieldList,"olap"===e.dataType?(e.olapEngineModule.pivotValues=s.pivotValues,e.pivotCommon.engineModule=e.olapEngineModule):(e.engineModule.pivotValues=s.pivotValues,e.pivotCommon.engineModule=e.engineModule),t||!e.treeViewModule.fieldTable||e.isAdaptive||e.notify(o._24,{}),e.isRequiredUpdate?(e.allowDeferLayoutUpdate&&(e.clonedDataSource=i.i(r.extend)({},e.dataSourceSettings,null,!0),"olap"===n.dataType&&(n.clonedFieldListData=u.a.cloneOlapFieldSettings(n.olapEngineModule.fieldListData)),e.clonedFieldList=u.a.getClonedFieldList(e.pivotFieldList)),e.updateView(e.pivotGridModule)):n.isPopupView&&e.allowDeferLayoutUpdate&&(e.pivotGridModule.engineModule=e.engineModule,e.pivotGridModule.setProperties({dataSourceSettings:e.dataSourceSettings.properties},!0),e.pivotGridModule.notify(o._17,e),i.i(p.hideSpinner)(e.fieldListSpinnerElement)),n.isPopupView&&e.pivotGridModule&&e.pivotGridModule.allowDeferLayoutUpdate&&!e.isRequiredUpdate&&(i.i(p.hideSpinner)(e.fieldListSpinnerElement),e.pivotGridModule.hideWaitingPopup()),e.isRequiredUpdate=!0,!e.pivotGridModule||a?i.i(p.hideSpinner)(e.fieldListSpinnerElement):e.pivotGridModule.fieldListSpinnerElement=e.fieldListSpinnerElement});var d=this.getActionCompleteName();this.actionObj.actionName=d,this.actionObj.actionName&&this.actionCompleteMethod()},t.prototype.updateOlapDataSource=function(e,t,i,r){var a=e.frameCustomProperties(e.olapEngineModule.fieldListData,e.olapEngineModule.fieldList);return a.savedFieldList=e.pivotFieldList,i||t?(e.olapEngineModule.savedFieldList=e.pivotFieldList,e.olapEngineModule.savedFieldListData=e.olapEngineModule.fieldListData,i?(e.olapEngineModule.updateCalcFields(e.dataSourceSettings,e.lastCalcFieldInfo),e.lastCalcFieldInfo={},r=!e.olapEngineModule.dataFields[e.lastCalcFieldInfo.name],e.pivotGridModule&&e.pivotGridModule.hideWaitingPopup()):e.olapEngineModule.onSort(e.dataSourceSettings)):e.olapEngineModule.renderEngine(e.dataSourceSettings,a,e.onHeadersSort?e.getHeaderSortInfo.bind(e):void 0),e.lastSortInfo={},e.lastAggregationInfo={},e.lastCalcFieldInfo={},e.lastFilterInfo={},r},t.prototype.update=function(e){e&&(this.clonedDataSet=e.clonedDataSet,this.clonedReport=e.clonedReport,this.setProperties({dataSourceSettings:e.dataSourceSettings,showValuesButton:e.showValuesButton},!0),this.engineModule=e.engineModule,this.olapEngineModule=e.olapEngineModule,this.dataType=e.dataType,this.pivotFieldList="olap"===this.dataType?e.olapEngineModule.fieldList:e.engineModule.fieldList,this.isPopupView?this.pivotGridModule=e:this.staticPivotGridModule=e,this.getFieldCaption(e.dataSourceSettings),this.pivotCommon.engineModule="olap"===this.dataType?this.olapEngineModule:this.engineModule,this.pivotCommon.dataSourceSettings=this.dataSourceSettings,this.pivotCommon.control=this,this.treeViewModule.fieldTable&&!this.isAdaptive&&this.notify(o._24,{}),this.axisFieldModule.render(),!this.isPopupView&&this.allowDeferLayoutUpdate&&(this.clonedDataSource=i.i(r.extend)({},this.dataSourceSettings,null,!0),"olap"===this.dataType&&(this.clonedFieldListData=u.a.cloneOlapFieldSettings(this.olapEngineModule.fieldListData)),this.clonedFieldList=u.a.getClonedFieldList(this.pivotFieldList)))},t.prototype.updateView=function(e){if(e){e.element.querySelector(".e-spin-hide")&&(!this.allowDeferLayoutUpdate||this.isDeferUpdateApplied||e.isInitial)&&e.showWaitingPopup(),e.clonedDataSet=this.clonedDataSet,e.clonedReport=this.clonedReport,e.setProperties({dataSourceSettings:this.dataSourceSettings,showValuesButton:this.showValuesButton},!0),e.engineModule=this.engineModule,e.olapEngineModule=this.olapEngineModule,e.dataType=this.dataType,this.pivotChange||(e.pivotValues="olap"===this.dataType?this.olapEngineModule.pivotValues:this.engineModule.pivotValues);var t={dataSourceSettings:u.a.getClonedDataSourceSettings(e.dataSourceSettings),pivotValues:e.pivotValues};e.trigger(o._0,t),this.isPopupView||(this.staticPivotGridModule=e,e.isStaticRefresh=!0),this.isDeferUpdateApplied=!1,this.staticPivotGridModule&&(this.staticPivotGridModule.isServerWaitingPopup=!0),e.dataBind()}},t.prototype.triggerPopulateEvent=function(){var e=this,t=this.isPopupView?this.pivotGridModule:this,i={dataSourceSettings:this.dataSourceSettings,pivotFieldList:"olap"===this.dataType?this.olapEngineModule.fieldList:this.engineModule.fieldList,pivotValues:"olap"===this.dataType?this.olapEngineModule.pivotValues:this.engineModule.pivotValues};t.trigger(o.c,i,function(t){e.dataSourceSettings=t.dataSourceSettings,e.pivotFieldList=t.pivotFieldList,"olap"===e.dataType?e.olapEngineModule.pivotValues=t.pivotValues:e.engineModule.pivotValues=t.pivotValues})},t.prototype.actionBeginMethod=function(){var e={dataSourceSettings:u.a.getClonedDataSourceSettings(this.dataSourceSettings),actionName:this.actionObj.actionName,fieldInfo:this.actionObj.fieldInfo,cancel:!1};return(this.isPopupView?this.pivotGridModule:this).trigger(o._13,e),e.cancel},t.prototype.actionCompleteMethod=function(){var e={dataSourceSettings:u.a.getClonedDataSourceSettings(this.dataSourceSettings),actionName:this.actionObj.actionName,fieldInfo:this.actionObj.fieldInfo,actionInfo:this.actionObj.actionInfo};(this.isPopupView?this.pivotGridModule:this).trigger(o._14,e),this.actionObj.actionName="",this.actionObj.actionInfo=void 0,this.actionObj.fieldInfo=void 0},t.prototype.actionFailureMethod=function(e){var t={actionName:this.actionObj.actionName,errorInfo:e};(this.isPopupView?this.pivotGridModule:this).trigger(o._15,t)},t.prototype.getActionCompleteName=function(){return this.actionObj.actionName===o._71?o._81:this.actionObj.actionName===o._67?o._111:this.actionObj.actionName===o._68?o._112:this.actionObj.actionName===o._69?o._113:this.actionObj.actionName===o._70?o._114:this.actionObj.actionName===o._76?o._115:this.actionObj.actionName===o._66?o._86:this.actionObj.actionName},t.prototype.destroy=function(){this.unWireEvent(),this.engineModule&&!this.destroyEngine&&(this.engineModule.fieldList={},this.engineModule.rMembers=null,this.engineModule.cMembers=null,this.engineModule.valueMatrix=null,this.engineModule.indexMatrix=null,this.engineModule={}),this.olapEngineModule&&!this.destroyEngine&&(this.olapEngineModule.fieldList={},this.olapEngineModule={}),this.pivotFieldList&&(this.pivotFieldList={}),this.captionData&&(this.captionData=null),this.contextMenuModule&&this.contextMenuModule.destroy(),this.treeViewModule&&this.treeViewModule.destroy(),this.pivotButtonModule&&this.pivotButtonModule.destroy(),this.pivotCommon&&this.pivotCommon.destroy(),this.dialogRenderer&&this.dialogRenderer.destroy(),this.calculatedFieldModule&&this.calculatedFieldModule.destroy(),e.prototype.destroy.call(this),this.contextMenuModule&&(this.contextMenuModule=null),this.treeViewModule&&(this.treeViewModule=null),this.pivotButtonModule&&(this.pivotButtonModule=null),this.pivotCommon&&(this.pivotCommon=null),this.dialogRenderer&&(this.dialogRenderer=null),this.calculatedFieldModule&&(this.calculatedFieldModule=null),this.axisFieldModule&&(this.axisFieldModule=null),this.axisTableModule&&(this.axisTableModule=null),this.renderModule&&(this.renderModule=null),this.clonedDataSet&&(this.clonedDataSet=null),this.clonedReport&&(this.clonedReport=null),this.clonedFieldList&&(this.clonedFieldList=null),this.clonedFieldListData&&(this.clonedFieldListData=null),this.localeObj&&(this.localeObj=null),this.defaultLocale&&(this.defaultLocale=null),this.element.innerHTML="",i.i(r.removeClass)([this.element],s._167),i.i(r.removeClass)([this.element],s._30),i.i(r.removeClass)([this.element],s._168)},m([i.i(r.Complex)({},h.n)],t.prototype,"dataSourceSettings",void 0),m([i.i(r.Property)("Popup")],t.prototype,"renderMode",void 0),m([i.i(r.Property)()],t.prototype,"target",void 0),m([i.i(r.Property)("")],t.prototype,"cssClass",void 0),m([i.i(r.Property)(!1)],t.prototype,"enableHtmlSanitizer",void 0),m([i.i(r.Property)(!1)],t.prototype,"allowCalculatedField",void 0),m([i.i(r.Property)(!1)],t.prototype,"enableFieldSearching",void 0),m([i.i(r.Property)(!1)],t.prototype,"showValuesButton",void 0),m([i.i(r.Property)(!1)],t.prototype,"allowDeferLayoutUpdate",void 0),m([i.i(r.Property)(1e3)],t.prototype,"maxNodeLimitInMemberEditor",void 0),m([i.i(r.Property)(!0)],t.prototype,"loadOnDemandInMemberEditor",void 0),m([i.i(r.Property)()],t.prototype,"spinnerTemplate",void 0),m([i.i(r.Property)(["Sum","Count","DistinctCount","Product","Min","Max","Avg","Median","Index","PopulationVar","SampleVar","PopulationStDev","SampleStDev","RunningTotals","PercentageOfGrandTotal","PercentageOfColumnTotal","PercentageOfRowTotal","PercentageOfParentColumnTotal","PercentageOfParentRowTotal","DifferenceFrom","PercentageOfDifferenceFrom","PercentageOfParentTotal"])],t.prototype,"aggregateTypes",void 0),m([i.i(r.Property)("USD")],t.prototype,"currencyCode",void 0),m([i.i(r.Event)()],t.prototype,"load",void 0),m([i.i(r.Event)()],t.prototype,"enginePopulating",void 0),m([i.i(r.Event)()],t.prototype,"memberFiltering",void 0),m([i.i(r.Event)()],t.prototype,"enginePopulated",void 0),m([i.i(r.Event)()],t.prototype,"onFieldDropped",void 0),m([i.i(r.Event)()],t.prototype,"fieldDrop",void 0),m([i.i(r.Event)()],t.prototype,"fieldDragStart",void 0),m([i.i(r.Event)()],t.prototype,"aggregateCellInfo",void 0),m([i.i(r.Event)()],t.prototype,"memberEditorOpen",void 0),m([i.i(r.Event)()],t.prototype,"calculatedFieldCreate",void 0),m([i.i(r.Event)()],t.prototype,"aggregateMenuOpen",void 0),m([i.i(r.Event)()],t.prototype,"fieldRemove",void 0),m([i.i(r.Event)()],t.prototype,"dataBound",void 0),m([i.i(r.Event)()],t.prototype,"created",void 0),m([i.i(r.Event)()],t.prototype,"destroyed",void 0),m([i.i(r.Event)()],t.prototype,"beforeServiceInvoke",void 0),m([i.i(r.Event)()],t.prototype,"actionBegin",void 0),m([i.i(r.Event)()],t.prototype,"actionComplete",void 0),m([i.i(r.Event)()],t.prototype,"actionFailure",void 0),m([i.i(r.Event)()],t.prototype,"onHeadersSort",void 0),t=m([r.NotifyPropertyChanges],t)}(r.Component)},function(e,t,i){"use strict";i.d(t,"a",function(){return o});var r=i(2),a=i(1),n=i(29),o=function(){function e(e){this.parent=e}return e.prototype.render=function(){(!this.parent.pivotButtonModule||this.parent.pivotButtonModule&&this.parent.pivotButtonModule.isDestroyed)&&new n.a(this.parent),this.createPivotButtons()},e.prototype.createPivotButtons=function(){var e=this.parent.dataSourceSettings.rows,t=this.parent.dataSourceSettings.columns,i=this.parent.dataSourceSettings.values,n=this.parent.dataSourceSettings.filters,o=[e,t,i,n],s=this.parent.dialogRenderer.parentElement;if(s.querySelector("."+r._150+"-filters")&&(s.querySelector("."+r._150+"-filters").querySelector("."+r._152).innerHTML=""),s.querySelector("."+r._150+"-rows")&&(s.querySelector("."+r._150+"-rows").querySelector("."+r._152).innerHTML=""),s.querySelector("."+r._150+"-columns")&&(s.querySelector("."+r._150+"-columns").querySelector("."+r._152).innerHTML=""),s.querySelector("."+r._150+"-values")&&(s.querySelector("."+r._150+"-values").querySelector("."+r._152).innerHTML=""),"pivot"===this.parent.dataType&&this.parent.dataSourceSettings.dataSource&&this.parent.dataSourceSettings.dataSource.length>0||"olap"===this.parent.dataType&&this.parent.dataSourceSettings.url&&""!==this.parent.dataSourceSettings.url||"Server"===this.parent.dataSourceSettings.mode&&""!==this.parent.dataSourceSettings.url)for(var l=["rows","columns","values","filters"],d=0,h=o.length;d<h;d++)if(o[d]){var p={field:o[d],axis:l[d].toString()};this.parent.notify(a._25,p)}},e}()},function(e,t,i){"use strict";var r=i(58);i.d(t,"a",function(){return r.a})},function(e,t,i){"use strict";i.d(t,"a",function(){return a});var r=i(0),a=(i.n(r),function(){function e(){}return e.getCellSets=function(e,t,a,n,o){this.engine=t,this.isMondrian=t.isMondrian,this.isMeasureAvail=t.isMeasureAvail,this.isPaging=t.isPaging,this.pageSettings=t.pageSettings,this.rows=t.rows,this.columns=t.columns,this.values=t.values,this.filters=t.filters,this.allowLabelFilter=t.allowLabelFilter,this.allowValueFilter=t.allowValueFilter,this.valueSortSettings=e.valueSortSettings?e.valueSortSettings:void 0,this.drilledMembers=t.updateDrilledItems(e.drilledMembers),this.calculatedFieldSettings=t.calculatedFieldSettings,this.valueAxis="row"===e.valueAxis?"rows":"columns",n&&(n.axis="row"===n.axis?"rows":"columns"),this.filterMembers=i.i(r.extend)({},t.filterMembers,null,!0),this.fieldDataObj=t.fieldListObj,this.fieldList=t.fieldList,this.cellSetInfo="\nDIMENSION PROPERTIES PARENT_UNIQUE_NAME, HIERARCHY_UNIQUE_NAME, CHILDREN_CARDINALITY, MEMBER_TYPE, MEMBER_VALUE";var s=this.getMeasuresQuery(this.values),l=this.getDimensionsQuery(this.rows,s,"rows",n).replace(/\&/g,"&amp;"),d=this.getDimensionsQuery(this.columns,s,"columns",n).replace(/\&/g,"&amp;");if(this.isPaging&&a&&void 0!==this.pageSettings){var h=this.getPagingQuery(l,d);l=h.rowQuery,d=h.columnQuery}else if(this.isPaging&&!a&&void 0!==this.pageSettings){var h=this.getPagingCountQuery(l,d);l=h.rowQuery,d=h.columnQuery}l=l.length>0?l+(this.isPaging&&!a?"":this.cellSetInfo+" ON ROWS"):"",d=d.length>0?d+(this.isPaging&&!a?"":this.cellSetInfo+" ON COLUMNS"):"";var p=this.getSlicersQuery(this.filters,"filters").replace(/\&/g,"&amp;"),u=this.getfilterQuery(this.filterMembers,e.cube).replace(/\&/g,"&amp;").replace(/\>/g,"&gt;").replace(/\</g,"&lt;"),c=this.getCalculatedFieldQuery(this.calculatedFieldSettings).replace(/\&/g,"&amp;"),g=this.frameMDXQuery(l,d,p,u,c,a),m={catalog:e.catalog,cube:e.cube,url:e.url,request:g,LCID:e.localeIdentifier.toString(),roles:e.roles};t.mdxQuery=g.replace(/\&amp;/g,"&").replace(/\&gt;/g,">").replace(/\&lt;/g,"<").replace(/%280/g,'"'),n&&(n.axis="rows"===n.axis?"row":"column"),o||this.getTableCellData(m,this.isPaging&&!a?this.engine.generatePagingData.bind(this.engine):this.engine.generateEngine.bind(this.engine),n?{action:n.action,drillInfo:n}:{dataSourceSettings:e,action:"loadTableElements"})},e.getTableCellData=function(e,t,i){var r=this.engine.getConnectionInfo(e.url,e.LCID),a='<Envelope xmlns="http://schemas.xmlsoap.org/soap/envelope/"> <Header></Header> <Body> <Execute xmlns="urn:schemas-microsoft-com:xml-analysis"> <Command> <Statement>'+e.request+"</Statement> </Command> <Properties> <PropertyList> <Catalog>"+e.catalog+"</Catalog> <LocaleIdentifier>"+r.LCID+"</LocaleIdentifier>"+(e.roles?"<Roles>"+e.roles+"</Roles>":"")+"</PropertyList> </Properties></Execute> </Body> </Envelope>";this.engine.doAjaxPost("POST",r.url,a,t,i)},e.frameMDXQuery=function(e,t,i,r,a,n){var o=this.isPaging&&!n?""!==a?"":"\nWITH":"\nSelect ";return t.length>0&&(o+=t),e.length>0&&(o=o+(t.length>0?this.isPaging&&!n?"":", ":"")+e),o=a+o+(this.isPaging&&!n?"\nMEMBER [Measures].[3d268ce0-664d-4092-b9cb-fece97175006] AS Count([e16a30d0-2174-4874-8dae-a5085a75a3e2]) MEMBER [Measures].[8d7fe8c1-f09f-410e-b9ba-eaab75a1fc3e] AS Count ([d1876d2b-e50e-4547-85fe-5b8ed9d629de])\nSELECT { [Measures].[3d268ce0-664d-4092-b9cb-fece97175006] , [Measures].[8d7fe8c1-f09f-410e-b9ba-eaab75a1fc3e] } ON AXIS(0)":"")+r+i+"\nCELL PROPERTIES VALUE, FORMAT_STRING, FORMATTED_VALUE\n"},e.getPagingQuery=function(e,t){e=e.replace("NON EMPTY ( ","").slice(0,-1),t=t.replace("NON EMPTY ( ","").slice(0,-1);var i=e,r=(this.pageSettings.currentRowPage-1)*this.pageSettings.rowPageSize,a=(this.pageSettings.currentColumnPage-1)*this.pageSettings.columnPageSize,n=3*this.pageSettings.rowPageSize,o=3*this.pageSettings.columnPageSize;return r=this.engine.rowCount<r+n?this.engine.rowCount>n?this.engine.rowCount-n:0:r,this.engine.pageRowStartPos=r,a=this.engine.columnCount<a+o?this.engine.columnCount>o?this.engine.columnCount-o:0:a,this.engine.pageColStartPos=a,{rowQuery:""!==e?"\nSUBSET ({ "+(this.isMondrian?"":"NONEMPTY")+" ("+e+(this.isMondrian||""===t?"":","+t)+")},"+r+","+n+")":"",columnQuery:""!==t?"\nSUBSET ({ "+(this.isMondrian?"":"NONEMPTY")+" ("+t+(this.isMondrian||""===i?"":","+i)+")},"+a+","+o+")":""}},e.getPagingCountQuery=function(e,t){e=e.replace("NON EMPTY ( ","").slice(0,-1),t=t.replace("NON EMPTY ( ","").slice(0,-1);var i=e;return{rowQuery:""!==e?"SET [d1876d2b-e50e-4547-85fe-5b8ed9d629de] as "+(this.isMondrian?"":"NONEMPTY")+" ("+e+(this.isMondrian||""===t?"":","+t)+")\n":"",columnQuery:""!==t?"\nSET [e16a30d0-2174-4874-8dae-a5085a75a3e2] as "+(this.isMondrian?"":"NONEMPTY")+" ("+t+(this.isMondrian||""===i?"":","+i)+")\n":""}},e.getDimensionsQuery=function(e,t,i,r){var a="";if(e.length>0){a="\nNON EMPTY ( "+(this.drilledMembers.length>0?"HIERARCHIZE ({":"");for(var n=0;n<e.length;){var o="";0===n?"[measures]"===e[n].name.toLowerCase()?""!==t&&(a+=t):(o="({"+this.getDimensionQuery(e[n],i)+"})",a+=o):"[measures]"===e[n].name.toLowerCase()?""!==t&&(a=a+" * "+t):(o="({"+this.getDimensionQuery(e[n],i)+"})",a=a+" * "+o),n++}var s=this.getDrillQuery(e,t,i,r);a=r&&r.axis===i?"\nNON EMPTY ( "+(this.drilledMembers.length>0?"HIERARCHIZE ({":"")+s.query:a+(""!==s.query?",":"")+s.query;var l=this.getAttributeDrillQuery(e,t,i,r);a=(this.valueAxis!==i?this.updateValueSortQuery(a,this.valueSortSettings):a)+(this.isPaging?(""!==l?"-":"")+l:"")+(this.drilledMembers.length>0?"})":"")+(this.isPaging?"":(""!==l?"-":"")+l)+")"}return a},e.getAttributeDrillQuery=function(e,t,i,r){var a="",n=[];n=r&&r.axis===i&&"down"===r.action.toLowerCase()?[{name:r.fieldName,items:[r.memberName],delimiter:"~~"}]:this.drilledMembers;for(var o=i===this.valueAxis?this.getMeasurePos(i):0,s=0,l=n;s<l.length;s++){var d=l[s];if(!!this.engine.fieldList[d.name]&&this.engine.fieldList[d.name].isHierarchy)for(var h=0,p=d.items;h<p.length;h++){for(var u=p[h],c=[],g=u.split(d.delimiter?d.delimiter:"~~"),m=this.getDrillLevel(e,g),f=this.getDimensionPos(i,d.name),v=e.length-(o>f?1:0),S=!!this.isPaging&&this.isAttributeMemberExist(d.name,u.split(d.delimiter?d.delimiter:"~~"),d.delimiter,g,i);m.level>0&&m.isDrill&&f+1!==o&&!S;){for(var y=[],b=0;b<e.length;){if("[measures]"===e[b].name.toLowerCase())""!==t&&y.push(g[b]?"({{"+g[b]+"}})":"("+t+")");else if(g[b]&&(-1!==g[b].indexOf(e[b].name)||e[b].isNamedSet&&this.fieldList[e[b].name]&&-1!==g[b].indexOf(this.fieldList[e[b].name].pid.split("Sets_")[1])))y.push(this.getHierarchyQuery(g[b],!1,!1,!1,m.level,!0));else{if(g[b]||!e[b]){y=[];break}y.push(this.getHierarchyQuery(e[b].name,!!(this.isPaging&&2===m.level||!this.isPaging&&v>b),e[b].isNamedSet,e[b].isCalculatedField,m.level,!1))}b++}y.length>0&&c.push("("+y.join("*")+")"),m.level--,v--}c.length>0&&(a=a+(""!==a?"-":"")+c.join(this.isPaging?"+":"-"))}}return a},e.getDimensionPos=function(e,t){for(var i=0,r="rows"===e?this.rows:this.columns,a=0;a<r.length;a++)if(r[a].name===t){i=a;break}return i},e.getMeasurePos=function(e){for(var t=0,i="rows"===e?this.rows:this.columns,r=0;r<i.length;r++)if(0===i[r].name.indexOf("[Measures]")){t=r;break}return t},e.getDrillLevel=function(e,t){for(var i=e.length,r=!1,a=0;a<e.length;)t[a]&&-1!==t[a].indexOf(e[a].name)?(i-=1,e[a+1]&&!(e[a+1].isNamedSet||0===e[a+1].name.indexOf("[Measures]")||this.fieldList[e[a+1].name]&&!this.fieldList[e[a+1].name].hasAllMember)&&(r=!0)):(e[a].isNamedSet||0===e[a].name.indexOf("[Measures]")||this.fieldList[e[a].name]&&!this.fieldList[e[a].name].hasAllMember)&&(i-=1),a++;return{level:this.isPaging?2:i,isDrill:r}},e.getHierarchyQuery=function(e,t,i,r,a,n){return e=r?this.fieldList[e].tag:e,!this.fieldList[e]||this.fieldList[e].hasAllMember||i||r?i||r?"({"+e+"})":this.isPaging?"({"+e+(t?".CHILDREN})":n||1!==a?"})":".[All]})"):"({DrilldownLevel({"+e+(t?".CHILDREN":"")+"},,,INCLUDE_CALC_MEMBERS)})":"(("+e+").levels(0).AllMembers)"},e.isAttributeMemberExist=function(e,t,i,r,a){t.splice(r.length-1,1);var n=!1;if(""!==t.join(i)&&(!this.isPaging||1!==t.length||"[Measures]"!==t.join(i))&&this.engine.fieldList[e]&&this.engine.fieldList[e].hasAllMember)for(var o=this.getDimensionPos(a,e),s=0;s<this.drilledMembers.length;s++)if(e!==this.drilledMembers[s].name){var l=!!this.engine.fieldList[this.drilledMembers[s].name]&&this.engine.fieldList[this.drilledMembers[s].name].isHierarchy;if(l)for(var d=this.getDimensionPos(a,this.drilledMembers[s].name),h=0;h<this.drilledMembers[s].items.length;h++){var p=this.getDrillLevel("rows"===a?this.rows:this.columns,this.drilledMembers[s].items[h].split(this.drilledMembers[s].delimiter?this.drilledMembers[s].delimiter:"~~"));if((!this.isPaging||d<o&&p.isDrill)&&(0===this.drilledMembers[s].items[h].indexOf(t.join(i))||0===t.join(i).indexOf(this.drilledMembers[s].items[h]))){n=!0;break}}}return n},e.getDrillQuery=function(e,t,i,r){var a="",n=[],o=[],s=!1,l="";r&&r.axis===i&&"down"===r.action.toLowerCase()?(s=!0,o=[{name:r.fieldName,items:[r.memberName],delimiter:"~~"}]):o=this.drilledMembers;for(var d=0,h=o;d<h.length;d++){var p=h[d];if(!(!!this.engine.fieldList[p.name]&&this.engine.fieldList[p.name].isHierarchy))for(var u=0,c=p.items;u<c.length;u++){for(var g=c[u],m=[],f=[],v=0,S=g.split(p.delimiter?p.delimiter:"~~"),y=this.isAttributeMemberExist(p.name,g.split(p.delimiter?p.delimiter:"~~"),p.delimiter?p.delimiter:"~~",S,i);v<e.length&&!y;){if(S[v]&&-1!==S[v].indexOf(e[v].name))-1!==S[S.length-1].indexOf(e[v].name)?s?l=l+(""!==l?" * ":"")+"({"+S[v]+".CHILDREN})":(m.push("("+S[v]+".CHILDREN)"),f.push("("+S[v]+")")):"[measures]"===S[v].toLowerCase()&&""!==t?s?l=l+(""!==l?" * ":"")+"("+t+")":(m.push("("+t+")"),f.push("("+t+")")):-1!==S[v].toLowerCase().indexOf("[measures]")?s?l=l+(""!==l?" * ":"")+"({"+S[v]+"})":(m.push("({"+S[v]+"})"),f.push("({"+S[v]+"})")):s?l=l+(""!==l?" * ":"")+"({"+S[v]+"})":(m.push("("+S[v]+")"),f.push("("+S[v]+")"));else{if(S[v]||!e[v]){m=[];break}"[measures]"===e[v].name.toLowerCase()&&""!==t?s?l=l+(""!==l?" * ":"")+"("+t+")":(m.push("("+t+")"),f.push("("+t+")")):s?l=l+(""!==l?" * ":"")+"({"+this.getDimensionQuery(e[v],i)+"})":(m.push("("+this.getDimensionQuery(e[v],i)+")"),f.push("("+this.getDimensionQuery(e[v],i)+")"))}v++}m.length>0&&m.length<S.length&&(m=[],f=[]),a=a+(""!==a&&m.length>0?",":"")+(m.length>0?"("+m.toString()+")":""),f.length>0&&n.push("("+f.toString()+")")}}return{query:s?l:a,collection:s?[l]:n}},e.updateValueSortQuery=function(e,t){if(t&&t.measure&&""!==t.measure){var i=this.drilledMembers.length>0?"HIERARCHIZE ({":"",r=this.fieldList[t.measure].isCalculatedField?this.fieldList[t.measure].tag:t.measure;switch(t.sortOrder){case"Ascending":e=e.replace("NON EMPTY ( "+i,"NON EMPTY ( "+i+" ORDER ({"),e=e+"},("+r+"), ASC)";break;case"Descending":e=e.replace("NON EMPTY ( "+i,"NON EMPTY ( "+i+" ORDER ({"),e=e+"},("+r+"), DESC)"}}return e},e.getSlicersQuery=function(e,t){var a=this,n="",o=i.i(r.extend)([],this.rows,null,!0);if(o=o.concat(this.columns),e.length>0){for(var s=0;s<e.length;){o.filter(function(t){var i=a.getDimensionUniqueName(t.name),r=a.getDimensionUniqueName(e[s].name);return i===r&&!(a.isMondrian&&""===r&&""===i)}).length>0||(void 0===e[s].name||this.filterMembers[e[s].name]?this.filterMembers[e[s].name]&&(n=n+(""!==n?" * ":"")+"{"+this.filterMembers[e[s].name].toString()+"}"):n=n+(""!==n?" * ":"")+"{"+this.getDimensionQuery(e[s],t)+"}"),s++}n=""===n?"":"\nWHERE ("+n.replace(/DrilldownLevel/g,"")+")"}return n},e.getDimensionQuery=function(e,t){var i=e.isCalculatedField?this.fieldList[e.name].tag:e.name;return this.fieldList[e.name].hasAllMember||e.isNamedSet||e.isCalculatedField?e.isNamedSet||e.isCalculatedField?"{"+i+"}":this.isPaging?i+".CHILDREN":"DrilldownLevel({"+i+"}"+("rows"===t||"columns"===t?",,,INCLUDE_CALC_MEMBERS":"")+")":"(("+i+").levels(0).AllMembers)"},e.getDimensionUniqueName=function(e){var t=this.fieldDataObj.hierarchy,i=[];if(t){for(var r=0,a=t;r<a.length;r++){var n=a[r];n.id.toLowerCase()===e.toLowerCase()&&i.push(n)}return i.length>0?i[0].pid:""}return e.split(".")[0]},e.getMeasuresQuery=function(e){var t="";if(e.length>0){t="{{";for(var i="",r=0,a=e;r<a.length;r++){var n=a[r],o=n.isCalculatedField?this.fieldList[n.name].tag:n.name;i=i.length>0?i+", "+o:o}t=t+i+"}}"}return t},e.getfilterQuery=function(e,t){for(var i="\nFROM ["+t+"]",r="\nFROM( SELECT (",a=[],n=[],o=[],s=[],l=0,d=this.rows;l<d.length;l++){var h=d[l];e[h.name]&&e[h.name].length>0&&("string"==typeof e[h.name][0]?o.push(e[h.name]):(e[h.name][1]=e[h.name][0].type,a.push(e[h.name]),delete e[h.name]))}for(var p=0,u=this.columns;p<u.length;p++){var h=u[p];if(e[h.name]&&e[h.name].length>0)if("string"==typeof e[h.name][0])s.push(e[h.name]);else{var c=e[h.name];c[1]=c[0].type,a.push(e[h.name]),delete e[h.name]}}for(var g=0,m=this.filters;g<m.length;g++){for(var h=m[g],f=!1,v=0,S=this.columns;v<S.length;v++){var y=S[v];f||this.getDimensionUniqueName(y.name)!==this.getDimensionUniqueName(h.name)||e[h.name]&&(s.push(e[h.name]),f=!0)}if(!f)for(var b=0,C=this.rows;b<C.length;b++){var x=C[b];f||this.getDimensionUniqueName(x.name)!==this.getDimensionUniqueName(h.name)||e[h.name]&&(o.push(e[h.name]),f=!0)}}if((this.allowLabelFilter||this.allowValueFilter)&&a.length>0)for(var w=["Value","Label"],T=0,M=w;T<M.length;T++)for(var _=M[T],D=0,O=a;D<O.length;D++){var P=O[D];P&&2===P.length&&"string"==typeof P[1]&&P[1]===_&&n.push(this.getAdvancedFilterQuery(P[0],r,"COLUMNS"))}for(var E=0,N=s.length;E<N;E++)r=0===E?r+"{"+s[E].toString()+"}":r+",{"+s[E].toString()+"}";s.length>0&&(r=o.length>0?r+" ) ON COLUMNS ,(":r+" ) ON COLUMNS");for(var E=0,N=o.length;E<N;E++)r=E>0?r+",{"+o[E].toString()+"}":r+"{"+o[E].toString()+"}";r=s.length>0&&o.length>0?r+=") ON ROWS ":0===s.length&&o.length>0?r+") ON COLUMNS ":r;var F="";return n.length>0&&(F=n.join(" ")+" "+(s.length>0||o.length>0?r:"")+" "+i+Array(n.length+1+(s.length>0||o.length>0?1:0)).join(")")),i=0===s.length&&0===o.length?i:r+i+")",F.length>0?F:i},e.getAdvancedFilterQuery=function(e,t,i){return"\nFROM (SELECT Filter("+e.selectedField+".AllMembers, "+this.getAdvancedFilterCondtions(e.name,e.condition,e.value1,e.value2,e.type,e.measure)+")) on "+i},e.getAdvancedFilterCondtions=function(e,t,i,r,a,n){var o="";switch(t){case"Equals":o="("+("Value"!==a?e+'.CurrentMember.member_caption ="'+i+'"':n+" = "+i);break;case"DoesNotEquals":o="("+("Value"!==a?e+'.CurrentMember.member_caption <>"'+i+'"':n+" <>"+i);break;case"Contains":o="( InStr (1,"+e+'.CurrentMember.member_caption,"'+i+'") >0';break;case"DoesNotContains":o="( InStr (1,"+e+'.CurrentMember.member_caption,"'+i+'")=0';break;case"BeginWith":o="( Left ("+e+".CurrentMember.member_caption,"+i.length+')="'+i+'"';break;case"DoesNotBeginWith":o="( Left ("+e+".CurrentMember.member_caption,"+i.length+') <>"'+i+'"';break;case"EndsWith":o="( Right ("+e+".CurrentMember.member_caption,"+i.length+')="'+i+'"';break;case"DoesNotEndsWith":o="( Right ("+e+".CurrentMember.member_caption,"+i.length+') <>"'+i+'"';break;case"GreaterThan":o="("+("Value"!==a?e+'.CurrentMember.member_caption >"'+i+'"':n+" >"+i);break;case"GreaterThanOrEqualTo":o="("+("Value"!==a?e+'.CurrentMember.member_caption >="'+i+'"':n+" >="+i);break;case"LessThan":o="("+("Value"!==a?e+'.CurrentMember.member_caption <"'+i+'"':n+" <"+i);break;case"LessThanOrEqualTo":o="("+("Value"!==a?e+'.CurrentMember.member_caption <="'+i+'"':n+" <="+i);break;case"Between":o="("+("Value"!==a?e+'.CurrentMember.member_caption >="'+i+'"AND '+e+'.CurrentMember.member_caption <="'+r+'"':n+" >="+i+" AND "+n+" <="+r);break;case"NotBetween":o="("+("Value"!==a?e+'.CurrentMember.member_caption >="'+i+'"OR '+e+'.CurrentMember.member_caption <="'+r+'"':n+" >="+i+" OR "+n+" <="+r);break;default:o="( InStr (1,"+e+'.CurrentMember.member_caption,"'+i+'") >0'}return o},e.getCalculatedFieldQuery=function(e){var t="";if(e.length>0){t="\nWITH";for(var a=0,n=e;a<n.length;a++){var o=n[a],s=o.formula.indexOf("Measure")>-1?"[Measures].":o.hierarchyUniqueName+".",l=s+"["+o.name+"]",d=i.i(r.isNullOrUndefined)(o.formatString)?null:o.formatString;t+="\nMEMBER "+l+"as ("+o.formula+") "+(i.i(r.isNullOrUndefined)(d)?"":', FORMAT_STRING ="'+d.trim()+'"')}}return t},e}())},function(e,t,i){"use strict";i.d(t,"a",function(){return o});var r=i(1),a=i(17),n=i(0),o=(i.n(n),function(){function e(e){this.parent=e,this.parent.commonModule=this,this.addEventListener()}return e.prototype.getModuleName=function(){return"common"},e.prototype.initiateCommonModule=function(){if(this.parent.pivotCommon)this.parent.pivotCommon.element=this.parent.element,this.parent.pivotCommon.engineModule="olap"===this.parent.dataType?this.parent.olapEngineModule:this.parent.engineModule,this.parent.pivotCommon.parentID=this.parent.element.id,this.parent.pivotCommon.dataSourceSettings=this.parent.dataSourceSettings.properties?this.parent.dataSourceSettings.properties:this.parent.dataSourceSettings,this.parent.pivotCommon.moduleName=this.parent.getModuleName(),this.parent.pivotCommon.enableRtl=this.parent.enableRtl,this.parent.pivotCommon.isAdaptive=n.Browser.isDevice,this.parent.pivotCommon.renderMode="Popup",this.parent.pivotCommon.localeObj=this.parent.localeObj,this.parent.pivotCommon.dataType=this.parent.dataType,this.parent.pivotCommon.cssClass=this.parent.cssClass;else{var e={pivotEngine:"olap"===this.parent.dataType?this.parent.olapEngineModule:this.parent.engineModule,dataSourceSettings:this.parent.dataSourceSettings.properties?this.parent.dataSourceSettings.properties:this.parent.dataSourceSettings,id:this.parent.element.id,element:this.parent.element,moduleName:this.parent.getModuleName(),enableRtl:this.parent.enableRtl,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,isAdaptive:n.Browser.isDevice,renderMode:"Popup",localeObj:this.parent.localeObj,dataType:this.parent.dataType,cssClass:this.parent.cssClass};this.parent.pivotCommon=new a.a(e)}this.parent.pivotCommon.control=this.parent},e.prototype.addEventListener=function(){this.handlers={load:this.initiateCommonModule},this.parent.isDestroyed||(this.parent.on(r._16,this.handlers.load,this),this.parent.on(r._17,this.handlers.load,this))},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(r._16,this.handlers.load),this.parent.off(r._17,this.handlers.load))},e.prototype.destroy=function(){this.removeEventListener(),this.parent.pivotCommon&&(this.parent.pivotCommon.destroy(),this.parent.pivotCommon=null)},e}())},function(e,t,i){"use strict";i.d(t,"a",function(){return o});var r=i(1),a=i(3),n=i(0),o=(i.n(n),function(){function e(e){this.parent=e}return e.prototype.updateDataSource=function(e,t,o){for(var s,l,d=this,h=-1,p=!0,u=this.parent.dataSourceSettings.rows,c=this.parent.dataSourceSettings.columns,g=this.parent.dataSourceSettings.values,m=this.parent.dataSourceSettings.filters,f=[u,c,g,m],v=0,S=f.length;v<S;v++)if(f[v])for(var y=0,b=f[v].length;y<b;y++)(f[v][y].name===e||"olap"===this.parent.dataType&&"[measures]"===f[v][y].name.toLowerCase()&&f[v][y].name.toLowerCase()===e)&&(l=0===v?"rows":1===v?"columns":2===v?"values":"filters",h=y),l||(l="fieldList");var C={fieldName:e,dropField:a.a.getFieldInfo(e,this.control).fieldItem,dataSourceSettings:a.a.getClonedDataSourceSettings(this.parent.dataSourceSettings),dropAxis:t,dropPosition:o,draggedAxis:l,cancel:!1},x="pivotfieldlist"===this.control.getModuleName()&&this.control.isPopupView?this.control.pivotGridModule:this.control;return x.trigger(r.e,C,function(u){if(u.cancel)p=!1;else{if(t=u.dropAxis,o=u.dropPosition,e=u.dropField?u.dropField.name:u.fieldName,s=u.dropField,d.control&&d.btnElement&&"true"===d.btnElement.getAttribute("isvalue"))switch(t){case"":d.control.setProperties({dataSourceSettings:{values:[]}},!0);break;case"rows":o=o===d.parent.dataSourceSettings.rows.length?-1:o,d.control.setProperties({dataSourceSettings:{valueAxis:"row",valueIndex:o}},!0);break;case"columns":o=o===d.parent.dataSourceSettings.columns.length?-1:o,d.control.setProperties({dataSourceSettings:{valueAxis:"column",valueIndex:o}},!0)}else{if(d.removeFieldFromReport(e.toString()),"pivot"===d.parent.dataType&&d.control.showValuesButton&&d.parent.dataSourceSettings.values.length>1){var c="row"===d.parent.dataSourceSettings.valueAxis&&"rows"===t?d.parent.dataSourceSettings.rows:"column"===d.parent.dataSourceSettings.valueAxis&&"columns"===t?d.parent.dataSourceSettings.columns:void 0;h<d.parent.dataSourceSettings.valueIndex&&("row"===d.parent.dataSourceSettings.valueAxis&&"rows"===l||"column"===d.parent.dataSourceSettings.valueAxis&&"columns"===l)&&d.control.setProperties({dataSourceSettings:{valueIndex:d.parent.dataSourceSettings.valueIndex-1}},!0),i.i(n.isNullOrUndefined)(c)||(-1===o&&-1===d.parent.dataSourceSettings.valueIndex?d.control.setProperties({dataSourceSettings:{valueIndex:c.length}},!0):o>-1&&o<=d.parent.dataSourceSettings.valueIndex?d.control.setProperties({dataSourceSettings:{valueIndex:d.parent.dataSourceSettings.valueIndex+1}},!0):d.parent.dataSourceSettings.valueIndex>-1&&o>d.parent.dataSourceSettings.valueIndex&&(o-=1))}s=d.getNewField(e.toString(),u.dropField),"CalculatedField"===s.type&&""!==t&&(t="values")}if("olap"===d.parent.dataType&&(d.removeFieldFromReport(e.toString()),s=d.getNewField(e.toString(),u.dropField),0===d.parent.dataSourceSettings.values.length&&d.removeFieldFromReport("[measures]"),"CalculatedField"===s.type&&""!==t&&(t="values")),d.control){var g={fieldName:e,droppedField:s,dataSourceSettings:a.a.getClonedDataSourceSettings(d.parent.dataSourceSettings),droppedAxis:t,droppedPosition:o};x.trigger(r.d,g,function(e){if(s=e.droppedField)switch(o=e.droppedPosition,t=e.droppedAxis){case"filters":-1!==o?d.parent.dataSourceSettings.filters.splice(o,0,s):d.parent.dataSourceSettings.filters.push(s);break;case"rows":-1!==o?d.parent.dataSourceSettings.rows.splice(o,0,s):d.parent.dataSourceSettings.rows.push(s);break;case"columns":-1!==o?d.parent.dataSourceSettings.columns.splice(o,0,s):d.parent.dataSourceSettings.columns.push(s);break;case"values":if(-1!==o?d.parent.dataSourceSettings.values.splice(o,0,s):d.parent.dataSourceSettings.values.push(s),!("olap"!==d.parent.dataType||d.parent.engineModule.isMeasureAvail||d.parent.dataSourceSettings.values.length>1)){var i={name:"[Measures]",caption:"Measures",showRemoveIcon:!0,allowDragAndDrop:!0};("row"===d.parent.dataSourceSettings.valueAxis?d.parent.dataSourceSettings.rows:d.parent.dataSourceSettings.columns).push(i)}}})}}}),p},e.prototype.removeFieldFromReport=function(e){for(var t,i=!1,r=this.parent.dataSourceSettings.rows,a=this.parent.dataSourceSettings.columns,n=this.parent.dataSourceSettings.values,o=this.parent.dataSourceSettings.filters,s=[r,a,n,o],l=this.parent.engineModule.fieldList[e],d=0,h=s.length;d<h;d++)if(!i&&s[d])for(var p=0,u=s[d].length;p<u;p++)if(s[d][p].name===e||"olap"===this.parent.dataType&&"[measures]"===s[d][p].name.toLowerCase()&&s[d][p].name.toLowerCase()===e){if(t=s[d][p].properties?s[d][p].properties:s[d][p],t.type=l&&"number"===l.type?t.type:"Count",s[d].splice(p,1),"olap"===this.parent.dataType){var c=this.parent.engineModule;c&&c.fieldList[e]&&(c.fieldList[e].currrentMembers={},c.fieldList[e].searchMembers=[])}i=!0;break}return t},e.prototype.getNewField=function(e,t){var i;if("olap"===this.parent.dataType){var r=this.parent.engineModule.fieldList[e];i={name:t?t.name:e,caption:t?t.caption:r.caption,isNamedSet:t?t.isNamedSet:r.isNamedSets,isCalculatedField:t?t.isCalculatedField:r.isCalculatedField,type:t?void 0===t.type?"number"===r.type?"Sum":"Count":t.type:void 0===r.aggregateType?"number"===r.type?"Sum":"Count":r.aggregateType,showFilterIcon:t?t.showFilterIcon:r.showFilterIcon,showSortIcon:t?t.showSortIcon:r.showSortIcon,showEditIcon:t?t.showEditIcon:r.showEditIcon,showRemoveIcon:t?t.showRemoveIcon:r.showRemoveIcon,showValueTypeIcon:t?t.showValueTypeIcon:r.showValueTypeIcon,allowDragAndDrop:t?t.allowDragAndDrop:r.allowDragAndDrop,showSubTotals:t?t.showSubTotals:r.showSubTotals,expandAll:t?t.expandAll:r.expandAll}}else{var r=this.parent.engineModule.fieldList[e];i={name:t?t.name:e,caption:t?t.caption:r.caption,type:t?void 0===t.type||null===t.type?"number"===r.type?"Sum":"Count":t.type:void 0===r.aggregateType||null===r.aggregateType?"number"===r.type?"Sum":"Count":r.aggregateType,showNoDataItems:t?t.showNoDataItems:r.showNoDataItems,baseField:t?t.baseField:r.baseField,baseItem:t?t.baseItem:r.baseItem,allowDragAndDrop:t?t.allowDragAndDrop:r.allowDragAndDrop,showSubTotals:t?t.showSubTotals:r.showSubTotals,showFilterIcon:t?t.showFilterIcon:r.showFilterIcon,showSortIcon:t?t.showSortIcon:r.showSortIcon,showEditIcon:t?t.showEditIcon:r.showEditIcon,showRemoveIcon:t?t.showRemoveIcon:r.showRemoveIcon,showValueTypeIcon:t?t.showValueTypeIcon:r.showValueTypeIcon,expandAll:t?t.expandAll:r.expandAll}}return i},e}())},function(e,t,i){"use strict";i.d(t,"a",function(){return s});var r=i(0),a=(i.n(r),i(2)),n=i(3),o=i(1),s=function(){function e(e){this.searchListItem=[],this.parent=e}return e.prototype.updateSorting=function(e){if(!e.target.classList.contains(a._165)&&!e.target.classList.contains(a._153)){this.parent.filterDialog.dialogPopUp&&this.parent.filterDialog.dialogPopUp.close();var t=e.target,o=void 0,s=void 0,l=void 0;t.id?(o=t.getAttribute("data-uid"),s=[].slice.call(t.querySelectorAll("."+a._161))):(o=t.parentElement.getAttribute("data-uid"),s=[].slice.call(t.parentElement.querySelectorAll("."+a._161))),l=0!==s.length;var d=n.a.getFieldByName(o,this.parent.dataSourceSettings.sortSettings),h=this.parent.engineModule&&this.parent.engineModule.fieldList[o]&&this.parent.engineModule.fieldList[o].membersOrder?this.parent.engineModule.fieldList[o].membersOrder.slice():[];if(i.i(r.isNullOrUndefined)(d)){var p={name:o,order:l?"Ascending":"Descending",membersOrder:d?d.membersOrder:h};this.parent.dataSourceSettings.sortSettings.push(p)}else{for(var u=0;u<this.parent.dataSourceSettings.sortSettings.length;u++)if(this.parent.dataSourceSettings.sortSettings[u].name===o){this.parent.dataSourceSettings.sortSettings.splice(u,1);break}var p={name:o,order:l?"Ascending":"Descending",membersOrder:d?d.membersOrder:h};this.parent.dataSourceSettings.sortSettings.push(p)}this.parent.control.lastSortInfo=this.parent.dataSourceSettings.sortSettings[this.parent.dataSourceSettings.sortSettings.length-1],l?i.i(r.removeClass)([t],a._161):i.i(r.addClass)([t],a._161)}},e.prototype.updateFiltering=function(e){var t=e.target,a=t.parentElement.getAttribute("data-uid"),s=t.parentElement.textContent,l=!1,d=[],h=[];if(this.parent.dataSourceSettings.allowMemberFilter)if("olap"===this.parent.dataType)h=this.getOlapData(a,l);else{var p=this.parent.engineModule.fieldList[a],u=n.a.getClonedData(p.dateMember),c=p&&p.membersOrder?p.membersOrder.slice():[],g=void 0;"Out of Range"===u[0].actualText?(g=u[0],u.splice(0,1)):"Out of Range"===u[u.length-1].actualText&&(g=u[u.length-1],u.splice(u.length-1,1));var m={fieldName:a,sortOrder:p.sort,members:c&&c.length>0?c:Object.keys(u),IsOrderChanged:!1},f=!1,v=!(!p||!p.isAlphanumeric)||void 0;c&&c.length>0?u=n.a.applyCustomSort(m,u,v):(u=n.a.applyHeadersSort(u,m.sortOrder,v),f=!0);var S=n.a.getFilterItemByName(a,this.parent.dataSourceSettings.filterSettings);if(i.i(r.isNullOrUndefined)(S)||(l=!(!this.isValidFilterItemsAvail(a,S)||"Include"!==S.type),d=S.items?S.items:[]),g&&("Ascending"===m.sortOrder?"Grand Total"===u[u.length-1].actualText?u.splice(u.length-1,0,g):u.splice(u.length,0,g):"Grand Total"===u[0].actualText?u.splice(1,0,g):u.splice(0,0,g)),f){for(var y=[],b=0,C=0;b<u.length;b++)"Grand Total"!==u[b].actualText&&(y[C++]=u[b].actualText);m.members=y}this.parent.control.trigger(o.X,m),m.IsOrderChanged&&(u=n.a.applyCustomSort(m,u,v,!0)),h=this.getTreeData(l,u,d,a)}this.parent.filterDialog.dialogPopUp&&this.parent.filterDialog.dialogPopUp.close();var x=this.parent.control.filterTargetID;i.i(r.isNullOrUndefined)(x)&&(x="pivotfieldlist"!==this.parent.moduleName?this.parent.element:document.getElementById(this.parent.parentID+"_Container")),this.parent.filterDialog.createFilterDialog(h,a,s,x)},e.prototype.isValidFilterItemsAvail=function(e,t){var i=!1,r=["Include","Exclude"];if(t&&r.indexOf(t.type)>=0)if("Include"===t.type&&0===t.items.length)i=!0;else for(var a=this.parent.engineModule,n=a.fieldList[e],o=a.formatFields[e]&&["date","dateTime","time"].indexOf(a.formatFields[e].type)>-1?n.formattedMembers:n.members,s=0,l=t.items;s<l.length;s++){var d=l[s];if(o[d]){i=!0;break}}return i},e.prototype.getOlapData=function(e,t){var a=[],o=[];this.parent.filterDialog.isSearchEnabled=!1;var s=[],l=this.parent.engineModule,d=n.a.getFilterItemByName(e,this.parent.dataSourceSettings.filterSettings);0===l.fieldList[e].filterMembers.length?this.parent.control.loadOnDemandInMemberEditor?d&&d.levelCount>1&&l.fieldList[e].levels.length>1?l.getFilterMembers(this.parent.dataSourceSettings,e,d.levelCount):(l.fieldList[e].levelCount=1,l.getMembers(this.parent.dataSourceSettings,e)):l.getMembers(this.parent.dataSourceSettings,e,!0):(l.fieldList[e].currrentMembers={},l.fieldList[e].searchMembers=[]);var h=l.fieldList[e].isHierarchy;a=l.fieldList[e].filterMembers,i.i(r.isNullOrUndefined)(d)||(t=!d.type||"Include"===d.type,o=d.items?d.items:[]);for(var p={},u={},c=l.fieldList[e].members,g=0,m=o;g<m.length;g++){var f=m[g];p[f]=f,u[f]=f,c[f]&&(u=this.getParentNode(e,f,u))}return a=this.getFilteredTreeNodes(e,a,u,s),a=this.getOlapTreeData(t,n.a.getClonedData(a),p,e,h),a=this.sortOlapFilterData(a,l.fieldList[e].sort)},e.prototype.sortOlapFilterData=function(e,t){if(e.length>0){for(var i=!1,r=[],a=0;a<e.length;a++)r.push(e[a].caption);var n="Grand Total"!==e[0].caption||void 0===e[0].caption?e[0].htmlAttributes["data-fieldName"]:e[1].htmlAttributes["data-fieldName"],s=this.parent.engineModule,l=s.fieldList[n],d=l&&l.membersOrder?l.membersOrder.slice():[],h={fieldName:n,sortOrder:t,members:d&&d.length>0?d:r,IsOrderChanged:!1};if(d&&d.length>0?this.applyFilterCustomSort(e,h):(e="Ascending"===t?e.sort(function(e,t){return e.caption>t.caption?1:t.caption>e.caption?-1:0}):"Descending"===t?e.sort(function(e,t){return e.caption<t.caption?1:t.caption<e.caption?-1:0}):e,i=!0),i){for(var p=[],u=0,c=0;u<e.length;u++)"Grand Total"!==e[u].caption&&(p[c++]=e[u].caption);h.members=p}this.parent.control.trigger(o.X,h),h.IsOrderChanged&&this.applyFilterCustomSort(e,h,!0)}return e},e.prototype.applyFilterCustomSort=function(e,t,i){var r,a=[],n=[];a=t.IsOrderChanged?t.members:"Ascending"===t.sortOrder||"None"===t.sortOrder||void 0===t.sortOrder?[].concat(t.members):[].concat(t.members).reverse(),"Grand Total"===e[0].caption&&(r=e[0],e.shift());for(var o=0,s=0;o<e.length;o++){var l=e[o].caption;if(a[s]===l){if(e.splice(s++,0,e[o]),e.splice(++o,1),!(s<a.length)){i||n.splice(--s,0,l);break}o=-1}o>=0&&!i&&(n[o]=e[o].caption)}if(!i){for(var o=n.length;o<e.length;o++)n[o]=e[o].caption;"Grand Total"===n[n.length-1]&&n.pop(),t.members=n}return r&&e.splice(0,0,r),e},e.prototype.getParentIDs=function(e,t,i){for(var r,a=e.fields.dataSource,n=0,o=a;n<o.length;n++){var s=o[n];if(s.id===t){r=s.pid;break}}return r&&(i.push(r),this.getParentIDs(e,r,i)),i},e.prototype.getChildIDs=function(e,t,i){for(var r,a=e.fields.dataSource,n=0,o=a;n<o.length;n++){var s=o[n];if(s.pid===t){r=s.id;break}}return r&&(i.push(r),this.getParentIDs(e,r,i)),i},e.prototype.searchTreeNodes=function(e,t,o,s){if(o){for(var l=[],d=[],h=[].slice.call(t.element.querySelectorAll("li")),p=0,u=h;p<u.length;p++){var c=u[p];c.querySelector(".e-list-text").textContent.toLowerCase().indexOf(e.value.toLowerCase())>-1?l.push(c):d.push(c)}if(t.enableNodes(l),i.i(r.removeClass)(l,a._18),t.disableNodes(d),i.i(r.addClass)(d,a._18),l.length>0&&d.length>0)for(var g=0,m=l;g<m.length;g++){var f=m[g],v=f.getAttribute("data-uid"),S=this.getParentIDs(t,v,[]),y=this.getChildIDs(t,v,[]),b=[];if(S.length>0)for(var C=0,x=d;C<x.length;C++){var w=x[C];-1!==n.a.inArray(w.getAttribute("data-uid"),S)&&b.push(w)}if(y.length>0)for(var T=0,M=d;T<M.length;T++){var w=M[T];-1!==n.a.inArray(w.getAttribute("data-uid"),y)&&b.push(w)}t.enableNodes(b),i.i(r.removeClass)(b,a._18)}0===[].slice.call(t.element.querySelectorAll("li."+a._18)).length?t.collapseAll():t.expandAll(void 0,void 0,!0),this.searchListItem=l}else if(this.parent.searchTreeItems=[],"olap"!==this.parent.dataType||s){var l=[],_=0;_=1;for(var D=0,O=this.parent.currentTreeItems;D<O.length;D++){var P=O[D];P.name.toLowerCase().indexOf(e.value.toLowerCase())>-1&&(this.parent.searchTreeItems.push(P),_<=this.parent.control.maxNodeLimitInMemberEditor&&l.push(P),_++)}_--,_>this.parent.control.maxNodeLimitInMemberEditor?(this.parent.editorLabelElement.innerText=_-this.parent.control.maxNodeLimitInMemberEditor+this.parent.control.localeObj.getConstant("editorDataLimitMsg"),this.parent.filterDialog.dialogPopUp.height=this.parent.filterDialog.allowExcelLikeFilter?"440px":"400px",this.parent.isDataOverflow=!0):(this.parent.editorLabelElement.innerText="",this.parent.filterDialog.dialogPopUp.height=this.parent.filterDialog.allowExcelLikeFilter?"400px":"350px",this.parent.isDataOverflow=!1),this.parent.isDataOverflow=_>this.parent.control.maxNodeLimitInMemberEditor,this.parent.editorLabelElement.parentElement.style.display=this.parent.isDataOverflow?"block":"none",t.fields={dataSource:l,id:"id",text:"name",isChecked:"isSelected",parentID:"pid"},t.dataBind()}else this.updateOlapSearchTree(e,t,s)},e.prototype.updateOlapSearchTree=function(e,t,i){var r=[],a=this.parent.filterDialog.dialogPopUp.element,o=a.getAttribute("data-fieldname");if(""===e.value.toLowerCase()){this.parent.filterDialog.isSearchEnabled=!1,this.parent.engineModule.fieldList[o].searchMembers=[];for(var s=[],l={},d={},h=this.parent.engineModule.fieldList[o].members,p=Object.keys(h),u=[],c=0,g=p;c<g.length;c++){var m=g[c];h[m].isSelected&&(h[m].parent&&h[h[m].parent].isSelected||u.push(m))}for(var f=0,v=u;f<v.length;f++){var m=v[f];l[m]=m,d[m]=m,h[m]&&(d=this.getParentNode(o,m,d))}var S=this.parent.engineModule.fieldList[o].filterMembers;r=this.getFilteredTreeNodes(o,S,d,s),r=this.getOlapTreeData(!0,n.a.getClonedData(r),l,o,i,!0)}else{this.parent.filterDialog.isSearchEnabled=!0;var S=this.parent.engineModule.fieldList[o].searchMembers;r=n.a.getClonedData(S),r=this.getOlapSearchTreeData(!0,r,o)}t.fields={dataSource:r,id:"id",text:"name",isChecked:"isSelected",parentID:"pid"},t.dataBind()},e.prototype.getTreeData=function(e,t,i,a){this.parent.currentTreeItems=[],this.parent.searchTreeItems=[],this.parent.currentTreeItemsPos={},this.parent.savedTreeFilterPos={};var n=this.parent.engineModule;this.parent.isDateField=n.formatFields[a]&&["date","dateTime","time"].indexOf(n.formatFields[a].type)>-1;for(var o=[],s=1,l={},d=0,h=i;d<h.length;d++){var p=h[d];l[p]=p}for(var u=a.replace(/[^a-zA-Z0-9 ]/g,"_"),c=0,g=t;c<g.length;c++){var m=g[c],f=n.formatFields[a]?m.formattedText:m.actualText.toString();f=this.parent.enableHtmlSanitizer?r.SanitizeHtmlHelper.sanitize(f):f;var v=this.parent.enableHtmlSanitizer?r.SanitizeHtmlHelper.sanitize(m.actualText):m.actualText,S={"data-fieldName":a,"data-memberId":v.toString()},y={id:u+"_"+s,htmlAttributes:S,actualText:v,name:f,isSelected:!e};void 0!==l[v]&&(y.isSelected=!!e),s<=this.parent.control.maxNodeLimitInMemberEditor&&o.push(y),y.isSelected||(this.parent.savedTreeFilterPos[s-1]=f),this.parent.currentTreeItems.push(y),this.parent.searchTreeItems.push(y),this.parent.currentTreeItemsPos[v]={index:s-1,isSelected:y.isSelected},s++}return this.parent.isDataOverflow=s-1>this.parent.control.maxNodeLimitInMemberEditor,o},e.prototype.getOlapTreeData=function(e,t,i,r,a,n){var o=this.parent.engineModule,s=o.fieldList[r];this.parent.currentTreeItems=[],this.parent.searchTreeItems=[],this.parent.currentTreeItemsPos={};for(var l=[],d=1,h=0,p=t;h<p.length;h++){var u=p[h],c=u,g=u.id.toString();n||(c.isSelected=!e),void 0!==i[g]&&(c.isSelected=!!e),!n&&u.hasChildren&&this.updateChildNodeStates(s.filterMembers,r,u.id,c.isSelected),s.members[g].isSelected=c.isSelected,s.currrentMembers&&s.currrentMembers[g]&&(s.currrentMembers[g].isSelected=c.isSelected),d<=this.parent.control.maxNodeLimitInMemberEditor&&a&&l.push(c),this.parent.currentTreeItems.push(c),this.parent.searchTreeItems.push(c),this.parent.currentTreeItemsPos[g]={index:d-1,isSelected:c.isSelected},d++}return this.parent.isDataOverflow=!!a&&d-1>this.parent.control.maxNodeLimitInMemberEditor,a?l:t},e.prototype.getOlapSearchTreeData=function(e,t,i){for(var r=this.parent.engineModule.fieldList[i].members,a=0,n=t;a<n.length;a++){var o=n[a],s=o.id.toString();r[s]&&(o.isSelected=r[s].isSelected),this.parent.searchTreeItems.push(o)}return t},e.prototype.updateChildNodeStates=function(e,t,i,r){for(var a=this.parent.engineModule.fieldList[t].members,n=this.parent.engineModule.fieldList[t].currrentMembers,o=0,s=e;o<s.length;o++){var l=s[o];l.pid&&l.pid.toString()===i&&(a[l.id].isSelected=r,n&&n[l.id]&&(n[l.id].isSelected=r),l.hasChildren&&this.updateChildNodeStates(e,t,l.id,r))}},e.prototype.getParentNode=function(e,t,i){var r=this.parent.engineModule.fieldList[e].members;if(r[t].parent&&t!==r[t].parent){var a=r[t].parent;i[a]=a,this.getParentNode(e,a,i)}return i},e.prototype.getFilteredTreeNodes=function(e,t,a,o){for(var s=[],l=this.parent.engineModule.fieldList[e].members,d=a?Object.keys(a):[],h=0,p=d;h<p.length;h++){var u=p[h],c=l[u]?l[u].parent:void 0;void 0!==c&&-1===n.a.inArray(c,s)&&s.push(c)}for(var g=0,m=t;g<m.length;g++){var f=m[g];i.i(r.isNullOrUndefined)(f.pid)||-1!==n.a.inArray(f.pid,s)?(o.push(f),i.i(r.isNullOrUndefined)(f.pid)&&-1!==n.a.inArray(f.id,s)?l[f.id].isNodeExpand=!0:i.i(r.isNullOrUndefined)(f.pid)||-1===n.a.inArray(f.pid,s)?l[f.id].isNodeExpand=!1:(l[f.id].isNodeExpand=!1,l[f.pid].isNodeExpand=!0)):l[f.id].isNodeExpand=!1}return o},e}()},function(e,t,i){"use strict";i.d(t,"a",function(){return n});var r=i(0),a=(i.n(r),i(2)),n=function(){function e(e){this.keyConfigs={shiftF:"shift+F",shiftS:"shift+S",shiftE:"shift+E",delete:"delete",enter:"enter",escape:"escape",upArrow:"upArrow",downArrow:"downArrow",altJ:"alt+J"},this.parent=e,this.parent.element.tabIndex=-1===this.parent.element.tabIndex?0:this.parent.element.tabIndex,this.keyboardModule=new r.KeyboardEvents(this.parent.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})}return e.prototype.keyActionHandler=function(e){switch(e.action){case"shiftF":this.processFilter(e);break;case"shiftS":this.processSort(e);break;case"shiftE":this.processEdit(e);break;case"delete":this.processDelete(e);break;case"enter":this.processEnter(e);break;case"escape":this.processClose(e);break;case"upArrow":case"downArrow":this.processFilterNodeSelection(e);break;case"altJ":this.processComponentFocus(e)}},e.prototype.processComponentFocus=function(e){if(this.parent.element)return this.parent.element.focus(),e.stopPropagation(),void e.preventDefault()},e.prototype.getButtonElement=function(e){for(var t=[].slice.call(this.parent.element.querySelectorAll("."+a._14)),i=0,r=t.length;i<r;i++)if(t[i].getAttribute("data-uid")===e.getAttribute("data-uid"))return t[i];return e},e.prototype.processEnter=function(e){var t=e.target;if(t&&i.i(r.closest)(t,"."+a._14))return t.querySelector("."+a._160)&&i.i(r.closest)(t,"."+a._130)?t.querySelector("."+a._160).click():t.querySelector("."+a._76)?t.querySelector("."+a._76).click():!t.querySelector("."+a._162)||i.i(r.closest)(t,"."+a._130)||i.i(r.closest)(t,"."+a._124)?t.querySelector("."+a._165)&&!i.i(r.closest)(t,"."+a._130)&&t.querySelector("."+a._165).click():(t.querySelector("."+a._162).click(),this.getButtonElement(t).focus()),void e.preventDefault()},e.prototype.processSort=function(e){var t=e.target;if(t&&i.i(r.closest)(t,"."+a._14)&&t.querySelector("."+a._162)&&!i.i(r.closest)(t,"."+a._130)&&!i.i(r.closest)(t,"."+a._124))return t.querySelector("."+a._162).click(),this.getButtonElement(t).focus(),void e.preventDefault()},e.prototype.processEdit=function(e){var t=e.target;if(t&&i.i(r.closest)(t,"."+a._14)&&t.querySelector("."+a._76))return t.querySelector("."+a._76).click(),void e.preventDefault()},e.prototype.processFilter=function(e){var t=e.target;if(t&&i.i(r.closest)(t,"."+a._14)&&t.querySelector("."+a._165)&&!i.i(r.closest)(t,"."+a._130)){if(t.querySelector("."+a._165).click(),this.parent&&this.parent.control&&"pivotview"===this.parent.moduleName&&this.parent.control.grid&&this.parent.control.showGroupingBar&&this.parent.control.groupingBarModule&&i.i(r.closest)(t,"."+a._125)&&this.parent.filterDialog&&this.parent.filterDialog.dialogPopUp&&!this.parent.filterDialog.dialogPopUp.isDestroyed&&this.parent.filterDialog.dialogPopUp.element){var n=this.parent.filterDialog.dialogPopUp.element,o=this.parent.filterDialog.allowExcelLikeFilter;clearTimeout(this.timeOutObj),this.timeOutObj=setTimeout(function(){n&&n.classList.contains("e-popup-open")&&(o&&n.querySelector(".e-dlg-closeicon-btn")?n.querySelector(".e-dlg-closeicon-btn").focus():n.querySelector("input")&&n.querySelector("input").focus())})}return void e.preventDefault()}},e.prototype.processFilterNodeSelection=function(e){var t=e.target;if(t&&i.i(r.closest)(t,"."+a._25)&&40===e.keyCode){var n=i.i(r.closest)(t,"."+a._19).querySelector("."+a._26);if(n&&n.querySelector("li")){var o=n.querySelector("li");return n.querySelector("li#_active")&&(i.i(r.removeClass)([n.querySelector("li#_active")],["e-node-focus"]),n.querySelector("li#_active").removeAttribute("id")),o.setAttribute("id","_active"),i.i(r.addClass)([o],["e-node-focus"]),o.focus(),void e.preventDefault()}}else if(t&&i.i(r.closest)(t,"."+a._26)&&38===e.keyCode){var n=i.i(r.closest)(t,"."+a._26);if(n.querySelector("li#_active.e-node-focus")&&n.querySelector("li")&&n.querySelector("li").classList.contains("e-prev-active-node")&&n.querySelector("li")===n.querySelector("li#_active.e-node-focus")){i.i(r.removeClass)(n.querySelectorAll("li.e-prev-active-node"),"e-prev-active-node");var s=i.i(r.closest)(t,"."+a._19).querySelector("."+a._25);if(s&&s.querySelector("li")){var o=s.querySelector("li");return o.setAttribute("id","_active"),i.i(r.addClass)([o],["e-node-focus"]),o.focus(),void e.preventDefault()}}}else t&&t.id===this.parent.parentID+"_inputbox"&&("upArrow"===e.action?t.parentElement.querySelector(".e-spin-up").click():"downArrow"===e.action&&t.parentElement.querySelector(".e-spin-down").click())},e.prototype.processDelete=function(e){var t=e.target;if(t&&i.i(r.closest)(t,"."+a._14)&&t.querySelector("."+a._153))return t.querySelector("."+a._153).click(),void e.preventDefault()},e.prototype.processClose=function(e){var t=e.target;if(t&&i.i(r.closest)(t,".e-popup.e-popup-open")){var a=i.i(r.closest)(t,".e-popup.e-popup-open").ej2_instances[0];if(a&&!a.closeOnEscape){var n=a.element.getAttribute("data-fieldName");if(a.hide(),this.parent.element)for(var o=[].slice.call(this.parent.element.querySelectorAll(".e-pivot-button")),s=0,l=o;s<l.length;s++){var d=l[s];if(d.getAttribute("data-uid")===n){d.focus();break}}return void e.preventDefault()}}},e.prototype.destroy=function(){this.keyboardModule&&this.keyboardModule.destroy()},e}()},function(e,t,i){"use strict";i.d(t,"a",function(){return n});var r=i(0),a=(i.n(r),i(2)),n=function(){function e(e){this.parent=e}return e.prototype.onStateModified=function(e,t){var n="",o=i.i(r.closest)(e.target,"."+a._146),s=-1;if(this.parent.dataSourceUpdate.btnElement=e.element?e.element.parentElement:void 0,o&&(n=o.classList[1]===a._126?"rows":o.classList[1]===a._128?"columns":o.classList[1]===a._130?"values":o.classList[1]===a._132?"filters":""),"olap"===this.parent.dataType||"pivot"===this.parent.dataType){var l="olap"===this.parent.dataType&&this.parent.engineModule.fieldList[t]&&this.parent.engineModule.fieldList[t].isCalculatedField?this.parent.engineModule.fieldList[t].tag:t;if(e.cancel&&""===n)return!1;if(this.parent.dataSourceUpdate.btnElement&&"true"===this.parent.dataSourceUpdate.btnElement.getAttribute("isValue")&&("filters"===n||"values"===n)||this.parent.dataSourceUpdate.btnElement&&"false"===this.parent.dataSourceUpdate.btnElement.getAttribute("isValue")&&l.toLowerCase().indexOf("[measures].")>-1&&"olap"===this.parent.dataType&&("filters"===n||"rows"===n||"columns"===n)||this.parent.dataSourceUpdate.btnElement&&"false"===this.parent.dataSourceUpdate.btnElement.getAttribute("isValue")&&"olap"===this.parent.dataType&&-1===l.toLowerCase().indexOf("[measures].")&&this.parent.engineModule.fieldList[t]&&this.parent.engineModule.fieldList[t].isNamedSets&&("filters"===n||"values"===n)||this.parent.dataSourceUpdate.btnElement&&"false"===this.parent.dataSourceUpdate.btnElement.getAttribute("isValue")&&"olap"===this.parent.dataType&&-1===l.toLowerCase().indexOf("[measures].")&&"values"===n){var d=this.parent.localeObj.getConstant("warning"),h=this.parent.localeObj.getConstant("fieldDropErrorAction");return this.parent.errorDialog.createErrorDialog(d,h),!1}}else if(e.cancel&&""===n||this.parent.dataSourceUpdate.btnElement&&"true"===this.parent.dataSourceUpdate.btnElement.getAttribute("isValue")&&("filters"===n||"values"===n||n.indexOf(this.parent.dataSourceSettings.valueAxis)>-1))return!1;if(""!==n){if("olap"===this.parent.dataType||"pivot"===this.parent.dataType){var l="olap"===this.parent.dataType&&this.parent.engineModule.fieldList[t]&&this.parent.engineModule.fieldList[t].isCalculatedField?this.parent.engineModule.fieldList[t].tag:t;if(l.toLowerCase().indexOf("[measures].")>-1&&"olap"===this.parent.dataType&&("filters"===n||"rows"===n||"columns"===n)||this.parent.engineModule.fieldList[t]&&this.parent.engineModule.fieldList[t].isNamedSets&&"filters"===n||"olap"===this.parent.dataType&&"values"===n&&-1===l.toLowerCase().indexOf("[measures].")){var d=this.parent.localeObj.getConstant("warning"),h=this.parent.localeObj.getConstant("fieldDropErrorAction");return this.parent.errorDialog.createErrorDialog(d,h),!1}}if("pivot"===this.parent.dataType&&this.parent.engineModule.fieldList[t]&&"CalculatedField"===this.parent.engineModule.fieldList[t].aggregateType&&"values"!==n){var d=this.parent.localeObj.getConstant("warning"),h=this.parent.localeObj.getConstant("dropAction");return this.parent.errorDialog.createErrorDialog(d,h),!1}s=this.getButtonPosition(e.target,n)}else this.parent.engineModule.fieldList[t]&&(this.parent.engineModule.fieldList[t].isSelected=!1,"olap"===this.parent.dataType&&this.parent.engineModule.updateFieldlistData(t));return this.parent.dataSourceUpdate.updateDataSource(t,n,s)},e.prototype.getButtonPosition=function(e,t){var n=-1,o=i.i(r.closest)(e,"."+a._145);if(!i.i(r.isNullOrUndefined)(o)){o=o.querySelector("."+a._14);for(var s=this.parent.element.querySelector(".e-"+t),l=[].slice.call(s.querySelectorAll("."+a._14)),d=0,h=l.length;d<h;d++)if(l[d].id===o.id){n=d;break}}return n},e}()},function(e,t,i){"use strict";i.d(t,"a",function(){return c});var r=i(0),a=(i.n(r),i(20)),n=i(2),o=i(1),s=i(10),l=(i.n(s),i(4)),d=(i.n(l),i(18)),h=i(21),p=i(7),u=(i.n(p),i(3)),c=function(){function e(e){this.parent=e,this.menuOption=new d.a(this.parent),this.parent.pivotButtonModule=this,this.addEventListener(),this.parent instanceof a.a&&(this.axisField=new h.a(this.parent)),this.isDestroyed=!1}return e.prototype.renderPivotButton=function(e){var t,a,o=this,l=i.i(r.extend)([],e.field,null,!0),d=e.axis,h=-1,c="pivot"===this.parent.dataType&&("pivotfieldlist"===this.parent.getModuleName()&&this.parent.pivotGridModule?this.parent.pivotGridModule.showValuesButton:this.parent.showValuesButton);if(("row"===this.parent.dataSourceSettings.valueAxis&&"rows"===e.axis||"column"===this.parent.dataSourceSettings.valueAxis&&"columns"===e.axis)&&c&&this.parent.dataSourceSettings.values.length>1&&i.i(r.isNullOrUndefined)(u.a.getFieldByName("[Measures]",l))){var g=u.a.getFieldByName("[Measures]",this.parent.dataSourceSettings.fieldMapping),m={name:"[Measures]",caption:this.parent.localeObj.getConstant("values"),axis:e.axis,showRemoveIcon:!(g&&"showRemoveIcon"in g)||g.showRemoveIcon,allowDragAndDrop:!(g&&"allowDragAndDrop"in g)||g.allowDragAndDrop};-1===this.parent.dataSourceSettings.valueIndex||this.parent.dataSourceSettings.valueIndex>l.length?(h=l.length,l.push(m),this.parent.setProperties({dataSourceSettings:{valueIndex:-1}},!0)):(h=this.parent.dataSourceSettings.valueIndex,l.splice(h,0,m))}if(this.parentElement="pivotview"===this.parent.getModuleName()?this.parent.element:document.getElementById(this.parent.element.id+"_Container"),"pivotfieldlist"===this.parent.getModuleName()){if(this.parentElement=document.getElementById(this.parent.element.id+"_Container"),!this.parentElement.querySelector("."+n._150+"-"+d))return;var f=this.parentElement.querySelector("."+n._150+"-"+d).querySelector("."+n._151);0===l.length?i.i(r.removeClass)([f],n._18):i.i(r.addClass)([f],n._18),a=this.parentElement.querySelector("."+n._150+"-"+d).querySelector("."+n._152)}else this.parentElement=this.parent.element,a=this.parentElement.querySelector(".e-group-"+d);if(a)if("pivotview"===this.parent.getModuleName()&&0===l.length)for(var v=0,S=this.parentElement.querySelectorAll(".e-group-"+d);v<S.length;v++){var y=S[v];if(!y.classList.contains(n._138)&&!y.classList.contains(n._139)){var f=i.i(r.createElement)("span",{className:n._151});f.innerText=this.parent.groupingBarSettings.allowDragAndDrop?"rows"===d?this.parent.localeObj.getConstant("rowAxisPrompt"):"columns"===d?this.parent.localeObj.getConstant("columnAxisPrompt"):"values"===d?this.parent.localeObj.getConstant("valueAxisPrompt"):"filters"===d?this.parent.localeObj.getConstant("filterAxisPrompt"):this.parent.localeObj.getConstant("allFields"):"",y.appendChild(f)}}else{for(var b=0,C=l.length;b<C;b++)for(var x=0,w="pivotfieldlist"===this.parent.getModuleName()?[a]:this.parentElement.querySelectorAll(".e-group-"+d);x<w.length;x++){var y=w[x];y=y;var T="olap"===this.parent.dataType&&("[measures]"===l[b].name.toLowerCase()||"values"===d),M="olap"===this.parent.dataType&&"values"===d;if(!y.classList.contains(n._138)&&!y.classList.contains(n._139)){var _=i.i(r.createElement)("div",{className:n._145+(0===b&&"all-fields"!==d?" e-first-btn":""),attrs:{"data-tag":d+":"+l[b].name}}),D=l[b].caption?l[b].caption:l[b].name;D=this.parent.enableHtmlSanitizer?r.SanitizeHtmlHelper.sanitize(D):D;var O=i.i(r.createElement)("div",{id:this.parent.element.id+"_"+l[b].name,className:n._14+" "+l[b].name.replace(/[^A-Z0-9]/gi,""),attrs:{"data-uid":l[b].name,tabindex:"pivotview"===this.parent.getModuleName()&&this.parent.grid&&"rows"===d&&!y.classList.contains(n._136)?"-1":"0",isvalue:b===h||T&&!M?"true":"false","aria-disabled":"false","aria-label":D,"data-type":"olap"===this.parent.dataType?M?"isMeasureFieldsAvail":T?"isMeasureAvail":l[b].type:l[b].type,"data-caption":D,"data-basefield":this.parent.enableHtmlSanitizer?r.SanitizeHtmlHelper.sanitize(l[b].baseField):l[b].baseField,"data-baseitem":this.parent.enableHtmlSanitizer?r.SanitizeHtmlHelper.sanitize(l[b].baseItem):l[b].baseItem,role:"button"}}),P=i.i(r.createElement)("span",{attrs:{tabindex:"-1","aria-disabled":"false"},className:n._147}),E=i.i(r.createElement)("span",{attrs:{tabindex:"-1","aria-disabled":"false"},className:n._147+"-last"}),N=this.createButtonDragIcon(l[b],O),F=this.createButtonText(l,b,d,h);if(O.appendChild(F),"all-fields"!==d){if(T||l[b].isNamedSet||l[b].isCalculatedField||(-1!==["filters","values"].indexOf(d)||h===b||"olap"===this.parent.dataType&&("pivotview"===this.parent.getModuleName()&&this.parent.enableVirtualization||"pivotfieldlist"===this.parent.getModuleName()&&void 0!==this.parent.pivotGridModule&&this.parent.pivotGridModule.enableVirtualization)||this.createSortOption(O,l[b].name,l[b]),"values"!==d&&h!==b&&this.createFilterOption(O,l[b].name,d,l[b]),"values"===d&&this.getTypeStatus(l,b,O)),l[b].isCalculatedField||"CalculatedField"===l[b].type){var I=i.i(r.createElement)("span",{attrs:{tabindex:"-1","aria-disabled":"false",title:this.parent.localeObj.getConstant("editCalculatedField")},className:n.a+" "+n._76});this.parent.allowCalculatedField&&this.parent.calculatedFieldModule&&(l[b].showEditIcon||void 0===l[b].showEditIcon)?i.i(r.removeClass)([I],n._18):i.i(r.addClass)([I],n._18),O.appendChild(I)}var L=i.i(r.createElement)("span",{attrs:{tabindex:"-1","aria-disabled":"false",title:this.parent.localeObj.getConstant("remove")},className:n.a+" "+n._153});"pivotview"===this.parent.getModuleName()?this.parent.groupingBarSettings.showRemoveIcon&&(l[b].showRemoveIcon||void 0===l[b].showRemoveIcon)?i.i(r.removeClass)([L],n._18):i.i(r.addClass)([L],n._18):l[b].showRemoveIcon||void 0===l[b].showRemoveIcon?i.i(r.removeClass)([L],n._18):i.i(r.addClass)([L],n._18),O.appendChild(L),_.appendChild(P),_.appendChild(O),_.appendChild(E)}else _.appendChild(P),_.appendChild(O);y.appendChild(_);var A=new s.Button({enableRtl:this.parent.enableRtl,locale:this.parent.locale,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,cssClass:this.parent.cssClass});A.isStringTemplate=!0,A.appendTo(O),this.unWireEvent(_,b===h&&"all-fields"!==d?"values":d,T),this.wireEvent(_,b===h&&"all-fields"!==d?"values":d,T),("pivotview"===this.parent.getModuleName()&&!this.parent.isAdaptive||"pivotfieldlist"===this.parent.getModuleName())&&(this.createDraggable(l[b],"pivotview"===this.parent.getModuleName()?F:N),O.querySelector("."+n._154).ej2_instances[0].enableAutoScroll=!1)}}if("values"===d)for(var R=this,k=0,j=this.parentElement.querySelectorAll(".e-group-"+d);k<j.length;k++){var y=j[k];!function(e){if(e.classList.contains(n._138)&&R.parent.pivotChartModule){var t=l.map(function(e){return{text:e.caption?e.caption:e.name,value:e.name}}),a=R.parent;if(R.valueFiedDropDownList&&e.querySelector("."+n._155))R.valueFiedDropDownList.dataSource=t,R.valueFiedDropDownList.value=a.chartSettings.enableMultipleAxis?t[0].value:a.pivotChartModule.currentMeasure;else{var o=i.i(r.createElement)("div",{className:n._155});e.appendChild(o),R.valueFiedDropDownList=new p.DropDownList({dataSource:t,enableRtl:R.parent.enableRtl,locale:R.parent.locale,value:a.chartSettings.enableMultipleAxis?t[0].value:a.pivotChartModule.currentMeasure,width:200,fields:{value:"value",text:"text"},cssClass:n._156+(R.parent.cssClass?" "+R.parent.cssClass:""),change:function(e){e.e&&null!==e.e&&(a.chartSettings.value=e.value)}}),R.valueFiedDropDownList.isStringTemplate=!0,R.valueFiedDropDownList.appendTo(o)}}}(y)}else if("columns"===d)for(var H=void 0,q=0,V=this.parentElement.querySelectorAll(".e-group-"+d);q<V.length;q++){var y=V[q];if(y.classList.contains(n._139)&&this.parent.pivotChartModule){for(var B=this.parent.pivotChartModule.currentMeasure,U=this.parent.chartSettings.columnDelimiter?this.parent.chartSettings.columnDelimiter:"-",G=this.parent.chartSettings.columnHeader&&""!==this.parent.chartSettings.columnHeader?this.parent.chartSettings.columnHeader.split(U).join(" - "):"",z="olap"===this.parent.dataType?this.parent.olapEngineModule:this.parent.engineModule,W=z.pivotValues,Q=this.parent.pivotChartModule.getColumnTotalIndex(W),Y=Object.keys(W),K=[],X=!1,J=0,Z=Y;J<Z.length;J++){var $=Z[J];if(X)break;var ee=Number($);if(W[ee][0]&&"row"===W[ee][0].axis&&(0===this.parent.dataSourceSettings.rows.length||"grand sum"!==W[ee][0].type))for(var te=W[ee][0],ie="olap"===this.parent.dataType?z.tupRowInfo[te.ordinal]:void 0,re=W[ee],ae=Object.keys(re),ne=0,oe=ae;ne<oe.length;ne++){var se=oe[ne],le=Number(se),de=W[ee][le],he="olap"===this.parent.dataType&&ie&&ie.measureName?ie.measureName:de.actualText;if(!Q[de.colIndex]&&"value"===de.axis&&"header"!==te.type&&""!==he&&he===B){X=!0;var pe="olap"===this.parent.dataType?de.columnHeaders.toString().split(/~~|::/).join(" - "):de.columnHeaders.toString().split(this.parent.dataSourceSettings.valueSortSettings.headerDelimiter).join(" - ");K.push({value:pe,text:pe,title:(t={},t.title=pe,t)}),pe===G&&(H=K.length)}}}if(this.columnFieldDropDownList&&y.querySelector("."+n._157))this.columnFieldDropDownList.dataSource=K,this.columnFieldDropDownList.value=void 0!==H?K[H-1].value:K[0].value;else{var ue=i.i(r.createElement)("div",{className:n._157});y.appendChild(ue),this.columnFieldDropDownList=new p.DropDownList({dataSource:K,enableRtl:this.parent.enableRtl,locale:this.parent.locale,value:H?K[H-1].value:K[0]?K[0].value:"",width:"200",fields:{value:"value",text:"text",htmlAttributes:"title"},cssClass:n._158+(this.parent.cssClass?" "+this.parent.cssClass:""),change:function(e){if(e.e&&null!==e.e){var t=o.parent.chartSettings.columnDelimiter?o.parent.chartSettings.columnDelimiter:"-";o.parent.chartSettings.columnHeader=e.value.split(" - ").join(t)}}}),this.columnFieldDropDownList.isStringTemplate=!0,this.columnFieldDropDownList.appendTo(ue)}}}}},e.prototype.createButtonText=function(e,t,a,o){var s,l;"filters"===a&&(l=this.updateButtontext(e[t].name));var d;d="olap"===this.parent.dataType?this.parent.olapEngineModule:this.parent.engineModule,void 0!==d.fieldList[e[t].name]&&(s=d.fieldList[e[t].name].aggregateType,s="DistinctCount"===s||"number"===d.fieldList[e[t].name].type&&"include"!==d.fieldList[e[t].name].type&&"exclude"!==d.fieldList[e[t].name].type?void 0===s?"Sum":d.fieldList[e[t].name].aggregateType:"Count");var h=e[t].caption?e[t].caption:e[t].name;h=this.parent.enableHtmlSanitizer?r.SanitizeHtmlHelper.sanitize(h):h;var p=i.i(r.createElement)("span",{attrs:{title:"filters"===a?"olap"===this.parent.dataType&&"CalculatedField"===d.fieldList[e[t].name].type?h:h+" ("+l+")":"olap"===this.parent.dataType?h:this.parent.dataSourceSettings.showAggregationOnValueField&&"values"===a&&"CalculatedField"!==s?this.parent.localeObj.getConstant(s)+" "+this.parent.localeObj.getConstant("of")+" "+h:h,tabindex:"-1","aria-disabled":"false",oncontextmenu:"return false;","data-type":o===t?"":s},className:n._13+" "+("pivotview"===this.parent.getModuleName()?this.parent.groupingBarSettings.allowDragAndDrop&&(e[t].allowDragAndDrop||void 0===e[t].allowDragAndDrop)?"":n._159:"")});return p.innerText="filters"===a?"olap"===this.parent.dataType&&"CalculatedField"===d.fieldList[e[t].name].type?h:h+" ("+l+")":"olap"===this.parent.dataType?h:this.parent.dataSourceSettings.showAggregationOnValueField&&"values"===a&&"CalculatedField"!==s?this.parent.localeObj.getConstant(s)+" "+this.parent.localeObj.getConstant("of")+" "+h:h,p},e.prototype.getTypeStatus=function(e,t,i){var r;r="olap"===this.parent.dataType?this.parent.olapEngineModule:this.parent.engineModule;var a=r.fieldList[e[t].name];"CalculatedField"!==a.aggregateType&&this.validateDropdown(a.type)&&this.createSummaryType(i,e[t].name,e[t])},e.prototype.validateDropdown=function(e){var t=this.parent.aggregateTypes;if("number"!==e)return t.indexOf("Count")>-1||t.indexOf("DistinctCount")>-1;for(var i=0;i<t.length;i++)if(this.parent.getAllSummaryType().indexOf(t[i])>-1)return!0;return!1},e.prototype.createSummaryType=function(e,t,a){var o=i.i(r.createElement)("span",{attrs:{tabindex:"-1","aria-disabled":"false",title:this.parent.localeObj.getConstant("format")},className:n.a+" "+n._160});return"pivotview"===this.parent.getModuleName()?this.parent.groupingBarSettings.showValueTypeIcon&&a.showValueTypeIcon?i.i(r.removeClass)([o],n._18):i.i(r.addClass)([o],n._18):a.showValueTypeIcon?i.i(r.removeClass)([o],n._18):i.i(r.addClass)([o],n._18),e.appendChild(o),o},e.prototype.createMenuOption=function(e){this.menuOption.render(e,this.parentElement),this.parent.pivotButtonModule=this},e.prototype.openCalculatedFieldDialog=function(e){var t=e.target.parentElement.getAttribute("data-uid"),a=u.a.getFieldInfo(t,this.parent);if(this.parent.actionObj.actionName=o._67,this.parent.actionObj.fieldInfo=a,!this.parent.actionBeginMethod())try{"pivotview"===this.parent.getModuleName()?this.parent.isAdaptive&&this.parent.showFieldList&&this.parent.pivotFieldListModule&&!this.parent.pivotFieldListModule.isDestroyed?(this.parent.pivotFieldListModule.element.querySelector("."+n._85).click(),this.parent.pivotFieldListModule.dialogRenderer.adaptiveElement.select(4),this.parent.pivotFieldListModule.calculatedFieldModule.updateAdaptiveCalculatedField(!0,t)):(this.parent.isAdaptive||(this.parent.calculatedFieldModule.buttonCall=!0),this.parent.notify(o._26,{edit:!0,fieldName:t})):"pivotfieldlist"===this.parent.getModuleName()&&(this.parent.isAdaptive?(this.parent.dialogRenderer.adaptiveElement.select(4),this.parent.calculatedFieldModule.updateAdaptiveCalculatedField(!0,t),this.parent.calculatedFieldModule.buttonCall=!0):(this.parent.dialogRenderer.fieldListDialog&&(this.parent.dialogRenderer.fieldListDialog.hide(),i.i(r.addClass)([this.parent.element.querySelector("."+n._85)],n._86)),this.parent.notify(o._26,{edit:!0,fieldName:t}),this.parent.calculatedFieldModule&&(this.parent.calculatedFieldModule.buttonCall=!0)))}catch(e){this.parent.actionFailureMethod(e)}},e.prototype.createDraggable=function(e,t){this.draggable=new r.Draggable(t,{clone:!0,enableTailMode:!0,enableAutoScroll:!0,helper:this.createDragClone.bind(this),dragStart:this.onDragStart.bind(this),drag:this.onDragging.bind(this),dragStop:this.onDragStop.bind(this),abort:"pivotview"===this.parent.getModuleName()?this.parent.groupingBarSettings.allowDragAndDrop&&e.allowDragAndDrop?"":"."+n._14:e.allowDragAndDrop?"":"."+n._14})},e.prototype.createButtonDragIcon=function(e,t){var a=i.i(r.createElement)("span",{attrs:{tabindex:"-1","aria-disabled":"false"}}),o=i.i(r.createElement)("span",{attrs:{tabindex:"-1","aria-disabled":"false",title:this.parent.localeObj.getConstant("drag")},className:n.a+" "+n._112+" "+(e.allowDragAndDrop||void 0===e.allowDragAndDrop?"":n._159)});return a.appendChild(o),"pivotfieldlist"===this.parent.getModuleName()&&t.appendChild(a),a},e.prototype.createSortOption=function(e,t,a){var o,s,l;if(l="olap"===this.parent.dataType?this.parent.olapEngineModule:this.parent.engineModule,this.parent.allowDeferLayoutUpdate){o="";for(var d=0;d<this.parent.dataSourceSettings.sortSettings.length;d++)this.parent.dataSourceSettings.sortSettings[d].name===t&&(o="Descending"===this.parent.dataSourceSettings.sortSettings[d].order?n._161:"")}else o="Descending"===l.fieldList[t].sort?n._161:"";return s="None"===l.fieldList[t].sort?i.i(r.createElement)("span",{attrs:{tabindex:"-1","aria-disabled":"false",title:this.parent.localeObj.getConstant("sort")},className:n.a}):i.i(r.createElement)("span",{attrs:{tabindex:"-1","aria-disabled":"false",title:this.parent.localeObj.getConstant("sort")},className:n.a+" "+n._162+" "+o}),this.parent.dataSourceSettings.enableSorting?"pivotview"===this.parent.getModuleName()?a.showSortIcon&&this.parent.groupingBarSettings.showSortIcon?i.i(r.removeClass)([s],n._18):i.i(r.addClass)([s],n._18):a.showSortIcon?i.i(r.removeClass)([s],n._18):i.i(r.addClass)([s],n._18):i.i(r.addClass)([s],n._18),e.appendChild(s),s},e.prototype.createFilterOption=function(e,t,a,o){var s,l;if(l="olap"===this.parent.dataType?this.parent.olapEngineModule:this.parent.engineModule,this.parent.allowDeferLayoutUpdate){s=n._163;for(var d=0;d<this.parent.dataSourceSettings.filterSettings.length;d++)this.parent.dataSourceSettings.filterSettings[d].name===t&&(s=n._164)}else l.fieldList[t].filter=null===l.fieldList[t].filter?[]:l.fieldList[t].filter,s=0===l.fieldList[t].filter.length?l.fieldList[t].isExcelFilter?n._164:n._163:n._164;var h=i.i(r.createElement)("span",{attrs:{tabindex:"-1","aria-disabled":"false",title:this.parent.localeObj.getConstant("filter")},className:n._165+" "+n.a+" "+s});return(this.parent.dataSourceSettings.allowLabelFilter||this.parent.dataSourceSettings.allowValueFilter)&&"filters"!==a||this.parent.dataSourceSettings.allowMemberFilter?i.i(r.removeClass)([h],n._18):i.i(r.addClass)([h],n._18),"pivotview"===this.parent.getModuleName()?((this.parent.dataSourceSettings.allowLabelFilter||this.parent.dataSourceSettings.allowValueFilter)&&"filters"!==a||this.parent.dataSourceSettings.allowMemberFilter)&&this.parent.groupingBarSettings.showFilterIcon&&o.showFilterIcon?i.i(r.removeClass)([h],n._18):i.i(r.addClass)([h],n._18):o.showFilterIcon&&((this.parent.dataSourceSettings.allowLabelFilter||this.parent.dataSourceSettings.allowValueFilter)&&"filters"!==a||this.parent.dataSourceSettings.allowMemberFilter)?i.i(r.removeClass)([h],n._18):i.i(r.addClass)([h],n._18),e.appendChild(h),h},e.prototype.updateButtontext=function(e){var t;t="olap"===this.parent.dataType?this.parent.olapEngineModule:this.parent.engineModule;var i,r=t.fieldList[e].filter.length,a=t.fieldList[e].filterType,n=t.fieldList[e].dateMember.length,o=t.fieldList[e].filter[0];if("olap"===this.parent.dataType)i=this.updateOlapButtonText(t,e,o,r);else if("include"===a)1===r?i=o:r>1&&(i=r===n?this.parent.localeObj.getConstant("all"):this.parent.localeObj.getConstant("multipleItems"));else if("exclude"===a){if(1===r)i=2===n?o!==t.fieldList[e].dateMember[0].actualText?o:t.fieldList[e].dateMember[0].actualText:this.parent.localeObj.getConstant("multipleItems");else if(r>1){var s=void 0,l=Object.keys(t.fieldList[e].members),d=t.fieldList[e].filter;if(r===l.length-1)e:for(s=0;s<l.length;s++){var h=l[s],p=d.indexOf(h);if(-1===p){i=l[s];break e}}else i=this.parent.localeObj.getConstant("multipleItems")}}else i=this.parent.localeObj.getConstant("all");return i},e.prototype.updateOlapButtonText=function(e,t,i,r){var a,n=e.fieldList[t].actualFilter;if(n.length>0){var o=e.fieldList[t].members,s=[];if(e.fieldList[t].filterMembers.length>0){for(var l={},d=0,h=n;d<h.length;d++){var p=h[d];l[p]=p,o[p]&&(l=this.parent.pivotCommon.eventBase.getParentNode(t,p,l))}for(var u=l?Object.keys(l):[],c=0,g=u;c<g.length;c++){var p=g[c];o[p].isSelected&&(o[p].parent&&o[o[p].parent].isSelected||s.push(p))}i=1===s.length?o[s[0]].caption:i}r=0===s.length?r:s.length}return 0===r?a=e.fieldList[t].allMember?e.fieldList[t].allMember:this.parent.localeObj.getConstant("all"):1===r?a=i:r>1&&(a=this.parent.localeObj.getConstant("multipleItems")),a},e.prototype.createDragClone=function(e){var t=i.i(r.closest)(e.element,"."+n._14),a=i.i(r.createElement)("div",{id:this.parent.element.id+"_DragClone",className:n._166+(this.parent.cssClass?" "+this.parent.cssClass:"")}),o=i.i(r.createElement)("span",{className:n._114});return o.innerText=this.parent.enableHtmlSanitizer?r.SanitizeHtmlHelper.sanitize(t.textContent):t.textContent,a.appendChild(o),document.body.appendChild(a),a},e.prototype.onDragStart=function(e){var t=this,a=i.i(r.closest)(e.element,"."+n._14),s=document.getElementById(this.parent.element.id+"_DragClone"),l=u.a.getFieldInfo(a.getAttribute("data-uid"),this.parent),d={fieldName:l.fieldName,fieldItem:l.fieldItem,axis:l.axis,dataSourceSettings:u.a.getClonedDataSourceSettings(this.parent.dataSourceSettings),cancel:!1};("pivotfieldlist"===this.parent.getModuleName()&&this.parent.isPopupView?this.parent.pivotGridModule:this.parent).trigger(o._10,d,function(o){if(o.cancel)t.parent.isDragging=!1,t.draggable.intDestroy(e.event),i.i(r.detach)(s);else{t.parent.isDragging=!0;var l=void 0;l="olap"===t.parent.dataType?t.parent.olapEngineModule:t.parent.engineModule;var d=l.fieldList[a.getAttribute("data-uid")],h=[n._126,n._128,n._132];if(i.i(r.addClass)([a],n._82),s&&"Popup"===("pivotfieldlist"===t.parent.getModuleName()&&t.parent.renderMode)){var p=t.parent;s.style.zIndex=(p.dialogRenderer.fieldListDialog.zIndex+1).toString()}if(d&&"CalculatedField"===d.aggregateType)for(var u=0,c=h;u<c.length;u++){var g=c[u];i.i(r.addClass)([t.parentElement.querySelector("."+g)],n._111)}}})},e.prototype.onDragging=function(e){this.draggable.setProperties({cursorAt:{top:!i.i(r.isNullOrUndefined)(e.event.targetTouches)||r.Browser.isDevice?60:-20}})},e.prototype.onDragStop=function(e){this.parent.isDragging=!1,e.target&&e.element&&i.i(r.closest)(e.element,"."+n._149)&&!i.i(r.closest)(e.target,"."+n._146)&&(e.cancel=!0);var t=i.i(r.closest)(e.element,"."+n._14);i.i(r.removeClass)([].slice.call(this.parentElement.querySelectorAll("."+n._14)),n._82),i.i(r.removeClass)([].slice.call(this.parentElement.querySelectorAll("."+n._147)),n._148);for(var a=[n._126,n._128,n._132],o=0,s=a;o<s.length;o++){var l=s[o];i.i(r.removeClass)([this.parentElement.querySelector("."+l)],n._111)}if(this.parent.pivotCommon.filterDialog.dialogPopUp&&this.parent.pivotCommon.filterDialog.dialogPopUp.close(),document.getElementById(this.parent.element.id+"_DragClone")&&i.i(r.remove)(document.getElementById(this.parent.element.id+"_DragClone")),document.body.style.cursor="auto",this.isButtonDropped(e.target,t)&&!e.cancel&&(this.parent.pivotCommon.dataSourceUpdate.control="pivotview"===this.parent.getModuleName()?this.parent:this.parent.pivotGridModule?this.parent.pivotGridModule:this.parent,this.parent.pivotCommon.nodeStateModified.onStateModified(e,t.getAttribute("data-uid")))){this.updateDataSource();this.parent.axisFieldModule.render()}},e.prototype.isButtonDropped=function(e,t){var a=i.i(r.closest)(t,"."+n._146),o=i.i(r.closest)(e,"."+n._146),s=!0;if(a&&a===o){for(var l=[].slice.call(a.querySelectorAll("."+n._14)),d=i.i(r.closest)(e,"."+n._145),h=void 0,p=-1,u=0,c=l.length;u<c;u++)if(l[u].id===t.id&&(h=u),d){var g=d.querySelector("."+n._14);l[u].id===g.id&&(p=u)}(h===p||h===l.length-1&&-1===p)&&(i.i(r.removeClass)([].slice.call(this.parentElement.querySelectorAll("."+n._147)),n._148),s=!1)}return s},e.prototype.updateSorting=function(e){var t=i.i(r.closest)(e.target,"."+n._14),s=u.a.getFieldInfo(t?t.getAttribute("data-uid"):"",this.parent);if(!e.target.classList.contains(n._165)&&!e.target.classList.contains(n._153)&&!e.target.classList.contains(n._112)&&t&&s.fieldItem&&(s.fieldItem.showSortIcon||i.i(r.isNullOrUndefined)(s.fieldItem.showSortIcon))&&!s.fieldItem.isCalculatedField){if(this.parent.actionObj.actionName=o._68,this.parent.actionObj.fieldInfo=s,this.parent.actionBeginMethod())return;try{if((this.parent instanceof a.a||this.parent.groupingBarSettings.showSortIcon)&&this.parent.dataSourceSettings.enableSorting&&("olap"!==this.parent.dataType||!("pivotfieldlist"===this.parent.getModuleName()&&void 0!==this.parent.pivotGridModule&&this.parent.pivotGridModule.enableVirtualization||"pivotview"===this.parent.getModuleName()&&this.parent.enableVirtualization))){if(this.parent.pivotCommon.eventBase.updateSorting(e),this.parent.staticPivotGridModule&&(this.parent.staticPivotGridModule.actionObj=this.parent.actionObj),!this.parent.allowDeferLayoutUpdate||"pivotfieldlist"!==this.parent.getModuleName()){var l={sortInfo:this.parent.lastSortInfo};this.parent.actionObj.actionInfo=l,this.updateDataSource(!0)}var d=this;d.parent instanceof a.a&&d.axisField.render()}}catch(e){this.parent.actionFailureMethod(e)}}},e.prototype.updateDataSource=function(e){this.parent.allowDeferLayoutUpdate&&"pivotview"!==this.parent.getModuleName()?"pivotfieldlist"===this.parent.getModuleName()&&this.parent.isPopupView&&this.parent.pivotGridModule?("olap"===this.parent.dataType?this.parent.pivotGridModule.olapEngineModule=this.parent.olapEngineModule:this.parent.pivotGridModule.engineModule=this.parent.engineModule,this.parent.pivotGridModule.notify(o._17,this),this.parent.pivotGridModule.setProperties({dataSourceSettings:this.parent.dataSourceSettings.properties},!0)):this.parent.triggerPopulateEvent():this.parent.updateDataSource(e)},e.prototype.updateFiltering=function(e){var t=this.parent.pivotGridModule?this.parent.pivotGridModule:this.parent,r=e.target.parentElement.getAttribute("data-uid"),a=u.a.getFieldInfo(r,this.parent);if(this.parent.actionObj.actionName=o._69,this.parent.actionObj.fieldInfo=a,!this.parent.actionBeginMethod())try{"pivotfieldlist"===t.getModuleName()?i.i(l.showSpinner)(t.fieldListSpinnerElement):t.showWaitingPopup(),t.mouseEventArgs=e,t.filterTargetID="pivotfieldlist"!==this.parent.pivotCommon.moduleName?this.parent.element:document.getElementById(this.parent.pivotCommon.parentID+"_Container"),"Server"===t.dataSourceSettings.mode?this.parent.engineModule.fieldList[r].members&&Object.keys(this.parent.engineModule.fieldList[r].members).length>0?this.updateFilterEvents():t.getEngine("fetchFieldMembers",null,null,null,null,null,r):this.updateFilterEvents()}catch(e){this.parent.actionFailureMethod(e)}},e.prototype.updateFilterEvents=function(){var e=this.parent.pivotGridModule?this.parent.pivotGridModule:this.parent;this.parent.pivotCommon.eventBase.updateFiltering(e.mouseEventArgs);var t=e.mouseEventArgs.target;this.fieldName=t.parentElement.getAttribute("data-uid"),this.parent.pivotCommon.filterDialog.dialogPopUp&&this.bindDialogEvents(),"pivotfieldlist"===e.getModuleName()?i.i(l.hideSpinner)(e.fieldListSpinnerElement):e.hideWaitingPopup()},e.prototype.bindDialogEvents=function(){this.parent.pivotCommon.filterDialog.allowExcelLikeFilter&&this.parent.pivotCommon.filterDialog.tabObj?(this.index=this.parent.pivotCommon.filterDialog.tabObj.selectedItem,this.updateDialogButtonEvents(),this.parent.pivotCommon.filterDialog.dialogPopUp.buttons=this.buttonModel(),this.parent.pivotCommon.filterDialog.dialogPopUp.dataBind(),this.parent.pivotCommon.filterDialog.tabObj.selected=this.tabSelect.bind(this)):this.parent.dataSourceSettings.allowMemberFilter&&(this.index=0,this.updateDialogButtonEvents())},e.prototype.buttonModel=function(){return[{buttonModel:{cssClass:"e-clear-filter-button"+(this.parent.pivotCommon.filterDialog.allowExcelLikeFilter?"":" "+n._18)+(this.parent.cssClass?" "+this.parent.cssClass:""),iconCss:"e-icons e-clear-filter-icon",enableRtl:this.parent.enableRtl,content:this.parent.localeObj.getConstant("clearFilter"),disabled:!this.parent.pivotCommon.filterDialog.filterObject},click:this.ClearFilter.bind(this)},{buttonModel:{cssClass:n.d+(this.parent.cssClass?" "+this.parent.cssClass:""),content:this.parent.localeObj.getConstant("ok"),isPrimary:!0},click:0===this.index?this.updateFilterState.bind(this,this.fieldName):this.updateCustomFilter.bind(this)},{click:this.parent.pivotCommon.filterDialog.closeFilterDialog.bind(this.parent.pivotCommon.filterDialog),buttonModel:{cssClass:n.e+(this.parent.cssClass?" "+this.parent.cssClass:""),content:this.parent.localeObj.getConstant("cancel")}}]},e.prototype.tabSelect=function(e){this.index=e.selectedIndex,this.updateDialogButtonEvents(),i.i(r.removeClass)([].slice.call(this.parent.pivotCommon.filterDialog.dialogPopUp.element.querySelectorAll(".e-selected-tab")),"e-selected-tab"),e.selectedIndex>0&&i.i(r.addClass)([this.parent.pivotCommon.filterDialog.dialogPopUp.element.querySelector(".e-filter-div-content."+(1===e.selectedIndex&&this.parent.dataSourceSettings.allowLabelFilter?"e-label-filter":"e-value-filter"))],"e-selected-tab"),0===e.selectedIndex?this.parent.pivotCommon.filterDialog.updateCheckedState():(this.parent.pivotCommon.filterDialog.dialogPopUp.buttons[0].buttonModel.disabled=!1,this.parent.pivotCommon.filterDialog.dialogPopUp.element.querySelector("."+n.d).removeAttribute("disabled"))},e.prototype.updateDialogButtonEvents=function(){this.parent.pivotCommon.filterDialog.dialogPopUp.buttons=this.buttonModel(),this.parent.pivotCommon.filterDialog.dialogPopUp.dataBind()},e.prototype.updateCustomFilter=function(){var e,t=this,a=this.parent.pivotCommon.filterDialog.dialogPopUp.element.querySelector(".e-selected-tab"),s=a.getAttribute("data-fieldname"),l=a.getAttribute("data-selectedField"),d=a.getAttribute("data-type"),h=a.getAttribute("data-measure"),p=a.getAttribute("data-operator"),c=a.getAttribute("data-value1"),g=a.getAttribute("data-value2"),m="value"===d?"Value":"date"===d?"Date":"number"===d?"Number":"Label",f={name:s,type:m,measure:h,condition:p,value1:"date"===d?new Date(c):c,value2:"date"===d?new Date(g):g};if("olap"===this.parent.dataType){f.selectedField=l,this.removeDataSourceSettings(s,l,m);for(var v=this.parent.dataSourceSettings.filterSettings,S=0,y=v;S<y.length;S++){var b=y[S];b.name===s&&b.selectedField===l&&(e=b)}}else e=u.a.getFilterItemByName(s,this.parent.dataSourceSettings.filterSettings);if(i.i(r.isNullOrUndefined)(c)||""===c||["Between","NotBetween"].indexOf(p)>-1&&(i.i(r.isNullOrUndefined)(g)||""===g)){var C=m.toLowerCase()+(i.i(r.isNullOrUndefined)(c)||""===c?"_input_option_1":"_input_option_2"),x=i.i(r.select)("#"+this.parent.element.id+"_"+C,a);return i.i(r.addClass)([x],n.f),void x.focus()}var w={cancel:!1,filterSettings:f,dataSourceSettings:u.a.getClonedDataSourceSettings(this.parent.dataSourceSettings)};("pivotfieldlist"===this.parent.getModuleName()&&this.parent.isPopupView?this.parent.pivotGridModule:this.parent).trigger(o._4,w,function(i){i.cancel||(f=i.filterSettings,e?(e=e.properties?e.properties:e,e.type=f.type,e.measure=f.measure,e.condition=f.condition,e.value1=f.value1,e.value2=f.value2,"olap"===t.parent.dataType&&(e.selectedField=f.selectedField)):t.parent.dataSourceSettings.filterSettings.push(f)),"Value"!==m&&(t.parent.lastFilterInfo=u.a.getFilterItemByName(s,t.parent.dataSourceSettings.filterSettings)),t.parent.pivotCommon.filterDialog.dialogPopUp.close(),i.cancel||(t.refreshPivotButtonState(s,!0),t.updateDataSource(!0))})},e.prototype.ClearFilter=function(){var e=this.parent.pivotCommon.filterDialog.dialogPopUp.element,t=e.getAttribute("data-fieldname"),i=e.querySelector(".e-selected-tab");if(this.parent.pivotCommon.filterDialog.dialogPopUp.close(),"olap"===this.parent.dataType&&i){var r=i.getAttribute("data-selectedField");this.removeDataSourceSettings(t,r)}else this.removeDataSourceSettings(t);var a=u.a.getFilterItemByName(t,this.parent.dataSourceSettings.filterSettings);this.refreshPivotButtonState(t,!!a),this.updateDataSource(!0)},e.prototype.removeButton=function(e){var t=this,i=e.target,r=i.parentElement.getAttribute("data-uid"),a=u.a.getFieldInfo(r,this.parent);if(this.parent.actionObj.actionName=o._70,this.parent.actionObj.fieldInfo=a,!this.parent.actionBeginMethod()){var n={cancel:!1,fieldName:r,dataSourceSettings:u.a.getClonedDataSourceSettings(this.parent.dataSourceSettings),fieldItem:a.fieldItem,axis:a.axis};try{("pivotfieldlist"===this.parent.getModuleName()&&this.parent.isPopupView?this.parent.pivotGridModule:this.parent).trigger(o._7,n,function(e){e.cancel||("true"===i.parentElement.getAttribute("isvalue")?(t.parent.setProperties({dataSourceSettings:{values:[]}},!0),"olap"===t.parent.dataType&&t.parent.pivotCommon.dataSourceUpdate.removeFieldFromReport("[Measures]")):(t.parent.pivotCommon.dataSourceUpdate.removeFieldFromReport(r),"pivot"===t.parent.dataType&&t.parent.showValuesButton&&t.parent.dataSourceSettings.values.length>1&&a.position<t.parent.dataSourceSettings.valueIndex&&("row"===t.parent.dataSourceSettings.valueAxis&&"rows"===e.axis||"column"===t.parent.dataSourceSettings.valueAxis&&"columns"===e.axis)&&t.parent.setProperties({dataSourceSettings:{valueIndex:t.parent.dataSourceSettings.valueIndex-1}},!0),"olap"===t.parent.dataType&&0===t.parent.dataSourceSettings.values.length&&t.parent.pivotCommon.dataSourceUpdate.removeFieldFromReport("[Measures]")),"pivotfieldlist"===t.parent.getModuleName()&&t.parent.axisFieldModule.render(),t.updateDataSource())})}catch(e){this.parent.actionFailureMethod(e)}}},e.prototype.nodeStateModified=function(e){var t=i.i(r.closest)(e.node,"li"),a=t.getAttribute("data-fieldname");if("all"===t.getAttribute("data-memberId"))this.parent.pivotCommon.filterDialog.memberTreeView.nodeChecked=null,"check"===e.action?this.parent.pivotCommon.filterDialog.memberTreeView.checkAll():this.parent.pivotCommon.filterDialog.memberTreeView.uncheckAll(),"olap"===this.parent.dataType&&this.parent.olapEngineModule&&!this.parent.olapEngineModule.fieldList[a].isHierarchy&&this.updateNodeStates(this.parent.pivotCommon.filterDialog.memberTreeView.getAllCheckedNodes(),a),this.checkedStateAll(e.action),this.parent.pivotCommon.filterDialog.memberTreeView.nodeChecked=this.nodeStateModified.bind(this);else{if("olap"===this.parent.dataType&&this.parent.olapEngineModule&&!this.parent.olapEngineModule.fieldList[a].isHierarchy){var n=this.parent.pivotCommon.filterDialog.memberTreeView.getAllCheckedNodes();this.updateNodeStates(n,a)}var o=this.parent.pivotCommon.currentTreeItemsPos[t.getAttribute("data-memberId")].index;this.parent.pivotCommon.currentTreeItems[o]&&(this.parent.pivotCommon.currentTreeItems[o].isSelected="check"===e.action,this.parent.pivotCommon.currentTreeItemsPos[t.getAttribute("data-memberId")].isSelected="check"===e.action)}this.parent.pivotCommon.filterDialog.updateCheckedState()},e.prototype.checkedStateAll=function(e){for(var t={},i=0,r=this.parent.pivotCommon.searchTreeItems;i<r.length;i++){var a=r[i];a.isSelected="check"===e,t[a.htmlAttributes["data-memberId"]]=a.htmlAttributes["data-memberId"]}for(var n=0,o=this.parent.pivotCommon.currentTreeItems;n<o.length;n++){var a=o[n];void 0!==t[a.htmlAttributes["data-memberId"]]&&(a.isSelected="check"===e,this.parent.pivotCommon.currentTreeItemsPos[a.htmlAttributes["data-memberId"]].isSelected="check"===e)}},e.prototype.updateNodeStates=function(e,t){var i=this.parent.pivotCommon.engineModule.fieldList[t],r=i.members,a=i.currrentMembers;if(i.searchMembers.length>0){for(var n=Object.keys(a),o=0,s=n;o<s.length;o++){var l=s[o];if(a[l]&&(a[l].isSelected=!1),r[l]&&(r[l].isSelected=!1,this.parent.pivotCommon.filterDialog.memberTreeView.element.querySelector('li[data-memberId="'+l+'"]'))){var d=this.parent.pivotCommon.filterDialog.memberTreeView.element.querySelector('li[data-memberId="'+l+'"]');d&&!d.querySelector("ul")&&this.parent.pivotCommon.eventBase.updateChildNodeStates(i.filterMembers,t,l,!1)}}for(var h=0,p=e;h<p.length;h++){var u=p[h];if(r[u]&&this.parent.pivotCommon.filterDialog.memberTreeView.element.querySelector('li[data-memberId="'+u+'"]')){var d=this.parent.pivotCommon.filterDialog.memberTreeView.element.querySelector('li[data-memberId="'+u+'"]');d&&!d.querySelector("ul")&&(r[u].isSelected=!0,this.parent.pivotCommon.eventBase.updateChildNodeStates(i.filterMembers,t,u,!0))}a[u]&&(a[u].isSelected=!0)}}else{for(var n=Object.keys(r),c=0,g=n;c<g.length;c++){var l=g[c];r[l].isSelected&&(r[l].isSelected=!1)}for(var m=0,f=e;m<f.length;m++){var u=f[m];r[u]&&(r[u].isSelected=!0,this.parent.pivotCommon.eventBase.updateChildNodeStates(i.filterMembers,t,u,!0))}}},e.prototype.updateFilterState=function(e){var t=this,i=!1,r={items:[],name:e,type:"Include"},n="olap"===this.parent.dataType?this.parent.olapEngineModule:this.parent.engineModule;if("olap"===this.parent.dataType&&n&&!n.fieldList[e].isHierarchy){var s=n.fieldList[e].members,l=n.fieldList[e].currrentMembers;if(r.items=this.parent.pivotCommon.filterDialog.memberTreeView.getAllCheckedNodes(),r.levelCount=n.fieldList[e].levelCount,i=r.items.length!==this.parent.pivotCommon.filterDialog.memberTreeView.fields.dataSource.length,n.fieldList[e].searchMembers.length>0&&!i){var d=Object.keys(s).length,h=Object.keys(l).length;i=d!==h||d!==r.items.length}for(var p=r.items,c=0,g=p;c<g.length;c++){var m=g[c];n.fieldList[e].searchMembers.length>0&&l[m]?l[m].isSelected=!0:s[m]&&(s[m].isSelected=!0)}}else{for(var f=0,v=this.parent.pivotCommon.searchTreeItems;f<v.length;f++){var S=v[f];S.isSelected&&(this.parent.pivotCommon.isDateField?r.items.push(S.name):r.items.push(S.htmlAttributes["data-memberId"]))}i=r.items.length!==this.parent.pivotCommon.currentTreeItems.length}if("olap"===this.parent.dataType&&this.removeDataSourceSettings(e),this.parent.allowDeferLayoutUpdate){n.fieldList[r.name].filterType=r.type.toLowerCase(),n.fieldList[r.name].filter=[];for(var y=0;y<r.items.length;y++)n.fieldList[r.name].filter.push(r.items[y])}var b={filterSettings:r,dataSourceSettings:u.a.getClonedDataSourceSettings(this.parent.dataSourceSettings),cancel:!1};("pivotfieldlist"===this.parent.getModuleName()&&this.parent.isPopupView?this.parent.pivotGridModule:this.parent).trigger(o._4,b,function(n){if(r=n.filterSettings,!n.cancel){if(u.a.getFilterItemByName(e,t.parent.dataSourceSettings.filterSettings))for(var o=0;o<t.parent.dataSourceSettings.filterSettings.length;o++)if(t.parent.dataSourceSettings.filterSettings[o].name===e){t.parent.dataSourceSettings.filterSettings.splice(o,1);break}t.parent.dataSourceSettings.filterSettings.push(r)}if(t.parent.pivotCommon.filterDialog.dialogPopUp.close(),!n.cancel){t.refreshPivotButtonState(e,i),i||(t.removeDataSourceSettings(e),r={}),t.parent.lastFilterInfo=r;var s={filterInfo:t.parent.lastFilterInfo};t.parent.actionObj.actionInfo=s,t.updateDataSource(!0);var l=t;l.parent instanceof a.a&&l.axisField.render()}for(var d=[].slice.call(t.parentElement.querySelectorAll(".e-pivot-button")),h=0,p=d;h<p.length;h++){var c=p[h];if(c.getAttribute("data-uid")===e){c.focus();break}}})},e.prototype.refreshPivotButtonState=function(e,t){for(var a,o=[].slice.call(this.parentElement.querySelectorAll(".e-pivot-button")),s=0,l=o;s<l.length;s++){var d=l[s];if(d.getAttribute("data-uid")===e){a=d.querySelector("."+n._165);break}}t?(i.i(r.removeClass)([a],n._163),i.i(r.addClass)([a],n._164)):(i.i(r.removeClass)([a],n._164),i.i(r.addClass)([a],n._163))},e.prototype.removeDataSourceSettings=function(e,t,i){for(var r=this.parent.dataSourceSettings.filterSettings,a=0,n=r.length;a<n;a++)if("olap"===this.parent.dataType&&t){if(!i&&r[a].name===e&&r[a].selectedField===t){r.splice(a,1);break}i&&r[a].type!==i&&r[a].name===e&&(r.splice(a,1),n--,a--)}else if(r[a].name===e){if(r.splice(a,1),"olap"!==this.parent.dataType)break;n--,a--}},e.prototype.updateDropIndicator=function(e){if(this.parent.isDragging&&(i.i(r.removeClass)([].slice.call(this.parentElement.querySelectorAll("."+n._147+"-last")),n._148),i.i(r.removeClass)([].slice.call(this.parentElement.querySelectorAll("."+n._147)),n._148),i.i(r.closest)(e.target,"."+n._146))){var t=i.i(r.closest)(e.target,"."+n._145);i.i(r.addClass)([t.querySelector("."+n._147)],n._148)}},e.prototype.wireEvent=function(e,t,i){r.EventHandler.add(e,"mouseover",this.updateDropIndicator,this),i||(-1===["filters","values"].indexOf(t)&&null!==e.querySelector("."+n._14)&&r.EventHandler.add(e.querySelector("."+n._14),"click",this.updateSorting,this),"values"!==t&&null!==e.querySelector("."+n._165)&&r.EventHandler.add(e.querySelector("."+n._165),"click",this.updateFiltering,this),"values"===t&&null!==e.querySelector("."+n._160)&&r.EventHandler.add(e.querySelector("."+n._160),"click",this.createMenuOption,this)),null!==e.querySelector("."+n._76)&&r.EventHandler.add(e.querySelector("."+n._76),"click",this.openCalculatedFieldDialog,this),null!==e.querySelector("."+n._153)&&r.EventHandler.add(e.querySelector("."+n._153),"click",this.removeButton,this)},e.prototype.unWireEvent=function(e,t,i){r.EventHandler.remove(e,"mouseover",this.updateDropIndicator),i||(-1===["filters","values"].indexOf(t)&&null!==e.querySelector("."+n._14)&&r.EventHandler.remove(e.querySelector("."+n._14),"click",this.updateSorting),"values"!==t&&null!==e.querySelector("."+n._165)&&r.EventHandler.remove(e.querySelector("."+n._165),"click",this.updateFiltering),"values"===t&&null!==e.querySelector("."+n._160)&&r.EventHandler.remove(e.querySelector("."+n._160),"click",this.createMenuOption)),null!==e.querySelector("."+n._76)&&r.EventHandler.remove(e.querySelector("."+n._76),"click",this.openCalculatedFieldDialog),null!==e.querySelector("."+n._153)&&r.EventHandler.remove(e.querySelector("."+n._153),"click",this.removeButton)},e.prototype.addEventListener=function(){this.handlers={load:this.renderPivotButton},this.parent.isDestroyed||this.parent.on(o._25,this.handlers.load,this)},e.prototype.removeEventListener=function(){this.parent.isDestroyed||this.parent.off(o._25,this.handlers.load)},e.prototype.destroy=function(){this.menuOption&&this.menuOption.destroy(),this.valueFiedDropDownList&&!this.valueFiedDropDownList.isDestroyed&&(this.valueFiedDropDownList.destroy(),this.valueFiedDropDownList=null),this.columnFieldDropDownList&&!this.columnFieldDropDownList.isDestroyed&&(this.columnFieldDropDownList.destroy(),this.columnFieldDropDownList=null),this.draggable&&!this.draggable.isDestroyed&&(this.draggable.destroy(),this.draggable=null),this.axisField&&(this.axisField=null),this.removeEventListener(),this.isDestroyed=!0},e}()},function(e,t,i){"use strict";i.d(t,"a",function(){return r});var r;!function(e){e.axisLabelFont={size:"12px",fontWeight:"Normal",color:null,fontStyle:"Normal",fontFamily:"Segoe UI"},e.axisTitleFont={size:"14px",fontWeight:"Normal",color:null,fontStyle:"Normal",fontFamily:"Segoe UI"},e.chartTitleFont={size:"15px",fontWeight:"500",color:null,fontStyle:"Normal",fontFamily:"Segoe UI"},e.chartSubTitleFont={size:"11px",fontWeight:"500",color:null,fontStyle:"Normal",fontFamily:"Segoe UI"},e.crosshairLabelFont={size:"13px",fontWeight:"Normal",color:null,fontStyle:"Normal",fontFamily:"Segoe UI"},e.tooltipLabelFont={size:"13px",fontWeight:"Normal",color:null,fontStyle:"Normal",fontFamily:"Segoe UI"},e.legendLabelFont={size:"13px",fontWeight:"Normal",color:null,fontStyle:"Normal",fontFamily:"Segoe UI"},e.stripLineLabelFont={size:"12px",fontWeight:"Regular",color:"#353535",fontStyle:"Normal",fontFamily:"Segoe UI"},e.stockEventFont={size:"13px",fontWeight:"Normal",color:null,fontStyle:"Normal",fontFamily:"Segoe UI"}}(r||(r={}))},function(e,t,i){"use strict";i.d(t,"a",function(){return g});var r=i(4),a=(i.n(r),i(0)),n=(i.n(a),i(10)),o=(i.n(n),i(9)),s=(i.n(o),i(2)),l=i(5),d=(i.n(l),i(1)),h=i(7),p=(i.n(h),i(3)),u="PopulationVar",c="CalculatedField",g=function(){function e(e){this.isFormula=!1,this.isRequireUpdate=!1,this.formatTypes=["Standard","Currency","Percent","Custom","None"],this.parent=e,this.existingReport=null,this.parent.calculatedFieldModule=this,this.removeEventListener(),this.addEventListener(),this.parentID=this.parent.element.id,this.dialog=null,this.inputObj=null,this.treeObj=null,this.droppable=null,this.menuObj=null,this.newFields=null,this.isFieldExist=!0,this.formulaText=null,this.fieldText=null,this.formatText=null,this.formatType=null,this.fieldType=null,this.parentHierarchy=null,this.isEdit=!1,this.currentFieldName=null,this.confirmPopUp=null}return e.prototype.getModuleName=function(){return"calculatedField"},e.prototype.keyActionHandler=function(e){var t=e.currentTarget.querySelector(".e-node-focus");if(t)switch(e.action){case"moveRight":case"shiftE":"pivot"===this.parent.dataType&&this.displayMenu(t);break;case"delete":"LI"===t.tagName&&!t.querySelector(".e-list-icon.e-format")&&!t.querySelector(".e-list-icon").classList.contains(".e-icons")&&t.querySelector("."+s.B)&&t.querySelector("."+s.B).classList.contains("e-list-icon")&&this.createConfirmDialog(this.parent.localeObj.getConstant("alert"),this.parent.localeObj.getConstant("removeCalculatedField"),{},!0,t);break;case"enter":var r=t.getAttribute("data-field"),n=t.getAttribute("data-type"),o=i.i(a.select)("#"+this.parentID+"droppable",this.dialog.element);"pivot"===this.parent.dataType?""===o.value?o.value=n===c?t.getAttribute("data-uid"):'"'+n+"("+r+')"':""!==o.value&&(o.value=n===c?o.value+t.getAttribute("data-uid"):o.value+'"'+n+"("+r+')"'):(this.parent.olapEngineModule&&this.parent.olapEngineModule.fieldList[r]&&this.parent.olapEngineModule.fieldList[r].isCalculatedField&&(r=this.parent.olapEngineModule.fieldList[r].tag),""===o.value?o.value=r:""!==o.value&&(o.value=o.value+r))}},e.prototype.fieldClickHandler=function(e){var t=i.i(a.closest)(e.event.target,"li");(e.event.target.classList.contains(s._75)||e.event.target.classList.contains(s._76)||e.event.target.classList.contains(s._77)||e.event.target.classList.contains(s.B))&&(this.parent.isAdaptive?"olap"===this.parent.dataType&&this.parent.isAdaptive&&("LI"===t.tagName&&t.querySelector(".e-list-edit-icon").classList.contains(s._76)&&e.event.target.classList.contains(s._76)?(this.isEdit=!0,this.currentFieldName=t.getAttribute("data-field"),this.fieldText=t.getAttribute("data-caption"),this.formulaText=t.getAttribute("data-formula"),this.formatType=t.getAttribute("data-formatString"),this.formatText="Custom"===this.formatType?t.getAttribute("data-customformatstring"):null,this.fieldType=t.getAttribute("data-membertype"),this.parentHierarchy="Dimension"===this.fieldType?t.getAttribute("data-hierarchy"):null,i.i(a.addClass)([t.querySelector(".e-list-edit-icon")],s._77),i.i(a.removeClass)([t.querySelector(".e-list-edit-icon")],s._76),this.renderMobileLayout(this.parent.dialogRenderer.adaptiveElement)):"LI"===t.tagName&&t.querySelector(".e-list-edit-icon").classList.contains(s._77)&&e.event.target.classList.contains(s._77)?(this.isEdit=!1,this.fieldText=this.formatText=this.formulaText=this.currentFieldName=null,this.parentHierarchy=this.fieldType=this.formatType=null,i.i(a.addClass)([t.querySelector(".e-list-edit-icon")],s._76),i.i(a.removeClass)([t.querySelector(".e-list-edit-icon")],s._77)):"LI"===t.tagName&&t.querySelector("."+s.B).classList.contains("e-icons")&&e.event.target.classList.contains(s.B)&&this.createConfirmDialog(this.parent.localeObj.getConstant("alert"),this.parent.localeObj.getConstant("removeCalculatedField"),{},!0,e.node)):this.displayMenu(t,e.node,e.event.target))},e.prototype.accordionClickHandler=function(e){if(e.item&&-1!==e.item.iconCss.indexOf("e-list-icon")&&i.i(a.closest)(e.originalEvent.target,".e-acrdn-header-icon")){var t=i.i(a.closest)(e.originalEvent.target,".e-acrdn-header").querySelector("."+s._78),r=t.getAttribute("data-field"),n=t.getAttribute("data-caption"),o=p.a.getFieldByName(r,this.parent.dataSourceSettings.formatSettings),l=i.i(a.closest)(e.originalEvent.target,".e-acrdn-header-icon");if(o){var d=this.getFormat(o.format),h=d?this.formatTypes.indexOf(d)>-1?o.format:"Custom":"None";this.formatType=h}l.querySelector("."+s._76)&&e.originalEvent.target.classList.contains(s._76)?(this.isEdit=!0,this.currentFieldName=r,this.fieldText=n||r,this.formulaText=this.parent.engineModule.fieldList[r].formula,this.formatText=o?o.format:"",i.i(a.addClass)([l.querySelector(".e-list-icon")],s._77),i.i(a.removeClass)([l.querySelector(".e-list-icon")],s._76),this.renderMobileLayout(this.parent.dialogRenderer.adaptiveElement)):l.querySelector("."+s._77)&&e.originalEvent.target.classList.contains(s._77)?(this.isEdit=!1,this.fieldText=this.formatText=this.formulaText=this.currentFieldName=null,i.i(a.addClass)([l.querySelector(".e-list-icon")],s._76),i.i(a.removeClass)([l.querySelector(".e-list-icon")],s._77)):l.querySelector("."+s.B)&&e.originalEvent.target.classList.contains(s.B)&&this.createConfirmDialog(this.parent.localeObj.getConstant("alert"),this.parent.localeObj.getConstant("removeCalculatedField"),{},!0,t)}},e.prototype.accordionCreated=function(){for(var e=this.accordion.element.querySelectorAll(".e-acrdn-item"),t=0;t<e.length;t++)if(e[t].querySelector("."+s._76)||e[t].querySelector("."+s._77)){var r=i.i(a.createElement)("span",{className:"e-list-icon "+s.B+" e-icons"});i.i(a.append)([r],e[t].querySelector(".e-acrdn-header-icon")),i.i(a.addClass)([e[t]],s._79)}},e.prototype.clearFormula=function(){this.treeObj&&this.treeObj.element.querySelector("li")&&(i.i(a.removeClass)(this.treeObj.element.querySelectorAll("li"),"e-active"),this.displayMenu(this.treeObj.element.querySelector("li")))},e.prototype.displayMenu=function(e,t,r){var n=!r||r.classList.contains(s._76),l=!r||r.classList.contains(s._77);try{if("pivot"!==this.parent.dataType||!e.querySelector(".e-list-icon.e-format")||!e.querySelector(".e-list-icon.e-format").classList.contains(s.a)||e.querySelector(".e-list-icon").classList.contains(s._77)||e.querySelector(".e-list-icon").classList.contains(s.B)||e.querySelector(".e-list-icon").classList.contains(s._76)||"LI"!==e.tagName){if("LI"===e.tagName&&(e.querySelector("."+s._76)&&e.querySelector("."+s._76).classList.contains("e-list-icon")&&n||"olap"===this.parent.dataType&&e.getAttribute("data-type")===c&&e.classList.contains("e-active")&&(r&&!r.classList.contains(s.B)||!r))){this.isEdit=!0;var p=e.getAttribute("data-field"),u=e.getAttribute("data-caption");this.currentFieldName=p,this.inputObj.value=u,this.inputObj.dataBind();var g=e.getAttribute("data-formatString"),m=this.dialog.element,f=i.i(a.getInstance)(i.i(a.select)("#"+this.parentID+"Format_Div",m),h.DropDownList),v=i.i(a.getInstance)(i.i(a.select)("#"+this.parentID+"Custom_Format_Element",m),o.MaskedTextBox),S=e.getAttribute("data-customformatstring");if("olap"===this.parent.dataType){var y=e.getAttribute("data-membertype"),b=e.getAttribute("data-hierarchy"),C=e.getAttribute("data-formula"),x=i.i(a.select)("#"+this.parentID+"_FieldNameTitle",m),w=i.i(a.getInstance)(i.i(a.select)("#"+this.parentID+"Member_Type_Div",m),h.DropDownList),T=i.i(a.getInstance)(i.i(a.select)("#"+this.parentID+"Hierarchy_List_Div",m),h.DropDownList);x.innerText=this.parent.localeObj.getConstant("caption"),i.i(a.select)("#"+this.parentID+"droppable",document).value=C,w.readonly=!0,w.value=y,w.dataBind(),"Dimension"===y&&(T.value=b)}else i.i(a.addClass)(this.treeObj.element.querySelectorAll("."+s._77),s._76),i.i(a.removeClass)(this.treeObj.element.querySelectorAll("."+s._77),s._77),i.i(a.addClass)([e.querySelector(".e-list-icon")],s._77),i.i(a.removeClass)([e.querySelector(".e-list-icon")],s._76),e.querySelector("."+s._77).setAttribute("title",this.parent.localeObj.getConstant("clearCalculatedField")),i.i(a.select)("#"+this.parentID+"droppable",document).value=e.getAttribute("data-uid");""!==g&&(f.value=g,f.dataBind()),v.value=S,v.dataBind()}else if("LI"===e.tagName&&(e.querySelector("."+s._77)&&e.querySelector("."+s._77).classList.contains("e-list-icon")&&l||"olap"===this.parent.dataType&&!e.classList.contains("e-active"))){this.isEdit=!1,this.inputObj.value="",this.inputObj.dataBind();var m=this.dialog.element,v=i.i(a.getInstance)(i.i(a.select)("#"+this.parentID+"Custom_Format_Element",m),o.MaskedTextBox);if(v.value="",v.dataBind(),"olap"===this.parent.dataType){var T=i.i(a.getInstance)(i.i(a.select)("#"+this.parentID+"Hierarchy_List_Div",m),h.DropDownList),f=i.i(a.getInstance)(i.i(a.select)("#"+this.parentID+"Format_Div",m),h.DropDownList),w=i.i(a.getInstance)(i.i(a.select)("#"+this.parentID+"Member_Type_Div",m),h.DropDownList),x=i.i(a.select)("#"+this.parentID+"_FieldNameTitle",m);x.innerText=this.parent.localeObj.getConstant("fieldTitle"),T.index=0,T.dataBind(),f.index=0,f.dataBind(),w.index=0,w.readonly=!1,w.dataBind()}else i.i(a.addClass)(this.treeObj.element.querySelectorAll("."+s._77),s._76),i.i(a.removeClass)(this.treeObj.element.querySelectorAll("."+s._77),s._77),e.querySelector("."+s._76).setAttribute("title",this.parent.localeObj.getConstant("edit"));i.i(a.select)("#"+this.parentID+"droppable",document).value=""}else if("LI"===e.tagName&&e.querySelector("."+s.B)&&e.querySelector("."+s.B).classList.contains("e-list-icon")&&!n&&!l){if(this.parent.actionObj.actionName=d._70,this.parent.actionBeginMethod())return;var M=i.i(a.select)("#"+this.parentID+"droppable",document),_={name:this.isEdit?this.currentFieldName:this.inputObj.value,caption:this.inputObj.value,formula:M.value};this.createConfirmDialog(this.parent.localeObj.getConstant("alert"),this.parent.localeObj.getConstant("removeCalculatedField"),_,!0,t)}}else this.menuObj&&!this.menuObj.isDestroyed&&this.menuObj.destroy(),this.curMenu=e.querySelector("."+s._80),this.openContextMenu(e)}catch(e){this.parent.actionFailureMethod(e)}},e.prototype.removeCalcField=function(e){var t,i=this.parent.dataSourceSettings,r=e.getAttribute("data-field"),a=i.calculatedFieldSettings;if("pivot"===this.parent.dataType)if(this.parent.isAdaptive){var n=parseInt(e.getAttribute("id").split(this.parentID+"_")[1],10);"number"==typeof n&&this.accordion.hideItem(n)}else this.treeObj.removeNodes([e]);for(var o=0;o<a.length;o++)if(a[o]&&a[o].name===r){a.splice(o,1);break}if("olap"===this.parent.dataType){t=this.parent.olapEngineModule;for(var s=t.fieldListData?t.fieldListData:[],l=0,d=Object.keys(s);l<d.length;l++){var h=d[l];if(s[h].name===r){var n=parseInt(h,10);if("number"==typeof n){s.splice(n,1);break}}}var p=this.treeObj.getNode(e).parentID;this.treeObj.removeNodes([e]),a.length<=0&&this.treeObj.removeNodes([p])}else t=this.parent.engineModule;if(t.fields)for(var o=0;o<t.fields.length;o++)if(t.fields[o]===r){t.fields.splice(o,1);break}t.savedFieldList&&t.savedFieldList[r]&&delete t.savedFieldList[r],t.fieldList&&t.fieldList[r]&&delete t.fieldList[r];for(var u=i.formatSettings,o=0;o<u.length;o++)if(u[o]&&u[o].name===r){u.splice(o,1);break}for(var c=[i.values,i.rows,i.columns,i.filters],o=0,g=c.length;o<g;o++)for(var m=0,f=c[o].length;m<f;m++)if(c[o][m].name===r){c[o].splice(m,1);break}this.isEdit&&this.currentFieldName===r&&(this.isEdit=!1,this.inputObj.value="",this.currentFieldName=this.formatText=this.fieldText=this.formatType=null,this.formulaText=this.fieldType=this.parentHierarchy=null),this.parent.allowDeferLayoutUpdate&&"pivotfieldlist"===this.parent.getModuleName()||this.parent.updateDataSource(),this.closeErrorDialog()},e.prototype.openContextMenu=function(e){var t=this,i=e.getAttribute("data-field"),r="number"!==this.parent.engineModule.fieldList[i].type?"string":"number",a="string"===r?this.getValidSummaryType().slice(0,2):this.getValidSummaryType(),n={cancel:!1,fieldName:i,aggregateTypes:this.getMenuItems(r).slice()};("pivotfieldlist"===this.parent.getModuleName()&&this.parent.isPopupView?this.parent.pivotGridModule:this.parent).trigger(d._9,n,function(i){if(!i.cancel){for(var r=[],n=[],o=0,s=i.aggregateTypes;o<s.length;o++){var l=s[o];a.indexOf(l)>-1&&-1===r.indexOf(l)&&(r.push(l),n.push({id:t.parent.element.id+"Calc_"+l,text:t.parent.localeObj.getConstant(l)}))}t.createMenu(n,e);var d=e.getBoundingClientRect(),h=window.scrollY||document.documentElement.scrollTop;t.parent.enableRtl?t.menuObj.open(d.top+h,d.left-100):t.menuObj.open(d.top+h,d.left+150)}})},e.prototype.selectContextMenu=function(e){if(null!==e.element.textContent){var t=i.i(a.closest)(this.curMenu,".e-list-item").getAttribute("data-caption");i.i(a.closest)(this.curMenu,".e-list-item").setAttribute("data-type",e.element.id.split("_").pop()),this.curMenu.textContent=t+" ("+e.element.textContent+")",i.i(a.addClass)([this.curMenu.parentElement.parentElement],["e-node-focus","e-hover"]),this.curMenu.parentElement.parentElement.setAttribute("tabindex","0"),this.curMenu.parentElement.parentElement.focus()}},e.prototype.createMenu=function(e,t){var r,n=this,o={cssClass:this.parentID+"calculatedmenu"+(this.parent.cssClass?" "+this.parent.cssClass:""),items:e,enableRtl:this.parent.enableRtl,locale:this.parent.locale,select:this.selectContextMenu.bind(this),onClose:function(){n.treeObj.element.focus(),i.i(a.addClass)([t],["e-hover","e-node-focus"])}};r=i.i(a.select)("#"+this.parentID+"CalcContextmenu",document)?i.i(a.select)("#"+this.parentID+"CalcContextmenu",document):i.i(a.createElement)("ul",{id:this.parentID+"CalcContextmenu"}),this.dialog.element.appendChild(r),this.menuObj=new l.ContextMenu(o),this.menuObj.isStringTemplate=!0,this.menuObj.appendTo(r)},e.prototype.applyFormula=function(){var e=this,t=this,r=!1;i.i(a.removeClass)([document.getElementById(this.parentID+"ddlelement")],s.f),this.newFields=i.i(a.extend)([],this.parent.dataSourceSettings.calculatedFieldSettings,null,!0);var n={fieldName:this.isEdit?this.currentFieldName:this.inputObj.value,calculatedField:this.getCalculatedFieldInfo(),calculatedFieldSettings:p.a.cloneCalculatedFieldSettings(this.parent.dataSourceSettings.calculatedFieldSettings),cancel:!1};("pivotfieldlist"===this.parent.getModuleName()&&this.parent.isPopupView?this.parent.pivotGridModule:this.parent).trigger(d._5,n,function(n){if(n.cancel)e.endDialog(),e.parent.lastCalcFieldInfo={},e.isFormula=!1;else{var o=n.calculatedField;if(!e.isEdit)if("olap"===t.parent.dataType){var l=o.name;t.parent.olapEngineModule.fieldList[l]&&"CalculatedField"!==t.parent.olapEngineModule.fieldList[l].type&&(r=!0)}else for(var d=0,h=Object.keys(t.parent.engineModule.fieldList);d<h.length;d++){var p=h[d];o.name&&o.name===p&&"CalculatedField"!==t.parent.engineModule.fieldList[p].aggregateType&&(r=!0)}if(r)return void t.parent.pivotCommon.errorDialog.createErrorDialog(t.parent.localeObj.getConstant("error"),t.parent.localeObj.getConstant("fieldExist"));e.existingReport=i.i(a.extend)({},e.parent.dataSourceSettings,null,!0);var u=e.parent.dataSourceSettings;if(i.i(a.isNullOrUndefined)(o.name)||""===o.name||i.i(a.isNullOrUndefined)(o.caption)||""===o.caption||!o.formula||""===o.formula)i.i(a.isNullOrUndefined)(o.name)||""===o.name||i.i(a.isNullOrUndefined)(o.caption)||""===o.caption?(e.inputObj.value="",i.i(a.addClass)([document.getElementById(e.parentID+"ddlelement")],s.f),document.getElementById(e.parentID+"ddlelement").focus()):e.parent.pivotCommon.errorDialog.createErrorDialog(e.parent.localeObj.getConstant("error"),e.parent.localeObj.getConstant("invalidFormula"));else{var l=void 0;if("olap"===e.parent.dataType){if(l={name:o.name,formula:o.formula,formatString:o.formatString},i.i(a.isNullOrUndefined)(o.hierarchyUniqueName)||(l.hierarchyUniqueName=o.hierarchyUniqueName),e.isFieldExist=!1,e.isEdit){for(var g=0;g<u.calculatedFieldSettings.length;g++)if(u.calculatedFieldSettings[g].name===l.name&&e.isEdit){u.calculatedFieldSettings[g].hierarchyUniqueName=o.hierarchyUniqueName,e.parent.olapEngineModule.fieldList[l.name].caption=o.caption,u.calculatedFieldSettings[g].formatString=l.formatString,u.calculatedFieldSettings[g].formula=l.formula,l=u.calculatedFieldSettings[g],e.isFieldExist=!0;break}for(var m=[u.rows,u.columns,u.values,u.filters],f=!1,v=0,S=m;v<S.length;v++){for(var y=S[v],b=0,C=y;b<C.length;b++){var x=C[b];if(x.isCalculatedField&&null!==l.name&&x.name===l.name&&e.isEdit){x.caption=o.caption,e.isFieldExist=!0,f=!0;break}}if(f)break}}else for(var g=0;g<u.calculatedFieldSettings.length;g++)if(u.calculatedFieldSettings[g].name===l.name)return void e.createConfirmDialog(t.parent.localeObj.getConstant("alert"),t.parent.localeObj.getConstant("confirmText"),o);e.isFieldExist||u.calculatedFieldSettings.push(l),e.parent.lastCalcFieldInfo=l}else{l={name:o.name,caption:o.caption,type:"CalculatedField"};var w={name:o.name,formula:o.formula};if(i.i(a.isNullOrUndefined)(o.formatString)||(w.formatString=o.formatString),e.isFieldExist=!0,e.isEdit){for(var g=0;g<u.values.length;g++)if(u.values[g].type===c&&null!==l.name&&u.values[g].name===l.name&&e.isEdit)for(var T=0;T<u.calculatedFieldSettings.length;T++)u.calculatedFieldSettings[T].name===l.name&&(u.values[g].caption=o.caption,e.currentFormula=u.calculatedFieldSettings[T].formula,u.calculatedFieldSettings[T].formula=o.formula,e.parent.engineModule.fieldList[l.name].caption=o.caption,e.updateFormatSettings(u,l.name,o.formatString),e.isFieldExist=!1)}else for(var g=0;g<u.values.length;g++)if(u.values[g].type===c&&u.values[g].name===l.name){for(var T=0;T<u.calculatedFieldSettings.length;T++)if(u.calculatedFieldSettings[T].name===l.name)return void e.createConfirmDialog(t.parent.localeObj.getConstant("alert"),t.parent.localeObj.getConstant("confirmText"),o);e.isFieldExist=!1}e.isFieldExist&&(u.values.push(l),u.calculatedFieldSettings.push(w),e.updateFormatSettings(u,l.name,o.formatString)),e.parent.lastCalcFieldInfo=w}e.addFormula(u,l.name)}}})},e.prototype.getCalculatedFieldInfo=function(){var e=i.i(a.select)("#"+this.parentID+"droppable",document),t=this.parent.isAdaptive?this.parent.dialogRenderer.adaptiveElement.element:this.dialog.element,r=i.i(a.getInstance)(i.i(a.select)("#"+this.parentID+"Custom_Format_Element",t),o.MaskedTextBox),n={name:this.isEdit?this.currentFieldName:this.inputObj.value,caption:this.inputObj.value,formula:e.value},s=i.i(a.getInstance)(i.i(a.select)("#"+this.parentID+"Format_Div",t),h.DropDownList);if(n.formatString="Custom"===s.value?r.value:"None"===s.value?null:s.value,"olap"===this.parent.dataType){var l=i.i(a.getInstance)(i.i(a.select)("#"+this.parentID+"Member_Type_Div",t),h.DropDownList),d=i.i(a.getInstance)(i.i(a.select)("#"+this.parentID+"Hierarchy_List_Div",t),h.DropDownList);"Dimension"===l.value&&(n.hierarchyUniqueName=d.value)}return n},e.prototype.updateFormatSettings=function(e,t,r){for(var n={name:t,format:r,useGrouping:!0},o=!1,s=0;s<e.formatSettings.length;s++)if(e.formatSettings[s].name===t){if("undefined"===r||void 0===r||""===r){e.formatSettings.splice(s,1),o=!0;break}var l=e.formatSettings[s].properties?e.formatSettings[s].properties:e.formatSettings[s];l.format=r,e.formatSettings.splice(s,1,l),o=!0;break}o||""===r||i.i(a.isNullOrUndefined)(r)||e.formatSettings.push(n)},e.prototype.addFormula=function(e,t){this.isFormula=!0,this.field=t,"Server"===this.parent.dataSourceSettings.mode?p.a.updateDataSourceSettings(this.parent,p.a.getClonedDataSourceSettings(e)):this.parent.setProperties({dataSourceSettings:e},!0),"pivotfieldlist"===this.parent.getModuleName()&&this.parent.allowDeferLayoutUpdate&&(this.parent.isRequiredUpdate=!1);try{var i={calculatedFieldInfo:this.parent.lastCalcFieldInfo};this.parent.actionObj.actionInfo=i;var r=this.parent.actionObj.actionName===d._67?d._111:d._81;this.parent.actionObj.actionName=r,this.parent.updateDataSource(!1);var a="pivotfieldlist"===this.parent.getModuleName()&&this.parent.pivotGridModule?this.parent.pivotGridModule:this.parent;a&&"Server"!==a.dataSourceSettings.mode?this.endDialog():this.isRequireUpdate=!0,"pivotfieldlist"===this.parent.getModuleName()&&"Fixed"===this.parent.renderMode&&this.parent.allowDeferLayoutUpdate&&(this.parent.pivotChange=!0)}catch(e){this.showError()}},e.prototype.endDialog=function(){if(this.isEdit=!1,this.dialog)this.dialog.close();else{this.inputObj.value="",this.currentFieldName=this.formatText=this.fieldText=this.formatType=null,this.formulaText=this.fieldType=this.parentHierarchy=null;var e=this.parent.isAdaptive?this.parent.dialogRenderer.parentElement:this.dialog.element;if(this.parent.dialogRenderer.parentElement.querySelector("."+s._81).value="",i.i(a.select)("#"+this.parentID+"droppable",this.parent.dialogRenderer.parentElement).value="",i.i(a.select)("#"+this.parentID+"Custom_Format_Element",this.parent.dialogRenderer.parentElement).value="","olap"===this.parent.dataType){var t=i.i(a.getInstance)(i.i(a.select)("#"+this.parentID+"Member_Type_Div",e),h.DropDownList),r=i.i(a.getInstance)(i.i(a.select)("#"+this.parentID+"Hierarchy_List_Div",e),h.DropDownList);t.index=0,t.readonly=!1,t.dataBind(),r.index=0,r.enabled=!1,r.dataBind()}var n=i.i(a.getInstance)(i.i(a.select)("#"+this.parentID+"Custom_Format_Element",e),o.MaskedTextBox),l=i.i(a.getInstance)(i.i(a.select)("#"+this.parentID+"Format_Div",e),h.DropDownList);l.index="olap"===this.parent.dataType?0:4,l.dataBind(),n.enabled=!1,n.dataBind()}},e.prototype.showError=function(){if(this.parent.engineModule.fieldList[this.field]&&delete this.parent.engineModule.fieldList[this.field],this.parent.pivotCommon.errorDialog.createErrorDialog(this.parent.localeObj.getConstant("error"),this.parent.localeObj.getConstant("invalidFormula")),this.parent.setProperties({dataSourceSettings:this.existingReport},!0),this.isEdit){for(var e=this.parent.dataSourceSettings.calculatedFieldSettings,t=0;e&&t<e.length;t++)if(e[t].name===this.field){e[t].formula=this.currentFormula;break}}else if(this.parent.engineModule.fields)for(var t=0;t<this.parent.engineModule.fields.length;t++)if(this.parent.engineModule.fields[t]===this.field){this.parent.engineModule.fields.splice(t,1);break}this.parent.lastCalcFieldInfo={},this.parent.updateDataSource(!1),this.isFormula=!1},e.prototype.getFieldListData=function(e){var t=[];if("olap"===this.parent.dataType){t=p.a.getClonedData(e.olapEngineModule.fieldListData?e.olapEngineModule.fieldListData:[]);for(var i=0,r=t;i<r.length;i++){var n=r[i];n.spriteCssClass&&(n.spriteCssClass.indexOf("e-attributeCDB-icon")>-1||n.spriteCssClass.indexOf("e-level-members")>-1)?n.hasChildren=!0:n.spriteCssClass&&n.spriteCssClass.indexOf("e-namedSetCDB-icon")>-1?n.hasChildren=!1:n.spriteCssClass&&n.spriteCssClass.indexOf("e-calcMemberGroupCDB")>-1&&(n.expanded=this.isEdit)}}else for(var o=0,l=e.engineModule.fieldList?Object.keys(e.engineModule.fieldList):[];o<l.length;o++){var d=l[o],h=null,u=null,c=e.engineModule.fieldList[d];u="number"===c.type&&"include"!==e.engineModule.fieldList[d].type&&"exclude"!==e.engineModule.fieldList[d].type||"DistinctCount"===c.aggregateType?void 0!==c.aggregateType?c.aggregateType:"Sum":"Count",h=this.parent.localeObj.getConstant(u),t.push({index:c.index,name:(this.parent.enableHtmlSanitizer?a.SanitizeHtmlHelper.sanitize(c.caption):c.caption)+" ("+h+")",type:u,icon:s._75+" "+s.a,formula:this.parent.enableHtmlSanitizer?a.SanitizeHtmlHelper.sanitize(c.formula):c.formula,field:this.parent.enableHtmlSanitizer?a.SanitizeHtmlHelper.sanitize(d):d,caption:this.parent.enableHtmlSanitizer?a.SanitizeHtmlHelper.sanitize(c.caption?c.caption:d):c.caption?c.caption:d})}return t},e.prototype.fieldDropped=function(e){e.cancel=!0;var t=i.i(a.select)("#"+this.parentID+"droppable",this.dialog.element);i.i(a.removeClass)([t],"e-copy-drop"),i.i(a.removeClass)([e.draggedNode.querySelector("."+s._80)],s._82);var r=e.draggedNode.getAttribute("data-field");if("olap"===this.parent.dataType)if(this.parent.olapEngineModule.fieldList[r]&&this.parent.olapEngineModule.fieldList[r].isCalculatedField&&(r=this.parent.olapEngineModule.fieldList[r].tag),e.target.id===this.parentID+"droppable"&&""===t.value)t.value=r,t.focus();else if(e.target.id===this.parentID+"droppable"&&""!==t.value){var n=t.value,o=t.selectionStart,l=n.substring(o,n.length),d=n.substring(0,o),h=d+r;t.value=d+r+l,t.focus(),t.setSelectionRange(h.length,h.length)}else e.cancel=!0;else{var p=e.draggedNode.getAttribute("data-type");if(e.target.id===this.parentID+"droppable"&&""===t.value)t.value=p===c?e.draggedNodeData.id.toString():'"'+p+"("+r+')"',t.focus();else if(e.target.id===this.parentID+"droppable"&&""!==t.value){var h=void 0,o=t.selectionStart,n=t.value,d=n.substring(0,o),l=n.substring(o,n.length);p===c?(h=d+e.draggedNodeData.id.toString(),t.value=d+e.draggedNodeData.id.toString()+l):(h=d+'"'+p+"("+r+')"',t.value=d+'"'+p+"("+r+')"'+l),t.focus(),t.setSelectionRange(h.length,h.length)}else e.cancel=!0}},e.prototype.createDialog=function(){var e=this;if(null!==i.i(a.select)("#"+this.parentID+"calculateddialog",document))for(i.i(a.remove)(i.i(a.select)("#"+this.parentID+"calculateddialog",document));!i.i(a.isNullOrUndefined)(document.querySelector("."+this.parentID+"calculatedmenu"));)i.i(a.remove)(document.querySelector("."+this.parentID+"calculatedmenu"));this.parent.element.appendChild(i.i(a.createElement)("div",{id:this.parentID+"calculateddialog",className:s._83+" "+("olap"===this.parent.dataType?s._84:"")}));var t=[{click:this.applyFormula.bind(this),buttonModel:{content:this.parent.localeObj.getConstant("ok"),isPrimary:!0,cssClass:this.parent.cssClass}},{click:this.cancelClick.bind(this),buttonModel:{content:this.parent.localeObj.getConstant("cancel"),cssClass:this.parent.cssClass}}];if("olap"===this.parent.dataType){var n={click:this.clearFormula.bind(this),buttonModel:{cssClass:"e-calc-clear-btn"+(this.parent.cssClass?" "+this.parent.cssClass:""),content:this.parent.localeObj.getConstant("clear")}};t.splice(0,0,n)}this.dialog=new r.Dialog({allowDragging:!0,position:{X:"center",Y:"center"},buttons:t,close:this.closeDialog.bind(this),beforeOpen:this.beforeOpen.bind(this),open:function(){i.i(a.select)("#"+e.parentID+"ddlelement",e.dialog.element)&&i.i(a.select)("#"+e.parentID+"ddlelement",e.dialog.element).focus()},animationSettings:{effect:"Zoom"},width:"25%",isModal:!0,closeOnEscape:!0,enableRtl:this.parent.enableRtl,locale:this.parent.locale,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,showCloseIcon:!0,header:this.parent.localeObj.getConstant("createCalculatedField"),target:document.body,cssClass:this.parent.cssClass}),this.dialog.isStringTemplate=!0,this.dialog.appendTo("#"+this.parentID+"calculateddialog")},e.prototype.cancelClick=function(){this.dialog.close(),this.isEdit=!1},e.prototype.beforeOpen=function(){this.dialog.element.querySelector(".e-dlg-header").setAttribute("title",this.parent.localeObj.getConstant("createCalculatedField"))},e.prototype.closeDialog=function(){"pivotfieldlist"===this.parent.getModuleName()&&(this.parent.axisFieldModule.render(),"Fixed"!==this.parent.renderMode&&(i.i(a.addClass)([this.parent.element.querySelector("."+s._85)],s._86),this.parent.dialogRenderer.fieldListDialog.show())),this.destroy(),i.i(a.isNullOrUndefined)(document.getElementById(this.parentID+"calculateddialog"))||i.i(a.remove)(document.getElementById(this.parentID+"calculateddialog")),i.i(a.isNullOrUndefined)(document.querySelector("."+this.parentID+"calculatedmenu"))||i.i(a.remove)(document.querySelector("."+this.parentID+"calculatedmenu"));var e="pivotview"===this.parent.getModuleName()||"pivotfieldlist"===this.parent.getModuleName()&&"Fixed"===this.parent.renderMode?0:500;this.buttonCall&&(this.buttonCall=!1,setTimeout(this.setFocus.bind(this),e))},e.prototype.setFocus=function(){var e;if("pivotview"===this.parent.getModuleName()&&this.parent.element?e=this.parent.element:document.getElementById(this.parent.element.id+"_Container")&&(e=document.getElementById(this.parent.element.id+"_Container")),e)for(var t=[].slice.call(e.querySelectorAll(".e-pivot-button")),i=0,r=t;i<r.length;i++){var a=r[i];if(a.getAttribute("data-uid")===this.currentFieldName){a.focus();break}}},e.prototype.renderDialogElements=function(){var e=i.i(a.createElement)("div",{id:this.parentID+"outerDiv",className:("olap"===this.parent.dataType?s._87+" ":"")+s._88}),t=i.i(a.createElement)("div",{id:this.parentID+"Olap_Tree_Div",className:"e-olap-field-tree-div"}),n=i.i(a.createElement)("div",{id:this.parentID+"Pivot_Calc_Div",className:"e-pivot-calculated-div"});if("pivotfieldlist"===this.parent.getModuleName()&&null!==this.parent.dialogRenderer.parentElement.querySelector("."+s._89)&&this.parent.isAdaptive){var o=i.i(a.createElement)("div",{id:this.parentID+"accordDiv",className:s._90});e.appendChild(o);var l=i.i(a.createElement)("div",{id:this.parentID+"buttonDiv",className:s._91}),d=i.i(a.createElement)("button",{id:this.parentID+"addBtn",className:s._92,attrs:{type:"button"}});d.innerText=this.parent.localeObj.getConstant("add");var h=i.i(a.createElement)("button",{id:this.parentID+"cancelBtn",className:s._93,attrs:{type:"button"}});h.innerText=this.parent.localeObj.getConstant("cancel"),l.appendChild(h),l.appendChild(d),e.appendChild(l)}else{if(!this.parent.isAdaptive&&"olap"===this.parent.dataType){var p=i.i(a.createElement)("div",{className:s._94,id:this.parentID+"_FieldNameTitle"});p.innerText=this.parent.localeObj.getConstant("fieldTitle"),n.appendChild(p)}var u=i.i(a.createElement)("div",{id:this.parentID+"innerDiv",className:s._95}),c=i.i(a.createElement)("input",{id:this.parentID+"ddlelement",attrs:{type:"text"},className:s._81});u.appendChild(c),"olap"!==this.parent.dataType||this.parent.isAdaptive?e.appendChild(u):n.appendChild(u);var g=i.i(a.createElement)("div",{id:this.parentID+"control_container",className:s._96});if(!this.parent.isAdaptive){var m=i.i(a.createElement)("div",{className:s._97});if(m.innerText="olap"===this.parent.dataType?this.parent.localeObj.getConstant("allFields"):this.parent.localeObj.getConstant("formulaField"),"olap"===this.parent.dataType){var f=i.i(a.createElement)("div",{className:s._97+"-container"});f.appendChild(m);var v=i.i(a.createElement)("span",{attrs:{tabindex:"0","aria-disabled":"false","aria-label":this.parent.localeObj.getConstant("fieldTooltip"),role:"button"},className:s.a+" "+s._98});f.appendChild(v);new r.Tooltip({content:this.parent.localeObj.getConstant("fieldTooltip"),position:this.parent.enableRtl?"RightCenter":"LeftCenter",target:"."+s._98,offsetY:(this.parent.enableRtl,-10),locale:this.parent.locale,enableRtl:this.parent.enableRtl,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,width:220,cssClass:this.parent.cssClass}).appendTo(f),g.appendChild(f)}else e.appendChild(m)}var S=i.i(a.createElement)("div",{className:s._99+"-outer-div"});if(g.appendChild(S),S.appendChild(i.i(a.createElement)("div",{id:this.parentID+"tree",className:s._99})),"olap"!==this.parent.dataType||this.parent.isAdaptive?e.appendChild(g):t.appendChild(g),!this.parent.isAdaptive){var p=i.i(a.createElement)("div",{className:s._100});p.innerText="olap"===this.parent.dataType?this.parent.localeObj.getConstant("expressionField"):this.parent.localeObj.getConstant("formula"),"olap"===this.parent.dataType?n.appendChild(p):e.appendChild(p)}var y=i.i(a.createElement)("textarea",{id:this.parentID+"droppable",className:s._89+" e-control e-textbox e-input",attrs:{placeholder:this.parent.isAdaptive?this.parent.localeObj.getConstant("dropTextMobile"):"olap"===this.parent.dataType?this.parent.localeObj.getConstant("olapDropText"):this.parent.localeObj.getConstant("dropText")}});if("olap"!==this.parent.dataType||this.parent.isAdaptive?e.appendChild(y):n.appendChild(y),this.parent.isAdaptive){var l=i.i(a.createElement)("div",{id:this.parentID+"buttonDiv",className:s._91}),b=i.i(a.createElement)("button",{id:this.parentID+"okBtn",className:s._101,attrs:{type:"button"}});b.innerText=this.parent.localeObj.getConstant("apply"),l.appendChild(b),e.appendChild(l)}if("olap"===this.parent.dataType){if(!this.parent.isAdaptive){var C=i.i(a.createElement)("div",{className:s._102});C.innerText=this.parent.localeObj.getConstant("memberType"),n.appendChild(C)}var x=i.i(a.createElement)("div",{id:this.parentID+"Member_Type_Div",className:s._103});if(this.parent.isAdaptive)e.appendChild(x);else{n.appendChild(x);var w=i.i(a.createElement)("div",{className:s._104});w.innerText=this.parent.localeObj.getConstant("selectedHierarchy"),n.appendChild(w)}var T=i.i(a.createElement)("div",{id:this.parentID+"Hierarchy_List_Div",className:s._105});this.parent.isAdaptive?e.appendChild(T):n.appendChild(T)}if(!this.parent.isAdaptive){var M=i.i(a.createElement)("div",{className:s._106});M.innerText=this.parent.localeObj.getConstant("formatString"),n.appendChild(M)}var _=i.i(a.createElement)("div",{id:this.parentID+"Format_Div",className:s._107});this.parent.isAdaptive?e.appendChild(_):n.appendChild(_);var D=i.i(a.createElement)("div",{id:this.parentID+"custom_Format_Div",className:s._108}),O=i.i(a.createElement)("input",{id:this.parentID+"Custom_Format_Element",attrs:{type:"text"},className:s._109});if(D.appendChild(O),n.appendChild(D),this.parent.isAdaptive?e.appendChild(D):n.appendChild(D),"pivotfieldlist"===this.parent.getModuleName()&&null===this.parent.dialogRenderer.parentElement.querySelector("."+s._89)&&this.parent.isAdaptive){var b=e.querySelector("."+s._101);e.appendChild(b)}else"olap"===this.parent.dataType&&e.appendChild(t),e.appendChild(n)}return e},e.prototype.renderAdaptiveLayout=function(e){var t=this.parent.dialogRenderer.adaptiveElement;if(e){if(i.i(a.select)("#"+this.parentID+"droppable",t.element)&&(this.formulaText=i.i(a.select)("#"+this.parentID+"droppable",document).value,this.fieldText=this.inputObj.value),t.element.querySelector("."+s._103)){var r=i.i(a.getInstance)(i.i(a.select)("#"+this.parentID+"Member_Type_Div",t.element),h.DropDownList);this.fieldType=r.value}if(t.element.querySelector("."+s._105)){var n=i.i(a.getInstance)(i.i(a.select)("#"+this.parentID+"Hierarchy_List_Div",t.element),h.DropDownList);this.parentHierarchy="Dimension"===this.fieldType?n.value:null}if(t.element.querySelector("."+s._107)){var l=i.i(a.getInstance)(i.i(a.select)("#"+this.parentID+"Format_Div",t.element),h.DropDownList);this.formatType=l.value}if(t.element.querySelector("."+s._109)){var d=i.i(a.getInstance)(i.i(a.select)("#"+this.parentID+"Custom_Format_Element",t.element),o.MaskedTextBox);this.formatText="Custom"===("olap"===this.parent.dataType?this.formatType:this.getFormat(this.formatType))?d.value:null}}else this.currentFieldName=this.formulaText=this.fieldText=this.formatText=null,this.fieldType=this.formatType=this.parentHierarchy=null;this.renderMobileLayout(t)},e.prototype.updateAdaptiveCalculatedField=function(e,t){var r=this.parent.dialogRenderer.adaptiveElement.element;this.isEdit=e;var n=e?"pivot"===this.parent.dataType?this.parent.engineModule.fieldList[t]:this.parent.olapEngineModule.fieldList[t]:{id:null,caption:null,formula:null,fieldType:"Measure",formatString:"pivot"===this.parent.dataType?null:"Standard",parentHierarchy:null};if(this.currentFieldName=n.id,i.i(a.select)("#"+this.parentID+"droppable",document)&&(this.formulaText=i.i(a.select)("#"+this.parentID+"droppable",document).value=n.formula,this.fieldText=this.inputObj.value=n.caption,this.inputObj.dataBind()),r.querySelector("."+s._103)){var l=i.i(a.getInstance)(i.i(a.select)("#"+this.parentID+"Member_Type_Div",r),h.DropDownList);this.fieldType=l.value=n.fieldType,l.readonly=!!e,l.dataBind()}if(r.querySelector("."+s._105)){var d=i.i(a.getInstance)(i.i(a.select)("#"+this.parentID+"Hierarchy_List_Div",r),h.DropDownList);"Dimension"===this.fieldType?this.parentHierarchy=d.value=n.parentHierarchy:(this.parentHierarchy=null,d.index=0),d.dataBind()}if(r.querySelector("."+s._107)){var u=i.i(a.getInstance)(i.i(a.select)("#"+this.parentID+"Format_Div",r),h.DropDownList);this.formatType=u.value=this.formatTypes.indexOf(n.formatString)>-1?n.formatString:"Custom"}if(r.querySelector("."+s._109)){var c=i.i(a.getInstance)(i.i(a.select)("#"+this.parentID+"Custom_Format_Element",r),o.MaskedTextBox),g=p.a.getFieldByName(t,this.parent.dataSourceSettings.formatSettings);"pivot"===this.parent.dataType?this.formatText=c.value=g?g.format:null:this.formatText=c.value="Custom"===this.formatType?n.formatString:null,c.dataBind()}},e.prototype.createDropElements=function(){for(var e=this,t=this.parent.isAdaptive?this.parent.dialogRenderer.parentElement:this.dialog.element,r=[],n=[],l=0,d=this.formatTypes;l<d.length;l++){var u=d[l];r.push({value:"pivot"===this.parent.dataType?this.getFormat(u):u,text:this.parent.localeObj.getConstant(u)})}if("olap"===this.parent.dataType){for(var c=[],g=["Measure","Dimension"],m=0,f=g;m<f.length;m++){var v=f[m];c.push({value:v,text:this.parent.localeObj.getConstant(v)})}for(var S=p.a.getClonedData(this.parent.olapEngineModule.fieldListData),y=0,b=S;y<b.length;y++){var C=b[y];C.spriteCssClass&&(C.spriteCssClass.indexOf("e-attributeCDB-icon")>-1||C.spriteCssClass.indexOf("e-hierarchyCDB-icon")>-1)&&n.push({value:C.id,text:C.caption})}var x=new h.DropDownList({dataSource:c,enableRtl:this.parent.enableRtl,locale:this.parent.locale,fields:{value:"value",text:"text"},value:null!==this.fieldType?this.fieldType:c[0].value,readonly:this.isEdit,cssClass:s._110+(this.parent.cssClass?" "+this.parent.cssClass:""),width:"100%",change:function(t){w.enabled="Dimension"===t.value,e.fieldType=t.value,e.formulaText=i.i(a.select)("#"+e.parentID+"droppable",document).value,w.dataBind()}});x.isStringTemplate=!0,x.appendTo(i.i(a.select)("#"+this.parentID+"Member_Type_Div",t));var w=new h.DropDownList({dataSource:n,enableRtl:this.parent.enableRtl,locale:this.parent.locale,allowFiltering:!0,enabled:"Dimension"===x.value,filterBarPlaceholder:this.parent.localeObj.getConstant("example")+" "+n[0].text.toString(),fields:{value:"value",text:"text"},value:null!==this.parentHierarchy&&"Dimension"===x.value?this.parentHierarchy:n[0].value,cssClass:s._110+(this.parent.cssClass?" "+this.parent.cssClass:""),width:"100%",change:function(t){e.parentHierarchy=t.value,e.formulaText=i.i(a.select)("#"+e.parentID+"droppable",document).value}});w.isStringTemplate=!0,w.appendTo(i.i(a.select)("#"+this.parentID+"Hierarchy_List_Div",t))}var T=new h.DropDownList({dataSource:r,enableRtl:this.parent.enableRtl,locale:this.parent.locale,fields:{value:"value",text:"text"},value:this.parent.isAdaptive&&null!==this.formatType?this.formatType:"olap"===this.parent.dataType?r[0].value:r[4].value,cssClass:s._110+(this.parent.cssClass?" "+this.parent.cssClass:""),width:"100%",change:function(t){M.enabled="Custom"===t.value,e.formatType=t.value,e.formulaText=i.i(a.select)("#"+e.parentID+"droppable",document).value,M.dataBind()}});T.isStringTemplate=!0,T.appendTo(i.i(a.select)("#"+this.parentID+"Format_Div",t));var M=new o.MaskedTextBox({placeholder:this.parent.localeObj.getConstant("customFormat"),locale:this.parent.locale,enableRtl:this.parent.enableRtl,value:null!==this.formatText&&"Custom"===T.value?this.formatText:null,enabled:"Custom"===T.value,change:function(t){e.formatText=t.value,e.formulaText=i.i(a.select)("#"+e.parentID+"droppable",document).value},cssClass:this.parent.cssClass});M.isStringTemplate=!0,M.appendTo("#"+this.parentID+"Custom_Format_Element")},e.prototype.getFormat=function(e){var t=e;switch(t){case"Standard":t="N";break;case"Currency":t="C";break;case"Percent":t="P";break;case"N":t="Standard";break;case"C":t="Currency";break;case"P":t="Percent"}return t},e.prototype.createTreeView=function(){var e=this;"olap"===this.parent.dataType?this.treeObj=new l.TreeView({fields:{dataSource:this.getFieldListData(this.parent),id:"id",text:"caption",parentID:"pid",iconCss:"spriteCssClass"},allowDragAndDrop:!0,enableRtl:this.parent.enableRtl,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,locale:this.parent.locale,nodeDragStart:this.dragStart.bind(this),nodeDragging:function(e){e.event.target&&e.event.target.classList.contains(s._89)?(i.i(a.removeClass)([e.clonedNode],s._111),i.i(a.addClass)([e.event.target],"e-copy-drop")):(i.i(a.addClass)([e.clonedNode],s._111),i.i(a.removeClass)([e.event.target],"e-copy-drop"),e.dropIndicator="e-no-drop",i.i(a.addClass)([e.clonedNode.querySelector("."+s.a)],"e-icon-expandable"),i.i(a.removeClass)([e.clonedNode.querySelector("."+s.a)],"e-list-icon"))},nodeClicked:this.fieldClickHandler.bind(this),nodeSelected:function(t){t.node.getAttribute("data-type")===c?e.displayMenu(t.node):(i.i(a.removeClass)([t.node],"e-active"),t.cancel=!0)},nodeDragStop:this.fieldDropped.bind(this),drawNode:this.drawTreeNode.bind(this),nodeExpanding:this.updateNodeIcon.bind(this),nodeCollapsed:this.updateNodeIcon.bind(this),sortOrder:"None",cssClass:this.parent.cssClass}):this.treeObj=new l.TreeView({fields:{dataSource:this.getFieldListData(this.parent),id:"formula",text:"name",iconCss:"icon"},allowDragAndDrop:!0,enableRtl:this.parent.enableRtl,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,locale:this.parent.locale,cssClass:this.parent.cssClass,nodeCollapsing:this.nodeCollapsing.bind(this),nodeDragStart:this.dragStart.bind(this),nodeClicked:this.fieldClickHandler.bind(this),nodeDragStop:this.fieldDropped.bind(this),drawNode:this.drawTreeNode.bind(this),keyPress:function(e){39===e.event.keyCode&&(e.cancel=!0)},sortOrder:"Ascending"}),this.treeObj.isStringTemplate=!0,this.treeObj.appendTo("#"+this.parentID+"tree")},e.prototype.updateNodeIcon=function(e){if(e.node&&e.node.querySelector(".e-list-icon")&&e.node.querySelector(".e-icon-expandable.e-process")&&e.node.querySelector(".e-list-icon").className.indexOf("e-folderCDB-icon")>-1){var t=e.node.querySelector(".e-list-icon");i.i(a.removeClass)([t],"e-folderCDB-icon"),i.i(a.addClass)([t],"e-folderCDB-open-icon")}else if(e.node&&e.node.querySelector(".e-list-icon")&&e.node.querySelector(".e-icon-expandable")&&e.node.querySelector(".e-list-icon").className.indexOf("e-folderCDB-open-icon")>-1){var t=e.node.querySelector(".e-list-icon");i.i(a.removeClass)([t],"e-folderCDB-open-icon"),i.i(a.addClass)([t],"e-folderCDB-icon")}else{for(var r=this.treeObj.fields.dataSource,n=r,o=[],s=0,l=n;s<l.length;s++){var d=l[s];d.pid===e.nodeData.id.toString()&&o.push(d)}if(0!==o.length)return;this.parent.olapEngineModule.calcChildMembers=[],this.parent.olapEngineModule.getCalcChildMembers(this.parent.dataSourceSettings,e.nodeData.id.toString()),o=this.parent.olapEngineModule.calcChildMembers,this.parent.olapEngineModule.calcChildMembers=[];for(var h=0,p=o;h<p.length;h++){var t=p[h];t.pid=e.nodeData.id.toString(),t.hasChildren=!1,t.spriteCssClass="e-level-members",t.caption=""===t.caption?this.parent.localeObj.getConstant("blank"):t.caption,r.push(t)}this.treeObj.addNodes(o,e.node)}},e.prototype.nodeCollapsing=function(e){e.cancel=!0},e.prototype.dragStart=function(e){var t=!1,r=e.clonedNode;r&&("olap"===this.parent.dataType&&(r.querySelector(".e-calc-dimension-icon,.e-calc-measure-icon,.e-measure-icon")||r.querySelector(".e-dimensionCDB-icon,.e-attributeCDB-icon,.e-hierarchyCDB-icon")||r.querySelector(".e-level-members,.e-namedSetCDB-icon"))||"pivot"===this.parent.dataType&&e.event.target.classList.contains(s._112))&&(t=!0),t?(i.i(a.addClass)([e.draggedNode.querySelector("."+s._80)],s._82),i.i(a.addClass)([r],s._113),r.style.zIndex=(this.dialog.zIndex+1).toString(),r.style.display="inline"):e.cancel=!0},e.prototype.drawTreeNode=function(e){if("olap"===this.parent.dataType){e.node.querySelector(".e-measure-icon")&&(e.node.querySelector(".e-list-icon").style.display="none");var t=e.nodeData;e.node.setAttribute("data-field",t.id),e.node.setAttribute("data-caption",t.caption);var r=e.node.querySelector("."+s._114);if(e.nodeData&&e.nodeData.type===c&&r&&e.node.querySelector(".e-list-icon.e-calc-member")){e.node.setAttribute("data-type",t.type),e.node.setAttribute("data-membertype",t.fieldType),e.node.setAttribute("data-hierarchy",t.parentHierarchy?t.parentHierarchy:""),e.node.setAttribute("data-formula",t.formula);var n=t.formatString?this.formatTypes.indexOf(t.formatString)>-1?t.formatString:"Custom":"None";e.node.setAttribute("data-formatString",n),e.node.setAttribute("data-customformatstring","Custom"===n?t.formatString:"");var o=i.i(a.createElement)("span",{className:s.B+" e-icons e-list-icon"});if(r.classList.add("e-calcfieldmember"),this.parent.isAdaptive){var l=i.i(a.createElement)("span",{className:"e-list-edit-icon"+(this.isEdit&&this.currentFieldName===t.id?" e-edited ":" e-edit ")+s.a}),d=i.i(a.createElement)("div",{className:"e-list-header-icon"});d.appendChild(l),d.appendChild(o),r.appendChild(d)}else r.appendChild(o)}if(this.parent.isAdaptive){var h=e.node.querySelector("."+s._114);if(e.node&&e.node.querySelector(".e-list-icon")&&h){var u=e.node.querySelector(".e-list-icon");h.insertBefore(u,e.node.querySelector(".e-list-text"))}e.node&&e.node.querySelector(".e-calcMemberGroupCDB,.e-measureGroupCDB-icon,.e-folderCDB-icon")&&(e.node.querySelector(".e-checkbox-wrapper").style.display="none"),e.node&&e.node.querySelector(".e-level-members")&&(e.node.querySelector(".e-list-icon").style.display="none")}}else{var t=e.nodeData.field;e.node.setAttribute("data-field",t),e.node.setAttribute("data-caption",e.nodeData.caption),e.node.setAttribute("data-type",e.nodeData.type);var g=p.a.getFieldByName(t,this.parent.dataSourceSettings.formatSettings);if(e.node.setAttribute("data-formatString",g?g.format:""),g){var m=this.getFormat(g.format),n=m?this.formatTypes.indexOf(m)>-1?g.format:"Custom":"None";e.node.setAttribute("data-customformatstring","Custom"===n?m:""),e.node.setAttribute("data-formatString",g?n:"")}var f=i.i(a.createElement)("span",{attrs:{tabindex:"-1","aria-disabled":"false",title:this.parent.localeObj.getConstant("dragField")},className:s.a+" e-drag"}),v=i.i(a.createElement)("div",{className:" e-iconspace"});i.i(a.prepend)([f],e.node.querySelector("."+s._114)),i.i(a.append)([v,e.node.querySelector("."+s._75)],e.node.querySelector("."+s._114)),this.getMenuItems(this.parent.engineModule.fieldList[t].type).length<=0?i.i(a.removeClass)([e.node.querySelector("."+s._75)],s.a):e.node.querySelector("."+s._75).setAttribute("title",this.parent.localeObj.getConstant("format")),this.parent.engineModule.fieldList[t].aggregateType===c&&(e.node.querySelector("."+s._75).setAttribute("title",this.parent.localeObj.getConstant("remove")),i.i(a.addClass)([e.node.querySelector("."+s._75)],s.B),i.i(a.addClass)([e.node.querySelector(".e-iconspace")],[s._76,s.a,"e-list-icon"]),e.node.querySelector("."+s._76).setAttribute("title",this.parent.localeObj.getConstant("edit")),e.node.querySelector("."+s._76).setAttribute("aria-disabled","false"),e.node.querySelector("."+s._76).setAttribute("tabindex","-1"),i.i(a.removeClass)([e.node.querySelector("."+s._75)],s._75),i.i(a.removeClass)([e.node.querySelector(".e-iconspace")],"e-iconspace"))}},e.prototype.createTypeContainer=function(e){for(var t=i.i(a.createElement)("div",{id:this.parentID+"control_container",className:s._96}),r=this.getMenuItems(this.parent.engineModule.fieldList[e].type),n=0;n<r.length;n++){var o=i.i(a.createElement)("input",{id:this.parentID+"radio"+e+r[n],attrs:{type:"radio","data-ftxt":e,"data-value":r[n]},className:s._115});t.appendChild(o)}return t},e.prototype.getMenuItems=function(e,t){for(var r=i.i(a.isNullOrUndefined)(t)?this.parent.aggregateTypes:t,n=[],o=this.getValidSummaryType(),s=0;s<r.length;s++)o.indexOf(r[s])>-1&&n.indexOf(r[s])<0&&(("Count"!==r[s]&&"DistinctCount"!==r[s]||"number"===e)&&"number"!==e||n.push(r[s]));return n},e.prototype.getValidSummaryType=function(){return["Count","DistinctCount","Sum","Avg","Median","Min","Max","Product","SampleStDev","PopulationStDev","SampleVar",u]},e.prototype.getAccordionData=function(e){for(var t=[],i=Object.keys(e.engineModule.fieldList),r=0,a=i.length;r<a;r++){var n=i[r];t.push({header:"<input id="+this.parentID+"_"+r+" class="+s._78+' type="checkbox" data-field='+n+' data-caption="'+this.parent.engineModule.fieldList[n].caption+'" data-type='+this.parent.engineModule.fieldList[n].type+"/>",content:this.parent.engineModule.fieldList[n].aggregateType===c||this.getMenuItems(this.parent.engineModule.fieldList[n].type).length<1?"":this.createTypeContainer(n).outerHTML,iconCss:this.parent.engineModule.fieldList[n].aggregateType===c?"e-list-icon "+(this.isEdit&&this.currentFieldName===n?"e-edited":"e-edit"):""})}return t},e.prototype.renderMobileLayout=function(e){var t=this;e.items[4].content=this.renderDialogElements().outerHTML,e.dataBind(),this.parent.isAdaptive&&null!==this.parent.dialogRenderer.parentElement.querySelector("."+s._89)&&this.createDropElements();var r=new n.Button({cssClass:s._74+(this.parent.cssClass?" "+this.parent.cssClass:""),isPrimary:!0,locale:this.parent.locale,enableRtl:this.parent.enableRtl,enableHtmlSanitizer:this.parent.enableHtmlSanitizer});if(r.isStringTemplate=!0,r.appendTo("#"+this.parentID+"cancelBtn"),r.element&&(r.element.onclick=this.cancelBtnClick.bind(this)),null!==this.parent.dialogRenderer.parentElement.querySelector("."+s._89)&&this.parent.isAdaptive){var d=new n.Button({cssClass:s._74+" "+s._116+(this.parent.cssClass?" "+this.parent.cssClass:""),isPrimary:!0,locale:this.parent.locale,enableRtl:this.parent.enableRtl,enableHtmlSanitizer:this.parent.enableHtmlSanitizer});if(d.isStringTemplate=!0,d.appendTo("#"+this.parentID+"okBtn"),this.inputObj=new o.MaskedTextBox({placeholder:this.parent.localeObj.getConstant("fieldName"),locale:this.parent.locale,enableRtl:this.parent.enableRtl,change:function(e){t.fieldText=e.value,t.formulaText=i.i(a.select)("#"+t.parentID+"droppable",document).value},cssClass:this.parent.cssClass}),this.inputObj.isStringTemplate=!0,this.inputObj.appendTo("#"+this.parentID+"ddlelement"),null!==this.formulaText&&null!==i.i(a.select)("#"+this.parentID+"droppable",this.parent.dialogRenderer.parentElement)){i.i(a.select)("#"+this.parentID+"droppable",this.parent.dialogRenderer.parentElement).value=this.formulaText}null!==this.fieldText&&null!==this.parent.dialogRenderer.parentElement.querySelector("."+s._81)&&(this.parent.dialogRenderer.parentElement.querySelector("."+s._81).value=this.fieldText,this.inputObj.value=this.fieldText),d.element&&(d.element.onclick=this.applyFormula.bind(this))}else if(this.parent.isAdaptive){var h=new n.Button({cssClass:s._74+(this.parent.cssClass?" "+this.parent.cssClass:""),isPrimary:!0,locale:this.parent.locale,enableRtl:this.parent.enableRtl,enableHtmlSanitizer:this.parent.enableHtmlSanitizer});h.isStringTemplate=!0,h.appendTo("#"+this.parentID+"addBtn"),"olap"===this.parent.dataType?(this.treeObj=new l.TreeView({fields:{dataSource:this.getFieldListData(this.parent),id:"id",text:"caption",parentID:"pid",iconCss:"spriteCssClass"},showCheckBox:!0,autoCheck:!1,sortOrder:"None",enableRtl:this.parent.enableRtl,locale:this.parent.locale,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,nodeClicked:this.fieldClickHandler.bind(this),drawNode:this.drawTreeNode.bind(this),nodeExpanding:this.updateNodeIcon.bind(this),nodeCollapsed:this.updateNodeIcon.bind(this),nodeSelected:function(e){i.i(a.removeClass)([e.node],"e-active"),e.cancel=!0},cssClass:this.parent.cssClass}),this.treeObj.isStringTemplate=!0,this.treeObj.appendTo("#"+this.parentID+"accordDiv")):(this.accordion=new l.Accordion({items:this.getAccordionData(this.parent),enableRtl:this.parent.enableRtl,locale:this.parent.locale,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,expanding:this.accordionExpand.bind(this),clicked:this.accordionClickHandler.bind(this),created:this.accordionCreated.bind(this)}),this.accordion.isStringTemplate=!0,this.accordion.appendTo("#"+this.parentID+"accordDiv"),this.updateType()),h.element&&(h.element.onclick=this.addBtnClick.bind(this))}},e.prototype.accordionExpand=function(e){if(0===e.element.querySelectorAll(".e-radio-wrapper").length)for(var t=Object.keys(this.parent.engineModule.fieldList),i=0,r=t.length;i<r;i++){var a=t[i],o="number"!==this.parent.engineModule.fieldList[a].type?["Count","DistinctCount"]:["Sum","Count","Avg","Median","Min","Max","DistinctCount","Product","SampleStDev","PopulationStDev","SampleVar",u],s=void 0;if(a===e.element.querySelector("[data-field").getAttribute("data-field"))for(var l=0;l<o.length;l++)s=new n.RadioButton({label:this.parent.localeObj.getConstant(o[l]),name:"AggregateType"+a,checked:e.element.querySelector("[data-type").getAttribute("data-type")===o[l],change:this.onChange.bind(this),locale:this.parent.locale,enableRtl:this.parent.enableRtl,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,cssClass:this.parent.cssClass}),s.isStringTemplate=!0,s.appendTo("#"+this.parentID+"radio"+a+o[l])}},e.prototype.onChange=function(e){var t=e.event.target.parentElement.querySelector(".e-label").innerText,i=e.event.target.closest(".e-acrdn-item").querySelector("[data-field").getAttribute("data-caption");e.event.target.closest(".e-acrdn-item").querySelector(".e-label").innerText=i+" ("+t+")",e.event.target.closest(".e-acrdn-item").querySelector("[data-type").setAttribute("data-type",e.event.target.getAttribute("data-value"))},e.prototype.updateType=function(){for(var e=Object.keys(this.parent.engineModule.fieldList),t=0,r=e.length;t<r;t++){var o=e[t],s=null;s="number"===this.parent.engineModule.fieldList[o].type&&"include"!==this.parent.engineModule.fieldList[o].type&&"exclude"!==this.parent.engineModule.fieldList[o].type||"DistinctCount"===this.parent.engineModule.fieldList[o].aggregateType?void 0!==this.parent.engineModule.fieldList[o].aggregateType?this.parent.engineModule.fieldList[o].aggregateType:"Sum":"Count";var l=new n.CheckBox({label:this.parent.engineModule.fieldList[o].caption+" ("+this.parent.localeObj.getConstant(s)+")",locale:this.parent.locale,enableRtl:this.parent.enableRtl,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,cssClass:this.parent.cssClass});l.isStringTemplate=!0,l.appendTo("#"+this.parentID+"_"+t),i.i(a.select)("#"+this.parentID+"_"+t,document).setAttribute("data-field",o),i.i(a.select)("#"+this.parentID+"_"+t,document).setAttribute("data-type",s)}},e.prototype.cancelBtnClick=function(){this.renderMobileLayout(this.parent.dialogRenderer.adaptiveElement)},e.prototype.addBtnClick=function(){var e="",t=null,i=null;if("pivot"===this.parent.dataType){for(var r=document.querySelectorAll(".e-accordion .e-check"),a=0;a<r.length;a++)if(t=r[a].parentElement.querySelector("[data-field]").getAttribute("data-field"),i=r[a].parentElement.querySelector("[data-field]").getAttribute("data-type"),-1===i.indexOf(c))e=e+'"'+i+"("+t+')"';else for(var n=0;n<this.parent.dataSourceSettings.calculatedFieldSettings.length;n++)if(this.parent.dataSourceSettings.calculatedFieldSettings[n].name===t){e+=this.parent.dataSourceSettings.calculatedFieldSettings[n].formula;break}}else for(var o=this.treeObj.getAllCheckedNodes(),s=this.parent.olapEngineModule,l=0,d=o;l<d.length;l++){var h=d[l];e+=s.fieldList[h]&&s.fieldList[h].type===c?s.fieldList[h].tag:h}this.formulaText=null!==this.formulaText?this.formulaText+e:e,this.renderMobileLayout(this.parent.dialogRenderer.adaptiveElement)},e.prototype.createCalculatedFieldDialog=function(e){if(this.parent.isAdaptive&&"pivotfieldlist"===this.parent.getModuleName())this.renderAdaptiveLayout(!e||void 0===e.edit||e.edit),this.isEdit=e&&void 0!==e.edit?e.edit:this.isEdit;else if(!this.parent.isAdaptive){if(this.isEdit=!(!e||void 0===e.edit)&&e.edit,this.renderDialogLayout(),e&&e.edit){var t=this.treeObj.element.querySelector('li[data-field="'+e.fieldName+'"]');if(t)if(i.i(a.addClass)([t],["e-active","e-node-focus"]),t.setAttribute("aria-selected","true"),t.id=this.treeObj.element.id+"_active","pivot"===this.parent.dataType){var r={event:{target:t.querySelector(".e-list-icon.e-edit.e-icons")}};this.fieldClickHandler(r)}else this.displayMenu(t)}this.dialog.element.style.top=parseInt(this.dialog.element.style.top,10)<0?"0px":this.dialog.element.style.top}},e.prototype.renderDialogLayout=function(){this.newFields=i.i(a.extend)([],this.parent.dataSourceSettings.calculatedFieldSettings,null,!0),this.createDialog(),this.dialog.content=this.renderDialogElements(),this.dialog.refresh(),this.inputObj=new o.MaskedTextBox({placeholder:this.parent.localeObj.getConstant("fieldName"),locale:this.parent.locale,enableRtl:this.parent.enableRtl,cssClass:this.parent.cssClass}),this.inputObj.isStringTemplate=!0,this.inputObj.appendTo("#"+this.parentID+"ddlelement"),this.createDropElements(),this.createTreeView(),this.droppable=new a.Droppable(i.i(a.select)("#"+this.parentID+"droppable")),this.keyboardEvents=new a.KeyboardEvents(this.parent.calculatedFieldModule.dialog.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:{moveRight:"rightarrow",enter:"enter",shiftE:"shift+E",delete:"delete"},eventName:"keydown"})},e.prototype.createConfirmDialog=function(e,t,n,o,l){var d=i.i(a.createElement)("div",{id:this.parentID+"_CalculatedFieldErrorDialog",className:s.Q});this.parent.element.appendChild(d),this.confirmPopUp=new r.Dialog({animationSettings:{effect:"Fade"},allowDragging:!1,showCloseIcon:!0,enableRtl:this.parent.enableRtl,locale:this.parent.locale,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,width:"auto",height:"auto",position:{X:"center",Y:"center"},buttons:[{click:o?this.removeCalcField.bind(this,l):this.replaceFormula.bind(this,n),buttonModel:{cssClass:s.d+" "+s._117+(this.parent.cssClass?" "+this.parent.cssClass:""),content:o?this.parent.localeObj.getConstant("yes"):this.parent.localeObj.getConstant("ok"),isPrimary:!0}},{click:this.closeErrorDialog.bind(this),buttonModel:{cssClass:s.e+(this.parent.cssClass?" "+this.parent.cssClass:""),content:o?this.parent.localeObj.getConstant("no"):this.parent.localeObj.getConstant("cancel"),isPrimary:!0}}],header:e,content:t,isModal:!0,visible:!0,closeOnEscape:!0,target:document.body,cssClass:this.parent.cssClass,close:this.removeErrorDialog.bind(this)}),this.confirmPopUp.isStringTemplate=!0,this.confirmPopUp.appendTo(d)},e.prototype.replaceFormula=function(e){var t=this.parent.dataSourceSettings;if("olap"===this.parent.dataType){for(var r=0;r<t.calculatedFieldSettings.length;r++)if(t.calculatedFieldSettings[r].name===e.name){i.i(a.isNullOrUndefined)(e.hierarchyUniqueName)||(t.calculatedFieldSettings[r].hierarchyUniqueName=e.hierarchyUniqueName),t.calculatedFieldSettings[r].formatString=e.formatString,t.calculatedFieldSettings[r].formula=e.formula,this.parent.lastCalcFieldInfo=t.calculatedFieldSettings[r];break}}else for(var n=0;n<t.values.length;n++)if(t.values[n].type===c&&t.values[n].name===e.name)for(var r=0;r<t.calculatedFieldSettings.length;r++)t.calculatedFieldSettings[r].name===e.name&&(t.calculatedFieldSettings[r].formula=e.formula,this.parent.lastCalcFieldInfo=t.calculatedFieldSettings[r],this.updateFormatSettings(t,e.name,e.formatString));this.addFormula(t,e.name),this.removeErrorDialog()},e.prototype.removeErrorDialog=function(){this.confirmPopUp&&!this.confirmPopUp.isDestroyed&&this.confirmPopUp.destroy(),null!==i.i(a.select)("#"+this.parentID+"_CalculatedFieldErrorDialog",document)&&i.i(a.remove)(i.i(a.select)("#"+this.parentID+"_CalculatedFieldErrorDialog",document))},e.prototype.closeErrorDialog=function(){this.confirmPopUp.close()},e.prototype.addEventListener=function(){this.parent.isDestroyed||this.parent.on(d._26,this.createCalculatedFieldDialog,this)},e.prototype.removeEventListener=function(){this.parent.isDestroyed||this.parent.off(d._26,this.createCalculatedFieldDialog)},e.prototype.destroy=function(){this.menuObj&&!this.menuObj.isDestroyed&&this.menuObj.destroy(),this.treeObj&&!this.treeObj.isDestroyed&&this.treeObj.destroy(),this.dialog&&!this.dialog.isDestroyed&&this.dialog.destroy(),this.inputObj&&!this.inputObj.isDestroyed&&this.inputObj.destroy(),this.confirmPopUp&&!this.confirmPopUp.isDestroyed&&this.confirmPopUp.destroy(),this.accordion&&!this.accordion.isDestroyed&&this.accordion.destroy(),this.menuObj&&(this.menuObj=null),this.treeObj&&(this.treeObj=null),this.dialog&&(this.dialog=null),this.inputObj&&(this.inputObj=null),this.newFields&&(this.newFields=null),this.confirmPopUp&&(this.confirmPopUp=null),this.accordion&&(this.accordion=null),this.curMenu&&(this.curMenu=null)},e}()},function(e,t,i){"use strict";i.d(t,"a",function(){return o});var r=i(0),a=(i.n(r),i(2)),n=i(5),o=(i.n(n),function(){function e(e){this.parent=e,this.parent.contextMenuModule=this}return e.prototype.render=function(){this.renderContextMenu()},e.prototype.renderContextMenu=function(){var e=[{text:this.parent.localeObj.getConstant("addToFilter"),id:this.parent.element.id+"_Filters"},{text:this.parent.localeObj.getConstant("addToRow"),id:this.parent.element.id+"_Rows"},{text:this.parent.localeObj.getConstant("addToColumn"),id:this.parent.element.id+"_Columns"},{text:this.parent.localeObj.getConstant("addToValue"),id:this.parent.element.id+"_Values"}],t={cssClass:a._15+(this.parent.cssClass?" "+this.parent.cssClass:""),items:e,enableRtl:this.parent.enableRtl,locale:this.parent.locale,beforeOpen:this.onBeforeMenuOpen.bind(this),select:this.onSelectContextMenu.bind(this)},o=i.i(r.createElement)("ul",{id:this.parent.element.id+"_PivotContextMenu"});this.parent.element.appendChild(o),this.menuObj=new n.ContextMenu(t),this.menuObj.isStringTemplate=!0,this.menuObj.appendTo(o)},e.prototype.onBeforeMenuOpen=function(e){var t=[].slice.call(e.element.querySelectorAll("li")),n="olap"===this.parent.dataType?this.fieldElement.getAttribute("data-type"):this.fieldElement.querySelector("."+a._13).getAttribute("data-type");if(i.i(r.removeClass)(t,a.E),"CalculatedField"===n||"isMeasureFieldsAvail"===n)for(var o=0,s=t;o<s.length;o++){var l=s[o];l.textContent!==this.parent.localeObj.getConstant("addToValue")&&i.i(r.addClass)([l],a.E)}else if("isMeasureAvail"===n)for(var d=0,h=t;d<h.length;d++){var l=h[d];l.textContent!==this.parent.localeObj.getConstant("addToRow")&&l.textContent!==this.parent.localeObj.getConstant("addToColumn")&&i.i(r.addClass)([l],a.E)}else if("olap"===this.parent.dataType)for(var p=0,u=t;p<u.length;p++){var l=u[p];if(l.textContent===this.parent.localeObj.getConstant("addToValue")){i.i(r.addClass)([l],a.E);break}}},e.prototype.onSelectContextMenu=function(e){if(null!==e.element.textContent){var t=this.fieldElement.getAttribute("data-uid"),i=e.item.id.replace(this.parent.element.id+"_","").toLowerCase();this.parent.pivotCommon.dataSourceUpdate.control="pivotview"===this.parent.getModuleName()?this.parent:this.parent.pivotGridModule?this.parent.pivotGridModule:this.parent,this.parent.pivotCommon.dataSourceUpdate.btnElement=this.fieldElement,this.parent.pivotCommon.dataSourceUpdate.updateDataSource(t,i,-1),this.parent.updateDataSource(!0),this.fieldElement=void 0}},e.prototype.destroy=function(){this.parent.isDestroyed&&this.menuObj&&!this.menuObj.isDestroyed&&(this.menuObj.destroy(),i.i(r.select)("#"+this.parent.element.id+"_PivotContextMenu",document)&&i.i(r.remove)(i.i(r.select)("#"+this.parent.element.id+"_PivotContextMenu",document)))},e}())},function(e,t,i){"use strict";i.d(t,"a",function(){return o});var r=i(0),a=(i.n(r),i(2)),n=i(4),o=(i.n(n),function(){function e(e){this.parent=e}return e.prototype.createErrorDialog=function(e,t,o){var s=i.i(r.createElement)("div",{id:this.parent.parentID+"_ErrorDialog",className:a.Q});this.parent.element.appendChild(s);var l=o?Number(o.style.zIndex)+1:"pivotfieldlist"===this.parent.moduleName&&"Popup"===this.parent.renderMode&&this.parent.control?this.parent.control.dialogRenderer.fieldListDialog.zIndex+1:"pivotfieldlist"===this.parent.moduleName&&"Fixed"===this.parent.renderMode&&this.parent.control?1000002:"pivotview"===this.parent.moduleName&&this.parent.control?1000002:1000001;this.errorPopUp=new n.Dialog({animationSettings:{effect:"Fade"},allowDragging:!1,header:e,content:t,isModal:!0,visible:!0,showCloseIcon:!0,enableRtl:this.parent.enableRtl,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,width:"auto",height:"auto",zIndex:l,position:{X:"center",Y:"center"},buttons:[{click:this.closeErrorDialog.bind(this),buttonModel:{cssClass:a.d+(this.parent.cssClass?" "+this.parent.cssClass:""),content:this.parent.localeObj.getConstant("ok"),isPrimary:!0}}],cssClass:this.parent.cssClass,closeOnEscape:!0,target:document.body,close:this.removeErrorDialog.bind(this)}),this.errorPopUp.isStringTemplate=!0,this.errorPopUp.appendTo(s)},e.prototype.closeErrorDialog=function(){this.errorPopUp.close()},e.prototype.removeErrorDialog=function(){this.errorPopUp&&!this.errorPopUp.isDestroyed&&this.errorPopUp.destroy(),document.getElementById(this.parent.parentID+"_ErrorDialog")&&i.i(r.remove)(document.getElementById(this.parent.parentID+"_ErrorDialog"))},e}())},function(e,t,i){"use strict";i.d(t,"a",function(){return m});var r=i(0),a=(i.n(r),i(2)),n=i(5),o=(i.n(n),i(4)),s=(i.n(o),i(9)),l=(i.n(s),i(8)),d=(i.n(l),i(7)),h=(i.n(d),i(42)),p=(i.n(h),i(73)),u=(i.n(p),i(3)),c=i(1),g=i(10),m=(i.n(g),function(){function e(e){this.parent=e}return e.prototype.createFilterDialog=function(e,t,n,s){var l=this,d=i.i(r.createElement)("div",{id:this.parent.parentID+"_EditorTreeView",className:a._16+" "+("olap"===this.parent.dataType?"e-olap-editor-dialog":"")+(this.parent.isDataOverflow?" "+a._17:""),attrs:{"data-fieldName":t,"aria-label":n}}),h=this.parent.engineModule.fieldList[t].caption,p=this.parent.localeObj.getConstant("filter")+' "'+n+'" '+this.parent.localeObj.getConstant("by");this.filterObject=this.getFilterObject(t),this.isSearchEnabled=!1,this.allowExcelLikeFilter=this.isExcelFilter(t),this.parent.element.appendChild(d),this.dialogPopUp=new o.Dialog({animationSettings:{effect:this.allowExcelLikeFilter?"None":"Fade"},allowDragging:!1,header:this.allowExcelLikeFilter?p:h,content:"",isModal:!0,visible:!0,showCloseIcon:!!this.allowExcelLikeFilter,enableRtl:this.parent.enableRtl,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,width:"320px",height:this.parent.isDataOverflow?this.allowExcelLikeFilter?"440px":"400px":this.allowExcelLikeFilter?"400px":"350px",position:{X:"center",Y:"center"},buttons:[{buttonModel:{cssClass:"e-clear-filter-button"+(this.allowExcelLikeFilter?"":" "+a._18)+(this.parent.cssClass?" "+this.parent.cssClass:""),iconCss:"e-icons e-clear-filter-icon",enableRtl:this.parent.enableRtl,content:this.parent.localeObj.getConstant("clearFilter"),disabled:!this.filterObject}},{buttonModel:{cssClass:a.d+(this.parent.cssClass?" "+this.parent.cssClass:""),content:this.parent.localeObj.getConstant("ok"),isPrimary:!0}},{click:this.closeFilterDialog.bind(this),buttonModel:{cssClass:a.e+(this.parent.cssClass?" "+this.parent.cssClass:""),content:this.parent.localeObj.getConstant("cancel")}}],closeOnEscape:"Popup"!==this.parent.renderMode,target:s,cssClass:this.parent.cssClass,close:this.removeFilterDialog.bind(this)}),this.dialogPopUp.isStringTemplate=!0,this.dialogPopUp.appendTo(d);var u={cancel:!1,fieldName:t,fieldMembers:this.parent.dataSourceSettings.allowMemberFilter?e:[],filterSetting:this.filterObject};("pivotfieldlist"===this.parent.moduleName&&this.parent.control.isPopupView?this.parent.control.pivotGridModule:this.parent.control).trigger(c._6,u,function(a){a.cancel?(l.dialogPopUp.close(),l.dialogPopUp=void 0):(e=a.fieldMembers,l.allowExcelLikeFilter?(l.createTabMenu(e,n,t),i.i(r.addClass)([l.dialogPopUp.element],"e-excel-filter"),l.updateCheckedState()):(l.dialogPopUp.content=l.createTreeView(e,n,t),l.updateCheckedState()),i.i(r.setStyleAttribute)(l.dialogPopUp.element,{visibility:"visible"}),l.allowExcelLikeFilter&&l.dialogPopUp.element.querySelector(".e-dlg-closeicon-btn").focus(),l.memberTreeView.nodeChecked=l.parent.control.pivotButtonModule.nodeStateModified.bind(l.parent.control.pivotButtonModule),l.allMemberSelect.nodeChecked=l.parent.control.pivotButtonModule.nodeStateModified.bind(l.parent.control.pivotButtonModule))})},e.prototype.createTreeView=function(e,t,o){var l=this,d=i.i(r.createElement)("div",{id:this.parent.parentID+"EditorDiv",className:a._19+(this.allowExcelLikeFilter?" e-excelfilter":"")}),h=i.i(r.createElement)("button",{id:this.parent.parentID+"_LevelDiv",className:"e-level-container-class",attrs:{type:"button"}}),p=i.i(r.createElement)("div",{id:this.parent.parentID+"_SearchDiv",attrs:{tabindex:"-1"},className:a._20}),u=this.parent.engineModule.fieldList[o].caption,c=i.i(r.createElement)("input",{attrs:{type:"text",className:a._21}}),g=this.parent.isDataOverflow?this.parent.currentTreeItems.length-this.parent.control.maxNodeLimitInMemberEditor+this.parent.control.localeObj.getConstant("editorDataLimitMsg"):"",m=i.i(r.createElement)("div",{id:this.parent.parentID+"_LabelDiv",attrs:{tabindex:"-1",title:g},className:a._22});this.parent.editorLabelElement=i.i(r.createElement)("label",{className:a._23}),this.parent.editorLabelElement.innerText=g,m.style.display=this.parent.isDataOverflow?"block":"none",m.appendChild(this.parent.editorLabelElement),p.appendChild(c),this.createSortOptions(o,p,e);var f=i.i(r.createElement)("div",{id:this.parent.parentID+"_AllDiv",attrs:{tabindex:"-1"},className:a._24}),v=i.i(r.createElement)("div",{id:this.parent.parentID+"_SelectAllContainer",className:a._25}),S=i.i(r.createElement)("div",{className:a._26+"-outer-div"}),y=i.i(r.createElement)("div",{className:a._26}),b=i.i(r.createElement)("div",{className:a._27+" "+a._18});b.innerText=this.parent.localeObj.getConstant("noMatches"),"olap"!==this.parent.dataType||!this.parent.control.loadOnDemandInMemberEditor||this.parent.engineModule.fieldList[o].isHierarchy||this.parent.engineModule.fieldList[o].isNamedSets||(p.appendChild(h),this.createLevelWrapper(h,o)),f.appendChild(v),d.appendChild(p),d.appendChild(f),d.appendChild(b),this.editorSearch=new s.MaskedTextBox({placeholder:this.parent.localeObj.getConstant("search")+" &#8220"+u+"&#8220",enableRtl:this.parent.enableRtl,cssClass:a._28+(this.parent.cssClass?" "+this.parent.cssClass:""),showClearButton:!0,change:function(e){if("olap"===l.parent.dataType)l.searchOlapTreeView(e,b);else{l.parent.eventBase.searchTreeNodes(e,l.memberTreeView,!1);var t=l.dialogPopUp.element;0===[].slice.call(l.memberTreeView.element.querySelectorAll("li")).length?(l.allMemberSelect.disableNodes([l.allMemberSelect.element.querySelector("li")]),t.querySelector("."+a.d).setAttribute("disabled","disabled"),i.i(r.removeClass)([b],a._18)):(l.allMemberSelect.enableNodes([l.allMemberSelect.element.querySelector("li")]),t.querySelector("."+a.d).removeAttribute("disabled"),i.i(r.addClass)([b],a._18)),l.updateCheckedState()}}}),this.editorSearch.isStringTemplate=!0,this.editorSearch.appendTo(c);var C={"data-fieldName":o,"data-memberId":"all"},x=[{id:"all",name:this.parent.localeObj.getConstant("all"),isSelected:!0,htmlAttributes:C}];if(this.allMemberSelect=new n.TreeView({fields:{dataSource:x,id:"id",text:"name",isChecked:"isSelected"},showCheckBox:!0,expandOn:"None",enableRtl:this.parent.enableRtl,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,nodeClicked:this.nodeCheck.bind(this,!0),keyPress:this.nodeCheck.bind(this,!0),nodeSelected:function(e){i.i(r.removeClass)([e.node],"e-active"),e.cancel=!0},cssClass:this.parent.cssClass}),this.allMemberSelect.isStringTemplate=!0,!i.i(r.isNullOrUndefined)(this.parent.currentTreeItems))for(var w=0;w<this.parent.currentTreeItems.length;w++)(this.parent.currentTreeItems[w].id.indexOf("\n")||this.parent.currentTreeItems[w].id.startsWith("\n"))&&(this.parent.currentTreeItems[w].id=this.parent.currentTreeItems[w].id.replace("\n"," "));return this.allMemberSelect.appendTo(v),S.appendChild(y),d.appendChild(S),this.memberTreeView=new n.TreeView({fields:{dataSource:e,id:"id",text:"name",isChecked:"isSelected",parentID:"pid"},showCheckBox:!0,enableRtl:this.parent.enableRtl,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,nodeChecking:this.validateTreeNode.bind(this),nodeClicked:this.nodeCheck.bind(this,!1),keyPress:this.nodeCheck.bind(this,!1),nodeExpanding:this.updateChildNodes.bind(this),nodeSelected:function(e){i.i(r.removeClass)([e.node],"e-active"),e.cancel=!0},expandOn:"None",cssClass:this.parent.cssClass}),this.memberTreeView.isStringTemplate=!0,this.memberTreeView.appendTo(y),this.parent.isDataOverflow&&this.parent.control.maxNodeLimitInMemberEditor<this.parent.currentTreeItems.length&&d.appendChild(m),d},e.prototype.createSortOptions=function(e,t,n){if("pivot"===this.parent.dataType&&n&&n.length>0){var o=this.parent.engineModule.fieldList[e].sort,s=i.i(r.createElement)("div",{className:a._29+" e-btn-group"+(this.parent.enableRtl?" "+a._30:"")+(this.parent.cssClass?" "+this.parent.cssClass:""),id:this.parent.element.id+"_Member_Sort"});this.parent.element.appendChild(s);var l=i.i(r.createElement)("button",{className:("Ascending"===o?a._31+" ":"")+a._32,id:this.parent.element.id+"_Sort_Ascend",attrs:{type:"button","aria-label":"button"}}),d=i.i(r.createElement)("button",{className:("Descending"===o?a._31+" ":"")+a._32,id:this.parent.element.id+"_Sort_Descend",attrs:{type:"button","aria-label":"button"}}),h=new g.Button({iconCss:a.a+" "+a._33,enableRtl:this.parent.enableRtl,cssClass:this.parent.cssClass,enableHtmlSanitizer:this.parent.enableHtmlSanitizer});h.appendTo(l),h=new g.Button({iconCss:a.a+" "+a._34,enableRtl:this.parent.enableRtl,cssClass:this.parent.cssClass,enableHtmlSanitizer:this.parent.enableHtmlSanitizer}),h.appendTo(d),s.appendChild(l),s.appendChild(d),t.appendChild(s),this.unWireEvent(l),this.unWireEvent(d),this.wireEvent(l,e),this.wireEvent(d,e)}},e.prototype.createLevelWrapper=function(e,t){for(var n=this,o=this.parent.engineModule,s=o.fieldList[t].levels,l=o.fieldList[t].levelCount,d=[],h=0,u=s.length;h<u;h++)d.push({id:s[h].id,text:s[h].name});this.dropMenu=new p.DropDownButton({cssClass:"e-level-drop e-caret-hide"+(this.parent.cssClass?" "+this.parent.cssClass:""),items:d,iconCss:"e-icons e-dropdown-icon",disabled:l===s.length,enableRtl:this.parent.enableRtl,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,beforeOpen:function(e){var o=[].slice.call(e.element.querySelectorAll("li")),s=n.parent.engineModule,l=s.fieldList[t].levelCount;i.i(r.removeClass)(o,a.E);for(var d=0,h=o.length;d<h;d++)d<l&&i.i(r.addClass)([o[d]],a.E)},select:function(e){for(var t,i=n.dialogPopUp.element.getAttribute("data-fieldname"),r=n.parent.engineModule,a=0,o=d.length;a<o;a++)d[a].id===e.item.id&&(t=a);r.getFilterMembers(n.parent.dataSourceSettings,i,t+1,!1,!0)},close:function(){var e=n.parent.engineModule,i=e.fieldList[t].levels;e.fieldList[t].levelCount===i.length?(n.dropMenu.disabled=!0,n.dropMenu.dataBind()):n.dropMenu.disabled=!1}}),this.dropMenu.appendTo(e)},e.prototype.searchOlapTreeView=function(e,t){var n=this;clearTimeout(this.timeOutObj),this.timeOutObj=setTimeout(function(){var o=n.parent.engineModule,s=n.dialogPopUp.element,l=s.getAttribute("data-fieldname"),d=n.parent.control.maxNodeLimitInMemberEditor?n.parent.control.maxNodeLimitInMemberEditor:5e3;if(o.fieldList[l].isHierarchy)n.parent.eventBase.searchTreeNodes(e,n.memberTreeView,!1,!0);else{if(n.dropMenu&&""!==e.value?n.dropMenu.disabled=!0:n.dropMenu.disabled=!1,n.parent.control.loadOnDemandInMemberEditor){var h=o.fieldList[l].levelCount?o.fieldList[l].levelCount:1;o.getSearchMembers(n.parent.dataSourceSettings,l,e.value.toLowerCase(),d,!1,h)}else o.getSearchMembers(n.parent.dataSourceSettings,l,e.value.toLowerCase(),d,!0);n.parent.eventBase.searchTreeNodes(e,n.memberTreeView,!1,!1)}0===[].slice.call(n.memberTreeView.element.querySelectorAll("li")).length?(n.allMemberSelect.disableNodes([n.allMemberSelect.element.querySelector("li")]),s.querySelector("."+a.d).setAttribute("disabled","disabled"),i.i(r.removeClass)([t],a._18)):(n.allMemberSelect.enableNodes([n.allMemberSelect.element.querySelector("li")]),s.querySelector("."+a.d).removeAttribute("disabled"),i.i(r.addClass)([t],a._18)),n.updateCheckedState()},500)},e.prototype.nodeCheck=function(e,t){var a=[t.node];if(t.event.target.classList.contains("e-fullrow")||"Enter"===t.event.key){var n=e?this.allMemberSelect:this.memberTreeView;"true"===n.getNode(t.node).isChecked?n.uncheckAll(a):n.checkAll(a)}else 38!==t.event.keyCode||e||(i.i(r.removeClass)(this.memberTreeView.element.querySelectorAll("li.e-prev-active-node"),"e-prev-active-node"),i.i(r.addClass)(a,"e-prev-active-node"))},e.prototype.applySorting=function(e,t){var n=i.i(r.closest)(t.target,"."+a._32);if(n){var o=[].slice.call(i.i(r.closest)(n,"."+a._29).querySelectorAll("."+a._32));n.querySelector("."+a._33)&&!n.classList.contains(a._31)?(this.updateFilterMembers("Ascending",e),i.i(r.addClass)([n],a._31),i.i(r.removeClass)([o[1]],a._31)):n.querySelector("."+a._34)&&!n.classList.contains(a._31)?(this.updateFilterMembers("Descending",e),i.i(r.addClass)([n],a._31),i.i(r.removeClass)([o[0]],a._31)):(this.updateFilterMembers("None",e),i.i(r.removeClass)(o,a._31))}},e.prototype.updateFilterMembers=function(e,t){var i=this.parent.engineModule.fieldList[t],r="None"===e?u.a.getClonedData(i.dateMember):this.parent.currentTreeItems.slice(),a=!!i.isAlphanumeric||void 0,n=!1,o=i&&i.membersOrder?i.membersOrder.slice():[],s={fieldName:t,sortOrder:e,members:o&&o.length>0?o:Object.keys(r),IsOrderChanged:!1};o&&o.length>0?r=u.a.applyCustomSort(s,r,a):(r=u.a.applyHeadersSort(r,s.sortOrder,a),n=!0);var l="pivotfieldlist"===this.parent.moduleName&&this.parent.control.isPopupView?this.parent.control.pivotGridModule:this.parent.control;if(n){for(var d=[],h=0,p=0;h<r.length;h++)"Grand Total"!==r[h].actualText&&(d[p++]=r[h].actualText);s.members=d}l.trigger(c.X,s),s.IsOrderChanged&&(r=u.a.applyCustomSort(s,r,a,!0)),this.parent.currentTreeItems=[],this.parent.searchTreeItems=[];for(var g=[],m=t.replace(/[^a-zA-Z0-9 ]/g,"_"),f=0,v=r.length;f<v;f++){if("None"===e){var S=(this.parent.isDateField?r[f].formattedText:r[f].actualText).toString(),y={"data-fieldName":t,"data-memberId":r[f].actualText.toString()},b={id:m+"_"+(f+1),htmlAttributes:y,actualText:r[f].actualText,name:S,isSelected:this.parent.currentTreeItemsPos[r[f].actualText].isSelected};this.parent.currentTreeItems.push(b),""!==this.editorSearch.value?b.name.toLowerCase().indexOf(this.editorSearch.value.toLowerCase())>-1&&(this.parent.searchTreeItems.push(b),g.push(b)):(this.parent.searchTreeItems.push(b),g.push(b))}else this.parent.currentTreeItems.push(r[f]),""!==this.editorSearch.value?r[f].name.toLowerCase().indexOf(this.editorSearch.value.toLowerCase())>-1&&(this.parent.searchTreeItems.push(r[f]),g.push(r[f])):(this.parent.searchTreeItems.push(r[f]),g.push(r[f]));this.parent.currentTreeItemsPos[r[f].actualText].index=f}var C=this.memberTreeView.fields.dataSource.length;this.memberTreeView.fields={dataSource:g.slice(0,C),id:"id",text:"name",isChecked:"isSelected",parentID:"pid"},this.memberTreeView.dataBind()},e.prototype.updateChildNodes=function(e){if("olap"===this.parent.dataType){var t=this.parent.engineModule,a=e.node.getAttribute("data-fieldname"),n=t.fieldList[a],o=[];if(n&&n.filterMembers.length>0&&!this.isSearchEnabled&&!n.members[e.nodeData.id].isNodeExpand){for(var s=[],l=0,d=n.filterMembers;l<d.length;l++){var h=d[l];h.pid===e.nodeData.id.toString()&&s.push(h)}0===s.length&&(n.childMembers=[],t.getChildMembers(this.parent.dataSourceSettings,e.nodeData.id.toString(),a),s=n.childMembers,n.childMembers=[]);var p=u.a.getClonedData(s),c=this.memberTreeView.fields.dataSource,g=!1;i.i(r.isNullOrUndefined)(this.filterObject)||(g="Include"===this.filterObject.type,o=this.filterObject.items?this.filterObject.items:[]),p=this.updateChildData(g,p,o,a,e.nodeData),p=this.parent.eventBase.sortOlapFilterData(p,t.fieldList[a].sort);for(var m=0,f=p;m<f.length;m++){var v=f[m];c.push(v)}n.members[e.nodeData.id].isNodeExpand=!0,this.memberTreeView.addNodes(p,e.node)}}},e.prototype.updateChildData=function(e,t,i,r,a){for(var n=Object.keys(this.parent.currentTreeItemsPos).length,o=this.parent.engineModule.fieldList[r],s=[],l=1,d=0,h=t;d<h.length;d++){var p=h[d],u=p,c=p.id.toString();o.members[c].isNodeExpand=!1,p.isSelected="true"===a.isChecked,l<=this.parent.control.maxNodeLimitInMemberEditor&&s.push(u),this.parent.currentTreeItems.push(u),this.parent.searchTreeItems.push(u),this.parent.currentTreeItemsPos[c]={index:n,isSelected:u.isSelected},n++,l++}return this.parent.isDataOverflow=!1,s},e.prototype.createTabMenu=function(e,t,o){var s=i.i(r.createElement)("div",{id:this.parent.parentID+"_FilterTabContainer",className:a._35,attrs:{tabindex:"-1"}});this.dialogPopUp.content=s,this.dialogPopUp.dataBind();for(var l=["Label","Value","Include","Exclude"],d="((-|\\+)?[0-9]+(\\.[0-9]+)?)+",h=Object.keys(this.parent.engineModule.fieldList[o].members)[0],p=this.parent.engineModule.fieldList[o].type,c=u.a.getFieldByName(o,this.parent.dataSourceSettings.formatSettings),g=[{header:{text:this.parent.localeObj.getConstant("member"),iconCss:this.filterObject&&l.indexOf(this.filterObject.type)>1?a._36:""},content:this.createTreeView(e,t,o)}],m=0,f=l;m<f.length;m++){var v=f[m];if("Label"===v&&this.parent.dataSourceSettings.allowLabelFilter||"Value"===v&&this.parent.dataSourceSettings.allowValueFilter){var S="Label"===v&&h&&h.match(d)&&h.match(d)[0].length===h.length&&"number"===p?"Number":"Label"===v&&h&&"Invalid Date"!==new Date(h).toString()&&(c&&c.type||this.filterObject&&"Date"===this.filterObject.type)?"Date":v,y={header:{text:"Number"===S?this.parent.localeObj.getConstant("label"):this.parent.localeObj.getConstant(S.toLowerCase()),iconCss:this.filterObject&&this.filterObject.type===S?a._36:""},content:this.createCustomFilter(o,this.filterObject&&this.filterObject.type===S?this.filterObject:void 0,S.toLowerCase())};g.push(y)}}var b=this.filterObject?["Label","Date","Number"].indexOf(this.filterObject.type)>=0?1:"Value"===this.filterObject.type?this.parent.dataSourceSettings.allowLabelFilter&&this.parent.dataSourceSettings.allowValueFilter?2:1:0:0;b=this.parent.dataSourceSettings.allowMemberFilter||0!==b?b:1,this.tabObj=new n.Tab({heightAdjustMode:"Auto",items:g,height:"100%",selectedItem:b,enableRtl:this.parent.enableRtl,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,cssClass:this.parent.cssClass}),this.tabObj.isStringTemplate=!0,this.tabObj.appendTo(s),this.parent.dataSourceSettings.allowMemberFilter||this.tabObj.hideTab(0),b>0&&i.i(r.addClass)([this.dialogPopUp.element.querySelector(".e-filter-div-content."+(1===b&&this.parent.dataSourceSettings.allowLabelFilter?"e-label-filter":"e-value-filter"))],"e-selected-tab")},e.prototype.createCustomFilter=function(e,t,n){for(var o=[],s=[],l=[],d=this.parent.dataSourceSettings.values,h="DoesNotEquals",p=0,u=0,c={label:["Equals","DoesNotEquals","BeginWith","DoesNotBeginWith","EndsWith","DoesNotEndsWith","Contains","DoesNotContains","GreaterThan","GreaterThanOrEqualTo","LessThan","LessThanOrEqualTo","Between","NotBetween"],date:["Equals","DoesNotEquals","Before","BeforeOrEqualTo","After","AfterOrEqualTo","Between","NotBetween"],value:["Equals","DoesNotEquals","GreaterThan","GreaterThanOrEqualTo","LessThan","LessThanOrEqualTo","Between","NotBetween"]},g=["Between","NotBetween"],m="label"===n?c.label:"date"===n?c.date:c.value,f=0,v=m;f<v.length;f++){var S=v[f];h=t&&S===t.condition?m.indexOf(t.condition)>=0?t.condition:m[0]:h,o.push({value:S,text:this.parent.localeObj.getConstant(S)})}for(var y=d.length;y--;)s.unshift({value:d[y].name,text:d[y].caption?d[y].caption:d[y].name}),p=t&&"Value"===t.type&&t.measure===d[y].name&&t.condition===h?y:p;if("olap"===this.parent.dataType){var b=this.parent.engineModule,C=b.fieldList[e].levels;if(this.parent.engineModule.fieldList[e].isHierarchy){for(var x=void 0,w=this.parent.engineModule.fieldListData,T=0,M=w;T<M.length;T++){var _=M[T];if(_&&_.pid===e){x=_;break}}l.push({value:x?x.id:e,text:x?x.caption:b.fieldList[e].name}),u=0,t&&t.name===e&&t.type.toLowerCase()===n&&(l[l.length-1].iconClass=a.a+" "+a._37)}else for(var D=0,O=C.length;D<O;D++){u=t&&t.selectedField===C[D].id?D:u,l.push({value:C[D].id,text:C[D].name});for(var P=0,E=this.parent.dataSourceSettings.filterSettings;P<E.length;P++){var N=E[P];if(N.name===e&&N.selectedField===C[D].id&&N.type.toLowerCase()===n){l[l.length-1].iconClass=a.a+" "+a._37;break}}}}var F=i.i(r.createElement)("div",{className:a._38+" e-"+(["date","number"].indexOf(n)>=0?"label":n)+"-filter"+(this.parent.isDataOverflow?" "+a._17:""),id:this.parent.parentID+"_"+n+"_filter_div_content",attrs:{"data-type":n,"data-fieldName":e,"data-operator":h,"data-selectedField":"olap"===this.parent.dataType&&l.length>0?l[u].value.toString():"","data-measure":this.parent.dataSourceSettings.values.length>0?this.parent.dataSourceSettings.values[p].name:"","data-value1":t&&h===t.condition&&t.value1?t.value1.toString():"","data-value2":t&&h===t.condition&&t.value2?t.value2.toString():""}}),I=i.i(r.createElement)("div",{className:a._39});I.innerText=this.parent.localeObj.getConstant(n+"TextContent");var L=i.i(r.createElement)("div",{className:a._40+" "+(-1===g.indexOf(h)?a._18:"")});L.innerText=this.parent.localeObj.getConstant("And");var A=i.i(r.createElement)("div",{className:a._41}),R=i.i(r.createElement)("div",{className:a._42}),k=i.i(r.createElement)("div",{className:"e-level-option-container "+("olap"===this.parent.dataType?"":a._18)}),j=i.i(r.createElement)("div",{className:"e-measure-option-container "+(["label","date","number"].indexOf(n)>=0?a._18:"")}),H=i.i(r.createElement)("div",{className:"e-condition-option-container"}),q=i.i(r.createElement)("div",{className:a._43}),V=i.i(r.createElement)("div",{id:this.parent.parentID+"_"+n+"_level_option_container"}),B=i.i(r.createElement)("div",{id:this.parent.parentID+"_"+n+"_measure_option_container"}),U=i.i(r.createElement)("div",{id:this.parent.parentID+"_"+n+"_contition_option_container"}),G=i.i(r.createElement)("div",{className:a._44}),z=i.i(r.createElement)("div",{className:a._45+" "+(-1===g.indexOf(h)?a._18:"")}),W=i.i(r.createElement)("input",{id:this.parent.parentID+"_"+n+"_input_option_1",attrs:{type:"text"}}),Q=i.i(r.createElement)("input",{id:this.parent.parentID+"_"+n+"_input_option_2",attrs:{type:"text"}});return G.appendChild(W),z.appendChild(Q),k.appendChild(V),k.appendChild(A.cloneNode(!0)),j.appendChild(B),j.appendChild(A),H.appendChild(U),R.appendChild(k),R.appendChild(j),R.appendChild(H),q.appendChild(G),q.appendChild(L),q.appendChild(z),this.createElements(t,g,B,U,W,Q,s,o,p,h,n,V,l,u),F.appendChild(I),F.appendChild(R),F.appendChild(q),F},e.prototype.createElements=function(e,t,n,o,p,u,c,g,m,f,v,S,y,b){var C=this;if("olap"===this.parent.dataType){var x=new d.DropDownList({dataSource:y,enableRtl:this.parent.enableRtl,fields:{value:"value",text:"text",iconCss:"iconClass"},index:b,cssClass:a._46+(this.parent.cssClass?" "+this.parent.cssClass:""),width:"100%",change:function(e){var t=C.dialogPopUp.element.querySelector(".e-selected-tab"),a=t.getAttribute("data-fieldName"),n=t.getAttribute("data-type");if(!i.i(r.isNullOrUndefined)(t)){C.updateInputValues(t,n,p,u),i.i(l.setStyleAndAttributes)(t,{"data-selectedField":e.value});for(var o,s=0,d=C.parent.dataSourceSettings.filterSettings;s<d.length;s++){var h=d[s];if(h.name===a&&h.selectedField===e.value){o=h;break}}if(o){"value"===n&&o.measure&&""!==o.measure&&(w.value=o.measure?o.measure:c[0].value),o.condition?T.value=o.condition?o.condition:"DoesNotEquals":T.value="DoesNotEquals";var g=void 0,m=void 0;"value"===n?(g=p.ej2_instances[0],m=u.ej2_instances[0],g&&(g.value=o.value1?parseInt(o.value1,10):void 0),m&&(m.value=o.value2?parseInt(o.value2,10):void 0)):(g=p.ej2_instances[0],m=u.ej2_instances[0],g&&(g.value=o.value1?o.value1:""),m&&(m.value=o.value2?o.value2:""))}C.updateInputValues(t,n,p,u)}}});x.isStringTemplate=!0,x.appendTo(S)}var w=new d.DropDownList({dataSource:c,enableRtl:this.parent.enableRtl,fields:{value:"value",text:"text"},index:m,cssClass:a._11+(this.parent.cssClass?" "+this.parent.cssClass:""),width:"100%",change:function(e){var t=C.dialogPopUp.element.querySelector(".e-selected-tab");i.i(r.isNullOrUndefined)(t)||(C.updateInputValues(t,v,p,u),i.i(l.setStyleAndAttributes)(t,{"data-measure":e.value}))}});w.isStringTemplate=!0,w.appendTo(n);var T=new d.DropDownList({dataSource:g,enableRtl:this.parent.enableRtl,fields:{value:"value",text:"text"},value:f,cssClass:a._12+(this.parent.cssClass?" "+this.parent.cssClass:""),width:"100%",change:function(e){var n=C.dialogPopUp.element.querySelector(".e-selected-tab");if(!i.i(r.isNullOrUndefined)(n)){C.updateInputValues(n,v,p,u);for(var o=[a._40,a._45],s=0,d=o;s<d.length;s++){var h=d[s];t.indexOf(e.value)>=0?i.i(r.removeClass)([n.querySelector("."+h)],a._18):i.i(r.addClass)([n.querySelector("."+h)],a._18)}i.i(l.setStyleAndAttributes)(n,{"data-operator":e.value})}}});if(T.isStringTemplate=!0,T.appendTo(o),"date"===v){var M=new h.DateTimePicker({placeholder:this.parent.localeObj.getConstant("chooseDate"),enableRtl:this.parent.enableRtl,format:"dd/MM/yyyy hh:mm:ss a",showClearButton:!0,value:e&&f===e.condition?"string"==typeof e.value1?new Date(e.value1):e.value1:null,change:function(e){var t=C.dialogPopUp.element.querySelector(".e-selected-tab");i.i(r.isNullOrUndefined)(t)||i.i(l.setStyleAndAttributes)(t,{"data-value1":e.value,"data-value2":_.value})},width:"100%",cssClass:this.parent.cssClass}),_=new h.DateTimePicker({placeholder:this.parent.localeObj.getConstant("chooseDate"),enableRtl:this.parent.enableRtl,format:"dd/MM/yyyy hh:mm:ss a",showClearButton:!0,value:e&&f===e.condition?"string"==typeof e.value2?new Date(e.value2):e.value2:null,change:function(e){var t=C.dialogPopUp.element.querySelector(".e-selected-tab");i.i(r.isNullOrUndefined)(t)||i.i(l.setStyleAndAttributes)(t,{"data-value1":M.value,"data-value2":e.value})},width:"100%",cssClass:this.parent.cssClass});M.isStringTemplate=!0,M.appendTo(p),_.isStringTemplate=!0,_.appendTo(u)}else if("value"===v){var D=new s.NumericTextBox({placeholder:this.parent.localeObj.getConstant("enterValue"),enableRtl:this.parent.enableRtl,showClearButton:!0,format:"###.##",value:e&&f===e.condition?parseInt(e.value1,10):void 0,change:function(e){var t=C.dialogPopUp.element.querySelector(".e-selected-tab");i.i(r.isNullOrUndefined)(t)||i.i(l.setStyleAndAttributes)(t,{"data-value1":e.value?e.value.toString():"0","data-value2":O.value?O.value.toString():"0"})},width:"100%",cssClass:this.parent.cssClass}),O=new s.NumericTextBox({placeholder:this.parent.localeObj.getConstant("enterValue"),enableRtl:this.parent.enableRtl,showClearButton:!0,format:"###.##",value:e&&f===e.condition?parseInt(e.value2,10):void 0,change:function(e){var t=C.dialogPopUp.element.querySelector(".e-selected-tab");i.i(r.isNullOrUndefined)(t)||i.i(l.setStyleAndAttributes)(t,{"data-value1":D.value?D.value.toString():"0","data-value2":e.value?e.value.toString():"0"})},width:"100%",cssClass:this.parent.cssClass});D.isStringTemplate=!0,D.appendTo(p),O.isStringTemplate=!0,O.appendTo(u)}else{var P=new s.MaskedTextBox({placeholder:this.parent.localeObj.getConstant("enterValue"),enableRtl:this.parent.enableRtl,showClearButton:!0,value:e&&f===e.condition?e.value1:"",change:function(e){var t=C.dialogPopUp.element.querySelector(".e-selected-tab");i.i(r.isNullOrUndefined)(t)||i.i(l.setStyleAndAttributes)(t,{"data-value1":e.value,"data-value2":E.value})},width:"100%",cssClass:this.parent.cssClass}),E=new s.MaskedTextBox({placeholder:this.parent.localeObj.getConstant("enterValue"),enableRtl:this.parent.enableRtl,showClearButton:!0,value:e&&f===e.condition?e.value2:"",change:function(e){var t=C.dialogPopUp.element.querySelector(".e-selected-tab");i.i(r.isNullOrUndefined)(t)||i.i(l.setStyleAndAttributes)(t,{"data-value1":P.value,"data-value2":e.value})},width:"100%",cssClass:this.parent.cssClass});P.isStringTemplate=!0,P.appendTo(p),E.isStringTemplate=!0,E.appendTo(u)}},e.prototype.updateInputValues=function(e,t,a,n){var o,s;if("date"===t){var d=a.ej2_instances[0],h=n.ej2_instances[0];o=i.i(r.isNullOrUndefined)(d.value)?"":d.value.toString(),s=i.i(r.isNullOrUndefined)(h.value)?"":h.value.toString()}else{var d=a.ej2_instances[0],h=n.ej2_instances[0];o=d.value,s=h.value}i.i(l.setStyleAndAttributes)(e,{"data-value1":o,"data-value2":s})},e.prototype.validateTreeNode=function(e){e.node.classList.contains(a._18)&&(e.cancel=!0)},e.prototype.updateCheckedState=function(){var e=this.dialogPopUp.element,t=[].slice.call(this.memberTreeView.element.querySelectorAll("li")),n=e.getAttribute("data-fieldname"),o=this.getUnCheckedNodes(n),s=this.getCheckedNodes(n),l=this.allMemberSelect.element.querySelector("li").querySelector("span."+a._47);t.length>0?s>0?(o>0?(i.i(r.removeClass)([l],a._48),i.i(r.addClass)([l],a._49)):0===o&&(i.i(r.removeClass)([l],a._49),i.i(r.addClass)([l],a._48)),this.dialogPopUp.buttons[0].buttonModel.disabled=!1,e.querySelector("."+a.d).removeAttribute("disabled")):o>0&&0===s&&(i.i(r.removeClass)([l],[a._48,a._49]),this.getCheckedNodes(n)===s&&(this.dialogPopUp.buttons[0].buttonModel.disabled=!0,e.querySelector("."+a.d).setAttribute("disabled","disabled"))):(this.dialogPopUp.buttons[0].buttonModel.disabled=!0,e.querySelector("."+a.d).setAttribute("disabled","disabled"))},e.prototype.getCheckedNodes=function(e){var t=this.parent.engineModule,i=[],r=[];if("olap"===this.parent.dataType&&t&&!t.fieldList[e].isHierarchy)return i=this.memberTreeView.getAllCheckedNodes(),i.length;for(var a=0,n=this.parent.searchTreeItems;a<n.length;a++){var o=n[a];o.isSelected&&r.push(o)}return r.length},e.prototype.getUnCheckedNodes=function(e){var t=[],i=[],r=this.parent.engineModule;if("olap"===this.parent.dataType&&r&&!r.fieldList[e].isHierarchy)return i=this.memberTreeView.getAllCheckedNodes(),this.memberTreeView.fields.dataSource.length-i.length;for(var a=0,n=this.parent.searchTreeItems;a<n.length;a++){var o=n[a];o.isSelected||t.push(o)}return t.length},e.prototype.isExcelFilter=function(e){for(var t=!1,i=0,r=this.parent.dataSourceSettings.filters;i<r.length;i++){if(r[i].name===e){t=!0;break}}return!(t||!this.parent.dataSourceSettings.allowLabelFilter&&!this.parent.dataSourceSettings.allowValueFilter)},e.prototype.getFilterObject=function(e){var t=u.a.getFilterItemByName(e,u.a.cloneFilterSettings(this.parent.dataSourceSettings.filterSettings));if(t&&(["Label","Date","Number"].indexOf(t.type)>=0&&this.parent.dataSourceSettings.allowLabelFilter||"Value"===t.type&&this.parent.dataSourceSettings.allowValueFilter||["Include","Exclude"].indexOf(t.type)>=0&&this.parent.eventBase.isValidFilterItemsAvail(e,t)))return t},e.prototype.wireEvent=function(e,t){r.EventHandler.add(e,"click",this.applySorting.bind(this,t),this)},e.prototype.unWireEvent=function(e){r.EventHandler.remove(e,"click",this.applySorting)},e.prototype.closeFilterDialog=function(){this.allowExcelLikeFilter&&this.tabObj&&!this.tabObj.isDestroyed&&this.tabObj.destroy(),this.dropMenu&&!this.dropMenu.isDestroyed&&this.dropMenu.destroy(),this.memberTreeView&&!this.memberTreeView.isDestroyed&&this.memberTreeView.destroy(),this.allMemberSelect&&!this.allMemberSelect.isDestroyed&&this.allMemberSelect.destroy(),this.editorSearch&&!this.editorSearch.isDestroyed&&this.editorSearch.destroy(),document.getElementById(this.parent.parentID+"_LevelDiv-popup")&&i.i(r.remove)(document.getElementById(this.parent.parentID+"_LevelDiv-popup")),this.dialogPopUp.close()},e.prototype.removeFilterDialog=function(){this.dialogPopUp&&!this.dialogPopUp.isDestroyed&&(this.dialogPopUp.destroy(),setTimeout(this.setFocus.bind(this))),document.getElementById(this.parent.parentID+"_EditorTreeView")&&i.i(r.remove)(document.getElementById(this.parent.parentID+"_EditorTreeView"))},e.prototype.setFocus=function(){if(this.parent.control.pivotButtonModule.parentElement)for(var e=[].slice.call(this.parent.control.pivotButtonModule.parentElement.querySelectorAll(".e-pivot-button")),t=0,i=e;t<i.length;t++){var r=i[t];if(r.getAttribute("data-uid")===this.parent.control.pivotButtonModule.fieldName){r.focus();break}}},e}())},function(e,t,i){"use strict";i.d(t,"a",function(){return n});var r=i(0),a=(i.n(r),i(2)),n=function(){function e(e){this.parent=e}return e.prototype.render=function(){if(!this.parent.isAdaptive){var e=i.i(r.createElement)("div",{className:a._169+" "+("olap"===this.parent.dataType?a._170:"")});this.leftAxisPanel=i.i(r.createElement)("div",{className:a._118}),this.rightAxisPanel=i.i(r.createElement)("div",{className:a._119}),this.parent.dialogRenderer.parentElement.appendChild(e),e.appendChild(this.leftAxisPanel),e.appendChild(this.rightAxisPanel),this.axisTable=e,this.renderAxisTable()}this.parent.axisFieldModule.render()},e.prototype.renderAxisTable=function(){for(var e=["filters","rows","columns","values"],t=0,n=e.length;t<n;t++){var o=i.i(r.createElement)("div",{className:a._150+"-"+e[t]}),s=i.i(r.createElement)("div",{className:a._121+"-container"}),l=i.i(r.createElement)("div",{className:a._171,attrs:{title:this.parent.localeObj.getConstant(e[t])}});l.innerText=this.parent.localeObj.getConstant(e[t]),s.appendChild(this.getIconupdate(e[t])),s.appendChild(l);var d=i.i(r.createElement)("div",{className:a._152+" e-"+e[t]}),h=void 0;h="rows"===e[t]?this.parent.localeObj.getConstant("dropRowPrompt"):"columns"===e[t]?this.parent.localeObj.getConstant("dropColPrompt"):"values"===e[t]?this.parent.localeObj.getConstant("dropValPrompt"):this.parent.localeObj.getConstant("dropFilterPrompt");var p=i.i(r.createElement)("span",{className:a._151});p.innerText=h;new r.Droppable(d,{});o.appendChild(s),o.appendChild(d),o.appendChild(p),t<=1?this.leftAxisPanel.appendChild(o):this.rightAxisPanel.appendChild(o),this.unWireEvent(d),this.wireEvent(d)}},e.prototype.getIconupdate=function(e){var t=i.i(r.createElement)("span",{attrs:{tabindex:"-1","aria-disabled":"false"},className:a._121+"-icon-container"}),n=i.i(r.createElement)("span",{attrs:{tabindex:"-1","aria-disabled":"false"},className:a.a+" "+a._121+"-"+e});return t.appendChild(n),t},e.prototype.wireEvent=function(e){r.EventHandler.add(e,"mouseover",this.updateDropIndicator,this),r.EventHandler.add(e,"mouseleave",this.updateDropIndicator,this)},e.prototype.unWireEvent=function(e){r.EventHandler.remove(e,"mouseover",this.updateDropIndicator),r.EventHandler.remove(e,"mouseleave",this.updateDropIndicator)},e.prototype.updateDropIndicator=function(e){var t=this.parent.dialogRenderer.parentElement;if(this.parent.isDragging&&e.target.classList.contains(a._152)&&"mouseover"===e.type){i.i(r.removeClass)([].slice.call(t.querySelectorAll("."+a._147)),a._148),i.i(r.removeClass)([].slice.call(t.querySelectorAll("."+a._147+"-last")),a._148);var n=[].slice.call(e.target.querySelectorAll("."+a._145));n.length>0&&i.i(r.addClass)([n[n.length-1].querySelector("."+a._147+"-last")],a._148)}else this.parent.isDragging&&(e.target.classList.contains(a._146)||"mouseleave"!==e.type)||(i.i(r.removeClass)([].slice.call(t.querySelectorAll("."+a._147)),a._148),i.i(r.removeClass)([].slice.call(t.querySelectorAll("."+a._147+"-last")),a._148))},e}()},function(e,t,i){"use strict";i.d(t,"a",function(){return h});var r=i(0),a=(i.n(r),i(2)),n=i(4),o=(i.n(n),i(10)),s=(i.n(o),i(5)),l=(i.n(s),i(1)),d=i(3),h=function(){function e(e){this.parent=e}return e.prototype.render=function(){var e=i.i(r.createElement)("div",{id:this.parent.element.id+"_Container",className:a._190+" "+("olap"===this.parent.dataType?a._191:""),styles:"width:"+this.parent.element.style.width});this.parent.isAdaptive?i.i(r.addClass)([e],a._168):i.i(r.removeClass)([e],a._168),this.parent.enableRtl?i.i(r.addClass)([e],a._30):i.i(r.removeClass)([e],a._30),this.parent.cssClass&&i.i(r.addClass)([e],this.parent.cssClass),this.parent.enableFieldSearching?i.i(r.addClass)([e],a._192):i.i(r.removeClass)([e],a._192),this.parentElement=i.i(r.createElement)("div",{className:a._193}),this.parent.element.appendChild(e),this.parent.isAdaptive&&(e.removeAttribute("style"),this.parentElement=i.i(r.createElement)("div",{className:a._194}),this.renderAdaptiveLayout(e)),"Popup"===this.parent.renderMode?(this.renderFieldListDialog(e),this.unWireDialogEvent(this.parent.element.querySelector("."+a._85)),this.wireDialogEvent(this.parent.element.querySelector("."+a._85))):this.renderStaticLayout(e)},e.prototype.renderStaticLayout=function(e){if(!this.parent.isAdaptive){var t=i.i(r.createElement)("div",{className:a._195}),n=i.i(r.createElement)("div",{className:a._196});n.innerText=this.parent.localeObj.getConstant("staticFieldList"),t.appendChild(n),t.appendChild(this.createCalculatedButton()),i.i(r.addClass)([e],a._197),e.appendChild(t),e.appendChild(this.parentElement),i.i(r.addClass)([e],a._197),this.parent.allowDeferLayoutUpdate&&(e.appendChild(this.createDeferUpdateButtons()),this.renderDeferUpdateButtons())}},e.prototype.renderDeferUpdateButtons=function(){this.parent.allowDeferLayoutUpdate&&(this.deferUpdateCheckBox=new o.CheckBox({label:this.parent.localeObj.getConstant("deferLayoutUpdate"),checked:!0,enableRtl:this.parent.enableRtl,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,locale:this.parent.locale,change:this.onCheckChange.bind(this),cssClass:this.parent.cssClass}),this.deferUpdateCheckBox.isStringTemplate=!0,this.deferUpdateCheckBox.appendTo("#"+this.parent.element.id+"DeferUpdateCheckBox"),this.deferUpdateApplyButton=new o.Button({cssClass:a._198+" "+a._199+("Popup"===this.parent.renderMode?" "+a._200:"")+(this.parent.cssClass?" "+this.parent.cssClass:""),content:this.parent.localeObj.getConstant("apply"),enableRtl:this.parent.enableRtl,locale:this.parent.locale,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,isPrimary:!0}),this.deferUpdateApplyButton.isStringTemplate=!0,this.deferUpdateApplyButton.appendTo("#"+this.parent.element.id+"_DeferUpdateButton1"),this.deferUpdateApplyButton.element.onclick="Fixed"===this.parent.renderMode?this.applyButtonClick.bind(this):this.onDeferUpdateClick.bind(this)),this.deferUpdateCancelButton=new o.Button({cssClass:a._201+" "+a.e+("Popup"===this.parent.renderMode?" "+a._200:"")+(this.parent.cssClass?" "+this.parent.cssClass:""),content:this.parent.allowDeferLayoutUpdate?this.parent.localeObj.getConstant("cancel"):this.parent.localeObj.getConstant("close"),enableRtl:this.parent.enableRtl,isPrimary:!this.parent.allowDeferLayoutUpdate,locale:this.parent.locale,enableHtmlSanitizer:this.parent.enableHtmlSanitizer}),this.deferUpdateCancelButton.isStringTemplate=!0,this.deferUpdateCancelButton.appendTo("#"+this.parent.element.id+"_DeferUpdateButton2"),this.deferUpdateCancelButton.element.onclick=this.onCloseFieldList.bind(this)},e.prototype.createDeferUpdateButtons=function(){var e=i.i(r.createElement)("div",{className:a._202});if(this.parent.allowDeferLayoutUpdate){var t=i.i(r.createElement)("div",{className:a._203,attrs:{title:this.parent.localeObj.getConstant("deferLayoutUpdate")}}),n=i.i(r.createElement)("input",{id:this.parent.element.id+"DeferUpdateCheckBox"});t.appendChild(n),e.appendChild(t)}var o=i.i(r.createElement)("div",{className:a._204});if(this.parent.allowDeferLayoutUpdate){var s=i.i(r.createElement)("button",{id:this.parent.element.id+"_DeferUpdateButton1",attrs:{type:"button",title:this.parent.localeObj.getConstant("apply")}});o.appendChild(s)}var l=i.i(r.createElement)("button",{id:this.parent.element.id+"_DeferUpdateButton2",attrs:{type:"button",title:this.parent.localeObj.getConstant("cancel")}});return o.appendChild(l),e.appendChild(o),e},e.prototype.onCheckChange=function(e){e.checked&&(this.parent.clonedDataSource=i.i(r.extend)({},this.parent.dataSourceSettings,null,!0),"olap"===this.parent.dataType&&(this.parent.clonedFieldListData=d.a.cloneOlapFieldSettings(this.parent.olapEngineModule.fieldListData)),this.parent.clonedFieldList=d.a.getClonedFieldList(this.parent.pivotFieldList)),this.parent.allowDeferLayoutUpdate=!this.parent.allowDeferLayoutUpdate,"Fixed"===this.parent.renderMode?(this.deferUpdateApplyButton.setProperties({disabled:!this.parent.allowDeferLayoutUpdate}),this.deferUpdateCancelButton.setProperties({disabled:!this.parent.allowDeferLayoutUpdate})):this.parent.allowDeferLayoutUpdate?(this.deferUpdateApplyButton.element.style.display="",this.deferUpdateCancelButton.setProperties({content:this.parent.localeObj.getConstant("cancel")}),this.deferUpdateCancelButton.isPrimary=!1):(this.deferUpdateApplyButton.element.style.display="none",this.deferUpdateCancelButton.setProperties({content:this.parent.localeObj.getConstant("close")}),this.deferUpdateCancelButton.isPrimary=!0),this.onCloseFieldList(null,!0)},e.prototype.applyButtonClick=function(){"pivotfieldlist"===this.parent.getModuleName()&&this.parent.allowDeferLayoutUpdate&&(this.parent.pivotChange=!1),this.parent.isDeferUpdateApplied=!0,this.parent.updateDataSource(!1);var e=this.parent;e.axisFieldModule.render(),e.clonedDataSource=i.i(r.extend)({},e.dataSourceSettings,null,!0),"olap"===this.parent.dataType&&(this.parent.clonedFieldListData=d.a.cloneOlapFieldSettings(this.parent.olapEngineModule.fieldListData)),e.clonedFieldList=d.a.getClonedFieldList(e.pivotFieldList)},e.prototype.onCloseFieldList=function(e,t){if((this.parent.allowDeferLayoutUpdate||t)&&(!this.parent.isPopupView||this.parent.pivotGridModule&&""!==this.parent.pivotGridModule.actionObj.actionName||""!==this.parent.actionObj.actionName)){if(this.parent.setProperties({dataSourceSettings:this.parent.clonedDataSource.properties},!0),"olap"===this.parent.dataType)if(this.parent.olapEngineModule.fieldList=d.a.getClonedFieldList(this.parent.clonedFieldList),this.parent.isPopupView)this.parent.isPopupView&&this.parent.clonedFieldListData&&Object.keys(this.parent.clonedFieldListData).length>0&&(this.parent.olapEngineModule.fieldListData=this.parent.clonedFieldListData);else for(var i=0,r=Object.keys(this.parent.clonedFieldList);i<r.length;i++){var a=r[i],n=this.parent.clonedFieldList[a];this.parent.olapEngineModule.updateFieldlistData(n.id,n.isSelected)}else this.parent.engineModule.fieldList=d.a.getClonedFieldList(this.parent.clonedFieldList);this.parent.updateDataSource(!1,!0)}this.parent.allowDeferLayoutUpdate&&this.parent.isPopupView&&this.parent.pivotGridModule&&!this.parent.isAdaptive&&(this.parent.pivotGridModule.actionObj.actionName="",this.parent.pivotGridModule.engineModule=this.parent.engineModule,this.parent.pivotGridModule.olapEngineModule=this.parent.olapEngineModule,this.parent.pivotGridModule.setProperties({dataSourceSettings:this.parent.clonedDataSource.properties},!0)),"Popup"!==this.parent.renderMode||t?this.parent.actionObj.actionName=l._125:(this.parent.dialogRenderer.fieldListDialog.hide(),this.parent.actionObj.actionName=l._85),this.parent.actionObj.actionName&&this.parent.actionCompleteMethod()},e.prototype.renderFieldListDialog=function(e){var t=i.i(r.createElement)("div",{className:a._85+" "+a.a+" "+a._205,attrs:{tabindex:"0",title:this.parent.localeObj.getConstant("fieldList"),"aria-disabled":"false","aria-label":this.parent.localeObj.getConstant("fieldList"),role:"button"}});if(this.parent.element.appendChild(t),this.parent.isAdaptive){var o="<div class="+a._206+'><span class="'+a.a+" "+a._207+'"></span><div class='+a._208+">"+this.parent.localeObj.getConstant("fieldList")+"</div></div>",s=[{click:this.showFieldListDialog.bind(this),buttonModel:{cssClass:a._209+" "+a._210+" "+a._211+(this.parent.cssClass?" "+this.parent.cssClass:""),iconCss:a.a+" "+a._53,isPrimary:!0}},{click:this.showCalculatedField.bind(this),buttonModel:{cssClass:a._212+" "+a._210+" "+a._211+" "+a._18+(this.parent.cssClass?" "+this.parent.cssClass:""),iconCss:a.a+" "+a._53,enableRtl:this.parent.enableRtl,isPrimary:!0}}];this.fieldListDialog=new n.Dialog({animationSettings:{effect:this.parent.enableRtl?"SlideRight":"SlideLeft"},header:o,content:this.parentElement,isModal:!0,showCloseIcon:!1,visible:!1,allowDragging:!1,closeOnEscape:!1,enableRtl:this.parent.enableRtl,locale:this.parent.locale,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,width:"100%",height:"100%",position:{X:"center",Y:"center"},buttons:s,target:document.body,cssClass:this.parent.cssClass,close:this.removeFieldListIcon.bind(this),open:this.dialogOpen.bind(this)}),this.fieldListDialog.isStringTemplate=!0,this.fieldListDialog.appendTo(e),i.i(r.setStyleAttribute)(i.i(r.select)("#"+e.id+"_dialog-content",e),{padding:"0"});var l=e.querySelector("."+a._213);i.i(r.addClass)([l],a._214),i.i(r.removeClass)([l.querySelector("."+a._212)],a._200),i.i(r.removeClass)([l.querySelector("."+a._209)],a._200),this.fieldListDialog.element.querySelector("."+a._207).onclick=this.parent.allowDeferLayoutUpdate?this.onDeferUpdateClick.bind(this):this.onCloseFieldList.bind(this)}else{var d=this.createDeferUpdateButtons().outerHTML,o="<div class="+a._215+"><div class="+a._216+">"+this.parent.localeObj.getConstant("fieldList")+"</div></div>";this.fieldListDialog=new n.Dialog({animationSettings:{effect:"Zoom"},header:o,content:this.parentElement,isModal:!1,showCloseIcon:!1,visible:!1,allowDragging:!0,enableRtl:this.parent.enableRtl,locale:this.parent.locale,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,width:this.parent.element.style.width,position:{X:"center",Y:this.parent.element.offsetTop},footerTemplate:d,closeOnEscape:!1,cssClass:this.parent.cssClass,target:i.i(r.isNullOrUndefined)(this.parent.target)?document.body:"string"==typeof this.parent.target?document.querySelector(this.parent.target):this.parent.target,close:this.removeFieldListIcon.bind(this)}),this.fieldListDialog.isStringTemplate=!0,this.fieldListDialog.appendTo(e),this.renderDeferUpdateButtons(),i.i(r.setStyleAttribute)(i.i(r.select)("#"+e.id+"_title",e),{width:"100%"}),e.querySelector("."+a._215).appendChild(this.createCalculatedButton())}},e.prototype.dialogOpen=function(){4===this.lastTabIndex?(this.adaptiveElement.items[this.lastTabIndex].content="",this.adaptiveElement.dataBind(),this.parent.notify(l._26,{})):this.adaptiveElement.refresh()},e.prototype.updateDataSource=function(e){for(var t=["filters","columns","rows","values"],i=0,r=e;i<r.length;i++){var a=r[i],n=a,o=t[this.adaptiveElement.selectedItem];this.parent.pivotCommon.dataSourceUpdate.control="pivotview"===this.parent.getModuleName()?this.parent:this.parent.pivotGridModule?this.parent.pivotGridModule:this.parent,this.parent.pivotCommon.dataSourceUpdate.updateDataSource(n,o,-1)}this.parent.axisFieldModule.render(),this.parent.allowDeferLayoutUpdate?this.parent.triggerPopulateEvent():this.parent.updateDataSource(!0)},e.prototype.onDeferUpdateClick=function(){this.parent.updateDataSource(),this.parent.dialogRenderer.fieldListDialog.hide()},e.prototype.renderAdaptiveLayout=function(e){var t=i.i(r.createElement)("div",{className:a._214});e.appendChild(this.parentElement);var n=[{header:{text:this.parent.localeObj.getConstant("filters")},content:this.createAxisTable("filters")},{header:{text:this.parent.localeObj.getConstant("columns")},content:this.createAxisTable("columns")},{header:{text:this.parent.localeObj.getConstant("rows")},content:this.createAxisTable("rows")},{header:{text:this.parent.localeObj.getConstant("values")},content:this.createAxisTable("values")},{header:{text:this.parent.localeObj.getConstant("createCalculatedField")},content:"Calculated Field Related UI"}];this.parent.allowCalculatedField||n.pop(),this.adaptiveElement=new s.Tab({heightAdjustMode:"Auto",items:n,height:"100%",enableRtl:this.parent.enableRtl,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,locale:this.parent.locale,selected:this.tabSelect.bind(this),cssClass:this.parent.cssClass}),"Fixed"===this.parent.renderMode?(t.appendChild(this.createAddButton()),i.i(r.addClass)([e],a._197),this.adaptiveElement.isStringTemplate=!0,this.adaptiveElement.appendTo(this.parentElement),this.parentElement.appendChild(t)):(this.adaptiveElement.isStringTemplate=!0,this.adaptiveElement.appendTo(this.parentElement))},e.prototype.tabSelect=function(e){var t=i.i(r.closest)(this.parentElement,"."+a._190);this.lastTabIndex=e.selectedIndex,t&&t.querySelector("."+a._209)&&(4!==e.selectedIndex?(i.i(r.addClass)([t.querySelector("."+a._212)],a._18),i.i(r.removeClass)([t.querySelector("."+a._209)],a._18)):(i.i(r.removeClass)([t.querySelector("."+a._212)],a._18),i.i(r.addClass)([t.querySelector("."+a._209)],a._18))),4===e.selectedIndex?(this.adaptiveElement.items[4].content="",this.adaptiveElement.dataBind(),this.parent.notify(l._26,{})):this.parent.axisFieldModule.render()},e.prototype.createCalculatedButton=function(){var e=i.i(r.createElement)("button",{id:this.parent.element.id+"_CalculatedField",attrs:{type:"button",tabindex:"0","aria-disabled":"false","aria-label":this.parent.localeObj.getConstant("CalculatedField")}}),t=new o.Button({cssClass:a._217+" "+a._18+(this.parent.cssClass?" "+this.parent.cssClass:""),content:this.parent.localeObj.getConstant("CalculatedField"),enableRtl:this.parent.enableRtl,locale:this.parent.locale,enableHtmlSanitizer:this.parent.enableHtmlSanitizer});return t.isStringTemplate=!0,t.appendTo(e),this.parent.calculatedFieldModule&&i.i(r.removeClass)([e],a._18),t.element.onclick=this.showCalculatedField.bind(this),e},e.prototype.createAddButton=function(){var e=i.i(r.createElement)("div",{className:a._214+"-content"}),t=i.i(r.createElement)("div",{}),n=i.i(r.createElement)("div",{}),s=new o.Button({cssClass:a._212+" "+a._210+" "+a._211+" "+a._18+(this.parent.cssClass?" "+this.parent.cssClass:""),iconCss:a.a+" "+a._53,enableRtl:this.parent.enableRtl,locale:this.parent.locale,enableHtmlSanitizer:this.parent.enableHtmlSanitizer}),l=new o.Button({cssClass:a._209+" "+a._210+" "+a._211+(this.parent.cssClass?" "+this.parent.cssClass:""),iconCss:a.a+" "+a._53,enableRtl:this.parent.enableRtl,locale:this.parent.locale,enableHtmlSanitizer:this.parent.enableHtmlSanitizer});return l.isStringTemplate=!0,l.appendTo(t),s.isStringTemplate=!0,s.appendTo(n),e.appendChild(t),e.appendChild(n),s.element.onclick=this.showCalculatedField.bind(this),l.element.onclick=this.showFieldListDialog.bind(this),e},e.prototype.createAxisTable=function(e){var t=i.i(r.createElement)("div",{className:a._150+"-"+e}),n=i.i(r.createElement)("div",{className:a._152+" e-"+e}),o=i.i(r.createElement)("span",{className:a._151});return o.innerText=this.parent.localeObj.getConstant("addPrompt"),t.appendChild(n),t.appendChild(o),t},e.prototype.showCalculatedField=function(e){try{if(!this.parent.isAdaptive){if(this.parent.actionObj.actionName=l._71,this.parent.actionBeginMethod())return;this.parent.dialogRenderer.fieldListDialog&&(this.parent.dialogRenderer.fieldListDialog.hide(),i.i(r.addClass)([this.parent.element.querySelector("."+a._85)],a._86))}this.parent.notify(l._26,{})}catch(e){this.parent.actionFailureMethod(e)}},e.prototype.showFieldListDialog=function(e){var t=this.adaptiveElement.selectedItem;this.parent.treeViewModule.render(t)},e.prototype.onShowFieldList=function(){if(this.parent.actionObj.actionName=l._44,!this.parent.actionBeginMethod()){this.parent.actionObj.actionName="";try{this.parent.allowDeferLayoutUpdate&&(this.parent.isAdaptive&&this.parent.axisFieldModule.render(),this.parent.clonedDataSource=i.i(r.extend)({},this.parent.dataSourceSettings,null,!0),"olap"===this.parent.dataType&&(this.parent.clonedFieldListData=d.a.cloneOlapFieldSettings(this.parent.olapEngineModule.fieldListData)),this.parent.clonedFieldList=d.a.getClonedFieldList(this.parent.pivotFieldList)),i.i(r.addClass)([this.parent.element.querySelector("."+a._85)],a._86),this.parent.dialogRenderer.fieldListDialog.show(),this.parent.dialogRenderer.fieldListDialog.element.style.top=parseInt(this.parent.dialogRenderer.fieldListDialog.element.style.top,10)<0?"0px":this.parent.dialogRenderer.fieldListDialog.element.style.top}catch(e){this.parent.actionFailureMethod(e)}}},e.prototype.removeFieldListIcon=function(){this.parent.isAdaptive&&this.parent.allowCalculatedField&&this.parent.calculatedFieldModule&&this.adaptiveElement&&4===this.adaptiveElement.selectedItem&&(i.i(r.select)("#"+this.parent.element.id+"droppable",this.adaptiveElement.element)?this.parent.calculatedFieldModule.updateAdaptiveCalculatedField(!1):this.parent.notify(l._26,{edit:!1})),document.getElementById(this.parent.element.id+"calculateddialog")||i.i(r.removeClass)([this.parent.element.querySelector("."+a._85)],a._86)},e.prototype.keyPress=function(e){if(13===e.keyCode&&e.target)return e.target.click(),void e.preventDefault()},e.prototype.wireDialogEvent=function(e){r.EventHandler.add(e,"keydown",this.keyPress,this),r.EventHandler.add(e,"click",this.onShowFieldList,this)},e.prototype.unWireDialogEvent=function(e){r.EventHandler.remove(e,"keydown",this.keyPress),r.EventHandler.remove(e,"click",this.onShowFieldList)},e.prototype.destroy=function(){"Popup"===this.parent.renderMode&&this.unWireDialogEvent(this.parent.element.querySelector("."+a._85)),this.deferUpdateCheckBox&&!this.deferUpdateCheckBox.isDestroyed&&(this.deferUpdateCheckBox.destroy(),this.deferUpdateCheckBox=null),this.deferUpdateApplyButton&&!this.deferUpdateApplyButton.isDestroyed&&(this.deferUpdateApplyButton.destroy(),this.deferUpdateApplyButton=null),this.deferUpdateCancelButton&&!this.deferUpdateCancelButton.isDestroyed&&(this.deferUpdateCancelButton.destroy(),this.deferUpdateCancelButton=null),"Popup"===this.parent.renderMode&&(this.fieldListDialog&&!this.fieldListDialog.isDestroyed&&(this.fieldListDialog.destroy(),this.fieldListDialog=null),document.getElementById(this.parent.element.id+"_Container")&&i.i(r.remove)(document.getElementById(this.parent.element.id+"_Container")))},e}()},function(e,t,i){"use strict";i.d(t,"a",function(){return h});var r=i(0),a=(i.n(r),i(2)),n=i(1),o=i(5),s=(i.n(o),i(4)),l=(i.n(s),i(9)),d=(i.n(l),i(3)),h=function(){function e(e){this.selectedNodes=[],this.isSearching=!1,this.parentIDs=[],this.parent=e,this.addEventListener()}return e.prototype.render=function(e){if(this.parentElement=this.parent.dialogRenderer.parentElement,this.fieldListSort=this.parent.pivotGridModule?this.parent.pivotGridModule.defaultFieldListOrder:this.parent.defaultFieldListOrder,this.fieldListSort="Ascending"===this.fieldListSort?"Ascend":"Descending"===this.fieldListSort?"Descend":"None",this.parent.isAdaptive)this.renderTreeDialog(e);else{var t=i.i(r.createElement)("div",{className:a._172+" "+("olap"===this.parent.dataType?a._173:"")}),n=i.i(r.createElement)("div",{className:a._174});n.innerText=this.parent.localeObj.getConstant("allFields");var o=i.i(r.createElement)("div",{id:this.parent.element.id+"_SearchDiv",attrs:{tabindex:"-1"},className:a._175}),s=i.i(r.createElement)("input",{attrs:{type:"text"}});o.appendChild(s),this.fieldSearch=new l.TextBox({placeholder:this.parent.localeObj.getConstant("search"),enableRtl:this.parent.enableRtl,locale:this.parent.locale,cssClass:a._176+(this.parent.cssClass?" "+this.parent.cssClass:""),input:this.textChange.bind(this),showClearButton:!0}),this.fieldSearch.isStringTemplate=!0,this.fieldSearch.appendTo(s),this.fieldSearch.addIcon("append",a._177+" "+a.a);var d=i.i(r.createElement)("div",{className:a._27+" "+a._18});d.innerText=this.parent.localeObj.getConstant("noMatches");var h=i.i(r.createElement)("div",{className:a._178+" "+a._179});this.treeViewElement=i.i(r.createElement)("div",{id:this.parent.element.id+"_TreeView",className:a._150+" "+("olap"===this.parent.dataType?a._180:"")});var p=i.i(r.createElement)("div",{className:a._181});if(p.appendChild(n),t.appendChild(p),this.updateSortElements(p),this.parent.enableFieldSearching&&(t.appendChild(o),t.appendChild(d)),h.appendChild(this.treeViewElement),t.appendChild(h),this.parentElement.appendChild(t),"Fixed"===this.parent.renderMode){var u=i.i(r.createElement)("div",{className:a._182}),c=i.i(r.createElement)("div",{className:a._183});c.innerText=this.parent.localeObj.getConstant("centerHeader"),this.parentElement.appendChild(u),this.parentElement.appendChild(c)}this.renderTreeView()}},e.prototype.updateSortElements=function(e){for(var t={None:"sortNone",Ascend:"sortAscending",Descend:"sortDescending"},n=Object.keys(t),o=0,s=n;o<s.length;o++){var l=s[o],d=i.i(r.createElement)("span",{attrs:{tabindex:"0","aria-disabled":"false","aria-label":"Sort "+l,"data-sort":l,title:this.parent.localeObj.getConstant(t[l]),role:"button"},className:a.a+" e-sort-"+l.toLowerCase()+" "+(this.fieldListSort===l?"e-selected":"")});e.appendChild(d),this.unWireFieldListEvent(d),this.wireFieldListEvent(d)}},e.prototype.renderTreeView=function(){this.fieldTable=new o.TreeView({fields:{dataSource:this.getTreeData(),id:"id",text:"caption",isChecked:"isSelected",parentID:"pid",iconCss:"spriteCssClass"},nodeChecked:this.nodeStateChange.bind(this),cssClass:a._184+(this.parent.cssClass?" "+this.parent.cssClass:""),showCheckBox:!0,allowDragAndDrop:!0,sortOrder:"None",autoCheck:!1,loadOnDemand:"olap"!==this.parent.dataType,enableRtl:this.parent.enableRtl,locale:this.parent.locale,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,nodeDragStart:this.dragStart.bind(this),nodeDragStop:this.dragStop.bind(this),drawNode:this.updateTreeNode.bind(this),nodeExpanding:this.updateNodeIcon.bind(this),nodeCollapsed:this.updateNodeIcon.bind(this),nodeSelected:function(e){i.i(r.removeClass)([e.node],"e-active"),e.cancel=!0}}),this.treeViewElement.innerHTML="",this.fieldTable.isStringTemplate=!0,this.fieldTable.appendTo(this.treeViewElement);var e="Fixed"===this.parent.renderMode?this.parent.element:this.parentElement;i.i(r.isNullOrUndefined)(e.querySelector("."+a._150))||(e.querySelector("."+a._150).ej2_instances[0].dragObj.enableAutoScroll=!1)},e.prototype.updateNodeIcon=function(e){if("olap"===this.parent.dataType)if(e.node&&e.node.querySelector(".e-list-icon")&&e.node.querySelector(".e-list-icon").className.indexOf("e-folderCDB-icon")>-1){var t=e.node.querySelector(".e-list-icon");i.i(r.removeClass)([t],"e-folderCDB-icon"),i.i(r.addClass)([t],"e-folderCDB-open-icon")}else if(e.node&&e.node.querySelector(".e-list-icon")&&e.node.querySelector(".e-list-icon").className.indexOf("e-folderCDB-open-icon")>-1){var t=e.node.querySelector(".e-list-icon");i.i(r.removeClass)([t],"e-folderCDB-open-icon"),i.i(r.addClass)([t],"e-folderCDB-icon")}},e.prototype.updateTreeNode=function(e){var t=!1;"olap"===this.parent.dataType?t=this.updateOlapTreeNode(e):e.nodeData.hasChildren?(t=!1,e.node.querySelector(".e-checkbox-wrapper").style.display="none",i.i(r.addClass)([e.node],a._185)):t=!0,i.i(r.isNullOrUndefined)(e.nodeData.pid)||i.i(r.addClass)([e.node],a._186);var n=e.node.querySelector("."+a._114);if(e.node.querySelector(".e-list-icon")&&n){var o=e.node.querySelector(".e-list-icon");n.insertBefore(o,e.node.querySelector(".e-list-text"))}if(t&&!this.parent.isAdaptive){var s=d.a.getFieldInfo(e.nodeData.id,this.parent);t=!1;var l=i.i(r.createElement)("span",{attrs:{tabindex:"-1",title:s.fieldItem?s.fieldItem.allowDragAndDrop?this.parent.localeObj.getConstant("drag"):"":this.parent.localeObj.getConstant("drag"),"aria-disabled":"false"},className:a.a+" "+a._112+" "+(s.fieldItem?s.fieldItem.allowDragAndDrop?"":a._159:"")});e.node.querySelector(".e-checkbox-wrapper")&&!e.node.querySelector(".cls.DRAG_CLASS")&&n&&n.insertBefore(l,e.node.querySelector(".e-checkbox-wrapper"))}if(e.node.querySelector("."+a._48)&&i.i(r.addClass)([e.node.querySelector("."+a._80)],a._187),this.parent.enableFieldSearching&&this.isSearching){var h=e.node;if("olap"===this.parent.dataType)for(var p=h.getAttribute("data-uid"),u=this.parent.pivotCommon.eventBase.searchListItem,c=0;c<this.parentIDs.length;c++){p===this.parentIDs[c]&&i.i(r.addClass)([h],a._18);for(var g=0,m=u;g<m.length;g++){var f=m[g],v=this.parent.pivotCommon.eventBase.getParentIDs(this.fieldTable,f.getAttribute("data-uid"),[]);if(d.a.inArray(p,v)>-1){i.i(r.removeClass)([h],a._18);break}}}else for(var c=0;c<this.nonSearchList.length;c++){if(h.textContent===this.nonSearchList[c].textContent){i.i(r.addClass)([h],a._18);break}if(h.innerText===this.nonSearchList[c].textContent){i.i(r.addClass)([h],a._18);break}}}},e.prototype.updateOlapTreeNode=function(e){var t=!1;return"olap"===this.parent.dataType?(e.node&&e.node.querySelector(".e-calcMemberGroupCDB,.e-measureGroupCDB-icon,.e-folderCDB-icon,.e-folderCDB-open-icon,.e-dimensionCDB-icon,.e-kpiCDB-icon")&&(e.node.querySelector(".e-checkbox-wrapper").style.display="none"),e.node&&e.node.querySelector(".e-list-icon")&&e.node.querySelector(".e-list-icon").className.indexOf("e-level-members")>-1&&(this.parent.isAdaptive?e.node.querySelector(".e-checkbox-wrapper").style.display="none":e.node.querySelector(".e-checkbox-wrapper").style.visibility="hidden"),e.node&&(e.node.querySelector(".e-hierarchyCDB-icon,.e-attributeCDB-icon,.e-namedSetCDB-icon")||e.node.querySelector(".e-measure-icon,.e-kpiGoal-icon,.e-kpiStatus-icon,.e-kpiTrend-icon,.e-kpiValue-icon")||e.node.querySelector(".e-calc-measure-icon,.e-calc-dimension-icon"))&&(e.node.querySelector(".e-measure-icon")?(e.node.querySelector(".e-list-icon").style.display="none",t=!0):t=!0)):t=!0,t},e.prototype.renderTreeDialog=function(e){var t=i.i(r.createElement)("div",{id:this.parent.element.id+"_FieldListTreeView",className:a._188+" "+("olap"===this.parent.dataType?"e-olap-editor-dialog":"")});this.parentElement.appendChild(t),this.fieldDialog=new s.Dialog({animationSettings:{effect:"Fade"},allowDragging:!1,header:this.parent.localeObj.getConstant("adaptiveFieldHeader"),content:this.createTreeView(this.getTreeData(e)),isModal:!0,visible:!0,showCloseIcon:!1,enableRtl:this.parent.enableRtl,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,locale:this.parent.locale,width:"320px",height:"350px",position:{X:"center",Y:"center"},buttons:[{click:this.closeTreeDialog.bind(this),buttonModel:{cssClass:a.e+(this.parent.cssClass?" "+this.parent.cssClass:""),content:this.parent.localeObj.getConstant("cancel")}},{click:this.onFieldAdd.bind(this),buttonModel:{cssClass:a.d+(this.parent.cssClass?" "+this.parent.cssClass:""),content:this.parent.localeObj.getConstant("add"),isPrimary:!0}}],closeOnEscape:!1,cssClass:this.parent.cssClass,target:this.parentElement.parentElement,close:this.dialogClose.bind(this)}),this.fieldDialog.isStringTemplate=!0,this.fieldDialog.appendTo(t)},e.prototype.dialogClose=function(){document.getElementById(this.parent.element.id+"_FieldListTreeView")&&i.i(r.remove)(document.getElementById(this.parent.element.id+"_FieldListTreeView"))},e.prototype.createTreeView=function(e){var t=i.i(r.createElement)("div",{id:this.parent.element.id+"EditorDiv",className:a._19}),n=i.i(r.createElement)("div",{id:this.parent.element.id+"_SearchDiv",attrs:{tabindex:"-1"},className:a._20}),s=i.i(r.createElement)("input",{attrs:{type:"text"}});n.appendChild(s);var d=i.i(r.createElement)("div",{className:a._178}),h=i.i(r.createElement)("div",{className:a._26+" "+("olap"===this.parent.dataType?"e-olap-field-list-tree":"")});t.appendChild(n),this.editorSearch=new l.MaskedTextBox({showClearButton:!0,placeholder:this.parent.localeObj.getConstant("search"),enableRtl:this.parent.enableRtl,locale:this.parent.locale,cssClass:a._28+(this.parent.cssClass?" "+this.parent.cssClass:""),change:this.textChange.bind(this)}),this.editorSearch.isStringTemplate=!0,this.editorSearch.appendTo(s);var p=i.i(r.createElement)("div",{className:a._27+" "+a._18});return p.innerText=this.parent.localeObj.getConstant("noMatches"),t.appendChild(p),d.appendChild(h),t.appendChild(d),this.fieldTable=new o.TreeView({fields:{dataSource:e,id:"id",text:"caption",isChecked:"isSelected",parentID:"pid",iconCss:"spriteCssClass"},showCheckBox:!0,autoCheck:!1,loadOnDemand:"olap"!==this.parent.dataType,sortOrder:"olap"===this.parent.dataType?"None":"Ascending",enableRtl:this.parent.enableRtl,locale:this.parent.locale,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,cssClass:this.parent.cssClass,nodeChecked:this.addNode.bind(this),drawNode:this.updateTreeNode.bind(this),nodeExpanding:this.updateNodeIcon.bind(this),nodeCollapsed:this.updateNodeIcon.bind(this),nodeSelected:function(e){i.i(r.removeClass)([e.node],"e-active"),e.cancel=!0}}),this.fieldTable.isStringTemplate=!0,this.fieldTable.appendTo(h),t},e.prototype.textChange=function(e){this.parent.pivotCommon.eventBase.searchTreeNodes(e,this.fieldTable,!0);var t,n;this.parent.isAdaptive?t=this.fieldDialog.element.querySelector("."+a._27):(t=this.parentElement.querySelector("."+a._27),n=this.parentElement.querySelector("."+a._179));var o=[].slice.call(this.fieldTable.element.querySelectorAll("li")),s=[].slice.call(this.fieldTable.element.querySelectorAll("li."+a._18));if(o.length===s.length?(i.i(r.removeClass)([t],a._18),this.parent.isAdaptive||(i.i(r.addClass)([n],a._18),i.i(r.removeClass)([n],a._189))):(i.i(r.addClass)([t],a._18),this.parent.isAdaptive||(i.i(r.removeClass)([n],a._18),i.i(r.addClass)([n],a._189))),this.isSearching=s.length>0,this.nonSearchList=s,"olap"===this.parent.dataType){this.parentIDs=[];for(var l=0;l<o.length;l++)if(o[l].classList.contains("e-level-1")){var d=o[l].getAttribute("data-uid");this.parentIDs.push(d)}}},e.prototype.dragStart=function(e){var t=this;if(e.event.target.classList.contains(a._112)&&!e.event.target.classList.contains(a._159)){var o=d.a.getFieldInfo(e.draggedNode.getAttribute("data-uid"),this.parent),s={fieldName:o.fieldName,fieldItem:o.fieldItem,axis:o.axis,dataSourceSettings:this.parent.dataSourceSettings,cancel:!1};(this.parent.isPopupView?this.parent.pivotGridModule:this.parent).trigger(n._10,s,function(n){if(n.cancel)t.parent.isDragging=!1,e.cancel=!0;else{t.parent.isDragging=!0,i.i(r.addClass)([e.draggedNode.querySelector("."+a._80)],a._82);var o=void 0;o="olap"===t.parent.dataType?t.parent.olapEngineModule.fieldList[e.draggedNode.getAttribute("data-uid")]:t.parent.engineModule.fieldList[e.draggedNode.getAttribute("data-uid")];var s=[a._126,a._128,a._132];if(o&&"CalculatedField"===o.aggregateType)for(var l=0,d=s;l<d.length;l++){var h=d[l];i.i(r.addClass)([t.parentElement.querySelector("."+h)],a._111)}var p=e.clonedNode;p&&"Popup"===("pivotfieldlist"===t.parent.getModuleName()&&t.parent.renderMode)&&(p.style.zIndex=(t.parent.dialogRenderer.fieldListDialog.zIndex+1).toString())}})}else this.parent.isDragging=!1,e.cancel=!0},e.prototype.dragStop=function(e){e.cancel=!0,this.parent.isDragging=!1;for(var t=[a._126,a._128,a._132],n=0,o=t;n<o.length;n++){var s=o[n];i.i(r.removeClass)([this.parentElement.querySelector("."+s)],a._111)}i.i(r.removeClass)([e.draggedNode.querySelector("."+a._80)],a._82),this.parent.pivotCommon.filterDialog.dialogPopUp&&this.parent.pivotCommon.filterDialog.dialogPopUp.close();var l=e.draggedNodeData.id.toString();if(this.isNodeDropped(e,l)){var d=this.parent.pivotFieldList,h=d[l];if(this.parent.pivotCommon.dataSourceUpdate.control="pivotview"===this.parent.getModuleName()?this.parent:this.parent.pivotGridModule?this.parent.pivotGridModule:this.parent,this.parent.pivotCommon.nodeStateModified.onStateModified(e,l)){this.parent.allowDeferLayoutUpdate?(h.isSelected=!0,this.updateDataSource()):this.parent.updateDataSource();this.parent.axisFieldModule.render()}}},e.prototype.isNodeDropped=function(e,t){var n=!0;if("true"===e.draggedNodeData.isChecked){var o=this.getButton(t),s=i.i(r.closest)(o,"."+a._146),l=i.i(r.closest)(e.target,"."+a._146);if(o&&s===l){for(var d=[].slice.call(s.querySelectorAll("."+a._14)),h=i.i(r.closest)(e.target,"."+a._145),p=void 0,u=-1,c=0,g=d.length;c<g;c++)if(d[c].id===o.id&&(p=c),h){var m=h.querySelector("."+a._14);d[c].id===m.id&&(u=c)}if(p===u||p===d.length-1&&-1===u){var f=document.getElementById(this.parent.element.id+"_Container");i.i(r.removeClass)([].slice.call(f.querySelectorAll("."+a._147)),a._148),n=!1}}}return n},e.prototype.getButton=function(e){for(var t,i=document.getElementById(this.parent.element.id+"_Container"),r=[].slice.call(i.querySelectorAll("."+a._14)),n=0,o=r.length;n<o;n++)if(r[n].getAttribute("data-uid")===e){t=r[n];break}return t},e.prototype.nodeStateChange=function(e){var t=this;if(e.isInteracted){var o=i.i(r.closest)(e.node,"."+a._114);if(!i.i(r.isNullOrUndefined)(o)){var s=i.i(r.closest)(o,"li"),l=s.getAttribute("data-uid");this.parent.pivotCommon.filterDialog.dialogPopUp&&this.parent.pivotCommon.filterDialog.dialogPopUp.close();var h=this.parent.pivotFieldList,p=h[l],u=d.a.getFieldInfo(l,this.parent),c=this.parent.isPopupView?this.parent.pivotGridModule:this.parent,g=o.closest("."+a._185);if("check"===e.action){var m={fieldName:l,dropField:u.fieldItem,dataSourceSettings:d.a.getClonedDataSourceSettings(this.parent.dataSourceSettings),dropAxis:"number"===p.type||"CalculatedField"===p.type&&p.formula&&p.formula.indexOf("Measure")>-1&&"olap"===this.parent.dataType?"values":"rows",dropPosition:u.position,draggedAxis:"fieldlist",cancel:!1};c.trigger(n.e,m,function(n){if(n.cancel)t.updateCheckState(p,e.action);else{i.i(r.addClass)([o.querySelector("."+a._80)],a._187),g&&i.i(r.addClass)([g.querySelector("."+a._80)],a._187),t.updateSelectedNodes(s,e.action);var d=t.parent.pivotCommon.dataSourceUpdate.getNewField(l,u.fieldItem);t.updateReportSettings(d,n),t.updateNodeStateChange(l,e,p)}})}else{var f={cancel:!1,fieldName:l,dataSourceSettings:d.a.getClonedDataSourceSettings(this.parent.dataSourceSettings),fieldItem:u.fieldItem,axis:u.axis};c.trigger(n._7,f,function(n){n.cancel?t.updateCheckState(p,e.action):(i.i(r.removeClass)([o.querySelector("."+a._80)],a._187),g&&i.i(r.isNullOrUndefined)(g.querySelector("."+a._186+" ."+a._48))&&i.i(r.removeClass)([g.querySelector("."+a._80)],a._187),t.updateSelectedNodes(s,e.action),t.parent.pivotCommon.dataSourceUpdate.removeFieldFromReport(l),"pivot"===t.parent.dataType&&t.parent.showValuesButton&&t.parent.dataSourceSettings.values.length>1&&u&&u.position<t.parent.dataSourceSettings.valueIndex&&("row"===t.parent.dataSourceSettings.valueAxis&&"rows"===u.axis||"column"===t.parent.dataSourceSettings.valueAxis&&"columns"===u.axis)&&c.setProperties({dataSourceSettings:{valueIndex:t.parent.dataSourceSettings.valueIndex-1}},!0),"olap"===t.parent.dataType&&0===t.parent.dataSourceSettings.values.length&&t.parent.pivotCommon.dataSourceUpdate.removeFieldFromReport("[Measures]"),t.updateNodeStateChange(l,e,p))})}}}},e.prototype.updateReportSettings=function(e,t){var a=t.dropPosition,n=t.dropAxis;if("pivot"===this.parent.dataType&&this.parent.showValuesButton&&this.parent.dataSourceSettings.values.length>1){var o="row"===this.parent.dataSourceSettings.valueAxis&&"rows"===n?this.parent.dataSourceSettings.rows:"column"===this.parent.dataSourceSettings.valueAxis&&"columns"===n?this.parent.dataSourceSettings.columns:void 0;i.i(r.isNullOrUndefined)(o)||(-1===a&&-1===this.parent.dataSourceSettings.valueIndex?this.parent.setProperties({dataSourceSettings:{valueIndex:o.length}},!0):a>-1&&a<=this.parent.dataSourceSettings.valueIndex?this.parent.setProperties({dataSourceSettings:{valueIndex:this.parent.dataSourceSettings.valueIndex+1}},!0):this.parent.dataSourceSettings.valueIndex>-1&&a>this.parent.dataSourceSettings.valueIndex&&(a-=1))}switch(n){case"filters":-1!==a?this.parent.dataSourceSettings.filters.splice(a,0,e):this.parent.dataSourceSettings.filters.push(e);break;case"rows":-1!==a?this.parent.dataSourceSettings.rows.splice(a,0,e):this.parent.dataSourceSettings.rows.push(e);break;case"columns":-1!==a?this.parent.dataSourceSettings.columns.splice(a,0,e):this.parent.dataSourceSettings.columns.push(e);break;case"values":if(-1!==a?this.parent.dataSourceSettings.values.splice(a,0,e):this.parent.dataSourceSettings.values.push(e),"olap"===this.parent.dataType&&this.parent.olapEngineModule&&!this.parent.olapEngineModule.isMeasureAvail&&!(this.parent.dataSourceSettings.values.length>1)){var s={name:"[Measures]",caption:"Measures",baseField:void 0,baseItem:void 0};("row"===this.parent.dataSourceSettings.valueAxis?this.parent.dataSourceSettings.rows:this.parent.dataSourceSettings.columns).push(s)}}},e.prototype.updateCheckState=function(e,t){for(var i=this.fieldTable.element.querySelectorAll(".e-checkbox-wrapper"),r=this.fieldTable.element.querySelectorAll(".e-list-text"),a=0;a<i.length;a++)e.caption===r[a].textContent&&("check"===t?this.fieldTable.uncheckAll([e.id]):this.fieldTable.checkAll([e.id]))},e.prototype.updateNodeStateChange=function(e,t,a){this.parent.allowDeferLayoutUpdate?(a.isSelected="check"===t.action,"olap"===this.parent.dataType&&this.parent.olapEngineModule.updateFieldlistData(e,"check"===t.action),this.updateDataSource()):this.parent.updateDataSource(!0);var n=this.treeViewElement.querySelector('[data-uid="'+e+'"]');n.focus(),i.i(r.removeClass)([n],"e-hover");var o=this.parent;setTimeout(function(){o.axisFieldModule.render()})},e.prototype.updateSelectedNodes=function(e,t){if(e&&e.querySelector("ul"))for(var n=0,o=[].slice.call(e.querySelectorAll("li"));n<o.length;n++){var s=o[n];"check"===t?i.i(r.addClass)([s.querySelector("."+a._80)],a._187):i.i(r.removeClass)([s.querySelector("."+a._80)],a._187)}},e.prototype.updateDataSource=function(){this.parent.isPopupView?("olap"===this.parent.dataType?this.parent.pivotGridModule.olapEngineModule=this.parent.olapEngineModule:this.parent.pivotGridModule.engineModule=this.parent.engineModule,this.parent.pivotGridModule.setProperties({dataSourceSettings:this.parent.dataSourceSettings.properties},!0),this.parent.pivotGridModule.notify(n._17,this)):this.parent.triggerPopulateEvent()},e.prototype.addNode=function(e){var t=this;if(e.isInteracted){var i=this.parent.pivotFieldList,r=i[e.data[0].id.toString()],a=d.a.getFieldInfo(r.id.toString(),this.parent),o=this.parent.isPopupView?this.parent.pivotGridModule:this.parent;if("check"===e.action){var s=["filters","columns","rows","values"],l={fieldName:a.fieldName,dropField:a.fieldItem,dataSourceSettings:d.a.getClonedDataSourceSettings(this.parent.dataSourceSettings),dropAxis:s[this.parent.dialogRenderer.adaptiveElement.selectedItem],draggedAxis:"fieldlist",cancel:!1};o.trigger(n.e,l,function(i){i.cancel?t.updateCheckState(r,e.action):t.selectedNodes.push(r.id.toString())})}else{var h={cancel:!1,fieldName:a.fieldName,dataSourceSettings:d.a.getClonedDataSourceSettings(this.parent.dataSourceSettings),fieldItem:a.fieldItem,axis:a.axis};o.trigger(n._7,h,function(i){if(i.cancel)t.updateCheckState(r,e.action);else for(var a=t.selectedNodes.length;a--;)if(t.selectedNodes[a]===r.id.toString()){t.selectedNodes.splice(a,1);break}})}}},e.prototype.refreshTreeView=function(){if(this.fieldTable){var e=this.getUpdatedData();this.fieldTable.fields={dataSource:e,id:"id",text:"caption",isChecked:"isSelected",parentID:"pid",iconCss:"spriteCssClass"},this.fieldTable.dataBind()}},e.prototype.getUpdatedData=function(){var e=this.getTreeData(),t=this.fieldTable.expandedNodes;return this.updateExpandedNodes(e,t),this.applySorting(e,this.fieldListSort)},e.prototype.getTreeData=function(e){var t=[];if("olap"===this.parent.dataType)t=this.getOlapTreeData(e);else{for(var a=this.parent.pivotFieldList?Object.keys(this.parent.pivotFieldList):[],n={},o=0,s=a;o<s.length;o++){var l=s[o],d=this.parent.pivotFieldList[l];if(n[l]={id:d.id,pid:d.pid,caption:d.caption,isSelected:d.isSelected},!i.i(r.isNullOrUndefined)(d.pid)&&!n[l].hasChildren){var h=d.pid+"_group_name";n[l].pid=h,n[h]={id:h,caption:d.pid,isSelected:n[h]&&n[h].isSelected?n[h].isSelected:d.isSelected,hasChildren:!0}}}if(this.parent.isAdaptive){for(var p=[this.parent.dataSourceSettings.filters,this.parent.dataSourceSettings.columns,this.parent.dataSourceSettings.rows,this.parent.dataSourceSettings.values],u=p[e],c=a.length;c--;)n[a[c]].isSelected=!1;for(var g=0,m=u;g<m.length;g++){n[m[g].name].isSelected=!0}}for(var f=Object.keys(n),v=0,S=f;v<S.length;v++){var d=S[v],y=n[d];t.push(y)}}return t},e.prototype.getOlapTreeData=function(e){var t=[],a=this.parent.olapEngineModule.fieldListData?this.parent.olapEngineModule.fieldListData:[];if(this.parent.isAdaptive)for(var n=[this.parent.dataSourceSettings.filters,this.parent.dataSourceSettings.columns,this.parent.dataSourceSettings.rows,this.parent.dataSourceSettings.values],o=n[e],s=0;s<a.length;){var l=a[s],h=void 0;if(3===e){if("[measures]"!==l.id.toLowerCase()&&(0===l.id.toLowerCase().indexOf("[measures]")||l.spriteCssClass&&-1!==l.spriteCssClass.indexOf("e-measureCDB"))||"[calculated members].[_0]"===l.id.toLowerCase()||l.spriteCssClass&&-1!==l.spriteCssClass.indexOf("e-calc-measure-icon")){h={id:l.id,caption:l.caption,hasChildren:l.hasChildren,type:l.type,aggregateType:l.aggregateType,isSelected:l.isSelected,pid:l.pid,spriteCssClass:l.spriteCssClass},h.isSelected=!1,h.spriteCssClass&&-1!==h.spriteCssClass.indexOf("e-measureCDB")&&(h.spriteCssClass=h.spriteCssClass.replace("e-folderCDB-icon","e-measureGroupCDB-icon"),h.pid=void 0);for(var p=0,u=o;p<u.length;p++){var c=u[p];if(h.id===c.name){h.isSelected=!0;break}}t.push(h)}}else if(!(0===l.id.toLowerCase().indexOf("[measures]")||l.spriteCssClass&&-1!==l.spriteCssClass.indexOf("e-measureCDB")||l.spriteCssClass&&-1!==l.spriteCssClass.indexOf("e-calc-measure-icon"))){h={id:l.id,caption:l.caption,hasChildren:l.hasChildren,type:l.type,aggregateType:l.aggregateType,isSelected:l.isSelected,pid:l.pid,spriteCssClass:l.spriteCssClass},h.isSelected=!1;for(var g=0,m=o;g<m.length;g++){var f=m[g];if(h.id===f.name){h.isSelected=!0;break}}t.push(h)}s++}else t=i.i(r.isNullOrUndefined)(this.parent.olapEngineModule.fieldListData)?[]:d.a.getClonedData(this.parent.olapEngineModule.fieldListData);return t},e.prototype.updateExpandedNodes=function(e,t){if(t.length>0)for(var i=0,r=0,a=e;r<a.length;r++){var n=a[r];if(t.indexOf(n.id)>-1&&(i++,n.expanded=!0,n.spriteCssClass=n.spriteCssClass&&n.spriteCssClass.toString().indexOf("e-folderCDB-icon")>-1?n.spriteCssClass.toString().replace("e-folderCDB-icon","e-folderCDB-open-icon"):n.spriteCssClass,i===t.length))break}},e.prototype.updateSorting=function(e){var t=e.target,a=t.getAttribute("data-sort");if(this.parent.actionObj.actionName=n._66,!this.parent.actionBeginMethod()){try{if(-1===t.className.indexOf("e-selected")){switch(a){case"None":this.fieldListSort="None",i.i(r.addClass)([t],"e-selected"),i.i(r.removeClass)([this.parentElement.querySelector(".e-sort-ascend")],"e-selected"),i.i(r.removeClass)([this.parentElement.querySelector(".e-sort-descend")],"e-selected");break;case"Ascend":this.fieldListSort="Ascend",i.i(r.addClass)([t],"e-selected"),i.i(r.removeClass)([this.parentElement.querySelector(".e-sort-none")],"e-selected"),i.i(r.removeClass)([this.parentElement.querySelector(".e-sort-descend")],"e-selected");break;case"Descend":this.fieldListSort="Descend",i.i(r.addClass)([t],"e-selected"),i.i(r.removeClass)([this.parentElement.querySelector(".e-sort-ascend")],"e-selected"),i.i(r.removeClass)([this.parentElement.querySelector(".e-sort-none")],"e-selected")}this.refreshTreeView()}}catch(e){this.parent.actionFailureMethod(e)}this.parent.actionObj.actionName=this.parent.getActionCompleteName(),this.parent.actionObj.actionName&&this.parent.actionCompleteMethod()}},e.prototype.applySorting=function(e,t){if(e.length>0)if("olap"===this.parent.dataType){var i=void 0,r=void 0;this.parent.dataSourceSettings.calculatedFieldSettings.length>0&&"[calculated members].[_0]"===e[0].id.toLowerCase()?(r=e[0],i=e[1],e.splice(0,2)):(i=e[0],e.splice(0,1)),e="Ascend"===t?e.sort(function(e,t){return e.caption>t.caption?1:t.caption>e.caption?-1:0}):"Descend"===t?e.sort(function(e,t){return e.caption<t.caption?1:t.caption<e.caption?-1:0}):e,r?e.splice(0,0,r,i):e.splice(0,0,i)}else this.fieldTable.sortOrder="Ascend"===t?"Ascending":"Descend"===t?"Descending":"None";return e},e.prototype.onFieldAdd=function(e){this.parent.dialogRenderer.updateDataSource(this.selectedNodes),this.closeTreeDialog()},e.prototype.closeTreeDialog=function(){this.selectedNodes=[],this.fieldDialog.hide()},e.prototype.keyPress=function(e){if(13===e.keyCode&&e.target)return e.target.click(),void e.preventDefault()},e.prototype.wireFieldListEvent=function(e){r.EventHandler.add(e,"keydown",this.keyPress,this),r.EventHandler.add(e,"click",this.updateSorting,this)},e.prototype.unWireFieldListEvent=function(e){r.EventHandler.remove(e,"keydown",this.keyPress),r.EventHandler.remove(e,"click",this.updateSorting)},e.prototype.addEventListener=function(){this.parent.on(n._24,this.refreshTreeView,this)},e.prototype.removeEventListener=function(){this.parent.isDestroyed||this.parent.off(n._24,this.refreshTreeView)},e.prototype.destroy=function(){this.removeEventListener(),this.fieldTable&&!this.fieldTable.isDestroyed&&(this.fieldTable.destroy(),this.fieldTable=null),this.fieldDialog&&!this.fieldDialog.isDestroyed&&(this.fieldDialog.destroy(),this.fieldDialog=null),this.editorSearch&&!this.editorSearch.isDestroyed&&(this.editorSearch.destroy(),this.editorSearch=null),this.fieldSearch&&!this.fieldSearch.isDestroyed&&(this.fieldSearch.destroy(),this.fieldSearch=null)},e}()},function(e,t,i){"use strict";i.d(t,"a",function(){return o});var r=i(1),a=i(52),n=i(0),o=(i.n(n),function(){function e(e){this.parent=e,this.drillThroughDialog=new a.a(this.parent),this.addInternalEvents()}return e.prototype.getModuleName=function(){return"drillThrough"},e.prototype.addInternalEvents=function(){this.parent.on(r._21,this.wireEvents,this)},e.prototype.wireEvents=function(){this.unWireEvents(),n.EventHandler.add(this.parent.element,"dblclick",this.mouseClickHandler,this)},e.prototype.unWireEvents=function(){this.parent.isDestroyed||n.EventHandler.remove(this.parent.element,"dblclick",this.mouseClickHandler)},e.prototype.mouseClickHandler=function(e){var t=e.target,i=null;if(t.classList.contains("e-stackedheadercelldiv")||t.classList.contains("e-cellvalue")||t.classList.contains("e-headercelldiv")?i=t.parentElement:t.classList.contains("e-headercell")||t.classList.contains("e-rowcell")?i=t:t.classList.contains("e-headertext")&&(i=t.parentElement.parentElement),i&&(this.parent.allowDrillThrough&&i.classList.contains("e-valuescontent")||this.parent.editSettings.allowEditing)){var r=Number(i.getAttribute("data-colindex")),a=Number(i.getAttribute("index"));this.executeDrillThrough(this.parent.pivotValues[a][r],a,r,i)}},e.prototype.executeDrillThrough=function(e,t,i,r){this.parent.drillThroughElement=r,this.parent.drillThroughValue=e;var a="olap"===this.parent.dataType?this.parent.olapEngineModule:this.parent.engineModule,n="",o="",s=[];if(void 0!==e.rowHeaders&&void 0!==e.columnHeaders){if("olap"===this.parent.dataType){var l=void 0;l="row"===this.parent.dataSourceSettings.valueAxis?a.tupRowInfo[e.rowOrdinal]:a.tupColumnInfo[e.colOrdinal];var d=l?a.getUniqueName(l.measureName):e.actualText;if(a.fieldList[d]&&a.fieldList[d].isCalculatedField)return void this.parent.pivotCommon.errorDialog.createErrorDialog(this.parent.localeObj.getConstant("error"),this.parent.localeObj.getConstant("drillError"));n=a.fieldList[d||e.actualText].caption,o=a.fieldList[d||e.actualText].aggregateType,this.parent.olapEngineModule.getDrillThroughData(e,this.parent.maxRowsInDrillThrough);try{s=JSON.parse(a.gridJSON)}catch(e){return void this.parent.pivotCommon.errorDialog.createErrorDialog(this.parent.localeObj.getConstant("error"),a.gridJSON)}}else if(n=a.fieldList[e.actualText.toString()]?a.fieldList[e.actualText.toString()].caption:e.actualText.toString(),o=a.fieldList[e.actualText]?a.fieldList[e.actualText].aggregateType:"","Server"===this.parent.dataSourceSettings.mode)this.parent.getEngine("fetchRawData",null,null,null,null,null,null,{rowIndex:t,columnIndex:i});else if(this.parent.allowDataCompression){var h=Object.keys(e.indexObject);this.drillThroughDialog.indexString=[];for(var p=0,u=h;p<u.length;p++)for(var c=u[p],g=0,m=this.parent.engineModule.groupRawIndex[Number(c)];g<m.length;g++){var f=m[g];s.push(this.parent.engineModule.actualData[f]),this.drillThroughDialog.indexString.push(f.toString())}}else for(var h=Object.keys(e.indexObject),v=0,S=h;v<S.length;v++){var y=S[v];s.push(this.parent.engineModule.data[Number(y)])}"Server"!==this.parent.dataSourceSettings.mode&&this.triggerDialog(n,o,s,e,r)}},e.prototype.getCalcualtedFieldValue=function(e,t){for(var r=0;r<e.length;r++){var a={};a[e[r]]=e[r];for(var o=0;o<this.parent.dataSourceSettings.calculatedFieldSettings.length;o++){for(var s=void 0,l=this.parent.engineModule.fields.length-1;l>=0;l--)if(this.parent.engineModule.fields[l]===this.parent.dataSourceSettings.calculatedFieldSettings[o].name){s=l;break}if(!i.i(n.isNullOrUndefined)(t[r])){var d=this.parent.engineModule.getAggregateValue([Number(e[r])],a,s,"calculatedfield",!1);t[r][this.parent.dataSourceSettings.calculatedFieldSettings[o].name]=isNaN(d)&&i.i(n.isNullOrUndefined)(d)?"#DIV/0!":d}}}return t},e.prototype.frameData=function(e){for(var t=0,i=0,r=[];i<e.rawData.length;){for(var a={};t<e.gridColumns.length;)a[e.gridColumns[t].field]="Server"===this.parent.dataSourceSettings.mode?e.rawData[i][-1!==this.parent.engineModule.fields.indexOf(e.gridColumns[t].field)?this.parent.engineModule.fields.indexOf(e.gridColumns[t].field):0]:e.rawData[i][this.parent.engineModule.fieldKeys[e.gridColumns[t].field]],t++;r.push(a),i++,t=0}return e.rawData=r,e},e.prototype.triggerDialog=function(e,t,i,a,o){var s="CalculatedField"===t?e.toString():""!==t?this.parent.localeObj.getConstant(t)+" "+this.parent.localeObj.getConstant("of")+" "+e:e;s=this.parent.enableHtmlSanitizer?n.SanitizeHtmlHelper.sanitize(s):s;var l="row"===this.parent.dataSourceSettings.valueAxis?this.parent.getRowText(Number(o.getAttribute("index")),0):""===a.rowHeaders?"":a.rowHeaders.toString().split(this.parent.dataSourceSettings.valueSortSettings.headerDelimiter).join(" - "),d={currentTarget:o,currentCell:a,rawData:i,rowHeaders:l,columnHeaders:""===a.columnHeaders?"":a.columnHeaders.toString().split(this.parent.dataSourceSettings.valueSortSettings.headerDelimiter).join(" - "),value:s+"("+a.formattedText+")",gridColumns:this.drillThroughDialog.frameGridColumns(i),cancel:!1};"CSV"===this.parent.dataSourceSettings.type&&(d=this.frameData(d));var h=this;this.parent.trigger(r.v,d,function(e){d.cancel||h.drillThroughDialog.showDrillThroughDialog(e)})},e.prototype.destroy=function(){this.unWireEvents(),this.drillThroughDialog&&(this.drillThroughDialog.destroy(),this.drillThroughDialog=null)},e}())},function(e,t,i){"use strict";i.d(t,"a",function(){return o});var r=i(0),a=(i.n(r),i(2)),n=i(1),o=function(){function e(e){this.keyConfigs={tab:"tab",shiftTab:"shift+tab",enter:"enter",shiftUp:"shift+upArrow",shiftDown:"shift+downArrow",shiftLeft:"shift+leftArrow",shiftRight:"shift+rightArrow",shiftEnter:"shift+enter",ctrlEnter:"ctrl+enter",upArrow:"upArrow",downArrow:"downArrow",leftArrow:"leftArrow",rightArrow:"rightArrow",escape:"escape",ctrlShiftF:"ctrl+shift+f"},this.parent=e,this.event=void 0,this.parent.element.tabIndex=-1===this.parent.element.tabIndex?0:this.parent.element.tabIndex,this.pivotViewKeyboardModule=new r.KeyboardEvents(this.parent.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})}return e.prototype.keyActionHandler=function(e){switch(e.action){case"tab":this.processTab(e);break;case"shiftTab":this.processShiftTab(e);break;case"enter":case"shiftEnter":case"ctrlEnter":this.processEnter(e);break;case"shiftUp":case"shiftDown":case"shiftLeft":case"shiftRight":case"upArrow":case"downArrow":case"leftArrow":case"rightArrow":this.processSelection(e);break;case"escape":this.clearSelection();break;case"ctrlShiftF":this.toggleFieldList(e)}},e.prototype.getNextButton=function(e){var t=this.allpivotButtons(e);if(i.i(r.removeClass)(t,"e-btn-focused"),this.parent.grid.element.querySelector("."+a._14))for(var n=t.length,o=0;o<n;o++)if(t[o].getAttribute("data-uid")===e.getAttribute("data-uid"))return t[o+1]?t[o+1]:e;return e},e.prototype.getPrevButton=function(e){var t=this.allpivotButtons(e);if(i.i(r.removeClass)(t,"e-btn-focused"),this.parent.grid.element.querySelector("."+a._14))for(var n=t.length,o=0;o<n;o++)if(t[o].getAttribute("data-uid")===e.getAttribute("data-uid"))return t[o-1]?t[o-1]:e;return e},e.prototype.allpivotButtons=function(e){var t=[];if(e&&this.parent.showGroupingBar){var n=i.i(r.closest)(e,"."+a._133),o=i.i(r.closest)(e,"."+a._134),s=i.i(r.closest)(e,"."+a._135),l=e.classList.contains(a._282),d=void 0,h=void 0,p=void 0;if(null!==n?h=n.classList.contains(a._133):null!==o?p=o.classList.contains(a._134):null!==s&&(d=s.classList.contains(a._135)),h||p||l){var u=[].slice.call(this.parent.element.querySelector("."+a._133).querySelectorAll("."+a._14)),c=[].slice.call(this.parent.element.querySelector("."+a._134).querySelectorAll("."+a._14));t=u.concat(c)}else d&&(t=[].slice.call(this.parent.element.querySelector("."+a._135).querySelectorAll("."+a._14)))}return t},e.prototype.processTab=function(e){var t=e.target;if(t&&(i.i(r.closest)(t,"."+a._14)||t.classList.contains("e-group-row"))){if(this.parent.grid){var n=this.parent.grid.serviceLocator.getService("focus");if(t.classList.contains("e-group-row")&&t.querySelector(".e-btn-focused"))t=t.querySelector(".e-btn-focused");else if(t.classList.contains("e-group-row")){n.focus();var o=n.getFocusedElement();return i.i(r.addClass)([o],["e-focused","e-focus"]),o.setAttribute("tabindex","0"),void e.preventDefault()}var s=this.getNextButton(t);if(s.getAttribute("data-uid")!==t.getAttribute("data-uid"))this.parent.element.querySelector(".e-focused")?(this.parent.element.querySelector(".e-focused").setAttribute("tabindex","-1"),i.i(r.removeClass)(this.parent.element.querySelectorAll(".e-focus"),"e-focus"),i.i(r.removeClass)(this.parent.element.querySelectorAll(".e-focused"),"e-focused"),n.setFocusedElement(this.parent.element.querySelector(".e-headercell")),this.parent.element.querySelector(".e-headercell").setAttribute("tabindex","0")):n.currentInfo.skipAction=!0,i.i(r.addClass)([s],"e-btn-focused"),s.focus();else{n.focus();var o=n.getFocusedElement();i.i(r.addClass)([o],["e-focused","e-focus"]),o.setAttribute("tabindex","0")}return void e.preventDefault()}}else if(!this.parent.showGroupingBar&&this.parent.showFieldList&&t&&i.i(r.closest)(t,"."+a._85)){if(this.parent.grid){var n=this.parent.grid.serviceLocator.getService("focus");n.focus();var o=n.getFocusedElement();return i.i(r.addClass)([o],["e-focused","e-focus"]),o.setAttribute("tabindex","0"),void e.preventDefault()}}else if(this.parent.showGroupingBar||this.parent.showFieldList||!t||!i.i(r.closest)(t,"."+a._283)||i.i(r.closest)(t,".e-popup.e-popup-open")){if(t&&i.i(r.closest)(t,"."+a.v)&&this.parent.toolbar&&this.parent.toolbarModule)clearTimeout(this.timeOutObj),this.timeOutObj=setTimeout(function(){i.i(r.removeClass)(i.i(r.closest)(t,"."+a.v).querySelectorAll(".e-menu-item.e-focused"),"e-focused"),document.activeElement&&document.activeElement.classList.contains("e-menu-item")&&i.i(r.addClass)([document.activeElement],"e-focused")});else if(t.classList.contains("e-numerictextbox")){var n=this.parent.grid.serviceLocator.getService("focus");n.focus();var o=n.getFocusedElement();i.i(r.removeClass)([o],["e-focused","e-focus"]),o.setAttribute("tabindex","0"),e.preventDefault()}}else if(this.parent.grid){var l=i.i(r.closest)(t,"."+a._283),n=this.parent.grid.serviceLocator.getService("focus"),d=[].slice.call(l.getElementsByTagName("tr"));if(t.innerHTML!==d[d.length-1].lastChild.innerHTML){n.focus();var o=n.getFocusedElement();return i.i(r.addClass)([o],["e-focused","e-focus"]),o.setAttribute("tabindex","0"),void e.preventDefault()}n.currentInfo.skipAction=!0}},e.prototype.processShiftTab=function(e){var t=e.target;if(t&&(i.i(r.closest)(t,"."+a._14)||t.classList.contains("e-group-row"))){if(this.parent.grid){var n=this.parent.grid.serviceLocator.getService("focus");if(t.classList.contains("e-group-row")&&t.querySelector(".e-btn-focused"))t=t.querySelector(".e-btn-focused");else if(t.classList.contains("e-group-row")){t=this.parent.element.querySelector(".e-btn-focused")?this.parent.element.querySelector(".e-btn-focused"):this.parent.element.querySelector("."+a._133);var o=this.allpivotButtons(t);if(o.length>0&&o[o.length-1])return n.currentInfo.skipAction=!0,o[o.length-1].focus(),i.i(r.removeClass)(o,"e-btn-focused"),i.i(r.addClass)([o[o.length-1]],"e-btn-focused"),void e.preventDefault()}var s=this.getPrevButton(t);if(s.getAttribute("data-uid")!==t.getAttribute("data-uid"))return n.currentInfo.skipAction=!0,s.focus(),void e.preventDefault()}}else if(t&&this.parent.grid&&(t.classList.contains("e-movablefirst")||t.classList.contains("e-rowsheader")&&i.i(r.closest)(t,"tr").getAttribute("data-uid")===this.parent.grid.element.querySelector(".e-frozencontent tr").getAttribute("data-uid"))){var n=this.parent.grid.serviceLocator.getService("focus");if(t.classList.contains("e-movablefirst")){t=this.parent.element.querySelector("."+a._125+" .e-btn-focused")?this.parent.element.querySelector("."+a._125+" .e-btn-focused"):this.parent.element.querySelector("."+a._125);var l=n.getFocusedElement();i.i(r.removeClass)([l],["e-focused","e-focus"])}var d=this.allpivotButtons(t);if(d.length>0)return n.currentInfo.skipAction=!0,setTimeout(function(){d[d.length-1].focus()}),i.i(r.removeClass)(d,"e-btn-focused"),i.i(r.addClass)([d[d.length-1]],"e-btn-focused"),void e.preventDefault()}else if(t&&i.i(r.closest)(t,"."+a.v)&&this.parent.toolbar&&this.parent.toolbarModule)clearTimeout(this.timeOutObj),this.timeOutObj=setTimeout(function(){i.i(r.removeClass)(i.i(r.closest)(t,"."+a.v).querySelectorAll(".e-menu-item.e-focused"),"e-focused"),document.activeElement&&document.activeElement.classList.contains("e-menu-item")&&i.i(r.addClass)([document.activeElement],"e-focused")});else if(t.classList.contains("e-numerictextbox")){var n=this.parent.grid.serviceLocator.getService("focus");n.focus();var l=n.getFocusedElement();i.i(r.removeClass)([l],["e-focused","e-focus"]),l.setAttribute("tabindex","0"),e.preventDefault()}},e.prototype.processEnter=function(e){var t=e.target;if(t&&i.i(r.closest)(t,"."+a._142)){var n=this.parent.grid.serviceLocator.getService("focus");if(13!==e.keyCode||e.shiftKey||e.ctrlKey)if(13===e.keyCode&&e.shiftKey&&!e.ctrlKey){if(this.parent.enableValueSorting){this.event=e,t.click(),n.focus();var o=n.getFocusedElement();i.i(r.addClass)([o],["e-focused","e-focus"]),o.setAttribute("tabindex","0")}}else 13===e.keyCode&&!e.shiftKey&&e.ctrlKey&&this.parent.hyperlinkSettings&&t.querySelector("a")&&t.querySelector("a").click();else if(t.querySelector("."+a.a)){this.event=e,t.querySelector("."+a.a).click(),n.focus();var o=n.getFocusedElement();i.i(r.addClass)([o],["e-focused","e-focus"]),o.setAttribute("tabindex","0")}else if(t.classList.contains("e-valuescontent"))t.dispatchEvent(new MouseEvent("dblclick",{view:window,bubbles:!0,cancelable:!0})),t.querySelector(".e-numerictextbox")&&t.click();else if(t.classList.contains("e-numerictextbox")){n.focus();var o=n.getFocusedElement();i.i(r.removeClass)([o],["e-focused","e-focus"])}return void e.preventDefault()}},e.prototype.clearSelection=function(){var e=this.parent;i.i(r.removeClass)(e.element.querySelectorAll("."+a.b+",."+a.c),[a.c,a.b,a._284]),this.parent.renderModule.selected()},e.prototype.processSelection=function(e){var t=e.target;if(this.parent.grid&&this.parent.gridSettings.allowSelection&&"Row"!==this.parent.gridSettings.selectionSettings.mode&&!t.classList.contains("e-numerictextbox")){var o,s=this.parent,l=Number(e.target.getAttribute("data-colindex")),d=Number(e.target.getAttribute("index"));if("TH"!==t.nodeName&&"TD"!==t.nodeName||(o="shiftUp"===e.action||"upArrow"===e.action?0===d||0===l||"TH"!==t.nodeName&&s.renderModule.rowStartPos!==d?null:this.getParentElement(s,o,l,d-1):"shiftDown"===e.action||"downArrow"===e.action?s.element.querySelector('th[data-colindex="'+l+'"][index="'+(d+1)+'"]'):"shiftLeft"===e.action||"leftArrow"===e.action?e.target.previousSibling:e.target.nextSibling),i.i(r.isNullOrUndefined)(o))"upArrow"===e.action?(o=s.element.querySelector('[data-colindex="'+l+'"][index="'+(d-1)+'"]'),d--):"downArrow"===e.action&&(o=s.element.querySelector('[data-colindex="'+l+'"][index="'+(d+1)+'"]'),d++),i.i(r.isNullOrUndefined)(o)||s.clearSelection(o,e,l,d);else if("Both"===s.gridSettings.selectionSettings.mode&&o.classList.contains(a._285))s.clearSelection(o,e,l,d);else{l=Number(o.getAttribute("data-colindex")),d=Number(o.getAttribute("index"));var h=Number(o.getAttribute("aria-colspan"));s.clearSelection(o,e,l,d);var p={cancel:!1,isCellClick:!0,currentCell:o,data:s.pivotValues[d][l]};s.trigger(n.y,p,function(t){t.cancel||s.applyColumnSelection(e,o,l,l+(h>0?h-1:0),d)})}}else if(t&&(37===e.keyCode||38===e.keyCode)&&this.parent&&this.parent.showGroupingBar&&this.parent.groupingBarModule&&!t.classList.contains("e-numerictextbox")){if(this.parent.grid&&this.parent.element.querySelector(".e-frozenheader")&&this.parent.element.querySelector(".e-frozenheader").querySelectorAll(".e-focus").length>0){i.i(r.removeClass)(this.parent.element.querySelector(".e-frozenheader").querySelectorAll(".e-focus"),"e-focus"),i.i(r.removeClass)(this.parent.element.querySelector(".e-frozenheader").querySelectorAll(".e-focused"),"e-focused"),this.parent.element.querySelector(".e-headercell").setAttribute("tabindex","-1");var u=this.parent.grid.serviceLocator.getService("focus");return u.setFocusedElement(t),i.i(r.addClass)([t],["e-focused","e-focus"]),t.setAttribute("tabindex","0"),t.focus(),void e.preventDefault()}}else!t.classList.contains("e-numerictextbox")||"rightArrow"!==e.action&&"leftArrow"!==e.action||t.click()},e.prototype.getParentElement=function(e,t,i,r){for(;!t;)t=e.element.querySelector('[data-colindex="'+i+'"][index="'+r+'"]'),i--;return t},e.prototype.toggleFieldList=function(e){if(this.parent&&!this.parent.isDestroyed&&this.parent.showFieldList&&this.parent.pivotFieldListModule&&!this.parent.pivotFieldListModule.isDestroyed&&this.parent.element.querySelector("."+a._85)){if(!this.parent.element.querySelector("."+a._85).classList.contains(a._86))return this.parent.element.querySelector("."+a._85).click(),void e.preventDefault();this.parent.element.querySelector("."+a._85).classList.contains(a._86)&&this.parent.pivotFieldListModule.dialogRenderer&&this.parent.pivotFieldListModule.dialogRenderer.fieldListDialog&&!this.parent.pivotFieldListModule.dialogRenderer.fieldListDialog.isDestroyed&&this.parent.pivotFieldListModule.dialogRenderer.fieldListDialog.hide()}},e.prototype.destroy=function(){this.pivotViewKeyboardModule&&this.pivotViewKeyboardModule.destroy()},e}()},function(e,t,i){"use strict";i.d(t,"a",function(){return s});var r=i(0),a=(i.n(r),i(1)),n=i(2),o=i(3),s=function(){function e(e){this.previousValues={top:0,left:0},this.frozenPreviousValues={top:0,left:0},this.eventType="",this.isFireFox=r.Browser.userAgent.toLowerCase().indexOf("firefox")>-1,this.parent=e,this.addInternalEvents()}return e.prototype.getModuleName=function(){return"virtualscroll"},e.prototype.addInternalEvents=function(){this.parent.on(a._21,this.wireEvents,this)},e.prototype.wireEvents=function(){if(this.engineModule="pivot"===this.parent.dataType?this.parent.engineModule:this.parent.olapEngineModule,"Chart"!==this.parent.displayOption.view){var e=this.parent.element.querySelector("."+n._276),t=this.parent.element.querySelector("."+n._277),i=this.parent.element.querySelector("."+n._278),a=e.parentElement.parentElement.querySelector("."+n._279);if(r.EventHandler.clearEvents(e),r.EventHandler.clearEvents(t),this.isFireFox&&r.EventHandler.clearEvents(i),this.engineModule){var o=this.parent.isAdaptive?e:e.parentElement.parentElement.querySelector("."+n._279);r.EventHandler.add(o,"scroll touchmove pointermove",this.onHorizondalScroll(i,e,t),this),r.EventHandler.add(e.parentElement,"scroll wheel touchmove pointermove keyup keydown",this.onVerticalScroll(t,e),this),this.isFireFox?r.EventHandler.add(e,"mouseup touchend scroll",this.common(i,e,t),this):r.EventHandler.add(e.parentElement.parentElement,"mouseup touchend",this.common(i,e,t),this),r.EventHandler.add(a,"scroll",this.onCustomScrollbarScroll(e,i),this),r.EventHandler.add(e,"scroll",this.onCustomScrollbarScroll(a,i),this),r.EventHandler.add(i,"scroll",this.onCustomScrollbarScroll(a,e),this),r.EventHandler.add(i,"touchstart pointerdown",this.setPageXY(),this),r.EventHandler.add(i,"touchmove pointermove",this.onTouchScroll(i,e,t),this),r.EventHandler.add(e,"touchstart pointerdown",this.setPageXY(),this),r.EventHandler.add(e,"touchmove pointermove",this.onTouchScroll(i,e,t),this)}this.parent.grid.on("check-scroll-reset",function(e){e.cancel=!0}),this.parent.grid.on("prevent-frozen-scroll-refresh",function(e){e.cancel=!0}),this.parent.grid.isPreventScrollEvent=!0}},e.prototype.onWheelScroll=function(e,t){var i=this,r=e;return function(e){var t=r.parentElement.scrollTop+(1===e.deltaMode?30*e.deltaY:e.deltaY);i.frozenPreviousValues.top!==t&&(e.preventDefault(),i.frozenPreviousValues.top=t,i.eventType=e.type)}},e.prototype.getPointXY=function(e){var t={x:0,y:0};return e.touches&&e.touches.length?(t.x=e.touches[0].pageX,t.y=e.touches[0].pageY):(t.x=e.pageX,t.y=e.pageY),t},e.prototype.onCustomScrollbarScroll=function(e,t){var i=this,r=e,a=t;return function(e){if(null!==i.parent.element.querySelector("."+n._276).parentElement.querySelector("tbody")){var t=e.target,o=t.scrollLeft;i.previousValues.left===o||i.isFireFox&&t.classList.contains(n._278)||(r.scrollLeft=o,a.scrollLeft=o,i.previousValues.left=o,i.parent.isDestroyed)}}},e.prototype.onTouchScroll=function(e,t,i){var r=this,a=t;return function(i){if("mouse"!==i.pointerType){var o=r.getPointXY(i),s=a.parentElement.scrollTop+(r.pageXY.y-o.y),l=r.parent.isAdaptive?t:a.parentElement.parentElement.querySelector("."+n._279),d=l.scrollLeft+(r.pageXY.x-o.x);r.frozenPreviousValues.left===d||d<0||(e.scrollLeft=d,l.scrollLeft=d,r.pageXY.x=o.x,r.frozenPreviousValues.left=d,r.frozenPreviousValues.top===s||s<0||(r.pageXY.y=o.y,r.frozenPreviousValues.top=s,r.eventType=i.type))}}},e.prototype.update=function(e,t,i,r,n){var s=this;this.parent.isScrolling=!0;var l="pivot"===this.parent.dataType?this.parent.engineModule:this.parent.olapEngineModule,d={dataSourceSettings:o.a.getClonedDataSourceSettings(this.parent.dataSourceSettings)};if(this.parent.pageSettings&&l.pageSettings){if("vertical"===this.direction){var h="pivot"===this.parent.dataType&&"row"===this.parent.dataSourceSettings.valueAxis?this.parent.dataSourceSettings.values.length:1,p=this.parent.pageSettings.rowPageSize*h*this.parent.gridSettings.rowHeight,u=Math.ceil(i/p);if(this.parent.scrollPosObject.vertical===u||l.pageSettings.rowPageSize>=l.rowCount)return;this.parent.actionObj.actionName=a._19,this.parent.actionBeginMethod(),this.parent.showWaitingPopup(),this.parent.scrollPosObject.vertical=u,this.parent.pageSettings.currentRowPage=l.pageSettings.currentRowPage=u>1?u:1;var c=0;this.parent.trigger(a.b,d,function(e){"pivot"===s.parent.dataType?"Server"===s.parent.dataSourceSettings.mode?s.parent.getEngine("onScroll",null,null,null,null,null,null):(s.parent.engineModule.generateGridData(s.parent.dataSourceSettings,!0,s.parent.engineModule.headerCollection),c=s.parent.engineModule.rowStartPos):(s.parent.olapEngineModule.scrollPage(),c=s.parent.olapEngineModule.pageRowStartPos),s.enginePopulatedEventMethod(l)});var g=Math.ceil(c/(this.parent.pageSettings.rowPageSize*h)),m=p*g-l.rowFirstLvl*h*this.parent.gridSettings.rowHeight;this.parent.scrollPosObject.verticalSection=m}else{var f="pivot"===this.parent.dataType&&"column"===this.parent.dataSourceSettings.valueAxis?this.parent.dataSourceSettings.values.length:1,p=this.parent.pageSettings.columnPageSize*f*this.parent.gridSettings.columnWidth,u=Math.ceil(r/p);if(this.parent.scrollPosObject.horizontal===u)return;this.parent.actionObj.actionName=a._20,this.parent.actionBeginMethod(),this.parent.showWaitingPopup();var v=this.parent;v.scrollPosObject.horizontal=u,this.parent.pageSettings.currentColumnPage=l.pageSettings.currentColumnPage=u>1?u:1;var S=0;this.parent.trigger(a.b,d,function(e){"pivot"===v.dataType?"Server"===s.parent.dataSourceSettings.mode?s.parent.getEngine("onScroll",null,null,null,null,null,null):(v.engineModule.generateGridData(v.dataSourceSettings,!0,v.engineModule.headerCollection),S=v.engineModule.colStartPos):(v.olapEngineModule.scrollPage(),S=v.olapEngineModule.pageColStartPos),s.enginePopulatedEventMethod(l)});var g=Math.ceil(S/(v.pageSettings.columnPageSize*f)),m=p*g-l.colFirstLvl*f*v.gridSettings.columnWidth;v.scrollPosObject.horizontalSection=m}this.parent.actionObj.actionName=this.parent.getActionCompleteName(),this.parent.actionObj.actionName&&this.parent.actionCompleteMethod()}},e.prototype.enginePopulatedEventMethod=function(e,t){var i=this,r=t||this.parent,n={dataSourceSettings:r.dataSourceSettings,pivotValues:e.pivotValues};r.trigger(a.c,n,function(e){i.parent.pivotValues=e.pivotValues})},e.prototype.setPageXY=function(){var e=this;return function(t){"mouse"!==t.pointerType&&(e.pageXY=e.getPointXY(t))}},e.prototype.common=function(e,t,i){var r=this;return function(i){var a=r.parent.isAdaptive?t:t.parentElement.parentElement.querySelector("."+n._279);r.update(e,t,t.parentElement.scrollTop*r.parent.verticalScrollScale,a.scrollLeft*r.parent.horizontalScrollScale,i)}},e.prototype.onHorizondalScroll=function(e,t,a){var o,s=this;return function(a){var l=s.parent.isAdaptive?t:t.parentElement.parentElement.querySelector("."+n._279),d=l.scrollLeft*s.parent.horizontalScrollScale;if("wheel"!==a.type&&"touchmove"!==a.type&&"wheel"!==s.eventType&&"touchmove"!==s.eventType||(clearTimeout(o),o=setTimeout(function(){d="touchmove"===a.type?l.scrollLeft:d,s.update(e,t,t.parentElement.scrollTop*s.parent.verticalScrollScale,d,a)},300)),s.previousValues.left!==d){s.parent.scrollDirection=s.direction="horizondal";var h=-(d-s.parent.scrollPosObject.horizontalSection-l.scrollLeft),p=t.querySelector("."+n._280).style.transform.split(",").length>1?t.querySelector("."+n._280).style.transform.split(",")[1].trim():"0px)";l.scrollLeft<s.parent.scrollerBrowserLimit&&(i.i(r.setStyleAttribute)(t.querySelector(".e-table"),{transform:"translate("+h+"px,"+p}),i.i(r.setStyleAttribute)(e.querySelector(".e-table"),{transform:"translate("+h+"px,0px)"}));var u=s.parent.scrollPosObject.horizontalSection>d?-(s.parent.scrollPosObject.horizontalSection-d):d+e.offsetWidth-(s.parent.scrollPosObject.horizontalSection+t.querySelector(".e-table").offsetWidth),c=Math.ceil(s.parent.scrollPosObject.horizontalSection/s.parent.horizontalScrollScale)<s.parent.scrollerBrowserLimit;if(s.parent.scrollPosObject.horizontalSection>d||u>1&&c){d>e.clientWidth?(s.parent.scrollPosObject.left<1&&(s.parent.scrollPosObject.left=e.clientWidth),s.parent.scrollPosObject.left=s.parent.scrollPosObject.left-50,u=s.parent.scrollPosObject.horizontalSection>d?u-s.parent.scrollPosObject.left:u+s.parent.scrollPosObject.left):u=-s.parent.scrollPosObject.horizontalSection,h=-(d-(s.parent.scrollPosObject.horizontalSection+u)-t.parentElement.parentElement.querySelector("."+n._279).scrollLeft);var g=s.parent.gridSettings.columnWidth*s.engineModule.columnCount;g>s.parent.scrollerBrowserLimit&&(s.parent.horizontalScrollScale=g/s.parent.scrollerBrowserLimit,g=s.parent.scrollerBrowserLimit),h>g&&h>d&&(h=d,u=0),i.i(r.setStyleAttribute)(t.querySelector(".e-table"),{transform:"translate("+h+"px,"+p}),i.i(r.setStyleAttribute)(e.querySelector(".e-table"),{transform:"translate("+h+"px,0px)"}),s.parent.scrollPosObject.horizontalSection=s.parent.scrollPosObject.horizontalSection+u}var m=l.scrollWidth-(l.scrollLeft+l.offsetWidth);if(m<=0){var f=t.querySelector("."+n._281);f.style.display="none";var v=t.scrollWidth-(t.scrollLeft+t.offsetWidth);f.style.display="";var S=t.scrollWidth-(t.scrollLeft+t.offsetWidth);s.parent.scrollPosObject.horizontalSection-=v>m?v:-S,h=l.scrollLeft>s.parent.scrollerBrowserLimit?Number(t.querySelector("."+n._280).style.transform.split(",")[0].split("px")[0].trim()):-(l.scrollLeft*s.parent.horizontalScrollScale-s.parent.scrollPosObject.horizontalSection-l.scrollLeft),i.i(r.setStyleAttribute)(t.querySelector(".e-table"),{transform:"translate("+h+"px,"+p}),i.i(r.setStyleAttribute)(e.querySelector(".e-table"),{transform:"translate("+h+"px,0px)"})}s.previousValues.left=d,s.frozenPreviousValues.left=d,s.eventType="",e.scrollLeft=l.scrollLeft}}},e.prototype.onVerticalScroll=function(e,t){var a,o=this;return function(s){var l=t.parentElement.scrollTop*o.parent.verticalScrollScale;if("wheel"===s.type||"touchmove"===s.type||"wheel"===o.eventType||"touchmove"===o.eventType||"keyup"===s.type||"keydown"===s.type){var d=o.parent.isAdaptive?t:t.parentElement.parentElement.querySelector("."+n._279);clearTimeout(a),a=setTimeout(function(){o.update(null,t,t.parentElement.scrollTop*o.parent.verticalScrollScale,d.scrollLeft*o.parent.horizontalScrollScale,s)},300)}if(o.previousValues.top!==l){o.parent.scrollDirection=o.direction="vertical";var h=-(l-o.parent.scrollPosObject.verticalSection-t.parentElement.scrollTop),p=t.querySelector("."+n._280).style.transform.split(",")[0].trim();h>o.parent.virtualDiv.clientHeight&&(h=o.parent.virtualDiv.clientHeight),t.parentElement.scrollTop<o.parent.scrollerBrowserLimit&&(i.i(r.setStyleAttribute)(e.querySelector(".e-table"),{transform:"translate(0px,"+h+"px)"}),i.i(r.setStyleAttribute)(t.querySelector(".e-table"),{transform:p+","+h+"px)"}));var u=o.parent.scrollPosObject.verticalSection>l?-(o.parent.scrollPosObject.verticalSection-l):l+e.parentElement.clientHeight-(o.parent.scrollPosObject.verticalSection+e.querySelector(".e-table").offsetHeight),c=Math.ceil(o.parent.scrollPosObject.verticalSection/o.parent.verticalScrollScale)<o.parent.scrollerBrowserLimit;if(o.parent.scrollPosObject.verticalSection>l||u>1&&c){l>e.parentElement.clientHeight?(o.parent.scrollPosObject.top<1&&(o.parent.scrollPosObject.top=e.parentElement.clientHeight),o.parent.scrollPosObject.top=o.parent.scrollPosObject.top-50,u=o.parent.scrollPosObject.verticalSection>l?u-o.parent.scrollPosObject.top:u+o.parent.scrollPosObject.top):u=-o.parent.scrollPosObject.verticalSection;var g=o.parent.element.querySelector("."+n._276).querySelector(".e-table");h=-(l-(o.parent.scrollPosObject.verticalSection+u)-t.parentElement.scrollTop);var m=o.parent.gridSettings.rowHeight*o.engineModule.rowCount+.1-g.clientHeight;m>o.parent.scrollerBrowserLimit&&(o.parent.verticalScrollScale=m/o.parent.scrollerBrowserLimit,m=o.parent.scrollerBrowserLimit),h>m&&h>l&&(h=l,u=0),h>o.parent.virtualDiv.clientHeight&&(h=o.parent.virtualDiv.clientHeight),i.i(r.setStyleAttribute)(e.querySelector(".e-table"),{transform:"translate(0px,"+h+"px)"}),i.i(r.setStyleAttribute)(t.querySelector(".e-table"),{transform:p+","+h+"px)"}),o.parent.scrollPosObject.verticalSection=o.parent.scrollPosObject.verticalSection+u}o.previousValues.top=l,o.frozenPreviousValues.top=l,o.eventType=""}}},e.prototype.removeInternalEvents=function(){this.parent.isDestroyed||this.parent.off(a._21,this.wireEvents)},e.prototype.destroy=function(){this.removeInternalEvents()},e}()},function(e,t,i){"use strict";i.d(t,"a",function(){return d});var r=i(8),a=(i.n(r),i(0)),n=(i.n(a),i(2)),o=i(1),s=i(18),l=i(3),d=function(){function e(e){this.isAutoFitEnabled=!1,this.pivotColumns=[],this.indentCollection={},this.colPos=0,this.lastSpan=0,this.lvlCollection={},this.hierarchyCollection={},this.lvlPosCollection={},this.hierarchyPosCollection={},this.position=0,this.measurePos=0,this.maxMeasurePos=0,this.hierarchyCount=0,this.actualText="",this.parent=e,this.resColWidth=this.parent.showGroupingBar&&this.parent.groupingBarModule?this.parent.isAdaptive?180:250:this.parent.isAdaptive?140:200,this.engine="olap"===this.parent.dataType?this.parent.olapEngineModule:this.parent.engineModule,this.gridSettings=this.parent.gridSettings,this.formatList=this.getFormatList(),this.aggMenu=new s.a(this.parent)}return e.prototype.render=function(e){if(e&&this.initProperties(),this.resColWidth=this.parent.showGroupingBar&&this.parent.groupingBarModule?this.parent.isAdaptive?180:250:this.parent.isAdaptive?140:200,this.engine="olap"===this.parent.dataType?this.parent.olapEngineModule:this.parent.engineModule,this.gridSettings=this.parent.gridSettings,this.formatList=this.getFormatList(),this.parent.gridHeaderCellInfo=[],this.parent.gridCellCollection={},this.injectGridModules(this.parent),this.rowStartPos=this.getRowStartPos(),this.parent.grid&&this.parent.grid.element&&this.parent.element.querySelector(".e-grid")){if(this.parent.notEmpty=!0,this.engine.isEngineUpdated?(this.parent.enableValueSorting&&(this.engine.valueContent=this.frameDataSource("value")),this.engine.isEngineUpdated=!1):(this.engine.headerContent=this.frameDataSource("header"),this.engine.valueContent=this.frameDataSource("value")),this.parent.grid.setProperties({columns:this.frameStackedHeaders(),dataSource:("olap"===this.parent.dataType&&""!==this.parent.dataSourceSettings.url||this.parent.dataSourceSettings.dataSource&&this.parent.engineModule.data.length>0&&this.parent.dataSourceSettings.values.length>0)&&!this.engine.isEmptyData?this.engine.valueContent:this.frameDataSource("value")},!0),"auto"===this.parent.grid.height){var t=this.parent.element.querySelector("."+n._276).offsetHeight,o=this.parent.grid.dataSource.length*this.parent.gridSettings.rowHeight;t>50&&t<o&&this.parent.grid.contentModule.setHeightToContent(o)}this.parent.grid.notify("datasource-modified",{}),this.parent.isScrolling&&(this.parent.resizeInfo={}),this.parent.grid.refreshColumns(),this.parent.showGroupingBar&&this.parent.groupingBarModule&&this.parent.element.querySelector("."+n.w)&&this.parent.groupingBarModule.setGridRowWidth();this.parent.element.querySelector(".e-movablecontent").querySelector("colGroup").innerHTML=this.parent.grid.getHeaderContent().querySelector(".e-movableheader").querySelector("colgroup").innerHTML,this.parent.grid.width=this.calculateGridWidth(),!this.gridSettings.allowAutoResizing&&this.parent.showGroupingBar&&this.parent.groupingBarModule&&this.parent.element.querySelector("."+n.w)&&this.parent.groupingBarModule.refreshUI(),this.parent.isScrolling||this.calculateGridHeight(!0)}else this.parent.element.innerHTML="",this.bindGrid(this.parent,!!this.engine.isEmptyData),this.parent.element.appendChild(i.i(a.createElement)("div",{id:this.parent.element.id+"_grid"})),this.parent.grid.isStringTemplate=!0,this.parent.grid.appendTo("#"+this.parent.element.id+"_grid");this.parent.grid.on(r.headerRefreshed,this.refreshHeader,this)},e.prototype.initProperties=function(){this.rowStartPos=void 0,this.maxIndent=void 0,this.resColWidth=void 0,this.isOverflows=void 0,this.indentCollection={},this.formatList=void 0,this.colPos=0,this.colGrandPos=void 0,this.rowGrandPos=void 0,this.lastSpan=0,this.field=void 0,this.fieldCaption=void 0,this.lvlCollection={},this.hierarchyCollection={},this.lvlPosCollection={},this.hierarchyPosCollection={},this.position=0,this.measurePos=0,this.maxMeasurePos=0,this.hierarchyCount=0,this.actualText="",this.timeOutObj=void 0},e.prototype.refreshHeader=function(){if(this.parent.enableVirtualization){var e=this.parent.element.querySelector("."+n._278),t=this.parent.element.querySelector("."+n._276),r=t.querySelector("."+n._281);this.parent.virtualHeaderDiv=e.querySelector("."+n._281),e.querySelector("."+n._281)?i.i(a.remove)(e.querySelector("."+n._281)):this.parent.virtualHeaderDiv=i.i(a.createElement)("div",{className:n._281}),e.appendChild(this.parent.virtualHeaderDiv),r&&i.i(a.setStyleAttribute)(this.parent.virtualHeaderDiv,{height:0,width:r.style.width}),e.querySelector(".e-table")&&i.i(a.setStyleAttribute)(e.querySelector(".e-table"),{transform:t.querySelector(".e-table").style.transform.split(",")[0]+",0px)"});var o=this.parent.isAdaptive?t:t.parentElement.parentElement.querySelector("."+n._279);e.scrollLeft=o.scrollLeft}},e.prototype.bindGrid=function(e,t){this.injectGridModules(e),this.parent.grid=new r.Grid({cssClass:this.parent.cssClass,frozenColumns:1,frozenRows:0,enableHover:!1,dataSource:t?this.frameEmptyData():this.frameDataSource("value"),columns:t?this.frameEmptyColumns():this.frameStackedHeaders(),height:t?"auto":this.calculateGridHeight(),width:t?this.gridSettings.allowAutoResizing?this.parent.width:400:this.calculateGridWidth(),locale:e.locale,enableRtl:e.enableRtl,allowExcelExport:e.allowExcelExport,allowPdfExport:e.allowPdfExport,allowResizing:this.gridSettings.allowResizing,allowTextWrap:this.gridSettings.allowTextWrap,clipMode:this.gridSettings.clipMode,allowReordering:!this.parent.showGroupingBar&&this.gridSettings.allowReordering,allowSelection:this.gridSettings.allowSelection,contextMenuItems:this.gridSettings.contextMenuItems,selectedRowIndex:this.gridSettings.selectedRowIndex,selectionSettings:this.gridSettings.selectionSettings,textWrapSettings:this.gridSettings.textWrapSettings,printMode:this.gridSettings.printMode,rowHeight:this.gridSettings.rowHeight,gridLines:this.gridSettings.gridLines,contextMenuClick:this.contextMenuClick.bind(this),contextMenuOpen:this.contextMenuOpen.bind(this),beforeCopy:this.gridSettings.beforeCopy?this.gridSettings.beforeCopy.bind(this.parent):void 0,beforePrint:this.gridSettings.beforePrint?this.gridSettings.beforePrint.bind(this.parent):void 0,printComplete:this.gridSettings.printComplete?this.gridSettings.printComplete.bind(this.parent):void 0,rowSelecting:this.gridSettings.rowSelecting?this.gridSettings.rowSelecting.bind(this.parent):void 0,rowSelected:this.rowSelected.bind(this),rowDeselecting:this.gridSettings.rowDeselecting?this.gridSettings.rowDeselecting.bind(this.parent):void 0,rowDeselected:this.rowDeselected.bind(this),cellSelecting:this.gridSettings.cellSelecting?this.gridSettings.cellSelecting.bind(this.parent):void 0,cellSelected:this.cellSelected.bind(this),cellDeselecting:this.gridSettings.cellDeselecting?this.gridSettings.cellDeselecting.bind(this.parent):void 0,cellDeselected:this.cellDeselected.bind(this),resizeStart:this.gridSettings.resizeStart?this.gridSettings.resizeStart.bind(this.parent):void 0,columnDragStart:this.gridSettings.columnDragStart?this.gridSettings.columnDragStart.bind(this):void 0,columnDrag:this.gridSettings.columnDrag?this.gridSettings.columnDrag.bind(this):void 0,columnDrop:this.gridSettings.columnDrop?this.gridSettings.columnDrop.bind(this):void 0,beforeExcelExport:this.beforeExcelExport.bind(this),resizing:this.setGroupWidth.bind(this),resizeStop:this.onResizeStop.bind(this),queryCellInfo:this.queryCellInfo.bind(this),dataBound:this.dataBound.bind(this),headerCellInfo:this.headerCellInfo.bind(this),excelHeaderQueryCellInfo:this.excelHeaderQueryCellInfo.bind(this),pdfHeaderQueryCellInfo:this.pdfHeaderQueryCellInfo.bind(this),excelQueryCellInfo:this.excelQueryCellInfo.bind(this),pdfQueryCellInfo:this.pdfQueryCellInfo.bind(this),beforePdfExport:this.gridSettings.beforePdfExport?this.gridSettings.beforePdfExport.bind(this):void 0,pdfExportComplete:this.pdfExportComplete.bind(this),excelExportComplete:this.excelExportComplete.bind(this)}),this.parent.grid.on("header-refreshed",this.headerRefreshed.bind(this)),this.parent.grid.on("export-DataBound",this.excelDataBound.bind(this))},e.prototype.headerRefreshed=function(){var e=this.parent.element.querySelector("."+n._278);this.parent.lastGridSettings&&Object.keys(this.parent.lastGridSettings).indexOf("allowResizing")>-1&&!i.i(a.isNullOrUndefined)(e)&&e.querySelector(".e-table")&&this.parent.showGroupingBar&&this.parent.groupingBarModule&&this.parent.element.querySelector("."+n.w)&&(this.parent.lastGridSettings=void 0,this.parent.groupingBarModule.setGridRowWidth())},e.prototype.beforeExcelExport=function(e){i.i(a.isNullOrUndefined)(e.gridObject.columns)||i.i(a.isNullOrUndefined)(this.parent.pivotColumns)||(e.gridObject.columns[e.gridObject.columns.length-1].width=this.parent.pivotColumns[this.parent.pivotColumns.length-1].width),this.parent.trigger(o._3,e)},e.prototype.rowSelected=function(e){this.parent.renderModule.selected(),this.parent.trigger(o.C,e)},e.prototype.rowDeselected=function(e){this.parent.renderModule.selected(),this.parent.trigger(o.D,e)},e.prototype.cellSelected=function(e){this.parent.rowRangeSelection.enable?(this.parent.grid.selectionModule.selectRowsByRange(this.parent.rowRangeSelection.startIndex,this.parent.rowRangeSelection.endIndex),this.parent.rowRangeSelection.enable=!1):(this.parent.renderModule.selected(),this.parent.trigger(o.x,e))},e.prototype.cellSelecting=function(e){this.parent.trigger(o.y,e)},e.prototype.cellDeselected=function(e){this.parent.renderModule.selected(),this.parent.trigger(o.B,e)},e.prototype.queryCellInfo=function(e){this.parent.renderModule.rowCellBoundEvent(e)},e.prototype.headerCellInfo=function(e){this.parent.renderModule.columnCellBoundEvent(e)},e.prototype.excelHeaderQueryCellInfo=function(e){this.parent.renderModule.excelColumnEvent(e)},e.prototype.pdfQueryCellInfo=function(e){this.parent.renderModule.pdfRowEvent(e)},e.prototype.excelQueryCellInfo=function(e){this.parent.renderModule.excelRowEvent(e)},e.prototype.pdfHeaderQueryCellInfo=function(e){this.parent.renderModule.pdfColumnEvent(e)},e.prototype.pdfExportComplete=function(e){void 0!==this.parent.lastColumn&&"auto"!==this.parent.lastColumn.width&&(this.parent.lastColumn.width="auto",this.parent.lastColumn=void 0);var t={type:"PDF",promise:e.promise};this.parent.trigger(o.i,t)},e.prototype.excelExportComplete=function(e){void 0!==this.parent.lastColumn&&"auto"!==this.parent.lastColumn.width&&(this.parent.lastColumn.width="auto",this.parent.lastColumn=void 0);var t={type:"Excel/CSV",promise:e.promise};this.parent.trigger(o.i,t)},e.prototype.dataBound=function(e){if(this.parent.cellTemplate){for(var t=0,r=this.parent.gridHeaderCellInfo;t<r.length;t++){var n=r[t];if(this.parent.cellTemplate){var s=this.parent.getCellTemplate()(n,this.parent,"cellTemplate",this.parent.element.id+"_cellTemplate",null,null,n.targetCell);s&&""!==s&&s.length>0&&(this.parent.enableHtmlSanitizer?this.parent.isVue||this.parent.isVue3?i.i(a.append)(a.SanitizeHtmlHelper.sanitize(s),n.targetCell):this.parent.appendHtml(n.targetCell,a.SanitizeHtmlHelper.sanitize(s[0].outerHTML)):this.parent.isVue||this.parent.isVue3?i.i(a.append)(s,n.targetCell):this.parent.appendHtml(n.targetCell,s[0].outerHTML))}}this.parent.gridHeaderCellInfo=[]}!this.isAutoFitEnabled&&this.parent.grid&&this.parent.grid.widthService&&this.parent.grid.widthService.setWidthToTable(),this.parent.notEmpty&&this.calculateGridHeight(!0),this.parent.isScrolling=!1,this.setFocusOnLastCell(),i.i(a.isNullOrUndefined)(this.parent.renderReactTemplates)||this.parent.renderReactTemplates(),this.parent.isInitial&&(this.parent.isInitial=!1,this.parent.refreshData()),this.parent.notify(o._21,{})},e.prototype.setFocusOnLastCell=function(){if(this.parent.keyboardModule&&this.parent.keyboardModule.event&&"TD"===this.parent.keyboardModule.event.target.nodeName){var e=this.parent.grid.serviceLocator.getService("focus");e.setFocusedElement(this.parent.keyboardModule.event.target),e.focus(this.parent.keyboardModule.event),i.i(a.addClass)([this.parent.keyboardModule.event.target],["e-focused","e-focus"]),this.parent.keyboardModule.event.target.setAttribute("tabindex","0"),this.parent.keyboardModule.event=void 0}},e.prototype.getCellElement=function(e){var t=i.i(a.closest)(e,"td");return i.i(a.isNullOrUndefined)(t)&&(t=i.i(a.closest)(e,"th")),t},e.prototype.contextMenuOpen=function(e){var t=this;e.element&&this.parent.cssClass&&i.i(a.addClass)([e.element.parentElement],this.parent.cssClass);for(var r=this,s=0,d=e.items;s<d.length;s++){var h=d[s],p=function(s){var d=r.parent.lastCellClicked?r.parent.lastCellClicked:r.parent.isAdaptive?e.event.target:r.parent.lastCellClicked,h=r.getCellElement(d),p=void 0,u=void 0;if(!h||h&&0===Number(h.getAttribute("index"))&&0===Number(h.getAttribute("data-colindex")))return e.cancel=!0,{value:void 0};(h.classList.contains("e-valuesheader")||h.classList.contains("e-stot"))&&(p=!0),r.parent.allowGrouping&&r.parent.groupingModule&&!r.validateField(h)&&(u=!0);var c=Number(h.getAttribute("index")),g=Number(h.getAttribute("data-colindex")),m=r.parent.pivotValues[c][g];switch(s.id){case r.parent.element.id+"_expand":h.querySelectorAll("."+n._286).length>0?(i.i(a.selectAll)("#"+r.parent.element.id+"_expand",e.element)&&i.i(a.select)("#"+r.parent.element.id+"_expand",e.element).classList.add(n.E),i.i(a.select)("#"+r.parent.element.id+"_expand",e.element).classList.contains(n.E)&&i.i(a.select)("#"+r.parent.element.id+"_expand",e.element).classList.remove(n.E),i.i(a.select)("#"+r.parent.element.id+"_expand",e.element).classList.contains(n._8)&&(i.i(a.select)("#"+r.parent.element.id+"_expand",e.element).classList.remove(n._8),i.i(a.select)("#"+r.parent.element.id+"_collapse",e.element).classList.remove(n._8))):p?i.i(a.select)("#"+r.parent.element.id+"_expand",e.element).classList.add(n._8):i.i(a.select)("#"+r.parent.element.id+"_expand",e.element).classList.add(n.E);break;case r.parent.element.id+"_collapse":h.querySelectorAll("."+n._287).length>0?(i.i(a.select)("#"+r.parent.element.id+"_expand",e.element)&&i.i(a.select)("#"+r.parent.element.id+"_expand",e.element).classList.add(n.E),i.i(a.select)("#"+r.parent.element.id+"_collapse",e.element).classList.contains(n.E)&&i.i(a.select)("#"+r.parent.element.id+"_collapse",e.element).classList.remove(n.E),i.i(a.select)("#"+r.parent.element.id+"_collapse",e.element).classList.contains(n._8)&&(i.i(a.select)("#"+r.parent.element.id+"_collapse",e.element).classList.remove(n._8),i.i(a.select)("#"+r.parent.element.id+"_expand",e.element).classList.remove(n._8))):p?i.i(a.select)("#"+r.parent.element.id+"_collapse",e.element).classList.add(n._8):i.i(a.select)("#"+r.parent.element.id+"_collapse",e.element).classList.add(n.E);break;case r.parent.element.id+"_custom_group":u||2!==e.items.length||(e.cancel=!0),i.i(a.selectAll)("#"+r.parent.element.id+"_custom_group",e.element)&&i.i(a.addClass)([i.i(a.select)("#"+r.parent.element.id+"_custom_group",e.element)],n._8),u&&i.i(a.selectAll)("#"+r.parent.element.id+"_custom_group",e.element)&&i.i(a.removeClass)([i.i(a.select)("#"+r.parent.element.id+"_custom_group",e.element)],n._8);break;case r.parent.element.id+"_custom_ungroup":if(i.i(a.selectAll)("#"+r.parent.element.id+"_custom_ungroup",e.element)&&i.i(a.addClass)([i.i(a.select)("#"+r.parent.element.id+"_custom_ungroup",e.element)],n._8),u){var f=!1,v=h.getAttribute("fieldname"),S=l.a.getFieldByName(v,r.parent.dataSourceSettings.groupSettings);if(S&&"Custom"===S.type||r.parent.engineModule.fieldList[v].isCustomField&&v.indexOf("_custom_group")>-1){if(S=l.a.getFieldByName(v.replace("_custom_group",""),r.parent.dataSourceSettings.groupSettings)){var y=r.parent.engineModule.pivotValues[Number(h.getAttribute("index"))][Number(h.getAttribute("data-colindex"))],b=r.parent.groupingModule.getSelectedCells(y.axis,v,y.actualText.toString());b.push({axis:y.axis,fieldName:v,name:y.actualText.toString(),cellInfo:y});for(var C=r.parent.groupingModule.getSelectedOptions(b),x=0,w=S.customGroups;x<w.length;x++){var T=w[x];if(C.indexOf(T.groupName)>-1){f=!0;break}}}}else(S&&("Date"===S.type||"Number"===S.type)||r.parent.engineModule.fieldList[v].isCustomField&&v.indexOf("_date_group")>-1)&&(f=!0);i.i(a.selectAll)("#"+r.parent.element.id+"_custom_ungroup",e.element)&&f&&i.i(a.removeClass)([i.i(a.select)("#"+r.parent.element.id+"_custom_ungroup",e.element)],n._8)}break;case r.parent.element.id+"_drillthrough":r.parent.allowDrillThrough?h.classList.contains("e-summary")?i.i(a.select)("#"+r.parent.element.id+"_drillthrough",e.element).classList.contains(n.E)&&i.i(a.select)("#"+r.parent.element.id+"_drillthrough",e.element).classList.remove(n.E):""===h.innerText&&i.i(a.select)("#"+r.parent.element.id+"_drillthrough",e.element)&&i.i(a.select)("#"+r.parent.element.id+"_drillthrough",e.element).classList.add(n.E):i.i(a.select)("#"+r.parent.element.id+"_drillthrough",e.element)&&i.i(a.select)("#"+r.parent.element.id+"_drillthrough",e.element).classList.add(n.E);break;case r.parent.element.id+"_sortasc":r.parent.enableValueSorting?h.querySelectorAll(".e-icon-descending").length>0?(i.i(a.select)("#"+r.parent.element.id+"_sortdesc",e.element)?i.i(a.select)("#"+r.parent.element.id+"_sortdesc",e.element).classList.add(n.E):i.i(a.select)("#"+r.parent.element.id+"_sortdesc",e.element).classList.remove(n.E),i.i(a.select)("#"+r.parent.element.id+"_sortasc",e.element).classList.contains(n.E)&&i.i(a.select)("#"+r.parent.element.id+"_sortasc",e.element).classList.remove(n.E)):i.i(a.select)("#"+r.parent.element.id+"_sortdesc",e.element).classList.contains(n.E)&&i.i(a.select)("#"+r.parent.element.id+"_sortdesc",e.element).classList.remove(n.E):i.i(a.select)("#"+r.parent.element.id+"_sortasc",e.element)&&i.i(a.select)("#"+r.parent.element.id+"_sortasc",e.element).classList.add(n.E);break;case r.parent.element.id+"_sortdesc":r.parent.enableValueSorting?h.querySelectorAll(".e-icon-ascending").length>0?(i.i(a.select)("#"+r.parent.element.id+"_sortasc",e.element)?i.i(a.select)("#"+r.parent.element.id+"_sortasc",e.element).classList.add(n.E):i.i(a.select)("#"+r.parent.element.id+"_sortasc",e.element).classList.remove(n.E),i.i(a.select)("#"+r.parent.element.id+"_sortdesc",e.element).classList.contains(n.E)&&i.i(a.select)("#"+r.parent.element.id+"_sortdesc",e.element).classList.remove(n.E)):i.i(a.select)("#"+r.parent.element.id+"_sortasc",e.element).classList.contains(n.E)&&i.i(a.select)("#"+r.parent.element.id+"_sortasc",e.element).classList.remove(n.E):i.i(a.select)("#"+r.parent.element.id+"_sortdesc",e.element)&&i.i(a.select)("#"+r.parent.element.id+"_sortdesc",e.element).classList.add(n.E);break;case r.parent.element.id+"_CalculatedField":r.parent.allowCalculatedField||i.i(a.select)("#"+r.parent.element.id+"_CalculatedField",e.element).classList.add(n.E);break;case r.parent.element.id+"_pdf":r.parent.allowPdfExport||i.i(a.select)("#"+r.parent.element.id+"_pdf",e.element).classList.add(n.E);break;case r.parent.element.id+"_excel":r.parent.allowExcelExport||i.i(a.select)("#"+r.parent.element.id+"_excel",e.element).classList.add(n.E);break;case r.parent.element.id+"_csv":r.parent.allowExcelExport||i.i(a.select)("#"+r.parent.element.id+"_csv",e.element).classList.add(n.E);break;case r.parent.element.id+"_exporting":r.parent.allowExcelExport||r.parent.allowPdfExport||i.i(a.select)("#"+r.parent.element.id+"_exporting",e.element).classList.add(n.E);break;case r.parent.element.id+"_aggregate":if(i.i(a.select)("#"+r.parent.element.id+"_aggregate",e.element)&&!i.i(a.select)("#"+r.parent.element.id+"_aggregate",e.element).classList.contains(n.E)&&i.i(a.select)("#"+r.parent.element.id+"_aggregate",e.element).classList.add(n.E),(h.classList.contains("e-valuesheader")||h.classList.contains("e-valuescontent")||h.classList.contains("e-stot")&&h.classList.contains("e-rowsheader"))&&"olap"!==r.parent.dataType){var M;""!==h.innerText&&(M=r.parent.engineModule.fieldList[m.actualText.toString()].type);var _={cancel:!1,fieldName:m.actualText.toString(),aggregateTypes:r.getMenuItem(M).slice(),displayMenuCount:7};r.parent.trigger(o._9,_,function(r){if(!r.cancel&&""!==h.innerText){for(var o=[],l=[],d=0;d<r.aggregateTypes.length;d++){var p=r.aggregateTypes[d];"number"!==M?["Count","DistinctCount"].indexOf(p)>-1&&l.indexOf(p)<0&&(o.push({text:t.parent.localeObj.getConstant(p),id:t.parent.element.id+"_Agg"+p}),l.push(p)):t.parent.getAllSummaryType().indexOf(p)>-1&&l.indexOf(p)<0&&(o.push({text:t.parent.localeObj.getConstant(p),id:t.parent.element.id+"_Agg"+p}),l.push(p))}o.length>r.displayMenuCount&&(o.splice(r.displayMenuCount),o.push({text:t.parent.localeObj.getConstant("MoreOption"),id:t.parent.element.id+"_AggMoreOption"})),o&&o.length>=1&&(s.items=o,i.i(a.select)("#"+t.parent.element.id+"_aggregate",e.element).classList.remove(n.E))}})}}}(h);if("object"==typeof p)return p.value}this.parent.trigger(o.Z,e)},e.prototype.getMenuItem=function(e){for(var t=[],i=0;i<this.parent.aggregateTypes.length;i++){var r=this.parent.aggregateTypes[i];"string"!==e?this.parent.getAllSummaryType().indexOf(r)>-1&&-1===t.indexOf(r)&&t.push(r):["Count","DistinctCount"].indexOf(r)>-1&&-1===t.indexOf(r)&&t.push(r)}return t},e.prototype.contextMenuClick=function(e){var t,i=this,r=this.parent.lastCellClicked,a=e.item.id,s=new MouseEvent("dblclick",{view:window,bubbles:!0,cancelable:!0}),l={},d=this.getCellElement(r),h=Number(d.getAttribute("index")),p=Number(d.getAttribute("data-colindex")),u=this.parent.pivotValues[h][p];switch(e.item.id.indexOf(this.parent.element.id+"_Agg")>-1&&(this.field=this.parent.engineModule.fieldList[u.actualText.toString()].id,this.fieldCaption=this.parent.engineModule.fieldList[u.actualText.toString()].caption,t=e.item.id.split("_Agg")[1]),a){case this.parent.element.id+"_pdf":l={pdfDoc:void 0,isBlob:!1,isMultipleExport:!1,pdfExportProperties:{fileName:"Export.pdf"}},this.parent.trigger(o.h,l,function(e){i.parent.pdfExport(e.pdfExportProperties,e.isMultipleExport,e.pdfDoc,e.isBlob)});break;case this.parent.element.id+"_excel":l={isBlob:!1,isMultipleExport:!1,workbook:void 0,excelExportProperties:{fileName:"Export.xlsx"}},this.parent.trigger(o.h,l,function(e){i.parent.excelExport(e.excelExportProperties,e.isMultipleExport,e.workbook,e.isBlob)});break;case this.parent.element.id+"_csv":l={isBlob:!1,workbook:void 0,isMultipleExport:!1,excelExportProperties:{fileName:"Export.csv"}},this.parent.trigger(o.h,l,function(e){i.parent.csvExport(e.excelExportProperties,e.isMultipleExport,e.workbook,e.isBlob)});break;case this.parent.element.id+"_drillthrough_menu":d.dispatchEvent(s);break;case this.parent.element.id+"_sortasc":this.parent.setProperties({dataSourceSettings:{valueSortSettings:{headerText:u.valueSort.levelName,headerDelimiter:this.parent.dataSourceSettings.valueSortSettings.headerDelimiter}}}),this.parent.dataSourceSettings.valueSortSettings.sortOrder="Ascending";break;case this.parent.element.id+"_sortdesc":this.parent.setProperties({dataSourceSettings:{valueSortSettings:{headerText:u.valueSort.levelName,headerDelimiter:this.parent.dataSourceSettings.valueSortSettings.headerDelimiter}}}),this.parent.dataSourceSettings.valueSortSettings.sortOrder="Descending";break;case this.parent.element.id+"_expand":if(d.querySelectorAll("."+n._286)){var c=d.querySelectorAll("."+n._286)[0];this.parent.onDrill(c)}break;case this.parent.element.id+"_collapse":if(d.querySelectorAll("."+n._287)){var g=d.querySelectorAll("."+n._287)[0];this.parent.onDrill(g)}break;case this.parent.element.id+"_CalculatedField":this.parent.calculatedFieldModule.createCalculatedFieldDialog();break;case this.parent.element.id+"_AggMoreOption":case this.parent.element.id+"_AggDifferenceFrom":case this.parent.element.id+"_AggPercentageOfDifferenceFrom":case this.parent.element.id+"_AggPercentageOfParentTotal":d.setAttribute("id",this.field),d.setAttribute("data-caption",this.fieldCaption),d.setAttribute("data-field",this.field),d.setAttribute("data-type",this.engine.fieldList[u.actualText.toString()].aggregateType),d.setAttribute("data-basefield",this.engine.fieldList[u.actualText.toString()].baseField),d.setAttribute("data-baseItem",this.engine.fieldList[u.actualText.toString()].baseItem),this.aggMenu.createValueSettingsDialog(d,this.parent.element,t);break;case this.parent.element.id+"_Agg"+t:this.updateAggregate(t);break;case this.parent.element.id+"_custom_group":case this.parent.element.id+"_custom_ungroup":if(this.parent.groupingModule){var m={target:d,option:a,parentElement:this.parent.element};this.parent.notify(o._31,m),this.parent.grid.contextMenuModule.contextMenu.close()}}this.parent.trigger(o.Y,e)},e.prototype.validateColumnTotalcell=function(e){for(var t=Object.keys(this.engine.headerContent),i=t.length,r=!1,a="",n=i-1;n>=0;n--){var o=this.engine.headerContent[t[n]][e];if(!o)return!1;if(r=!(!r||""===a)&&a===o.valueSort.axis,a=o.valueSort.axis?o.valueSort.axis.toString():"","sum"===o.type&&(r=!0),r&&o.members&&o.members.length>0)return!0}return!1},e.prototype.validateField=function(e){var t=!1;if(e.classList.contains("e-stot")||e.classList.contains("e-gtot")||e.classList.contains("e-valuescontent")||e.classList.contains("e-valuesheader"))t=!0;else{var i=e.getAttribute("fieldName");if(!i||""===i){var r=Number(e.getAttribute("index")),a=Number(e.getAttribute("data-colindex"));i=this.engine.pivotValues[r][a].actualText}for(var n=this.parent.dataSourceSettings.values,o=0;o<n.length;o++)if(this.parent.dataSourceSettings.values[o].name===i){t=!0;break}}return t},e.prototype.updateAggregate=function(e){if(this.parent.getAllSummaryType().indexOf(e)>-1)for(var t=this.parent.dataSourceSettings.values,i=0;i<this.parent.dataSourceSettings.values.length;i++)if(this.parent.dataSourceSettings.values[i].name===this.field){var r=t[i];r.type=e}},e.prototype.injectGridModules=function(e){r.Grid.Inject(r.Freeze),e.allowExcelExport&&r.Grid.Inject(r.ExcelExport),e.allowPdfExport&&r.Grid.Inject(r.PdfExport),r.Grid.Inject(r.Selection,r.Reorder,r.Resize),this.gridSettings.contextMenuItems&&r.Grid.Inject(r.ContextMenu)},e.prototype.updateGridSettings=function(){if(this.injectGridModules(this.parent),this.parent.grid.allowResizing=this.gridSettings.allowResizing,this.parent.grid.clipMode=this.gridSettings.clipMode,this.parent.grid.allowTextWrap=this.gridSettings.allowTextWrap,this.parent.grid.allowReordering=!this.parent.showGroupingBar&&this.gridSettings.allowReordering,this.parent.grid.allowSelection=this.gridSettings.allowSelection,this.parent.grid.contextMenuItems=this.gridSettings.contextMenuItems,this.parent.grid.selectedRowIndex=this.gridSettings.selectedRowIndex,this.parent.grid.selectionSettings=this.gridSettings.selectionSettings,this.parent.grid.textWrapSettings=this.gridSettings.textWrapSettings,this.parent.grid.printMode=this.gridSettings.printMode,this.parent.grid.rowHeight=this.gridSettings.rowHeight,this.parent.grid.gridLines=this.gridSettings.gridLines,this.parent.lastGridSettings){var e=Object.keys(this.parent.lastGridSettings);e.indexOf("height")>-1&&(this.parent.grid.height=this.gridSettings.height),e.indexOf("width")>-1&&(this.parent.grid.width=this.gridSettings.width),this.updatePivotColumns(),(e.indexOf("allowTextWrap")>-1||e.indexOf("clipMode")>-1)&&this.parent.layoutRefresh()}this.clearColumnSelection()},e.prototype.updatePivotColumns=function(){for(var e=Object.keys(this.parent.lastGridSettings),t=0;t<this.parent.pivotColumns.length;t++)for(var r=this.parent.pivotColumns[t],n=0;n<e.length;n++){var o=e[n];i.i(a.isNullOrUndefined)(this.parent.pivotColumns[t][o])||(r[o]=this.parent.lastGridSettings[o])}this.parent.fillGridColumns(this.parent.grid.columns)},e.prototype.clearColumnSelection=function(){i.i(a.removeClass)(this.parent.element.querySelectorAll("."+n._284),[n._284,n.c])},e.prototype.appendValueSortIcon=function(e,t,r,n,o){if(this.parent.enableValueSorting&&"pivot"===this.parent.dataType){var s=this.parent.dataSourceSettings.valueSortSettings,l="grand sum"!==e.type||1!==this.parent.dataSourceSettings.values.length||this.parent.dataSourceSettings.alwaysShowValueHeader?this.parent.dataSourceSettings.values.length>1||this.parent.dataSourceSettings.alwaysShowValueHeader?this.parent.engineModule.headerContent.length-1:0===this.parent.dataSourceSettings.columns.length?0:this.parent.engineModule.headerContent.length-1:0,d=s&&s.headerText?e.valueSort.levelName===s.headerText:n===s.columnIndex;void 0!==s&&d&&(r===l||r+1===l&&e.level>-1&&this.parent.engineModule.headerContent[r+1][n]&&-1===this.parent.engineModule.headerContent[r+1][n].level)&&"column"===this.parent.dataSourceSettings.valueAxis&&t.querySelector("div div").appendChild(i.i(a.createElement)("span",{className:("Descending"===s.sortOrder?"e-icon-descending e-icons e-descending e-sortfilterdiv e-value-sort-icon":"e-icon-ascending e-icons e-ascending e-sortfilterdiv e-value-sort-icon")+(e.hasChild?" e-value-sort-align":""),styles:"Right"===o.headerTextAlign?"float : left":""}))}return t},e.prototype.onResizeStop=function(e){var t="0.formattedText"===e.column.field?"0.formattedText":e.column.customAttributes.cell.valueSort.levelName;if(this.parent.resizeInfo[t]=Number(e.column.width.toString().split("px")[0]),this.parent.enableVirtualization&&"0.formattedText"===e.column.field){if(this.parent.dataSourceSettings.values.length>1&&!i.i(a.isNullOrUndefined)(this.parent.grid.columns[this.parent.grid.columns.length-1].columns)){var r=this.parent.grid.columns[this.parent.grid.columns.length-1].columns;r[r.length-1].minWidth=this.parent.gridSettings.columnWidth}else this.parent.grid.columns[this.parent.grid.columns.length-1].minWidth=this.parent.gridSettings.columnWidth;this.parent.layoutRefresh()}this.setGroupWidth(e),this.calculateGridHeight(!0),this.parent.grid.hideScroll()},e.prototype.setGroupWidth=function(e){if(this.parent.enableVirtualization&&"0.formattedText"===e.column.field&&(this.parent.showGroupingBar&&this.parent.groupingBarModule&&this.parent.element.querySelector("."+n.w)&&Number(e.column.width.toString().split("px")[0])<250?e.cancel=!0:this.parent.element.querySelector(".e-frozenscrollbar").style.width=e.column.width.toString().split("px")[0]+"px"),this.parent.showGroupingBar&&this.parent.groupingBarModule&&this.parent.element.querySelector("."+n.w)){if(this.parent.groupingBarModule.refreshUI(),this.parent.element.querySelector(".e-group-row").offsetWidth<245&&!this.parent.firstColWidth){e.cancel=!0;var t=this.parent.grid.columns;t&&t.length>0&&(t[0].width=this.resColWidth),this.parent.element.querySelector(".e-frozenheader").querySelector("col").style.width=this.resColWidth+"px",this.parent.element.querySelector(".e-frozencontent").querySelector("col").style.width=this.resColWidth+"px"}this.parent.element.querySelector(".e-group-rows").style.height="auto",this.parent.element.querySelector(".e-group-values").style.width=this.parent.element.querySelector(".e-group-row").offsetWidth+"px";var i=this.parent.element.querySelector(".e-headercontent").offsetHeight;this.parent.element.querySelector(".e-group-rows").style.height=i+"px"}if(e.cancel){var r="0.formattedText"===e.column.field?"0.formattedText":e.column.customAttributes.cell.valueSort.levelName;this.parent.resizeInfo[r]=Number(e.column.width.toString().split("px")[0]),this.parent.enableVirtualization&&this.parent.layoutRefresh()}this.parent.enableVirtualization&&(this.parent.resizedValue=e.cancel||"0.formattedText"!==e.column.field?this.parent.resizedValue:Number(e.column.width.toString().split("px")[0])),this.parent.trigger("touchend"===e.e.type||"mouseup"===e.e.type?o.t:o.s,e)},e.prototype.selected=function(){clearTimeout(this.timeOutObj),this.timeOutObj=setTimeout(this.onSelect.bind(this),300)},e.prototype.onSelect=function(){for(var e={selectedCellsInfo:[],pivotValues:this.parent.pivotValues,currentCell:null},t=this.parent.element.querySelectorAll("."+n.b+",."+n.c),i=0,r=t;i<r.length;i++){var a=r[i],s=Number(a.getAttribute("data-colindex")),l=Number(a.getAttribute("index")),d=this.engine.pivotValues[l][s];d&&("value"===d.axis?e.selectedCellsInfo.push({currentCell:d,value:d.value,columnHeaders:d.columnHeaders,rowHeaders:d.rowHeaders,measure:d.actualText.toString()}):"column"===d.axis?e.selectedCellsInfo.push({currentCell:d,value:d.formattedText,columnHeaders:d.valueSort.levelName,rowHeaders:"",measure:""}):e.selectedCellsInfo.push({currentCell:d,value:d.formattedText,columnHeaders:"",rowHeaders:d.valueSort.levelName,measure:""}))}this.parent.trigger(o.A,e)},e.prototype.rowCellBoundEvent=function(e){var t=e.cell;if(t&&this.parent.notEmpty&&this.engine.headerContent){var r=this.parent.hyperlinkSettings.cssClass,s=e.data[0],l=s.valueSort&&s.valueSort.levelName===(0===this.parent.dataSourceSettings.rows.length&&"row"===this.parent.dataSourceSettings.valueAxis&&this.parent.localeObj.getConstant("grandTotal")+this.parent.dataSourceSettings.valueSortSettings.headerDelimiter+s.formattedText);if(t.setAttribute("index",s.rowIndex?s.rowIndex.toString():"0"),"0"===t.getAttribute("data-colindex")){if("pivot"===this.parent.dataType){var d=s.type&&"value"===s.type;t.innerText="";var h=s.valueSort?s.valueSort.levelName.toString():"",p=s.actualText?s.actualText.toString().split(this.parent.dataSourceSettings.valueSortSettings.headerDelimiter).length:0,u=h.split(this.parent.dataSourceSettings.valueSortSettings.headerDelimiter).length-(p?p-1:p),c=u?u-1:0;c=s.isSum?c-1:c;do{c>0&&t.appendChild(i.i(a.createElement)("span",{className:0===c?"":n._288})),c--}while(c>-1);c=u?u-1:0,this.lastSpan=u?this.lastSpan:0,!s.hasChild&&(d?0:c)>0&&t.appendChild(i.i(a.createElement)("span",{className:n._289}));var g=void 0;if(this.parent.dataSourceSettings.rows.length>0&&(!s.valueSort||Object.keys(s.valueSort).length>0)){if(d)for(var m=0,f=this.parent.dataSourceSettings.values;m<f.length;m++){var v=f[m],S=v.caption?v.caption:v.name;if(h.indexOf(S)>-1){g=v.name;break}}else g=s.level>-1&&this.parent.dataSourceSettings.rows[s.level]?this.parent.dataSourceSettings.rows[s.level].name:"";t.setAttribute("fieldname",g)}}else t=this.onOlapRowCellBoundEvent(t,s);var y=s.formattedText;if(s.type)if("grand sum"===s.type){this.rowGrandPos=s.rowIndex,t.classList.add("e-gtot");var b=this.parent.dataSourceSettings.values;y=i.i(a.isNullOrUndefined)(s.valueSort.axis)?0===this.parent.dataSourceSettings.rows.length&&1===b.length&&"row"===this.parent.dataSourceSettings.valueAxis?this.parent.localeObj.getConstant("total")+" "+this.parent.localeObj.getConstant(b[b.length-1].type)+" "+this.parent.localeObj.getConstant("of")+" "+(i.i(a.isNullOrUndefined)(b[b.length-1].caption)?b[b.length-1].name:b[b.length-1].caption):this.parent.localeObj.getConstant("grandTotal"):s.formattedText}else s.valueSort.levelName===this.parent.localeObj.getConstant("grandTotal")+this.parent.dataSourceSettings.valueSortSettings.headerDelimiter+s.formattedText?(t.classList.add("e-gtot"),y=l?this.parent.localeObj.getConstant("total")+" "+this.parent.localeObj.getConstant(this.parent.engineModule.fieldList[s.actualText].aggregateType)+" "+this.parent.localeObj.getConstant("of")+" "+s.formattedText:y):"sum"===s.type&&3!==s.memberType?y=s.formattedText.split("Total")[0]+this.parent.localeObj.getConstant("total"):t.classList.add("e-stot");t.classList.add(n._282),!0!==s.hasChild||s.isNamedSet||t.appendChild(i.i(a.createElement)("div",{className:(!0===s.isDrilled?n._287:n._286)+" "+n.a,attrs:{title:!0===s.isDrilled?this.parent.localeObj.getConstant("collapse"):this.parent.localeObj.getConstant("expand")}})),t.appendChild(i.i(a.createElement)("span",{className:n._290,innerHTML:this.parent.isRowCellHyperlink||s.enableHyperlink?'<a  data-url="'+y+'" class="e-hyperlinkcell '+r+'">'+y+"</a>":y}));var C=this.parent.pivotView.dataSourceSettings.valueSortSettings;this.parent.enableValueSorting&&C&&C.headerText&&"row"===this.parent.dataSourceSettings.valueAxis&&this.parent.pivotValues[Number(t.getAttribute("index"))][0]&&this.parent.pivotValues[Number(t.getAttribute("index"))][0].valueSort.levelName&&this.parent.pivotValues[Number(t.getAttribute("index"))][0].valueSort.levelName===C.headerText&&t.appendChild(i.i(a.createElement)("span",{className:("Descending"===C.sortOrder?"e-icon-descending e-icons e-descending e-sortfilterdiv e-value-sort-icon":"e-icon-ascending e-icons e-ascending e-sortfilterdiv e-value-sort-icon")+(s.hasChild?" e-value-sort-align":""),styles:"right"===t.style.textAlign?"float: left":""}))}else{var x=t.innerText;t.innerText="",t.classList.add(n._291),s=e.data[Number(t.getAttribute("data-colindex"))],s=i.i(a.isNullOrUndefined)(s)?e.column.customAttributes.cell:s,s.isGrandSum=!!l||s.isGrandSum,s.isSum&&t.classList.add(n._292);var w=i.i(a.isNullOrUndefined)(s.isGrandSum)&&!i.i(a.isNullOrUndefined)(this.parent.olapEngineModule)&&"column"===this.parent.olapEngineModule.olapValueAxis&&"olap"===this.parent.dataType&&this.colGrandPos-this.parent.dataSourceSettings.values.length<Number(t.getAttribute("data-colindex"));s.isGrandSum||w||this.colGrandPos===Number(t.getAttribute("data-colindex"))||this.rowGrandPos===Number(t.getAttribute("index"))?t.classList.add("e-gtot"):("olap"===this.parent.dataType?s.isSum:this.validateColumnTotalcell(s.colIndex))&&t.classList.add("e-colstot"),s.cssClass&&t.classList.add(s.cssClass),t.appendChild(i.i(a.createElement)("span",{className:n._290,innerHTML:-1!==t.className.indexOf("e-summary")&&this.parent.isSummaryCellHyperlink||-1===t.className.indexOf("e-summary")&&this.parent.isValueCellHyperlink||s.enableHyperlink?'<a data-url="'+x+'" class="e-hyperlinkcell '+r+'">'+x+"</a>":x})),this.parent.gridSettings.allowReordering&&!this.parent.showGroupingBar&&t.setAttribute("data-colindex",e.column.customAttributes.cell.colIndex.toString())}if(this.parent.cellTemplate){var T=this.parent.getCellTemplate()({targetCell:t,cellInfo:s},this.parent,"cellTemplate",this.parent.element.id+"_cellTemplate",null,null,t);T&&""!==T&&T.length>0&&(this.parent.enableHtmlSanitizer?this.parent.isVue||this.parent.isVue3?i.i(a.append)(a.SanitizeHtmlHelper.sanitize(T),t):this.parent.appendHtml(t,a.SanitizeHtmlHelper.sanitize(T[0].outerHTML)):this.parent.isVue||this.parent.isVue3?i.i(a.append)(T,t):this.parent.appendHtml(t,T[0].outerHTML))}this.unWireEvents(t),this.wireEvents(t)}e.pivotview=this.parent,this.parent.trigger(o.p,e)},e.prototype.onOlapRowCellBoundEvent=function(e,t){e.innerText="";var r=this.engine.rowMeasurePos;if(this.parent.enableVirtualization){if(t.ordinal>-1&&this.parent.olapEngineModule.tupRowInfo.length>0){var o=this.parent.olapEngineModule.tupRowInfo[t.ordinal],s=o.uNameCollection.indexOf(t.actualText.toString()),l=o.uNameCollection.substring(0,s)+(3===t.memberType?"":t.actualText.toString()),d=l.split("::[").map(function(e){return"["===e[0]?e:"["+e});3===t.memberType&&r&&d.push(t.actualText.toString());for(var h=-1,p=0,u=!1,c=0;c<d.length;c++){var g=d[c],m=g.split("~~").length;h+=m;var f="2"!==o.typeCollection[c]&&(!!(this.engine.fieldList[o.members[c].getAttribute("Hierarchy")]&&this.engine.fieldList[o.members[c].getAttribute("Hierarchy")].isHierarchy&&c<this.parent.dataSourceSettings.rows.length-1&&!this.parent.dataSourceSettings.rows[c+1].isNamedSet&&this.parent.dataSourceSettings.rows[c+1].name.indexOf("[Measures]")<0&&this.engine.fieldList[this.parent.dataSourceSettings.rows[c+1].name]&&this.engine.fieldList[this.parent.dataSourceSettings.rows[c+1].name].hasAllMember)||Number(o.members[c].querySelector("CHILDREN_CARDINALITY").textContent)>0);p+=c>0&&u&&!f?1:0,u=f}for(var v=0,S=0;S<h;S++)e.appendChild(i.i(a.createElement)("span",{className:n._288})),v++;for(var S=0;S<p&&h>0;S++)e.appendChild(i.i(a.createElement)("span",{className:n._289}));this.indentCollection[t.rowIndex]=v,this.maxIndent=this.maxIndent>v?this.maxIndent:v}}else{var y=t.hierarchy,b=3===t.memberType?this.measurePos+"."+t.levelUniqueName:t.levelUniqueName,f=t.hasChild,C=!1;if(t.isSum&&3===t.memberType){for(var x=this.lvlCollection[t.parentUniqueName].position,w=x+1;w<this.position;w++)delete this.lvlCollection[this.lvlPosCollection[w]],delete this.lvlPosCollection[w];this.position=this.position>x+1?x+1:this.position,C=!0,this.measurePos=this.lvlCollection[t.parentUniqueName].position}if(!this.lvlCollection[b]&&b)this.lvlPosCollection[this.position]=b,this.lvlCollection[b]={position:this.position,hasChild:f},this.position++;else if(b){for(var T=this.lvlCollection[b].position,M=T+1;M<this.position;M++)delete this.lvlCollection[this.lvlPosCollection[M]],delete this.lvlPosCollection[M];this.position=this.position>T+1?T+1:this.position}if(!this.hierarchyCollection[y]&&y)this.hierarchyPosCollection[this.hierarchyCount]=y,this.hierarchyCollection[y]={lvlPosition:this.position-1,hierarchyPOs:this.hierarchyCount},this.hierarchyCount++;else if(y){for(var _=this.hierarchyCollection[y].hierarchyPOs,M=_+1;M<this.hierarchyCount;M++)delete this.hierarchyCollection[this.hierarchyPosCollection[M]],delete this.hierarchyPosCollection[M];this.hierarchyCount=this.hierarchyCount>_+1?_+1:this.hierarchyCount}if(3!==t.memberType&&b&&this.lvlCollection[b]){var D=this.hierarchyCollection[y]?this.hierarchyCollection[y].hierarchyPOs:-1;this.measurePos=r<=D&&this.hierarchyPosCollection[r+1]?this.measurePos:this.lvlCollection[b].position}var O=this.lvlCollection[b]?this.lvlCollection[b].position:-1;O=C?O-1:O;for(var P=0,v=0;P<=O&&O>0&&t.level>-1;){var E=this.lvlCollection[this.lvlPosCollection[P]].hasChild,u=P>0&&this.lvlCollection[this.lvlPosCollection[P-1]].hasChild;u&&!E&&e.appendChild(i.i(a.createElement)("span",{className:n._289})),P!==O&&(e.appendChild(i.i(a.createElement)("span",{className:n._288})),v++),P++}"Top"!==this.parent.dataSourceSettings.grandTotalsPosition||i.i(a.isNullOrUndefined)(this.parent.olapEngineModule)||"row"!==this.parent.olapEngineModule.olapValueAxis||"olap"!==this.parent.dataType||0!==t.valueSort.levelName.toString().indexOf(this.parent.localeObj.getConstant("grandTotal")+this.parent.dataSourceSettings.valueSortSettings.headerDelimiter)||e.appendChild(i.i(a.createElement)("span",{className:n._288})),3===t.memberType&&-1===t.level&&Object.keys(this.lvlCollection).length>1&&(e.appendChild(i.i(a.createElement)("span",{className:n._288})),v++),this.indentCollection[t.rowIndex]=v,this.maxIndent=this.maxIndent>v?this.maxIndent:v}return e.setAttribute("fieldname",t.hierarchy),!!this.parent.olapEngineModule.tupRowInfo[t.ordinal]&&(0===this.parent.olapEngineModule.tupRowInfo[t.ordinal].measurePosition?1===this.parent.olapEngineModule.tupRowInfo[t.ordinal].allStartPos:0===this.parent.olapEngineModule.tupRowInfo[t.ordinal].allStartPos)&&e.classList.add("e-gtot"),e},e.prototype.columnCellBoundEvent=function(e){if(e.cell.column&&e.cell.column.customAttributes){var t=e.cell.column.customAttributes.cell,r=e.node;if(t){for(var s=this.parent.hyperlinkSettings.cssClass,l=!1,d=0,h=this.parent.dataSourceSettings.values;d<h.length;d++){var p=h[d];p.name===t.actualText&&(l=!0,r.setAttribute("fieldname",p.name))}-1===t.level&&!t.rowSpan||-1===t.rowSpan?e.node.style.display="none":t.rowSpan>1&&(e.node.setAttribute("rowspan",t.rowSpan.toString()),e.node.setAttribute("aria-rowspan",t.rowSpan.toString()),t.rowIndex+t.rowSpan===this.engine.headerContent.length&&(e.node.style.borderBottomWidth="0px")),e.node.setAttribute("data-colindex",t.colIndex.toString()),e.node.setAttribute("index",t.rowIndex.toString());var u=void 0;"pivot"===this.parent.dataType?(!l&&!(this.parent.dataSourceSettings.values&&"column"===this.parent.dataSourceSettings.valueAxis&&this.parent.dataSourceSettings.values.length>1&&l&&t.rowIndex===this.engine.headerContent.length-1)&&this.parent.dataSourceSettings.columns&&this.parent.dataSourceSettings.columns.length>0&&(u=t.level>-1&&this.parent.dataSourceSettings.columns[t.level]?this.parent.dataSourceSettings.columns[t.level].name:"",r.setAttribute("fieldname",u)),this.validateColumnTotalcell(t.colIndex)&&r.classList.add("e-colstot")):r=this.onOlapColumnCellBoundEvent(r,t);var c=0===this.parent.dataSourceSettings.columns.length&&"column"===this.parent.dataSourceSettings.valueAxis&&t.valueSort&&t.valueSort.levelName===this.parent.localeObj.getConstant("grandTotal")+this.parent.dataSourceSettings.valueSortSettings.headerDelimiter+t.formattedText;if(t.type||c){r.classList.add("grand sum"===t.type?"e-gtot":"e-stot"),"grand sum"===t.type?this.colGrandPos=t.colIndex:t.type&&r.classList.add("e-colstot");var g="grand sum"===t.type?i.i(a.isNullOrUndefined)(t.valueSort.axis)||"olap"===this.parent.dataType?this.parent.localeObj.getConstant("grandTotal"):t.formattedText:t.formattedText.split("Total")[0]+this.parent.localeObj.getConstant("total");g=c&&this.parent.engineModule.fieldList?this.parent.localeObj.getConstant("total")+" "+this.parent.localeObj.getConstant(this.parent.engineModule.fieldList[t.actualText].aggregateType)+" "+this.parent.localeObj.getConstant("of")+" "+t.formattedText:g,null!==r.querySelector(".e-headertext")?r.querySelector(".e-headertext").innerText=g:r.querySelector(".e-stackedheadercelldiv").innerText=g}if(r.classList.add(n._293),this.parent.isColumnCellHyperlink||t.enableHyperlink)if(r.querySelector(".e-stackedheadercelldiv")){var m=r.querySelector(".e-stackedheadercelldiv").innerText;r.querySelector(".e-stackedheadercelldiv").innerHTML='<a data-url="'+m+'" class="e-hyperlinkcell '+s+'">'+m+"</a>"}else if(r.querySelector(".e-headertext")){var m=r.querySelector(".e-headertext").innerText;r.querySelector(".e-headertext").innerHTML='<a data-url="'+m+'" class="e-hyperlinkcell '+s+'">'+m+"</a>"}if(!0!==t.hasChild||t.isNamedSet)this.updateWrapper(r);else{var f=r.querySelector(".e-headercelldiv");f&&(f.style.height="auto",f.style.lineHeight="normal");var v=i.i(a.createElement)("div",{className:(!0===t.isDrilled?n._287:n._286)+" "+n.a,attrs:{title:!0===t.isDrilled?this.parent.localeObj.getConstant("collapse"):this.parent.localeObj.getConstant("expand")}});window.navigator.userAgent.indexOf("Edge")>-1||window.navigator.userAgent.indexOf("Trident")>-1?r.children[0].style.display="table":r.children[0].style.display="block",this.updateWrapper(r,v)}r=this.appendValueSortIcon(t,r,t.rowIndex,t.colIndex,e.cell.column),this.parent.cellTemplate&&this.parent.gridHeaderCellInfo.push({targetCell:r});for(var S=this.parent.dataSourceSettings.values.length,y=0;y<S;y++)if(this.parent.dataSourceSettings.values[y].name===t.actualText){if("olap"===this.parent.dataType){var b=!!this.parent.olapEngineModule.tupColumnInfo[t.ordinal]&&(0===this.parent.olapEngineModule.tupColumnInfo[t.ordinal].measurePosition?1===this.parent.olapEngineModule.tupColumnInfo[t.ordinal].allStartPos:0===this.parent.olapEngineModule.tupColumnInfo[t.ordinal].allStartPos);b&&r.classList.add("e-gtot")}t.valueSort.levelName===this.parent.localeObj.getConstant("grandTotal")+this.parent.dataSourceSettings.valueSortSettings.headerDelimiter+t.formattedText||t.valueSort.levelName==="Grand Total"+this.parent.dataSourceSettings.valueSortSettings.headerDelimiter+t.formattedText?r.classList.add("e-gtot"):r.classList.add(n._294)}this.unWireEvents(r),this.wireEvents(r)}}this.parent.trigger(o.q,e)},e.prototype.updateWrapper=function(e,t){if(e.querySelectorAll(".e-headercelldiv").length>0||e.querySelectorAll(".e-stackedheadercelldiv").length>0){var r=i.i(a.createElement)("div",{className:n._295}),o=i.i(a.createElement)("div",{className:(t?"e-stackedheadertext":"e-headertext")+" "+n._290,innerHTML:e.querySelectorAll(".e-headercelldiv").length>0?e.querySelector(".e-headercelldiv").innerHTML:e.querySelector(".e-stackedheadercelldiv").innerHTML});t&&r.append(t),r.append(o),e.children[0].innerHTML="",e.children[0].append(r)}return e},e.prototype.onOlapColumnCellBoundEvent=function(e,t){e.setAttribute("fieldname",3===t.memberType?t.actualText.toString():t.hierarchy);var i=this.engine.headerContent[t.rowIndex]?this.engine.headerContent[t.rowIndex][t.colIndex-1]:void 0;return i&&i.actualText===t.actualText&&i.type===t.type&&i.colSpan>1?e.style.display="none":(e.setAttribute("colspan",t.colSpan.toString()),e.setAttribute("aria-colspan",t.colSpan.toString())),t.rowIndex===this.engine.headerContent.length-1&&2===t.memberType&&(e.style.display=this.isSpannedCell(this.engine.headerContent.length,t)?"none":e.style.display),e},e.prototype.isSpannedCell=function(e,t){for(var i,r,a=this.engine.headerContent[t.rowIndex-1]?this.engine.headerContent[t.rowIndex-1][t.colIndex]:void 0;a&&(a.memberType===t.memberType||a.type&&t.type);)a.rowSpan>0&&(i=a.rowSpan,r=a.rowIndex),a=this.engine.headerContent[a.rowIndex-1]?this.engine.headerContent[a.rowIndex-1][t.colIndex]:void 0;return r+i>=e},e.prototype.onHyperCellClick=function(e){var t=e.target.parentElement.parentElement;t=t.className.indexOf("e-headercelldiv")>-1?t.parentElement:t;var r={currentCell:t,data:this.engine.pivotValues[Number(t.getAttribute("index"))][Number(t.getAttribute("data-colindex"))],cancel:!0,nativeEvent:e};this.parent.trigger(o.r,r,function(e){if(!e.cancel){r.currentCell=i.i(a.getElement)(r.currentCell);var t=r.currentCell.getAttribute("data-url")?r.currentCell.getAttribute("data-url"):r.currentCell.querySelector("a").getAttribute("data-url");window.open(t)}})},e.prototype.getRowStartPos=function(){for(var e,t=this.parent.pivotValues,i=0;i<(t?t.length:0);i++)if(t[i]&&t[i][0]&&"row"===t[i][0].axis){e=i;break}return e},e.prototype.frameDataSource=function(e){var t=[];if(("pivot"===this.parent.dataType&&this.parent.dataSourceSettings.dataSource&&this.parent.engineModule.data.length>0||"olap"===this.parent.dataType&&""!==this.parent.dataSourceSettings.url||"Server"===this.parent.dataSourceSettings.mode&&""!==this.parent.dataSourceSettings.url&&this.engine.pivotValues.length>0)&&this.parent.dataSourceSettings.values.length>0&&!this.engine.isEmptyData)if(this.parent.enableValueSorting||!this.engine.isEngineUpdated){for(var i=0,r=this.parent.pivotValues,a="value"===e?this.rowStartPos:0,n="value"===e?r?r.length:0:this.rowStartPos,o=a;o<n;o++)if(r[o]){i="header"===e?o:i,t[i]={};for(var s=0;s<r[o].length;s++)r[o][s]&&(t[i][s]=r[o][s]);i++}}else t="value"===e?this.engine.valueContent:this.engine.headerContent;else t=this.frameEmptyData();return t},e.prototype.frameEmptyData=function(){return[{0:{formattedText:this.parent.localeObj.getConstant("grandTotal")},1:{formattedText:this.parent.localeObj.getConstant("emptyData")}}]},e.prototype.calculateColWidth=function(e){i.i(a.isNullOrUndefined)(this.parent.resizedValue)||(this.parent.resizedValue=this.parent.showGroupingBar&&this.parent.resizedValue<250?250:this.parent.resizedValue),this.resColWidth=i.i(a.isNullOrUndefined)(this.parent.resizedValue)?this.resColWidth:this.parent.resizedValue;var t=this.parent.element.offsetWidth?this.parent.element.offsetWidth:this.parent.element.getBoundingClientRect().width,r=isNaN(this.parent.width)?this.parent.width.toString().indexOf("%")>-1?parseFloat(this.parent.width.toString())/100*t:t:Number(this.parent.width);r=r-(this.gridSettings.columnWidth>this.resColWidth?this.gridSettings.columnWidth:this.resColWidth)-2,e-=1,this.isOverflows=!(e*this.gridSettings.columnWidth<r);var n=e*this.gridSettings.columnWidth<r?r/e:this.gridSettings.columnWidth;return this.isOverflows||this.gridSettings.allowAutoResizing?Math.floor(n):this.gridSettings.columnWidth},e.prototype.resizeColWidth=function(e){i.i(a.isNullOrUndefined)(this.parent.resizedValue)||(this.parent.resizedValue=this.parent.showGroupingBar&&this.parent.resizedValue<250?250:this.parent.resizedValue),this.resColWidth=i.i(a.isNullOrUndefined)(this.parent.resizedValue)?this.resColWidth:this.parent.resizedValue;var t=isNaN(this.parent.width)?this.parent.width.toString().indexOf("%")>-1?parseFloat(this.parent.width.toString())/100*this.parent.element.offsetWidth:this.parent.element.offsetWidth:Number(this.parent.width);e-=1,t=t-(this.gridSettings.columnWidth>this.resColWidth?this.gridSettings.columnWidth:this.resColWidth)-2,this.isOverflows=!(e*this.gridSettings.columnWidth<t);var r=e*this.gridSettings.columnWidth<t?t/e:this.gridSettings.columnWidth;return this.isOverflows||this.gridSettings.allowAutoResizing?Math.floor(r):this.gridSettings.columnWidth},e.prototype.calculateGridWidth=function(){var e=this.parent.width,t=this.parent.element.getBoundingClientRect().width?this.parent.element.getBoundingClientRect().width:this.parent.element.offsetWidth;return 0===t&&(t=this.parent.element.parentElement.getBoundingClientRect().width?this.parent.element.parentElement.getBoundingClientRect().width:this.parent.element.parentElement.offsetWidth),"auto"===this.gridSettings.width?"auto"===this.parent.width?e=t:this.parent.width.toString().indexOf("%")>-1&&(e=parseFloat(this.parent.width.toString())/100*t):e=this.gridSettings.width,!this.gridSettings.allowAutoResizing&&e>this.parent.totColWidth?this.parent.totColWidth:e},e.prototype.calculateGridHeight=function(e){var t=this.parent.height,i=this.parent.getHeightAsNumber();if(isNaN(i)&&(i=i>this.parent.minHeight?i:this.parent.minHeight),this.parent.showToolbar&&"Chart"!==this.parent.currentView||!this.parent.showToolbar&&"Chart"!==this.parent.displayOption.view)if("auto"===this.gridSettings.height&&i&&this.parent.element.querySelector("."+n._296)){var r=this.parent.element.querySelector("."+n._296).offsetHeight,a=r+(this.parent.element.querySelector("."+n._133)?this.parent.element.querySelector("."+n._133).offsetHeight:0),o=this.parent.element.querySelector("."+n.v)?42:0,s=this.parent.element.querySelector("."+n._219)?this.parent.element.querySelector("."+n._219).offsetHeight:0;if(t=i-(a+o+s)-1,t=t<40?40:t,e){var l=this.parent.element.querySelector("."+n._277+" ."+n._280).offsetHeight,d=this.parent.element.querySelector("."+n._276).offsetHeight,h=this.parent.element.querySelector("."+n._276+" ."+n._280).offsetWidth,p=this.parent.element.querySelector("."+n._276).offsetWidth,u=p<h,c=!!(u&&t-l<18);t>=l&&(!u||t>=d)&&!c?this.parent.grid.height="auto":(this.parent.grid.height=t,this.parent.grid.dataBind()),this.parent.grid.widthService.refreshFrozenScrollbar()}else t>this.engine.valueContent.length*this.gridSettings.rowHeight&&(t="auto")}else t=this.gridSettings.height;return t<this.parent.gridSettings.rowHeight?this.parent.gridSettings.rowHeight:t},e.prototype.frameStackedHeaders=function(){var e=this.parent.pivotColumns,t=this.parent.grid.columnModel,r=!1,n=!(!this.parent.toolbarModule||!this.parent.toolbarModule.isReportChange)||!!this.parent.actionObj&&("Sort value"===this.parent.actionObj.actionName&&1===this.parent.engineModule.valueAxis||"Sort field"===this.parent.actionObj.actionName&&"columns"===this.parent.actionObj.fieldInfo.axis||this.parent.pivotFieldListModule&&"Sort field"===this.parent.pivotFieldListModule.actionObj.actionName&&"columns"===this.parent.pivotFieldListModule.actionObj.fieldInfo.axis),o=1!==this.parent.dataSourceSettings.values.length||this.parent.dataSourceSettings.alwaysShowValueHeader?void 0:this.formatList[this.parent.dataSourceSettings.values[0].name];if(this.pivotColumns=[],("olap"===this.parent.dataType&&""!==this.parent.dataSourceSettings.url||this.parent.dataSourceSettings.values.length>0&&this.parent.dataSourceSettings.dataSource&&this.parent.engineModule.data.length>0||"Server"===this.parent.dataSourceSettings.mode&&""!==this.parent.dataSourceSettings.url&&this.engine.pivotValues.length>0)&&!this.engine.isEmptyData){var s=this.engine.headerContent.length,l=[],d=[],h=this.calculateColWidth(this.engine.pivotValues?this.engine.pivotValues[0].length:0);do{var p=[],u=0;s--;var c=this.engine.headerContent[s],g=c?Object.keys(c).length:0;if(c)for(var m=0;m<Object.keys(c).length+(c[0]?0:1);m++){var f=c[m]&&c[m].colSpan?3!==c[m].memberType||0===s?c[m].colSpan:l[m]:1;f="olap"===this.parent.dataType?1:f;var v=c[m]?"grand sum"===c[m].type?i.i(a.isNullOrUndefined)(c[m].valueSort.axis)?this.parent.localeObj.getConstant("grandTotal"):c[m].formattedText:"sum"===c[m].type?c[m].formattedText.split("Total")[0]+this.parent.localeObj.getConstant("total"):c[m].formattedText:"";if(v=this.parent.enableHtmlSanitizer?a.SanitizeHtmlHelper.sanitize(v):v,s===this.engine.headerContent.length-1)f=1,r=e.length-1===g&&(!n&&!this.parent.isEmptyGrid&&e[u]&&e[u].autoFit),p[u]={field:m+".formattedText",headerText:v,customAttributes:{cell:c[m]},width:r?t[u].width:c[m]&&c[m].valueSort?this.setSavedWidth(c[m].valueSort.levelName,h):this.resColWidth,minWidth:r&&u===g?t[t.length-1].minWidth:30,format:0===m?"":i.i(a.isNullOrUndefined)(o)?this.formatList[c[m].actualText]:o,allowReordering:!this.parent.showGroupingBar&&this.parent.gridSettings.allowReordering,allowResizing:this.parent.gridSettings.allowResizing,visible:!0,textAlign:this.parent.enableRtl?"Left":"Right",headerTextAlign:this.parent.enableRtl?"Right":"Left"};else if(l[m]){f=c[m]&&"grand sum"===c[m].type&&2===c[m].memberType?1:f;for(var S=f,y=[],b=m;S>0;){if(p[u]){if(!this.pivotColumns[d[b]])break;y.push(this.pivotColumns[d[b]])}else p[u]={headerText:v,field:c[m]?c[m].valueSort.levelName:"",customAttributes:{cell:c[m]},width:r&&0===u&&!n&&!this.parent.isEmptyGrid&&e[0].autoFit?t[0].width:c[m]?this.setSavedWidth(c[m].valueSort.levelName,h):this.resColWidth,minWidth:30,allowReordering:!this.parent.showGroupingBar&&this.parent.gridSettings.allowReordering,allowResizing:this.parent.gridSettings.allowResizing,visible:!0},y=[this.pivotColumns[d[b]]];this.isAutoFitEnabled=!!this.isAutoFitEnabled||r,S-=l[b],b+=l[b]}p[u].columns=y}p[u]&&(p[u].clipMode=this.gridSettings.clipMode),l[m]=f,d[m]=u,u++,m=m+f-1}this.pivotColumns=p.length>0?p:this.pivotColumns}while(s>0);this.pivotColumns[0]={field:"0.formattedText",width:r&&!n&&!this.parent.isEmptyGrid&&e[0].autoFit?t[0].width:this.resColWidth,minWidth:30,headerText:"",allowReordering:!1,allowResizing:this.parent.gridSettings.allowResizing,visible:!0,clipMode:this.parent.gridSettings.clipMode}}else this.pivotColumns=this.frameEmptyColumns();if(this.parent.toolbarModule&&this.parent.showToolbar&&(this.parent.toolbarModule.isReportChange=!1),this.parent.triggerColumnRenderEvent(this.pivotColumns),r=this.parent.pivotColumns.length>0&&this.parent.pivotColumns[this.parent.pivotColumns.length-1].autoFit,this.pivotColumns.length>1&&!r){var C=this.pivotColumns[this.pivotColumns.length-1];C.minWidth=C.width,C.width="auto",C.columns&&C.columns.length>0&&this.configLastColumnWidth(C.columns[C.columns.length-1])}return this.pivotColumns},e.prototype.configLastColumnWidth=function(e){e.minWidth=e.width,e.width="auto",e.columns&&e.columns.length>0&&this.configLastColumnWidth(e.columns[e.columns.length-1])},e.prototype.setSavedWidth=function(e,t){return t="0.formattedText"!==e||i.i(a.isNullOrUndefined)(this.parent.resizedValue)?this.parent.resizeInfo[e]?this.parent.resizeInfo[e]:t:this.parent.resizedValue},e.prototype.frameEmptyColumns=function(){var e=[],t=this.calculateColWidth(2);return e.push({field:"0.formattedText",headerText:"",minWidth:30,width:this.resColWidth}),e.push({field:"1.formattedText",headerText:this.parent.localeObj.getConstant("grandTotal"),minWidth:30,width:t}),e},e.prototype.getFormatList=function(){for(var e={},t=0;t<this.parent.dataSourceSettings.values.length;t++){var r=this.parent.dataSourceSettings.values[t],n="N";if("olap"===this.parent.dataType){if(this.parent.olapEngineModule.fieldList[r.name]&&!i.i(a.isNullOrUndefined)(this.parent.olapEngineModule.fieldList[r.name].formatString)){var o=this.parent.olapEngineModule.fieldList[r.name].formatString;n=o.indexOf("#")>-1?o:o[0]+"2"}}else if(["PercentageOfDifferenceFrom","PercentageOfRowTotal","PercentageOfColumnTotal","PercentageOfGrandTotal","PercentageOfParentRowTotal","PercentageOfParentColumnTotal","PercentageOfParentTotal"].indexOf(r.type)>-1?n="P2":["PopulationStDev","SampleStDev","PopulationVar","SampleVar","Index"].indexOf(r.type)>-1&&(n=void 0),this.parent.dataSourceSettings.formatSettings.length>0)for(var s=0;s<this.parent.dataSourceSettings.formatSettings.length;s++){var l=this.parent.dataSourceSettings.formatSettings[s];if(r.name===l.name){n=l.format;break}}e[r.name]=n}return e},e.prototype.getValidHeader=function(e,t){var r=this.parent.dataSourceSettings.values;if("row"===t){var n=e;if(0===this.parent.dataSourceSettings.rows.length||0===this.parent.dataSourceSettings.columns.length){if(0===this.parent.dataSourceSettings.rows.length&&"row"===this.parent.dataSourceSettings.valueAxis&&this.parent.localeObj.getConstant("grandTotal")+this.parent.dataSourceSettings.valueSortSettings.headerDelimiter+n.value===n.data[0].valueSort.levelName)return this.parent.localeObj.getConstant("total")+" "+this.parent.localeObj.getConstant(this.parent.engineModule.fieldList[n.value.toString()].aggregateType)+" "+this.parent.localeObj.getConstant("of")+" "+n.value.toString();if(1===r.length&&0===this.parent.dataSourceSettings.rows.length)return this.parent.localeObj.getConstant("total")+" "+this.parent.localeObj.getConstant(r[r.length-1].type)+" "+this.parent.localeObj.getConstant("of")+" "+(i.i(a.isNullOrUndefined)(r[r.length-1].caption)?r[r.length-1].name:r[r.length-1].caption)}return n.value}if("column"===t){var n=e;return 0!==this.parent.dataSourceSettings.rows.length&&0!==this.parent.dataSourceSettings.columns.length||i.i(a.isNullOrUndefined)(e.gridCell.column.customAttributes)||0!==this.parent.dataSourceSettings.columns.length||"column"!==this.parent.dataSourceSettings.valueAxis||this.parent.localeObj.getConstant("grandTotal")+this.parent.dataSourceSettings.valueSortSettings.headerDelimiter+n.gridCell.column.customAttributes.cell.formattedText!==n.gridCell.column.customAttributes.cell.valueSort.levelName?n.cell.value:this.parent.localeObj.getConstant("total")+" "+this.parent.localeObj.getConstant(this.parent.engineModule.fieldList[n.gridCell.column.customAttributes.cell.actualText].aggregateType)+" "+this.parent.localeObj.getConstant("of")+" "+n.gridCell.column.customAttributes.cell.formattedText}},e.prototype.excelColumnEvent=function(e){0===this.parent.dataSourceSettings.columns.length&&"column"===this.parent.dataSourceSettings.valueAxis&&(e.cell.value=this.getValidHeader(e,"column")),void 0!==e.gridCell&&"auto"===e.gridCell.column.width&&(this.parent.lastColumn=e.gridCell.column,e.gridCell.column.width=e.gridCell.column.minWidth),e=this.exportHeaderEvent(e),this.parent.trigger(o.j,e)},e.prototype.pdfColumnEvent=function(e){0===this.parent.dataSourceSettings.columns.length&&"column"===this.parent.dataSourceSettings.valueAxis&&(e.cell.value=this.getValidHeader(e,"column")),void 0!==e.gridCell&&"auto"===e.gridCell.column.width&&(this.parent.lastColumn=e.gridCell.column,e.gridCell.column.width=e.gridCell.column.minWidth),this.parent.trigger(o.k,e)},e.prototype.excelRowEvent=function(e){if("0.formattedText"===e.column.field){var t=e.data[0],r=t.type&&"value"===t.type,n=0;if("olap"===this.parent.dataType)n=this.indentCollection[t.rowIndex];else{var s=t.valueSort?t.valueSort.levelName.toString():"",l=t.actualText?t.actualText.toString().split(this.parent.dataSourceSettings.valueSortSettings.headerDelimiter).length:0,d=s.split(this.parent.dataSourceSettings.valueSortSettings.headerDelimiter).length-(l?l-1:l);n=d?d-1:0}this.colPos=0,e.style={hAlign:"Left",indent:2*n},this.lastSpan=r?this.lastSpan:n}else{this.colPos++;var h=e.data[e.column.customAttributes.cell?e.column.customAttributes.cell.colIndex:this.colPos];if(i.i(a.isNullOrUndefined)(h.value)||i.i(a.isNullOrUndefined)(h.formattedText)||""===h.formattedText)e.value="Excel"===this.parent.exportType?null:"";else{var p="pivot"===this.parent.dataType&&this.parent.engineModule?this.parent.engineModule.aggregatedValueMatrix:void 0;p&&p[h.rowIndex]&&p[h.rowIndex][h.colIndex]?e.value=p[h.rowIndex][h.colIndex]:e.value=i.i(a.isNullOrUndefined)(h.value)?h.formattedText:"#DIV/0!"===h.formattedText?h.formattedText:h.value}}e=this.exportContentEvent(e),0===this.parent.dataSourceSettings.rows.length&&"row"===this.parent.dataSourceSettings.valueAxis&&(e.value="0.formattedText"===e.column.field?this.getValidHeader(e,"row"):e.value),this.parent.trigger(o.l,e)},e.prototype.pdfRowEvent=function(e){if(e=this.exportContentEvent(e),"0.formattedText"===e.column.field){var t=0,i=e.data[0],r=i.type&&"value"===i.type;if("olap"===this.parent.dataType)t=this.indentCollection[i.rowIndex];else{var a=i.valueSort?i.valueSort.levelName.toString():"",n=i.actualText?i.actualText.toString().split(this.parent.dataSourceSettings.valueSortSettings.headerDelimiter).length:0,s=a.split(this.parent.dataSourceSettings.valueSortSettings.headerDelimiter).length-(n?n-1:n);t=s?s-1:0}e.style={paragraphIndent:10*t},this.lastSpan=r?this.lastSpan:t,0===this.parent.dataSourceSettings.rows.length&&"row"===this.parent.dataSourceSettings.valueAxis&&(e.value=this.getValidHeader(e,"row"))}this.parent.trigger(o.m,e)},e.prototype.excelDataBound=function(e){for(var t=e.excelRows,i=Object.keys(this.engine.headerContent).length,r=0;r<i;r++){for(var a=t[r].cells,n=[],o=0;o<a.length;o++)-1!==a[o].rowSpan&&n.push(a[o]);t[r].cells=n}},e.prototype.exportHeaderEvent=function(e){var t=1;if(e.gridCell.column.customAttributes){var r=e.gridCell.column.customAttributes.cell;t=r.rowSpan>-1?r.rowSpan:1,"excelHeaderQueryCellInfo"===e.name&&(r.rowSpan>-1?t=r.rowSpan:i.i(a.isNullOrUndefined)(r.type)||0===r.level||(t=-1,e.cell.rowSpan=-1)),this.actualText=r.actualText}else t=Object.keys(this.engine.headerContent).length;return e.cell.rowSpan!==t&&t>-1&&(e.cell.rowSpan=t),e},e.prototype.exportContentEvent=function(e){var t=e.data[Number(e.column.field.split(".formattedText")[0])];return e.value="grand sum"===t.type?i.i(a.isNullOrUndefined)(t.valueSort.axis)?this.parent.localeObj.getConstant("grandTotal"):t.formattedText:e.value,e},e.prototype.unWireEvents=function(e){e.querySelector(".e-hyperlinkcell")&&a.EventHandler.remove(e.querySelector(".e-hyperlinkcell"),this.parent.isAdaptive?"touchend":"click",this.onHyperCellClick)},e.prototype.wireEvents=function(e){e.querySelector(".e-hyperlinkcell")&&a.EventHandler.add(e.querySelector(".e-hyperlinkcell"),this.parent.isAdaptive?"touchend":"click",this.onHyperCellClick,this)},e}()},function(e,t){e.exports=h},function(e,t,i){"use strict";var r=i(26);i.d(t,"a",function(){return r.a});var a=i(28);i.d(t,"b",function(){return a.a});var n=i(25);i.d(t,"c",function(){return n.a});var o=i(48);i.d(t,"d",function(){return o.a});var s=i(27);i.d(t,"e",function(){return s.a});var l=i(24);i.d(t,"f",function(){return l.a});var d=i(51);i.d(t,"g",function(){return d.a});var h=i(31);i.d(t,"h",function(){return h.a});var p=i(49);i.d(t,"i",function(){return p.a});var u=i(17);i.d(t,"j",function(){return u.a});var c=i(1);i.d(t,"k",function(){return c.a}),i.d(t,"l",function(){return c.b}),i.d(t,"m",function(){return c.c}),i.d(t,"n",function(){return c.d}),i.d(t,"o",function(){return c.e}),i.d(t,"p",function(){return c.f}),i.d(t,"q",function(){return c.g}),i.d(t,"r",function(){return c.h}),i.d(t,"s",function(){return c.i}),i.d(t,"t",function(){return c.j}),i.d(t,"u",function(){return c.k}),i.d(t,"v",function(){return c.l}),i.d(t,"w",function(){return c.m}),i.d(t,"x",function(){return c.n}),i.d(t,"y",function(){return c.o}),i.d(t,"z",function(){return c.p}),i.d(t,"A",function(){return c.q}),i.d(t,"B",function(){return c.r}),i.d(t,"C",function(){return c.s}),i.d(t,"D",function(){return c.t}),i.d(t,"E",function(){return c.u}),i.d(t,"F",function(){return c.v}),i.d(t,"G",function(){return c.w}),i.d(t,"H",function(){return c.x}),i.d(t,"I",function(){return c.y}),i.d(t,"J",function(){return c.z}),i.d(t,"K",function(){return c.A}),i.d(t,"L",function(){return c.B}),i.d(t,"M",function(){return c.C}),i.d(t,"N",function(){return c.D}),i.d(t,"O",function(){return c.E}),i.d(t,"P",function(){return c.F}),i.d(t,"Q",function(){return c.G}),i.d(t,"R",function(){return c.H}),i.d(t,"S",function(){return c.I}),i.d(t,"T",function(){return c.J}),i.d(t,"U",function(){return c.K}),i.d(t,"V",function(){return c.L}),i.d(t,"W",function(){return c.M}),i.d(t,"X",function(){return c.N}),i.d(t,"Y",function(){return c.O}),i.d(t,"Z",function(){return c.P}),i.d(t,"_0",function(){return c.Q}),i.d(t,"_1",function(){return c.R}),i.d(t,"_2",function(){return c.S}),i.d(t,"_3",function(){return c.T}),i.d(t,"_4",function(){return c.U}),i.d(t,"_5",function(){return c.V}),i.d(t,"_6",function(){return c.W}),i.d(t,"_7",function(){return c.X}),i.d(t,"_8",function(){return c.Y}),i.d(t,"_9",function(){return c.Z}),i.d(t,"_10",function(){return c._0}),i.d(t,"_11",function(){return c._1}),i.d(t,"_12",function(){return c._2}),i.d(t,"_13",function(){return c._3}),i.d(t,"_14",function(){return c._4}),i.d(t,"_15",function(){return c._5}),i.d(t,"_16",function(){return c._6}),i.d(t,"_17",function(){return c._7}),i.d(t,"_18",function(){return c._8}),i.d(t,"_19",function(){return c._9}),i.d(t,"_20",function(){return c._10}),i.d(t,"_21",function(){return c._11}),i.d(t,"_22",function(){return c._12}),i.d(t,"_23",function(){return c._13}),i.d(t,"_24",function(){return c._14}),i.d(t,"_25",function(){return c._15}),i.d(t,"_26",function(){return c._16}),i.d(t,"_27",function(){return c._17}),i.d(t,"_28",function(){return c._18}),i.d(t,"_29",function(){return c._19}),i.d(t,"_30",function(){return c._20}),i.d(t,"_31",function(){return c._21}),i.d(t,"_32",function(){return c._22}),i.d(t,"_33",function(){return c._23}),i.d(t,"_34",function(){return c._24}),i.d(t,"_35",function(){return c._25}),i.d(t,"_36",function(){return c._26}),i.d(t,"_37",function(){return c._27}),i.d(t,"_38",function(){return c._28}),i.d(t,"_39",function(){return c._29}),i.d(t,"_40",function(){return c._30}),i.d(t,"_41",function(){return c._31}),i.d(t,"_42",function(){return c._32}),i.d(t,"_43",function(){return c._33}),i.d(t,"_44",function(){return c._34}),i.d(t,"_45",function(){return c._35}),i.d(t,"_46",function(){return c._36}),i.d(t,"_47",function(){return c._37}),i.d(t,"_48",function(){return c._38}),i.d(t,"_49",function(){return c._39}),i.d(t,"_50",function(){return c._40}),i.d(t,"_51",function(){return c._41}),i.d(t,"_52",function(){return c._42}),i.d(t,"_53",function(){return c._43}),i.d(t,"_54",function(){return c._44}),i.d(t,"_55",function(){return c._45}),i.d(t,"_56",function(){return c._46}),i.d(t,"_57",function(){return c._47}),i.d(t,"_58",function(){return c._48}),i.d(t,"_59",function(){return c._49}),i.d(t,"_60",function(){return c._50}),i.d(t,"_61",function(){return c._51}),i.d(t,"_62",function(){return c._52}),i.d(t,"_63",function(){return c._53}),i.d(t,"_64",function(){return c._54}),i.d(t,"_65",function(){return c._55}),i.d(t,"_66",function(){return c._56}),i.d(t,"_67",function(){return c._57}),i.d(t,"_68",function(){return c._58}),i.d(t,"_69",function(){return c._59}),i.d(t,"_70",function(){return c._60}),i.d(t,"_71",function(){return c._61}),i.d(t,"_72",function(){return c._62}),i.d(t,"_73",function(){return c._63}),i.d(t,"_74",function(){return c._64}),i.d(t,"_75",function(){return c._65}),i.d(t,"_76",function(){return c._66}),i.d(t,"_77",function(){return c._67}),i.d(t,"_78",function(){return c._68}),i.d(t,"_79",function(){return c._69}),i.d(t,"_80",function(){return c._70}),i.d(t,"_81",function(){return c._71}),i.d(t,"_82",function(){return c._72}),i.d(t,"_83",function(){return c._73}),i.d(t,"_84",function(){return c._74}),i.d(t,"_85",function(){return c._75}),i.d(t,"_86",function(){return c._76}),i.d(t,"_87",function(){return c._77}),i.d(t,"_88",function(){return c._78}),i.d(t,"_89",function(){return c._79}),i.d(t,"_90",function(){return c._80}),i.d(t,"_91",function(){return c._81}),i.d(t,"_92",function(){return c._82}),i.d(t,"_93",function(){return c._83}),i.d(t,"_94",function(){return c._84}),i.d(t,"_95",function(){return c._85}),i.d(t,"_96",function(){return c._86}),i.d(t,"_97",function(){return c._87}),i.d(t,"_98",function(){return c._88}),i.d(t,"_99",function(){return c._89}),i.d(t,"_100",function(){return c._90}),i.d(t,"_101",function(){return c._91}),i.d(t,"_102",function(){return c._92}),i.d(t,"_103",function(){return c._93}),i.d(t,"_104",function(){return c._94}),i.d(t,"_105",function(){return c._95}),i.d(t,"_106",function(){return c._96}),i.d(t,"_107",function(){return c._97}),i.d(t,"_108",function(){return c._98}),i.d(t,"_109",function(){return c._99}),i.d(t,"_110",function(){return c._100}),i.d(t,"_111",function(){return c._101}),i.d(t,"_112",function(){return c._102}),i.d(t,"_113",function(){return c._103}),i.d(t,"_114",function(){return c._104}),i.d(t,"_115",function(){return c._105}),i.d(t,"_116",function(){return c._106}),i.d(t,"_117",function(){return c._107}),i.d(t,"_118",function(){return c._108}),i.d(t,"_119",function(){return c._109}),i.d(t,"_120",function(){return c._110}),i.d(t,"_121",function(){return c._111}),i.d(t,"_122",function(){return c._112}),i.d(t,"_123",function(){return c._113}),i.d(t,"_124",function(){return c._114}),i.d(t,"_125",function(){return c._115}),i.d(t,"_126",function(){return c._116}),i.d(t,"_127",function(){return c._117}),i.d(t,"_128",function(){return c._118}),i.d(t,"_129",function(){return c._119}),i.d(t,"_130",function(){return c._120}),i.d(t,"_131",function(){return c._121}),i.d(t,"_132",function(){return c._122}),i.d(t,"_133",function(){return c._123}),i.d(t,"_134",function(){return c._124}),i.d(t,"_135",function(){return c._125});var g=i(30);i.d(t,"_136",function(){return g.a});var m=i(33);i.d(t,"_137",function(){return m.a});var f=i(34);i.d(t,"_138",function(){return f.a});var v=i(32);i.d(t,"_139",function(){return v.a});var S=i(18);i.d(t,"_140",function(){return S.a});var y=i(55);i.d(t,"_141",function(){return y.a});var b=i(53);i.d(t,"_142",function(){return b.a});var C=i(54);i.d(t,"_143",function(){return C.a})},function(e,t,i){"use strict";var r=i(19);i.d(t,"a",function(){return r.a}),i.d(t,"b",function(){return r.b}),i.d(t,"c",function(){return r.c}),i.d(t,"d",function(){return r.d}),i.d(t,"e",function(){return r.e}),i.d(t,"f",function(){return r.f}),i.d(t,"g",function(){return r.g}),i.d(t,"h",function(){return r.h}),i.d(t,"i",function(){return r.i}),i.d(t,"j",function(){return r.j}),i.d(t,"k",function(){return r.k}),i.d(t,"l",function(){return r.l}),i.d(t,"m",function(){return r.m}),i.d(t,"n",function(){return r.n})},function(e,t,i){"use strict";var r=i(59);i.d(t,"a",function(){return r.a});var a=i(60);i.d(t,"b",function(){return a.a}),i.d(t,"c",function(){return a.b}),i.d(t,"d",function(){return a.c}),i.d(t,"e",function(){return a.d})},function(e,t,i){"use strict";var r=i(66);i.d(t,"a",function(){return r.a}),i.d(t,"b",function(){return r.b}),i.d(t,"c",function(){return r.c}),i.d(t,"d",function(){return r.d}),i.d(t,"e",function(){return r.e}),i.d(t,"f",function(){return r.f}),i.d(t,"g",function(){return r.g}),i.d(t,"h",function(){return r.h});var a=i(70);i.d(t,"i",function(){return a.a});var n=i(62);i.d(t,"j",function(){return n.a}),i.d(t,"k",function(){return n.b}),i.d(t,"l",function(){return n.c}),i.d(t,"m",function(){return n.d}),i.d(t,"n",function(){return n.e}),i.d(t,"o",function(){return n.f})},function(e,t,i){"use strict";var r=i(16);i.d(t,"a",function(){return r.a});var a=i(23);i.d(t,"b",function(){return a.a})},function(e,t,i){"use strict";i.d(t,"a",function(){return l});var r=i(1),a=i(2),n=i(20),o=i(0),s=(i.n(o),i(31));n.a.Inject(s.a);var l=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.getModuleName=function(){return"fieldList"},e.prototype.initiateModule=function(){if(!i.i(o.select)("#"+this.parent.element.id+"_PivotFieldList",this.parent.element)){if(this.element=i.i(o.createElement)("div",{id:this.parent.element.id+"_PivotFieldList",styles:"position:"+(this.parent.enableRtl?"static":"absolute")+";height:0;width:"+this.parent.element.style.width+";display:none"}),null===i.i(o.select)("#"+this.parent.element.id+"containerwrapper",document)){var e=i.i(o.createElement)("div",{id:this.parent.element.id+"containerwrapper",styles:"height:"+(isNaN(this.parent.height)?this.parent.height:this.parent.height+"px")});this.parent.element.parentElement.appendChild(e),e.appendChild(this.element),e.appendChild(this.parent.element)}else i.i(o.select)("#"+this.parent.element.id+"containerwrapper",document).appendChild(this.element);this.parent.pivotFieldListModule=new n.a({dataSourceSettings:{providerType:this.parent.dataSourceSettings.providerType,rows:[],columns:[],values:[],filters:[]},spinnerTemplate:this.parent.spinnerTemplate,allowDeferLayoutUpdate:this.parent.allowDeferLayoutUpdate,renderMode:"Popup",allowCalculatedField:this.parent.allowCalculatedField,showValuesButton:this.parent.showValuesButton,enableRtl:this.parent.enableRtl,locale:this.parent.locale,target:this.parent.element.parentElement,aggregateTypes:this.parent.aggregateTypes,maxNodeLimitInMemberEditor:this.parent.maxNodeLimitInMemberEditor,aggregateCellInfo:this.parent.bindTriggerEvents.bind(this.parent),onHeadersSort:this.parent.bindTriggerEvents.bind(this.parent),cssClass:this.parent.cssClass,enableFieldSearching:this.parent.enableFieldSearching,enableHtmlSanitizer:this.parent.enableHtmlSanitizer}),this.parent.pivotFieldListModule.isPopupView=!0,this.parent.pivotFieldListModule.pivotGridModule=this.parent,this.parent.pivotFieldListModule.appendTo("#"+this.element.id)}},e.prototype.updateControl=function(){this.parent.allowDeferLayoutUpdate&&(this.parent.actionObj.actionName="Field list refreshed"),this.element&&(this.element.style.display="block",i.i(o.prepend)([this.element],this.parent.element),this.parent.showGroupingBar&&this.parent.groupingBarModule?(clearTimeout(this.timeOutObj),this.timeOutObj=setTimeout(this.update.bind(this))):i.i(o.isNullOrUndefined)(this.element.querySelector("."+a._85))||(i.i(o.setStyleAttribute)(this.element.querySelector("."+a._85),{left:"auto"}),this.parent.enableRtl?i.i(o.removeClass)([this.element.querySelector("."+a._85)],"e-fieldlist-left"):i.i(o.addClass)([this.element.querySelector("."+a._85)],"e-fieldlist-left")),i.i(o.setStyleAttribute)(this.element,{width:i.i(o.formatUnit)(this.parent.element.offsetWidth)})),this.parent.pivotFieldListModule.update(this.parent)},e.prototype.update=function(){var e;if((e="Table"!==this.parent.currentView?this.parent.chart?this.parent.pivotChartModule.getCalulatedWidth():e:this.parent.grid?this.parent.grid.element.offsetWidth:e)&&!i.i(o.isNullOrUndefined)(this.element.querySelector("."+a._85))){var t=e<400?400:e;i.i(o.setStyleAttribute)(this.element.querySelector("."+a._85),{left:i.i(o.formatUnit)(this.parent.enableRtl?-Math.abs(t-this.element.querySelector("."+a._85).offsetWidth):t-this.element.querySelector("."+a._85).offsetWidth),top:this.parent.element.querySelector("."+a._144)?this.parent.element.querySelector("."+a._85).offsetHeight.toString()+"px":""}),this.parent.enableRtl?i.i(o.addClass)([this.element.querySelector("."+a._85)],"e-fieldlist-left"):i.i(o.removeClass)([this.element.querySelector("."+a._85)],"e-fieldlist-left")}},e.prototype.addEventListener=function(){this.handlers={load:this.initiateModule,update:this.updateControl},this.parent.isDestroyed||(this.parent.on(r._23,this.handlers.load,this),this.parent.on(r._17,this.handlers.update,this))},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(r._23,this.handlers.load),this.parent.off(r._17,this.handlers.update))},e.prototype.destroy=function(){this.removeEventListener(),this.parent.pivotFieldListModule&&!this.parent.pivotFieldListModule.isDestroyed&&(this.parent.pivotFieldListModule.destroy(),this.parent.pivotFieldListModule=null,i.i(o.isNullOrUndefined)(i.i(o.select)("#"+this.parent.element.id+"_PivotFieldList",document))||i.i(o.remove)(i.i(o.select)("#"+this.parent.element.id+"_PivotFieldList",document)))},e}()},function(e,t,i){"use strict";i.d(t,"a",function(){return h});var r=i(4),a=(i.n(r),i(0)),n=(i.n(a),i(10)),o=(i.n(n),i(9)),s=(i.n(o),i(7)),l=(i.n(s),i(2)),d=i(1),h=function(){function e(e){this.parent=e,this.parent.conditionalFormattingModule=this,this.parentID=this.parent.element.id,this.dialog=null,this.fieldsDropDown=[],this.conditionsDropDown=[],this.fontNameDropDown=[],this.fontSizeDropDown=[],this.fontColor=[],this.backgroundColor=[],this.newFormat=[]}return e.prototype.getModuleName=function(){return"conditionalFormatting"},e.prototype.createDialog=function(){null!==i.i(a.select)("#"+this.parentID+"conditionalformatting",document)&&i.i(a.remove)(i.i(a.select)("#"+this.parentID+"conditionalformatting",document)),this.parent.element.appendChild(i.i(a.createElement)("div",{id:this.parentID+"conditionalformatting",className:l._50}));var e=[{click:this.addButtonClick.bind(this),buttonModel:{cssClass:(this.parent.isAdaptive?l._51+" "+l._52:l._52)+(this.parent.cssClass?" "+this.parent.cssClass:""),iconCss:l.a+" "+l._53,content:this.parent.isAdaptive?"":this.parent.localeObj.getConstant("condition")}},{click:this.applyButtonClick.bind(this),isFlat:!0,buttonModel:{isPrimary:!0,cssClass:l._54+(this.parent.cssClass?" "+this.parent.cssClass:""),content:this.parent.localeObj.getConstant("apply")}},{click:this.cancelButtonClick.bind(this),isFlat:!0,buttonModel:{cssClass:l._55+(this.parent.cssClass?" "+this.parent.cssClass:""),content:this.parent.localeObj.getConstant("cancel")}}];this.parent.isAdaptive?this.dialog=new r.Dialog({animationSettings:{effect:"Zoom"},isModal:!0,width:"100%",height:"100%",showCloseIcon:!1,closeOnEscape:!1,enableRtl:this.parent.enableRtl,locale:this.parent.locale,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,position:{X:"center",Y:"center"},allowDragging:!0,buttons:e,beforeOpen:this.beforeOpen.bind(this),close:this.removeDialog.bind(this),cssClass:this.parent.cssClass,header:this.parent.localeObj.getConstant("conditionalFormating"),target:document.body}):this.dialog=new r.Dialog({allowDragging:!0,position:{X:"center",Y:this.parent.element.offsetTop},buttons:e,beforeOpen:this.beforeOpen.bind(this),close:this.removeDialog.bind(this),cssClass:this.parent.cssClass,isModal:!0,closeOnEscape:!0,enableRtl:this.parent.enableRtl,locale:this.parent.locale,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,showCloseIcon:!0,header:this.parent.localeObj.getConstant("conditionalFormating"),target:this.parent.element}),this.dialog.isStringTemplate=!0,this.dialog.appendTo("#"+this.parentID+"conditionalformatting")},e.prototype.beforeOpen=function(){this.dialog.element.querySelector("."+l.h).setAttribute("title",this.parent.localeObj.getConstant("conditionalFormating"))},e.prototype.addButtonClick=function(){var e=this,t={conditions:"LessThan",value1:0,applyGrandTotals:!0,style:{backgroundColor:"white",color:"black",fontFamily:"Arial",fontSize:"12px"}},i=this;this.parent.trigger(d._1,t,function(t){i.refreshConditionValues(),e.destroyColorPickers(),i.newFormat.push(t),i.addFormat()})},e.prototype.applyButtonClick=function(){if(this.refreshConditionValues()){this.parent.setProperties({dataSourceSettings:{conditionalFormatSettings:this.newFormat}},!0);var e={conditionalFormattingInfo:this.parent.dataSourceSettings.conditionalFormatSettings};this.parent.actionObj.actionInfo=e,this.parent.dataSourceSettings.values.length>0&&this.parent.renderPivotGrid(),this.dialog.close()}},e.prototype.cancelButtonClick=function(){this.dialog.close(),this.newFormat=[]},e.prototype.refreshConditionValues=function(){for(var e=0;e<this.newFormat.length;e++){if(""===i.i(a.select)("#"+this.parentID+"conditionvalue1"+e,document).value||""===i.i(a.select)("#"+this.parentID+"conditionvalue2"+e,document).value)return""===i.i(a.select)("#"+this.parentID+"conditionvalue1"+e,document).value?i.i(a.select)("#"+this.parentID+"conditionvalue1"+e,document).focus():i.i(a.select)("#"+this.parentID+"conditionvalue2"+e,document).focus(),!1;this.newFormat[e].value1=Number(i.i(a.select)("#"+this.parentID+"conditionvalue1"+e,document).value),this.newFormat[e].value2=Number(i.i(a.select)("#"+this.parentID+"conditionvalue2"+e,document).value)}return!0},e.prototype.addFormat=function(){for(var e=i.i(a.createElement)("div",{id:this.parentID+"formatDiv",className:l._56}),t=0;t<this.newFormat.length;t++)e.appendChild(this.createDialogElements(t));if(0===this.newFormat.length){var r=this.createDialogElements(),n=i.i(a.createElement)("p",{id:this.parentID+"emptyFormat",className:l._57});n.innerText=this.parent.localeObj.getConstant("emptyFormat"),r.appendChild(n),e.appendChild(r)}this.dialog.setProperties({content:e},!1);for(var t=0;t<this.newFormat.length;t++)this.renderDropDowns(t),this.renderColorPicker(t)},e.prototype.createDialogElements=function(e){var t=i.i(a.createElement)("div",{id:this.parentID+"outerDiv"+e,className:l._58});if(void 0!==e){var r=this.newFormat[e],n=i.i(a.createElement)("button",{id:this.parentID+"removeButton"+e,className:l._59,attrs:{type:"button",title:this.parent.localeObj.getConstant("delete")}});t.appendChild(n);var o=i.i(a.createElement)("div",{id:this.parentID+"innerDiv"+e,className:l._60}),s=i.i(a.createElement)("table",{id:this.parentID+"cftable"+e,className:l._61,attrs:{role:"table"}}),d=i.i(a.createElement)("tr"),h=i.i(a.createElement)("td"),p=i.i(a.createElement)("span",{id:this.parentID+"valuelabel"+e,className:l._62});p.innerText=this.parent.localeObj.getConstant("value"),h.appendChild(p),d.appendChild(h),s.appendChild(d),d=i.i(a.createElement)("tr"),h=i.i(a.createElement)("td");var u=i.i(a.createElement)("div",{id:this.parentID+"measure"+e}),c=i.i(a.createElement)("input",{id:this.parentID+"measureinput"+e,attrs:{type:"text",tabindex:"0"}});u.appendChild(c),h.appendChild(u),d.appendChild(h),h=i.i(a.createElement)("td");var g=i.i(a.createElement)("div",{id:this.parentID+"condition"+e}),m=i.i(a.createElement)("input",{id:this.parentID+"conditioninput"+e,attrs:{type:"text",tabindex:"0"}});g.appendChild(m),h.appendChild(g),d.appendChild(h),h=i.i(a.createElement)("td");var f="Between"!==r.conditions&&"NotBetween"!==r.conditions?"display:none; width:10px":"",v=i.i(a.createElement)("input",{id:this.parentID+"conditionvalue1"+e,attrs:{type:"text",tabindex:"0",value:i.i(a.isNullOrUndefined)(r.value1)?"0":r.value1.toString(),placeholder:this.parent.localeObj.getConstant("emptyInput")},styles:this.parent.isAdaptive?""===f?"width: 35%":"width: 100%":""===f?"width: 45px":"width: 120px",className:l.p+" "+l._63});h.appendChild(v);var S=i.i(a.createElement)("span",{id:this.parentID+"valuespan"+e,className:l._64,innerHTML:"&",styles:f});h.appendChild(S);var y=i.i(a.createElement)("input",{id:this.parentID+"conditionvalue2"+e,attrs:{type:"text",tabindex:"0",value:i.i(a.isNullOrUndefined)(r.value2)?"0":r.value2.toString(),placeholder:this.parent.localeObj.getConstant("emptyInput")},styles:this.parent.isAdaptive&&""===f?"width: 35%":""===f?"width: 45px":f,className:l.p+" "+l._65});h.appendChild(y),d.appendChild(h),s.appendChild(d),this.parent.isAdaptive&&(o.appendChild(s),s=i.i(a.createElement)("table",{id:this.parentID+"cftable",className:l._61,attrs:{role:"table"}})),d=i.i(a.createElement)("tr"),h=i.i(a.createElement)("td");var b=i.i(a.createElement)("span",{id:this.parentID+"formatlabel"+e,className:l._66});b.innerText=this.parent.localeObj.getConstant("formatLabel"),h.appendChild(b),d.appendChild(h),s.appendChild(d),d=i.i(a.createElement)("tr"),h=i.i(a.createElement)("td");var C=i.i(a.createElement)("div",{id:this.parentID+"fontname"+e}),x=i.i(a.createElement)("input",{id:this.parentID+"fontnameinput"+e,attrs:{type:"text",tabindex:"0"}});C.appendChild(x),h.appendChild(C),d.appendChild(h),h=i.i(a.createElement)("td");var w=i.i(a.createElement)("div",{id:this.parentID+"fontsize"+e}),T=i.i(a.createElement)("input",{id:this.parentID+"fontsizeinput"+e,attrs:{type:"text",tabindex:"0"}});w.appendChild(T),h.appendChild(w),d.appendChild(h),this.parent.isAdaptive&&(s.appendChild(d),d=i.i(a.createElement)("tr"),s.appendChild(d),d=i.i(a.createElement)("tr")),h=i.i(a.createElement)("td");var M=i.i(a.createElement)("input",{id:this.parentID+"fontcolor"+e,attrs:{type:"color",tabindex:"0"},className:l._67});h.appendChild(M);var _=i.i(a.createElement)("input",{id:this.parentID+"backgroundcolor"+e,attrs:{type:"color",tabindex:"0"},className:l._68});h.appendChild(_),d.appendChild(h),h=i.i(a.createElement)("td");var D=i.i(a.createElement)("div",{id:this.parentID+"valuepreview"+e,className:l.p+" "+l._69,innerHTML:"123.45"});h.appendChild(D),d.appendChild(h),s.appendChild(d),o.appendChild(s),t.appendChild(o)}return t},e.prototype.renderDropDowns=function(e){var t=this.newFormat[e],r=[];r.push({index:0,name:this.parent.localeObj.getConstant("AllValues"),field:this.parent.localeObj.getConstant("AllValues")});for(var n=0;n<this.parent.dataSourceSettings.values.length;n++){var o=this.parent.dataSourceSettings.values[n].caption||this.parent.dataSourceSettings.values[n].name;o=this.parent.enableHtmlSanitizer?a.SanitizeHtmlHelper.sanitize(o):o,r.push({index:n+1,name:o,field:this.parent.dataSourceSettings.values[n].name})}var l=i.i(a.isNullOrUndefined)(t.measure)?this.parent.localeObj.getConstant("AllValues"):t.measure;this.fieldsDropDown[e]=new s.DropDownList({dataSource:r,fields:{text:"name",value:"field"},value:l,width:this.parent.isAdaptive?"100%":"120px",cssClass:this.parent.cssClass,popupHeight:"200px",popupWidth:"auto",locale:this.parent.locale,enableRtl:this.parent.enableRtl,change:this.measureChange.bind(this,e)}),this.fieldsDropDown[e].isStringTemplate=!0,this.fieldsDropDown[e].appendTo("#"+this.parentID+"measureinput"+e);var d=[{value:"LessThan",name:this.parent.localeObj.getConstant("LessThan")},{value:"LessThanOrEqualTo",name:this.parent.localeObj.getConstant("LessThanOrEqualTo")},{value:"GreaterThan",name:this.parent.localeObj.getConstant("GreaterThan")},{value:"GreaterThanOrEqualTo",name:this.parent.localeObj.getConstant("GreaterThanOrEqualTo")},{value:"Equals",name:this.parent.localeObj.getConstant("Equals")},{value:"NotEquals",name:this.parent.localeObj.getConstant("NotEquals")},{value:"Between",name:this.parent.localeObj.getConstant("Between")},{value:"NotBetween",name:this.parent.localeObj.getConstant("NotBetween")}];l=i.i(a.isNullOrUndefined)(t.conditions)?"LessThan":t.conditions,this.conditionsDropDown[e]=new s.DropDownList({dataSource:d,fields:{value:"value",text:"name"},value:l,width:this.parent.isAdaptive?"100%":"120px",cssClass:this.parent.cssClass,popupHeight:"200px",popupWidth:"auto",locale:this.parent.locale,enableRtl:this.parent.enableRtl,change:this.conditionChange.bind(this,e)}),this.conditionsDropDown[e].isStringTemplate=!0,this.conditionsDropDown[e].appendTo("#"+this.parentID+"conditioninput"+e);var h=[{index:0,name:"Arial"},{index:1,name:"San Serif"},{index:2,name:"Impact"},{index:3,name:"Trebuchet MS"},{index:4,name:"Serif"},{index:5,name:"Verdana"},{index:6,name:"Courier New"},{index:7,name:"Times New Roman"},{index:8,name:"Tahoma"},{index:9,name:"Gerogia"}];l=i.i(a.isNullOrUndefined)(t.style.fontFamily)?"Arial":t.style.fontFamily,this.fontNameDropDown[e]=new s.DropDownList({dataSource:h,fields:{text:"name"},value:l,width:this.parent.isAdaptive?"100%":"120px",cssClass:this.parent.cssClass,popupWidth:"150px",popupHeight:"200px",locale:this.parent.locale,enableRtl:this.parent.enableRtl,change:this.fontNameChange.bind(this,e)}),this.fontNameDropDown[e].isStringTemplate=!0,this.fontNameDropDown[e].appendTo("#"+this.parentID+"fontnameinput"+e);var p=[{index:0,name:"9px"},{index:1,name:"10px"},{index:2,name:"11px"},{index:3,name:"12px"},{index:4,name:"13px"},{index:5,name:"14px"},{index:6,name:"15px"},{index:6,name:"16px"}];l=i.i(a.isNullOrUndefined)(t.style.fontSize)?"12px":t.style.fontSize,this.fontSizeDropDown[e]=new s.DropDownList({dataSource:p,fields:{text:"name"},popupHeight:"200px",value:l,width:this.parent.isAdaptive?"100%":"120px",change:this.fontSizeChange.bind(this,e),locale:this.parent.locale,enableRtl:this.parent.enableRtl,cssClass:this.parent.cssClass}),this.fontSizeDropDown[e].isStringTemplate=!0,this.fontSizeDropDown[e].appendTo("#"+this.parentID+"fontsizeinput"+e)},e.prototype.conditionChange=function(e,t){this.newFormat[e].conditions=t.value,"Between"===t.value||"NotBetween"===t.value?(i.i(a.select)("#"+this.parentID+"valuespan"+e,document).style.display="inline-block",i.i(a.select)("#"+this.parentID+"valuespan"+e,document).style.width=this.parent.isAdaptive?"10%":"10px",i.i(a.select)("#"+this.parentID+"conditionvalue2"+e,document).style.display="inline-block",i.i(a.select)("#"+this.parentID+"conditionvalue2"+e,document).style.width=this.parent.isAdaptive?"35%":"45px",i.i(a.select)("#"+this.parentID+"conditionvalue1"+e,document).style.width=this.parent.isAdaptive?"35%":"45px"):(i.i(a.select)("#"+this.parentID+"valuespan"+e,document).style.display="none",i.i(a.select)("#"+this.parentID+"conditionvalue2"+e,document).style.display="none",i.i(a.select)("#"+this.parentID+"conditionvalue1"+e,document).style.width=this.parent.isAdaptive?"100%":"120px")},e.prototype.fontNameChange=function(e,t){this.newFormat[e].style.fontFamily=t.value.toString(),i.i(a.select)("#"+this.parentID+"valuepreview"+e,document).style.fontFamily=t.value},e.prototype.fontSizeChange=function(e,t){this.newFormat[e].style.fontSize=t.value.toString(),i.i(a.select)("#"+this.parentID+"valuepreview"+e,document).style.fontSize=t.value},e.prototype.measureChange=function(e,t){this.newFormat[e].measure=t.value.toString()===this.parent.localeObj.getConstant("AllValues")?void 0:t.value.toString()},e.prototype.renderColorPicker=function(e){var t=this.newFormat[e],r=i.i(a.isNullOrUndefined)(t.style.color)?"black":t.style.color,s=this.isHex(r.substr(1))?r:this.colourNameToHex(r);i.i(a.select)("#"+this.parentID+"valuepreview"+e,document).style.color=s,this.fontColor[e]=new o.ColorPicker({cssClass:l._70+" "+l._71+(this.parent.cssClass?" "+this.parent.cssClass:""),value:s,mode:"Palette",change:this.fontColorChange.bind(this,e),locale:this.parent.locale,enableRtl:this.parent.enableRtl}),this.fontColor[e].isStringTemplate=!0,this.fontColor[e].appendTo("#"+this.parentID+"fontcolor"+e),i.i(a.addClass)([this.fontColor[e].element.nextElementSibling.querySelector("."+l._72)],l.a),r=i.i(a.isNullOrUndefined)(t.style.backgroundColor)?"white":t.style.backgroundColor,s=this.isHex(r.substr(1))?r:this.colourNameToHex(r),i.i(a.select)("#"+this.parentID+"valuepreview"+e,document).style.backgroundColor=s,i.i(a.select)("#"+this.parentID+"valuepreview"+e,document).style.fontFamily=t.style.fontFamily,i.i(a.select)("#"+this.parentID+"valuepreview"+e,document).style.fontSize=t.style.fontSize,this.backgroundColor[e]=new o.ColorPicker({cssClass:l._70+(this.parent.cssClass?" "+this.parent.cssClass:""),value:s,mode:"Palette",change:this.backColorChange.bind(this,e),locale:this.parent.locale,enableRtl:this.parent.enableRtl}),this.backgroundColor[e].isStringTemplate=!0,this.backgroundColor[e].appendTo("#"+this.parentID+"backgroundcolor"+e),i.i(a.addClass)([this.backgroundColor[e].element.nextElementSibling.querySelector(".e-selected-color")],l.a);var d=new n.Button({iconCss:l.a+" "+l._73,cssClass:l._74+(this.parent.cssClass?" "+this.parent.cssClass:""),locale:this.parent.locale,enableRtl:this.parent.enableRtl,enableHtmlSanitizer:this.parent.enableHtmlSanitizer});d.isStringTemplate=!0,d.appendTo("#"+this.parentID+"removeButton"+e),d.element.onclick=this.toggleButtonClick.bind(this,e)},e.prototype.backColorChange=function(e,t){this.newFormat[e].style.backgroundColor=t.currentValue.hex,i.i(a.select)("#"+this.parentID+"valuepreview"+e,document).style.backgroundColor=t.currentValue.hex},e.prototype.fontColorChange=function(e,t){this.newFormat[e].style.color=t.currentValue.hex,i.i(a.select)("#"+this.parentID+"valuepreview"+e,document).style.color=t.currentValue.hex},e.prototype.toggleButtonClick=function(e){this.destroyColorPickers(),this.newFormat.splice(e,1),this.addFormat()},e.prototype.isHex=function(e){for(var t=parseInt(e,16);"0"===e.charAt(0);)e=e.substr(1);return t.toString(16)===e.toLowerCase()||0===t&&""===e},e.prototype.hexToRgb=function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null},e.prototype.colourNameToHex=function(e){var t={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};if(void 0!==t[e.toLowerCase()])return t[e.toLowerCase()];if(0===e.search("rgba")){for(var i=e.substr(5).split(")")[0].split(","),r="",a="",n=0;n<i.length-1;n++)i[n]=(+i[n]).toString(16),1===i[n].length&&(i[n]="0"+i[n]),r+=i[n];return a=Math.round(255*+i[3]).toString(16),"#"+r+a}if(0===e.search("rgb")){for(var i=e.substr(4).split(")")[0].split(","),r="",n=0;n<i.length;n++)i[n]=(+i[n]).toString(16),1===i[n].length&&(i[n]="0"+i[n]),r+=i[n];return"#"+r}return"#d5d5d5"},e.prototype.removeDialog=function(){this.dialog&&!this.dialog.isDestroyed&&(this.destroyColorPickers(),this.dialog.destroy()),i.i(a.select)("#"+this.parentID+"conditionalformatting",document)&&i.i(a.remove)(i.i(a.select)("#"+this.parentID+"conditionalformatting",document))},e.prototype.destroyColorPickers=function(){for(var e=0;e<(this.newFormat?this.newFormat.length:0);e++)this.fontColor&&this.fontColor[e]&&!this.fontColor[e].isDestroyed&&this.fontColor[e].destroy(),this.backgroundColor&&this.backgroundColor[e]&&!this.backgroundColor[e].isDestroyed&&this.backgroundColor[e].destroy()},e.prototype.showConditionalFormattingDialog=function(){this.newFormat=[];for(var e=0;e<this.parent.dataSourceSettings.conditionalFormatSettings.length;e++)this.newFormat.push(i.i(a.extend)({},this.parent.dataSourceSettings.conditionalFormatSettings[e].properties,null,!0));this.createDialog(),this.dialog.refresh(),this.addFormat()},e.prototype.destroy=function(){this.dialog&&!this.dialog.isDestroyed&&this.dialog.close()},e}()},function(e,t,i){"use strict";i.d(t,"a",function(){return l});var r=i(1),a=i(2),n=i(0),o=(i.n(n),i(3)),s=i(29),l=function(){function e(e){this.parent=e}return e.prototype.render=function(){(!this.parent.pivotButtonModule||this.parent.pivotButtonModule&&this.parent.pivotButtonModule.isDestroyed)&&new s.a(this.parent),this.createPivotButtons();for(var e=[],t=0,r=this.parent.element.querySelectorAll("."+a._125);t<r.length;t++){var o=r[t];o.classList.contains(a._136)||(e=e.concat([].slice.call(o.querySelectorAll("."+a._145))))}for(var l=e.length,d=0;d<l;d++){var h=i.i(n.createElement)("span",{className:"e-indent-div",styles:"width:"+24*d+"px"});i.i(n.prepend)([h],e[d])}},e.prototype.createPivotButtons=function(){for(var e=[this.parent.dataSourceSettings.rows,this.parent.dataSourceSettings.columns,this.parent.dataSourceSettings.values,this.parent.dataSourceSettings.filters],t=0,i=this.parent.element.querySelectorAll("."+a._149+",."+a._125+",."+a._127+",."+a._129+",."+a._131);t<i.length;t++){var n=i[t];this.parent.dataSourceSettings.values.length>0&&n.classList.contains(a._138)&&this.parent.dataSourceSettings.columns.length>0&&n.classList.contains(a._139)||(n.innerHTML="")}if("pivot"===this.parent.dataType&&this.parent.dataSourceSettings.dataSource&&this.parent.dataSourceSettings.dataSource.length>0||"olap"===this.parent.dataType&&this.parent.dataSourceSettings.url&&""!==this.parent.dataSourceSettings.url||"Server"===this.parent.dataSourceSettings.mode&&this.parent.dataSourceSettings.url&&""!==this.parent.dataSourceSettings.url){var s=["rows","columns","values","filters"];if("pivot"===this.parent.dataType&&this.parent.groupingBarSettings.showFieldsPanel){s.push("all-fields"),e.push([]);for(var l=0,d=this.parent.engineModule&&this.parent.engineModule.fieldList?Object.keys(this.parent.engineModule.fieldList):[];l<d.length;l++){var h=d[l];this.parent.engineModule.fieldList[h]&&!this.parent.engineModule.fieldList[h].isSelected&&e[e.length-1].push(o.a.getFieldInfo(h,this.parent,!0).fieldItem)}}for(var p=0,u=e.length;p<u;p++)if(e[p]){var c={field:e[p],axis:s[p].toString()};this.parent.notify(r._25,c)}}},e}()},function(e,t,i){"use strict";i.d(t,"a",function(){return l});var r=i(0),a=(i.n(r),i(1)),n=i(2),o=i(50),s=i(5),l=(i.n(s),function(){function e(e){this.parent=e,this.parent.groupingBarModule=this,this.resColWidth=this.parent.isAdaptive?180:249,this.addEventListener(),this.parent.axisFieldModule=new o.a(this.parent),this.touchObj=new r.Touch(this.parent.element,{tapHold:this.tapHoldHandler.bind(this)})}return e.prototype.getModuleName=function(){return"groupingBar"},e.prototype.renderLayout=function(){this.groupingTable=i.i(r.createElement)("div",{className:n.w}),this.leftAxisPanel=i.i(r.createElement)("div",{className:n._118}),this.rightAxisPanel=i.i(r.createElement)("div",{className:n._119});var e=i.i(r.createElement)("div",{className:n._120+" "+n._121+"container"}),t=i.i(r.createElement)("div",{className:n._122+" "+n._121+"container"}),a=i.i(r.createElement)("div",{className:n._123+" "+n._121+"container"}),o=i.i(r.createElement)("div",{className:n._124+" "+n._121+"container"});this.rowPanel=i.i(r.createElement)("div",{className:n._125+" "+n._126}),this.columnPanel=i.i(r.createElement)("div",{className:n._127+" "+n._128}),this.valuePanel=i.i(r.createElement)("div",{className:n._129+" "+n._130}),this.filterPanel=i.i(r.createElement)("div",{className:n._131+" "+n._132}),e.appendChild(this.rowPanel),t.appendChild(this.columnPanel),a.appendChild(this.valuePanel),o.appendChild(this.filterPanel),this.rowAxisPanel=e,this.columnAxisPanel=t,this.valueAxisPanel=a,this.filterAxisPanel=o,this.leftAxisPanel.appendChild(a),this.leftAxisPanel.appendChild(e),this.rightAxisPanel.appendChild(o),this.rightAxisPanel.appendChild(t),this.groupingTable.appendChild(i.i(r.createElement)("div",{styles:"display:flex;"})),this.groupingTable.firstElementChild.appendChild(this.leftAxisPanel),this.groupingTable.firstElementChild.appendChild(this.rightAxisPanel),"pivot"===this.parent.dataType&&null!=this.parent.groupingBarSettings&&this.parent.groupingBarSettings.showFieldsPanel&&(this.gridPanel=this.createToolbarUI(this.groupingTable)),this.groupingTable.classList.add(n._133),this.groupingTable.querySelector("."+n._125).classList.add(n._134);for(var s=[this.rowPanel,this.columnPanel,this.valuePanel,this.filterPanel],l=0,d=s;l<d.length;l++){var h=d[l];this.parent.groupingBarSettings.allowDragAndDrop&&new r.Droppable(h,{}),this.unWireEvent(h),this.wireEvent(h)}"Table"!==this.parent.displayOption.view&&"Table"!==this.parent.groupingBarSettings.displayMode?(this.groupingChartTable=this.groupingTable.cloneNode(!0),i.i(r.select)("#"+this.parent.element.id+"_AllFields",this.groupingChartTable)&&(i.i(r.select)("#"+this.parent.element.id+"_AllFields",this.groupingChartTable).remove(),this.chartPanel=this.createToolbarUI(this.groupingChartTable)),this.groupingChartTable.classList.add(n._135),this.groupingChartTable.classList.remove(n._133),this.groupingChartTable.querySelector("."+n._125).classList.add(n._136),this.groupingChartTable.querySelector("."+n._125).classList.remove(n._134),this.parent.chartSettings.enableMultipleAxis&&this.parent.chartSettings.chartSeries&&["Pie","Pyramid","Doughnut","Funnel"].indexOf(this.parent.chartSettings.chartSeries.type)<0?this.groupingChartTable.querySelector("."+n._129).classList.add(n._137):this.groupingChartTable.querySelector("."+n._129).classList.add(n._138),this.parent.chartSettings.chartSeries&&["Pie","Pyramid","Doughnut","Funnel"].indexOf(this.parent.chartSettings.chartSeries.type)>-1?this.groupingChartTable.querySelector("."+n._127).classList.add(n._139):this.groupingChartTable.querySelector("."+n._127).classList.add(n._140),this.groupingChartTable.querySelector("."+n._131).classList.add(n._141)):this.groupingChartTable=void 0,"Chart"!==this.parent.displayOption.view&&"Chart"!==this.parent.groupingBarSettings.displayMode||(this.groupingTable=void 0)},e.prototype.appendToElement=function(){if((this.parent.element.querySelector("."+n._142)||this.parent.element.querySelector("."+n._10))&&this.parent.showGroupingBar){if(this.parent.element.querySelector("."+n.w))for(var e=0,t=this.parent.element.querySelectorAll("."+n.w);e<t.length;e++){var a=t[e];i.i(r.remove)(a)}if(this.groupingChartTable)if(i.i(r.select)("#"+this.parent.element.id+"_chart",this.parent.element)){if(i.i(r.setStyleAttribute)(this.groupingChartTable,{width:i.i(r.formatUnit)(this.parent.grid?this.parent.getGridWidthAsNumber():this.parent.getWidthAsNumber())}),this.parent.element.insertBefore(this.groupingChartTable,i.i(r.select)("#"+this.parent.element.id+"_chart",this.parent.element)),this.groupingChartTable.querySelector("."+n._143)&&null!=this.chartPanel&&!this.chartPanel.isDestroyed){var o=this.parent.grid?this.parent.getGridWidthAsNumber()-2:this.parent.getWidthAsNumber()-2;this.chartPanel.width=o<400?"398px":o,this.chartPanel.refreshOverflow(),this.parent.showFieldList&&this.parent.pivotFieldListModule&&this.parent.pivotFieldListModule.element&&(clearTimeout(this.timeOutObj),this.timeOutObj=setTimeout(this.alignIcon.bind(this)))}}else this.groupingChartTable=void 0;if("Chart"!==this.parent.displayOption.view&&this.groupingTable){this.parent.isAdaptive&&(this.leftAxisPanel.style.minWidth="180px",this.valuePanel.style.minWidth="180px"),this.parent.firstColWidth&&(this.leftAxisPanel.style.minWidth="auto",this.valuePanel.style.minWidth="auto"),this.filterPanel.removeAttribute("style"),this.columnPanel.removeAttribute("style"),this.rowPanel.removeAttribute("style"),this.filterPanel.removeAttribute("style");var s=void 0;if(s="olap"===this.parent.dataType?this.parent.olapEngineModule.headerContent?Object.keys(this.parent.olapEngineModule.headerContent).length:0:this.parent.engineModule.headerContent?Object.keys(this.parent.engineModule.headerContent).length:0,!i.i(r.isNullOrUndefined)(s)){var l=this.parent.element.querySelector(".e-frozenheader").querySelector(".e-columnheader");l.removeAttribute("style"),i.i(r.addClass)([l.querySelector(".e-headercell")],"e-group-row"),l.querySelector(".e-group-row").appendChild(this.rowAxisPanel),l.querySelector(".e-group-row").querySelector(".e-headercelldiv").style.display="none",l.querySelector(".e-group-row").querySelector(".e-sortfilterdiv").style.display="none"}if(this.parent.element.insertBefore(this.groupingTable,this.parent.element.querySelector("."+n._142)),i.i(r.setStyleAttribute)(this.groupingTable,{width:i.i(r.formatUnit)(this.parent.grid?this.parent.getGridWidthAsNumber():this.parent.getWidthAsNumber())}),this.groupingTable&&this.groupingTable.querySelector("."+n._143)&&null!=this.gridPanel&&!this.gridPanel.isDestroyed){var d=this.parent.grid?this.parent.getGridWidthAsNumber()-2:this.parent.getWidthAsNumber()-2;this.gridPanel.width=d<400?"398px":d,this.gridPanel.refreshOverflow()}this.groupingTable.style.minWidth="400px",this.parent.axisFieldModule.render(),this.setGridRowWidth();var h=this.parent.element.querySelector(".e-frozenheader").querySelector("colgroup").children[0],p=i.i(r.formatUnit)(this.groupingTable.offsetWidth-parseInt(h.style.width,10));i.i(r.setStyleAttribute)(this.valuePanel,{width:h.style.width}),i.i(r.setStyleAttribute)(this.rightAxisPanel,{width:p});var u=this.valuePanel.offsetHeight/2;u>this.columnPanel.offsetHeight&&(i.i(r.setStyleAttribute)(this.filterPanel,{height:i.i(r.formatUnit)(u)}),i.i(r.setStyleAttribute)(this.columnPanel,{height:i.i(r.formatUnit)(u+2)}));var c=this.parent.element.querySelector(".e-headercontent").offsetHeight;i.i(r.setStyleAttribute)(this.rowPanel,{height:c+"px"}),this.parent.element.querySelector(".e-frozenheader").querySelector(".e-rhandler")&&(this.parent.element.querySelector(".e-frozenheader").querySelector(".e-rhandler").style.height=c+"px");for(var g=[].slice.call(this.parent.element.querySelector(".e-movableheader").querySelector("thead").querySelectorAll("tr")),m=g.filter(function(e){return e.childNodes.length>0}),f=c/m.length,v=0,S=m;v<S.length;v++){var a=S[v];i.i(r.setStyleAttribute)(a,{height:f+"px"});for(var y=[].slice.call(a.querySelectorAll(".e-rhandler")),b=0,C=y;b<C.length;b++){var x=C[b];i.i(r.setStyleAttribute)(x,{height:f+"px"})}}}else this.parent.axisFieldModule.render(),this.updateChartAxisHeight();this.parent.showToolbar&&"Both"===this.parent.displayOption.view&&("Table"===this.parent.currentView?this.parent.element.querySelector(".e-chart-grouping-bar").style.display="none":this.parent.element.querySelector(".e-pivot-grouping-bar").style.display="none")}},e.prototype.updateChartAxisHeight=function(){if(this.groupingChartTable&&i.i(r.select)("#"+this.parent.element.id+"_chart",this.parent.element)){var e=this.groupingChartTable.querySelector("."+n._125),t=this.groupingChartTable.querySelector("."+n._129),a=this.groupingChartTable.querySelector("."+n._131),o=this.groupingChartTable.querySelector("."+n._127);if(e&&o&&(e.style.height="auto",o.style.height="auto",e.offsetHeight>0&&o.offsetHeight>0)){var s=e.offsetHeight>o.offsetHeight?e.offsetHeight:o.offsetHeight;i.i(r.setStyleAttribute)(e,{height:i.i(r.formatUnit)(s)}),i.i(r.setStyleAttribute)(o,{height:i.i(r.formatUnit)(s)})}if(t&&a&&(t.style.height="auto",a.style.height="auto",t.offsetHeight>0&&a.offsetHeight>0)){var s=t.offsetHeight>a.offsetHeight?t.offsetHeight:a.offsetHeight;i.i(r.setStyleAttribute)(t,{height:i.i(r.formatUnit)(s)}),i.i(r.setStyleAttribute)(a,{height:i.i(r.formatUnit)(s)})}}},e.prototype.refreshUI=function(){if(this.groupingChartTable){if(i.i(r.setStyleAttribute)(this.groupingChartTable,{width:i.i(r.formatUnit)(this.parent.grid?this.parent.getGridWidthAsNumber():this.parent.getWidthAsNumber())}),this.groupingChartTable.querySelector("."+n._143)&&null!=this.chartPanel&&!this.chartPanel.isDestroyed){var e=this.parent.grid?this.parent.getGridWidthAsNumber()-2:this.parent.getWidthAsNumber()-2;this.chartPanel.width=e<400?"398px":e,this.chartPanel.refreshOverflow()}this.updateChartAxisHeight(),this.parent.showFieldList&&this.parent.pivotFieldListModule&&this.parent.pivotFieldListModule.element&&(clearTimeout(this.timeOutObj),this.timeOutObj=setTimeout(this.alignIcon.bind(this)))}if(this.groupingTable){if(i.i(r.setStyleAttribute)(this.groupingTable,{width:i.i(r.formatUnit)(this.parent.grid?this.parent.getGridWidthAsNumber():this.parent.getWidthAsNumber())}),this.groupingTable&&this.groupingTable.querySelector("."+n._143)&&null!=this.gridPanel&&!this.gridPanel.isDestroyed){var t=this.parent.grid?this.parent.getGridWidthAsNumber()-2:this.parent.getWidthAsNumber()-2;this.gridPanel.width=t<400?"398px":t,this.gridPanel.refreshOverflow()}this.groupingTable.style.minWidth="400px";var a=this.parent.element.querySelector(".e-frozenheader").querySelector("colgroup").children[0],o=i.i(r.formatUnit)(this.groupingTable.offsetWidth-parseInt(a.style.width,10));if(i.i(r.setStyleAttribute)(this.valuePanel,{width:a.style.width}),i.i(r.setStyleAttribute)(this.rightAxisPanel,{width:o}),this.parent.showFieldList&&this.parent.pivotFieldListModule&&this.parent.pivotFieldListModule.element&&(clearTimeout(this.timeOutObj),this.timeOutObj=setTimeout(this.alignIcon.bind(this))),!this.parent.grid.element.querySelector(".e-group-row")){var s=this.parent.element.querySelector(".e-frozenheader").querySelector(".e-columnheader");i.i(r.addClass)([s.querySelector(".e-headercell")],"e-group-row"),i.i(r.setStyleAttribute)(this.rowPanel,{height:this.parent.element.querySelector(".e-headercontent").offsetHeight+"px"}),s.querySelector(".e-group-row").appendChild(this.rowAxisPanel),i.i(r.setStyleAttribute)(s.querySelector(".e-group-row").querySelector(".e-headercelldiv"),{display:"none"}),i.i(r.setStyleAttribute)(s.querySelector(".e-group-row").querySelector(".e-sortfilterdiv"),{display:"none"});var l=this.parent.element.querySelector(".e-headercontent").offsetHeight;i.i(r.setStyleAttribute)(this.rowPanel,{height:l+"px"}),this.parent.element.querySelector(".e-frozenheader").querySelector(".e-rhandler")&&(this.parent.element.querySelector(".e-frozenheader").querySelector(".e-rhandler").style.height=l+"px");for(var d=[].slice.call(this.parent.element.querySelector(".e-movableheader").querySelector("thead").querySelectorAll("tr")),h=d.filter(function(e){return e.childNodes.length>0}),p=l/h.length,u=0,c=h;u<c.length;u++){var g=c[u];i.i(r.setStyleAttribute)(g,{height:p+"px"});for(var m=[].slice.call(g.querySelectorAll(".e-rhandler")),f=0,v=m;f<v.length;f++){var S=v[f];i.i(r.setStyleAttribute)(S,{height:p+"px"})}}}}},e.prototype.alignIcon=function(){var e,t=this.parent.pivotFieldListModule.element;if(e="Table"===this.parent.currentView?this.parent.grid?this.parent.grid.element.offsetWidth:e:this.parent.chart?this.parent.pivotChartModule.getCalulatedWidth():e){var a=e<400?400:e;i.i(r.setStyleAttribute)(t.querySelector("."+n._85),{left:i.i(r.formatUnit)(this.parent.enableRtl?-Math.abs(a-t.querySelector("."+n._85).offsetWidth):a-t.querySelector("."+n._85).offsetWidth),top:this.parent.element.querySelector("."+n._144)?this.parent.element.querySelector("."+n._85).offsetHeight.toString()+"px":""})}},e.prototype.setGridRowWidth=function(){var e=this.parent.element.querySelector(".e-frozenheader").querySelector("colgroup").children[0];if(this.rowPanel.querySelector("."+n._14))if(this.parent.isAdaptive){if(!this.parent.firstColWidth){var t=this.parent.grid.columns;t&&t.length>0&&(t[0].width=this.resColWidth),this.parent.posCount=0,this.parent.grid.headerModule.refreshUI()}}else{var a=[].slice.call(this.rowPanel.querySelectorAll("."+n._145)),o=a[a.length-1],s=o.querySelector("."+n._14).offsetWidth+o.querySelector(".e-indent-div").offsetWidth+20,l=i.i(r.formatUnit)(s<this.resColWidth?this.resColWidth:s),d=this.parent.element.querySelector(".e-frozenheader").querySelector("table"),h=this.parent.element.querySelector(".e-frozencontent").querySelector("table"),p=this.parent.element.querySelector(".e-frozencontent").querySelector("colgroup").children[0],u=parseInt(l,10),c=this.parent.pivotColumns.length>0,t=this.parent.grid.columns;t&&t.length>0&&(t[0].width=t[0].autoFit?t[0].width:(t[0].width,this.resColWidth,u>this.resColWidth?u:this.resColWidth));var g=void 0;g="olap"===this.parent.dataType?this.parent.renderModule.calculateColWidth(this.parent.olapEngineModule.pivotValues.length>0?this.parent.olapEngineModule.pivotValues[0].length:2):this.parent.renderModule.calculateColWidth(this.parent.dataSourceSettings.values.length>0&&this.parent.engineModule.pivotValues.length>0?this.parent.engineModule.pivotValues[0].length:2);for(var m=0;m<t.length;m++)if(0!==m)if(t[m].columns)this.setColWidth(this.parent.renderModule.pivotColumns[m].columns,g);else if("auto"!==t[m].width){var f=t[m].customAttributes?t[m].customAttributes.cell.valueSort.levelName:"";t[m].width=t[m].autoFit||c&&this.parent.pivotColumns[m].autoFit?t[m].width:this.parent.renderModule.setSavedWidth(f,g)}else t[m].minWidth=g;this.parent.posCount=0,this.parent.setGridColumns(this.parent.grid.columns),this.parent.grid.headerModule.refreshUI(),this.parent.firstColWidth||(l=t[0].autoFit?t[0].width.toString():l,e.style.width=l,p.style.width=l,d.style.width=l,h.style.width=l,i.i(r.setStyleAttribute)(d,{width:l}),i.i(r.setStyleAttribute)(h,{width:l}))}else this.parent.grid.columns&&this.parent.grid.columns.length>0&&(this.parent.grid.columns[0].width=this.parent.grid.columns[0].width>this.resColWidth?this.parent.grid.columns[0].width:this.resColWidth),this.parent.grid.headerModule.refreshUI();this.groupingTable&&this.refreshUI()},e.prototype.setColWidth=function(e,t){for(var i=0;i<e.length;i++)e[i].columns?this.setColWidth(e[i].columns,t):e[i].autoFit||("auto"!==e[i].width?e[i].width=t:e[i].minWidth=t)},e.prototype.wireEvent=function(e){r.EventHandler.add(e,"mouseover",this.dropIndicatorUpdate,this),r.EventHandler.add(e,"mouseleave",this.dropIndicatorUpdate,this)},e.prototype.unWireEvent=function(e){r.EventHandler.remove(e,"mouseover",this.dropIndicatorUpdate),r.EventHandler.remove(e,"mouseleave",this.dropIndicatorUpdate)},e.prototype.dropIndicatorUpdate=function(e){(this.parent.isDragging&&e.target.classList.contains(n._146)&&"mouseover"===e.type||!this.parent.isDragging||!e.target.classList.contains(n._146)&&"mouseleave"===e.type)&&(i.i(r.removeClass)([].slice.call(this.parent.element.querySelectorAll("."+n._147)),n._148),i.i(r.removeClass)([].slice.call(this.parent.element.querySelectorAll("."+n._147+"-last")),n._148))},e.prototype.tapHoldHandler=function(e){var t=i.i(r.closest)(e.originalEvent.target,"."+n._14);if(!i.i(r.isNullOrUndefined)(t)&&this.parent.isAdaptive){var a=t.getBoundingClientRect();return this.parent.contextMenuModule.fieldElement=t,void this.parent.contextMenuModule.menuObj.open(a.top,a.left)}},e.prototype.RefreshFieldsPanel=function(){if("pivot"===this.parent.dataType&&null!=this.parent.groupingBarSettings){if(i.i(r.selectAll)("#"+this.parent.element.id+"_AllFields",this.parent.element).length>0)for(var e=0,t=i.i(r.selectAll)("#"+this.parent.element.id+"_AllFields",this.parent.element);e<t.length;e++){var a=t[e];a.remove()}this.parent.groupingBarSettings.showFieldsPanel&&(this.groupingChartTable&&"Table"!==this.parent.displayOption.view&&"Table"!==this.parent.groupingBarSettings.displayMode&&(this.chartPanel=this.createToolbarUI(this.groupingChartTable)),this.groupingTable&&(this.gridPanel=this.createToolbarUI(this.groupingTable)),this.parent.axisFieldModule.render(),this.refreshUI())}},e.prototype.createToolbarUI=function(e){i.i(r.select)("#"+this.parent.element.id+"_AllFields",e)&&i.i(r.select)("#"+this.parent.element.id+"_AllFields",e).remove(),e.prepend(i.i(r.createElement)("div",{id:this.parent.element.id+"_AllFields"}));var t=new s.Toolbar({cssClass:n._143+(this.parent.cssClass?" "+this.parent.cssClass:""),enableRtl:this.parent.enableRtl,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,items:[{template:"<div class="+n._149+"></div>"}],allowKeyboard:!1,width:this.parent.grid?this.parent.getGridWidthAsNumber()-2:this.parent.getWidthAsNumber()-2});return t.appendTo(i.i(r.select)("#"+this.parent.element.id+"_AllFields",e)),t},e.prototype.addEventListener=function(){this.handlers={load:this.renderLayout,end:this.appendToElement},this.parent.isDestroyed||(this.parent.on(a._23,this.handlers.load,this),this.parent.on(a._17,this.handlers.end,this))},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(a._17,this.handlers.end),this.parent.off(a._23,this.handlers.load))},e.prototype.destroy=function(){this.removeEventListener(),this.parent.pivotButtonModule&&this.parent.pivotButtonModule.destroy(),this.groupingTable&&this.groupingTable.querySelector("."+n._143)&&null!=this.gridPanel&&!this.gridPanel.isDestroyed&&(this.gridPanel.destroy(),this.gridPanel=null),this.groupingChartTable&&this.groupingChartTable.querySelector("."+n._143)&&null!=this.chartPanel&&!this.chartPanel.isDestroyed&&(this.chartPanel.destroy(),this.chartPanel=null),this.touchObj&&!this.touchObj.isDestroyed&&this.touchObj.destroy(),this.parent.element.querySelector("."+n.w)&&i.i(r.remove)(this.parent.element.querySelector("."+n.w))},e}())},function(e,t,i){"use strict";i.d(t,"a",function(){return d});var r=i(4),a=(i.n(r),i(0)),n=(i.n(a),i(2)),o=i(8),s=(i.n(o),i(1)),l=i(9),d=(i.n(l),function(){function e(e){this.indexString=[],this.clonedData=[],this.isUpdated=!1,this.gridIndexObjects={},this.gridData=[],this.formatList={},this.drillKeyConfigs={escape:"escape"},this.parent=e,this.engine="olap"===this.parent.dataType?this.parent.olapEngineModule:this.parent.engineModule}return e.prototype.frameHeaderWithKeys=function(e){for(var t=Object.keys(e),i=0,r={};i<t.length;)r[t[i]]=e[t[i]],i++;return r},e.prototype.showDrillThroughDialog=function(e){var t=this;this.gridData=e.rawData;for(var o=0;o<e.rawData.length;o++)this.clonedData.push(this.frameHeaderWithKeys(e.rawData[o]));try{if("Table"===this.parent.currentView&&this.parent.editSettings.allowInlineEditing&&this.parent.editSettings.allowEditing&&1===e.rawData.length){if(this.parent.actionObj.actionName=s._72,this.parent.actionBeginMethod())return;this.editCell(e)}else{this.removeDrillThroughDialog();var l=i.i(a.createElement)("div",{id:this.parent.element.id+"_drillthrough",className:n._269});this.parent.element.appendChild(l),this.dialogPopUp=new r.Dialog({animationSettings:{effect:"Fade"},allowDragging:!1,header:this.parent.localeObj.getConstant("details"),content:this.createDrillThroughGrid(e),cssClass:this.parent.cssClass,beforeOpen:function(){t.drillThroughGrid.setProperties({dataSource:t.parent.editSettings.allowEditing?t.dataWithPrimarykey(e):t.gridData,height:t.parent.editSettings.allowEditing?220:300},!1)},beforeClose:function(){if(t.parent.editSettings.allowEditing&&t.isUpdated){"CSV"===t.parent.dataSourceSettings.type&&t.updateData(t.drillThroughGrid.dataSource);for(var e=Object.keys(t.gridIndexObjects),r=[],n=0,o=e;n<o.length;n++){var l=o[n];r.push(t.gridIndexObjects[l])}for(var d=Object.keys(t.gridIndexObjects).length,h=[],p=[],u=0,c=0,g=t.drillThroughGrid.dataSource;c<g.length;c++){var m=g[c];if(i.i(a.isNullOrUndefined)(m.__index)||""===m.__index){for(var f=0,v=t.engine.fields;f<v.length;f++){var S=v[f];i.i(a.isNullOrUndefined)(m[S])&&delete m[S]}delete m.__index,h.push(m)}else d>0&&(delete t.gridIndexObjects[m.__index.toString()],p.push(m),d--);"Server"===t.parent.dataSourceSettings.mode&&(m.__index&&delete m.__index,t.gridData[u].__index&&delete t.gridData[u].__index),u++}if(d=0,"Server"===t.parent.dataSourceSettings.mode){for(var y=[],b=Object.keys(t.gridIndexObjects),C=0;C<b.length;C++)delete t.parent.drillThroughValue.indexObject[t.gridIndexObjects[b[C]]],y.push({Key:b[C],Value:t.gridIndexObjects[b[C]]});var x=[];b=Object.keys(t.parent.drillThroughValue.indexObject);for(var C=0;C<b.length;C++)x.push({Key:b[C],Value:t.parent.drillThroughValue.indexObject[b[C]]});t.parent.getEngine("updateRawData",null,null,null,null,null,null,null,{addedData:h,removedData:y,updatedData:p,indexObject:x})}else{for(var w=[],T=t.parent.allowDataCompression?t.parent.engineModule.actualData:t.parent.engineModule.data,M=0,_=T;M<_.length;M++){var m=_[M];delete m.__index,void 0===t.gridIndexObjects[d.toString()]&&w.push(m),d++}w=w.concat(h);var D={currentData:t.drillThroughGrid.dataSource,previousData:t.clonedData,previousPosition:r,cancel:!1};t.parent.trigger(s.F,D),D.cancel||(t.parent.setProperties({dataSourceSettings:{dataSource:w}},!0),t.engine.updateGridData(t.parent.dataSourceSettings),t.parent.pivotValues=t.engine.pivotValues)}t.parent.actionObj.actionName=s._119;var O={editInfo:{type:t.drillThroughGrid.editSettings.mode,action:"Update",currentData:t.drillThroughGrid.dataSource,previousData:t.clonedData,previousPosition:r}};t.parent.actionObj.actionInfo=O}t.isUpdated=!1,t.gridIndexObjects={}},isModal:!0,visible:!0,showCloseIcon:!0,locale:this.parent.locale,enableRtl:this.parent.enableRtl,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,width:this.parent.isAdaptive?"100%":"60%",position:{X:"center",Y:"center"},closeOnEscape:!this.parent.editSettings.allowEditing,target:document.body,close:this.removeDrillThroughDialog.bind(this)}),this.dialogPopUp.isStringTemplate=!0,this.dialogPopUp.appendTo(l),i.i(a.setStyleAttribute)(this.dialogPopUp.element,{visibility:"visible"}),this.parent.editSettings.allowEditing&&(this.drillthroughKeyboardModule=new a.KeyboardEvents(this.dialogPopUp.element,{keyAction:this.drillthroughKeyActionHandler.bind(this),keyConfigs:this.drillKeyConfigs,eventName:"keydown"}))}}catch(e){this.parent.actionFailureMethod(e)}},e.prototype.editCell=function(e){var t=this,r=this.parent.gridSettings.allowResizing,n=e.currentCell.actualText.toString(),o=Number(Object.keys(e.currentCell.indexObject));e.currentTarget.firstElementChild.style.display="none";var d=Number(e.rawData[0][n]),h=this.frameHeaderWithKeys(e.rawData[e.rawData.length-1]),p=e.rawData[e.rawData.length-1],u={editInfo:{type:"Inline editing",action:"update",data:this.gridData}};this.parent.actionObj.actionInfo=u,this.numericTextBox=new l.NumericTextBox({value:d,enableRtl:this.parent.enableRtl,enabled:!0,format:"####.##",locale:this.parent.locale,cssClass:this.parent.cssClass,change:function(){var r=i.i(a.isNullOrUndefined)(t.numericTextBox.value)?0:t.numericTextBox.value,s=e.currentCell.indexObject[o];e.rawData[0][n]=r,t.parent.engineModule.data[s]=e.rawData[0]},blur:function(){var e={currentData:p,previousData:h,previousPosition:p.index,cancel:!1};t.parent.trigger(s.F,e),e.cancel||(t.parent.setProperties({dataSourceSettings:{dataSource:t.parent.engineModule.data}},!0),t.engine.updateGridData(t.parent.dataSourceSettings),t.parent.pivotValues=t.engine.pivotValues,t.parent.gridSettings.allowResizing=r)}});var c=i.i(a.createElement)("input",{id:this.parent.element.id+"_inputbox"});e.currentTarget.appendChild(c),this.numericTextBox.appendTo(c),e.currentCell.value=this.numericTextBox.value,this.numericTextBox.focusIn(),this.parent.gridSettings.allowResizing=!1},e.prototype.updateData=function(e){for(var t=0,r=this.parent.allowDataCompression?this.parent.engineModule.actualData:this.parent.engineModule.data;t<e.length;){for(var n=Object.keys(e[t]),o=0,s=[];o<n.length;)i.i(a.isNullOrUndefined)(this.parent.engineModule.fieldKeys[n[o]])||(s[this.parent.engineModule.fieldKeys[n[o]]]=e[t][n[o]]),o++;r[e[t].__index]=s,t++}this.parent.allowDataCompression?this.parent.engineModule.actualData=r:this.parent.engineModule.data=r},e.prototype.removeDrillThroughDialog=function(){this.dialogPopUp&&!this.dialogPopUp.isDestroyed&&(this.parent.actionObj.actionName=s._120,this.parent.actionObj.actionName&&this.parent.actionCompleteMethod(),this.dialogPopUp.destroy());var e=document.getElementById(this.parent.element.id+"_drillthrough");e&&i.i(a.remove)(e),document.getElementById(this.parent.element.id+"_drillthroughgrid_ccdlg")&&i.i(a.remove)(document.getElementById(this.parent.element.id+"_drillthroughgrid_ccdlg"))},e.prototype.createDrillThroughGrid=function(e){var t=this,r=i.i(a.createElement)("div",{id:this.parent.element.id+"_drillthroughbody",className:n._270}),l=i.i(a.createElement)("div",{id:this.parent.element.id+"_drillthroughbodyheader",className:n._271});if(""!==e.rowHeaders&&(l.innerHTML="<span class="+n._272+"><span class="+n._273+">"+this.parent.localeObj.getConstant("row")+"</span> : <span class="+n._274+">"+e.rowHeaders+"</span></span>"),""!==e.columnHeaders&&(l.innerHTML=l.innerHTML+"<span class="+n._272+"><span class="+n._273+">"+this.parent.localeObj.getConstant("column")+"</span> : <span class="+n._274+">"+e.columnHeaders+"</span></span>"),""!==e.value){var d=e.value.split("(")[0],h=e.value.split("(")[1].split(")")[0];"0"!==h&&(l.innerHTML=l.innerHTML+"<span class="+n._272+"><span class="+n._273+">"+d+"</span> : <span class="+n._274+">"+h+"</span></span>")}var p=["ColumnChooser"];this.parent.editSettings.allowEditing&&(p=this.parent.editSettings.allowCommandColumns?["ColumnChooser","Add"]:"Batch"===this.parent.editSettings.mode?["ColumnChooser","Add","Delete","Update","Cancel"]:"Dialog"===this.parent.editSettings.mode?["ColumnChooser","Add","Edit","Delete"]:["ColumnChooser","Add","Edit","Delete","Update","Cancel"]);var u=i.i(a.createElement)("div",{id:this.parent.element.id+"_drillthroughgrid",className:n._275});o.Grid.Inject(o.Selection,o.Reorder,o.Resize,o.Toolbar,o.ColumnChooser),this.drillThroughGrid=new o.Grid({cssClass:this.parent.cssClass,gridLines:"Default",allowResizing:!0,allowReordering:!0,showColumnChooser:!0,enableHover:!1,toolbar:p,columns:e.gridColumns,locale:this.parent.locale,enableRtl:this.parent.enableRtl,enableVirtualization:!this.parent.editSettings.allowEditing,allowPaging:this.parent.editSettings.allowEditing,pageSettings:{pageSize:20},rowHeight:this.parent.gridSettings.rowHeight}),"olap"===this.parent.dataType&&this.formatData();var c=this;if(this.parent.trigger(s.E,{cellInfo:e,gridObj:this.drillThroughGrid,type:"editing"}),this.drillThroughGrid.allowExcelExport&&o.Grid.Inject(o.ExcelExport),this.drillThroughGrid.allowPdfExport&&o.Grid.Inject(o.PdfExport),this.parent.editSettings.allowEditing){o.Grid.Inject(o.Edit,o.Page);try{this.drillThroughGrid.editSettings=this.parent.editSettings,this.drillThroughGrid.actionBegin=function(e){var i="save"===e.requestType?s._73:"add"===e.requestType?s._74:"delete"===e.requestType?s._75:"";t.parent.actionObj.actionName=i,t.parent.actionObj.actionName&&t.parent.actionBeginMethod()},this.parent.editSettings.allowCommandColumns?(this.drillThroughGrid.editSettings.mode="Normal",this.drillThroughGrid.editSettings.allowEditOnDblClick=!1,o.Grid.Inject(o.CommandColumn),this.drillThroughGrid.columns.push({headerText:this.parent.localeObj.getConstant("manageRecords"),width:160,showInColumnChooser:!1,commands:[{type:"Edit",buttonOption:{iconCss:" e-icons e-edit",cssClass:"e-flat"+(this.parent.cssClass?" "+this.parent.cssClass:"")}},{type:"Delete",buttonOption:{iconCss:"e-icons e-delete",cssClass:"e-flat"+(this.parent.cssClass?" "+this.parent.cssClass:"")}},{type:"Save",buttonOption:{iconCss:"e-icons e-update",cssClass:"e-flat"+(this.parent.cssClass?" "+this.parent.cssClass:"")}},{type:"Cancel",buttonOption:{iconCss:"e-icons e-cancel-icon",cssClass:"e-flat"+(this.parent.cssClass?" "+this.parent.cssClass:"")}}]})):this.drillThroughGrid.editSettings.allowEditOnDblClick=this.parent.editSettings.allowEditOnDblClick,this.drillThroughGrid.columns.push({field:"__index",visible:!1,isPrimaryKey:!0,type:"string",showInColumnChooser:!1})}catch(e){this.parent.actionFailureMethod(e)}this.drillThroughGrid.actionComplete=function(e){"batchsave"!==e.requestType&&"save"!==e.requestType&&"delete"!==e.requestType||(c.isUpdated=!0),t.parent.actionObj.actionName=t.parent.getActionCompleteName();var i={editInfo:{type:t.drillThroughGrid.editSettings.mode,action:e.requestType,data:t.gridData}};t.parent.actionObj.actionInfo=i,t.parent.actionObj.actionName&&t.parent.actionCompleteMethod(),("Normal"===c.drillThroughGrid.editSettings.mode&&"save"===e.requestType&&c.drillThroughGrid.element.querySelectorAll(".e-tbar-btn:hover").length>0&&!c.parent.editSettings.allowCommandColumns||"batchsave"===e.requestType)&&c.dialogPopUp.hide()},this.drillThroughGrid.beforeBatchSave=function(){c.isUpdated=!0}}else o.Grid.Inject(o.VirtualScroll);return document.body.appendChild(u),this.drillThroughGrid.isStringTemplate=!0,this.drillThroughGrid.appendTo(u),r.appendChild(l),r.appendChild(u),r},e.prototype.frameGridColumns=function(e){var t="olap"===this.parent.dataType?e[0]?Object.keys(e[0]):[]:Object.keys(this.engine.fieldList),r=[];if(this.parent.dataSourceSettings.formatSettings.length>0)for(var n=0;n<this.parent.dataSourceSettings.formatSettings.length;n++)this.formatList[this.parent.dataSourceSettings.formatSettings[n].name]=this.parent.dataSourceSettings.formatSettings[n].format;if("olap"===this.parent.dataType)for(var o=0,s=t;o<s.length;o++){var l=s[o];r.push({field:l.replace(/_x005B_|_x0020_|_x005D_|_x0024_/g,"").replace("].[","").split(".").reverse().join(""),headerText:l.replace(/_x005B_|_x005D_|_x0024_/g,"").replace(/_x0020_/g," ").replace("].[","").split(".").reverse().join("."),width:120,visible:!0,validationRules:{required:!0},format:i.i(a.isNullOrUndefined)(this.formatList[l])?null:this.formatList[l],type:i.i(a.isNullOrUndefined)(this.formatList[l])?"string":null})}else for(var d=0,h=t;d<h.length;d++){var l=h[d];if("CalculatedField"!==this.engine.fieldList[l].aggregateType){var p="",u=!("date"!==this.engine.fieldList[l].type&&"datetime"!==this.engine.fieldList[l].type||!(this.isDateFieldExist(l)||e[0]&&e[0][l]&&-1===e[0][l].toString().indexOf(" ")));p="number"===this.engine.fieldList[l].type?"numericedit":"date"===this.engine.fieldList[l].type&&u?"datepickeredit":"datetime"===this.engine.fieldList[l].type&&u?"datetimepickeredit":"defaultedit";var c=this.parent.enableHtmlSanitizer?a.SanitizeHtmlHelper.sanitize(this.engine.fieldList[l].caption):this.engine.fieldList[l].caption;r.push({field:l,headerText:c,width:120,visible:this.engine.fieldList[l].isSelected,validationRules:{required:!0},editType:p,format:i.i(a.isNullOrUndefined)(this.formatList[l])?void 0:this.formatList[l],type:i.i(a.isNullOrUndefined)(this.formatList[l])?"string":null})}}return r},e.prototype.isDateFieldExist=function(e){for(var t=0;t<this.parent.dataSourceSettings.formatSettings.length;t++)if(this.parent.dataSourceSettings.formatSettings[t].name===e&&this.parent.dataSourceSettings.formatSettings[t].type.indexOf("date")>-1)return!0;for(var t=0;t<this.parent.dataSourceSettings.fieldMapping.length;t++)if(this.parent.dataSourceSettings.fieldMapping[t].name===e&&this.parent.dataSourceSettings.fieldMapping[t].dataType&&this.parent.dataSourceSettings.fieldMapping[t].dataType.indexOf("date")>-1)return!0;return!1},e.prototype.formatData=function(){for(var e=0;e<this.gridData.length;){for(var t=this.gridData[e],i=Object.keys(this.gridData[e]),r={},a=0;a<i.length;){r[i[a].replace(/_x005B_|_x0020_|_x005D_|_x0024_/g,"").replace("].[","").split(".").reverse().join("")]=t[i[a]],a++}this.gridData[e]=r,e++}},e.prototype.dataWithPrimarykey=function(e){for(var t=this.indexString.length>0?this.indexString:Object.keys(e.currentCell.indexObject),i=this.gridData,r=0,a=0,n=i;a<n.length;a++){n[a].__index=t[r],this.gridIndexObjects[t[r].toString()]=Number(t[r]),r++}return i},e.prototype.drillthroughKeyActionHandler=function(e){switch(e.action){case"escape":this.processClose(e)}},e.prototype.processClose=function(e){var t=e.target;if(t&&i.i(a.closest)(t,".e-popup.e-popup-open")){var r=i.i(a.closest)(t,".e-popup.e-popup-open").ej2_instances[0];if(r&&!r.closeOnEscape){var n=r.element.getAttribute("data-fieldName");if(r.hide(),this.parent.element)for(var o=[].slice.call(this.parent.element.querySelectorAll(".e-pivot-button")),s=0,l=o;s<l.length;s++){var d=l[s];if(d.getAttribute("data-uid")===n){d.focus();break}}return void e.preventDefault()}}},e.prototype.destroy=function(){this.parent.isDestroyed||this.drillthroughKeyboardModule&&!this.drillthroughKeyboardModule.isDestroyed&&(this.drillthroughKeyboardModule.destroy(),this.drillthroughKeyboardModule=null)},e}())},function(e,t,i){"use strict";i.d(t,"a",function(){return d});var r=i(4),a=(i.n(r),i(0)),n=(i.n(a),i(2)),o=i(1),s=i(7),l=(i.n(s),i(3)),d=function(){function e(e){this.parent=e,this.parent.numberFormattingModule=this,this.removeEventListener(),this.addEventListener(),this.newFormat=[],this.lastFormattedValue=[]}return e.prototype.getModuleName=function(){return"numberFormatting"},e.prototype.showNumberFormattingDialog=function(){var e=this,t=i.i(a.createElement)("div",{id:this.parent.element.id+"_FormatDialog",className:n.g});this.parent.element.appendChild(t),this.dialog=new r.Dialog({animationSettings:{effect:"Fade"},allowDragging:!0,header:this.parent.localeObj.getConstant("numberFormat"),content:this.getDialogContent(),isModal:!0,visible:!0,showCloseIcon:!0,enableRtl:this.parent.enableRtl,locale:this.parent.locale,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,width:"320px",height:"auto",position:{X:"center",Y:"center"},buttons:[{click:this.updateFormatting.bind(this),buttonModel:{cssClass:n.d+(this.parent.cssClass?" "+this.parent.cssClass:""),content:this.parent.localeObj.getConstant("apply"),isPrimary:!0}},{click:function(){e.dialog.hide()},buttonModel:{cssClass:n.e+(this.parent.cssClass?" "+this.parent.cssClass:""),content:this.parent.localeObj.getConstant("cancel")}}],closeOnEscape:!0,cssClass:this.parent.cssClass,target:this.parent.element,overlayClick:function(){e.removeDialog()},close:this.removeDialog.bind(this)}),this.dialog.isStringTemplate=!0,this.dialog.appendTo(t),this.dialog.element.querySelector("."+n.h).innerText=this.parent.localeObj.getConstant("numberFormat");var o;this.newFormat=[{name:this.parent.localeObj.getConstant("AllValues"),format:"N0",useGrouping:!0,type:void 0}];for(var s=[],l=0;l<this.parent.dataSourceSettings.formatSettings.length;l++)o={name:this.parent.dataSourceSettings.formatSettings[l].name,format:this.parent.dataSourceSettings.formatSettings[l].format,useGrouping:this.parent.dataSourceSettings.formatSettings[l].useGrouping,type:this.parent.dataSourceSettings.formatSettings[l].type},this.newFormat.push(o);for(var l=0;l<this.newFormat.length;l++)s.push(this.newFormat[l].name);for(var d=0;d<this.parent.dataSourceSettings.values.length;d++)-1===s.indexOf(this.parent.dataSourceSettings.values[d].name)&&(o={name:this.parent.dataSourceSettings.values[d].name,format:"N0",useGrouping:!0},this.newFormat.push(o));this.renderControls()},e.prototype.getDialogContent=function(){var e=i.i(a.createElement)("div",{id:this.parent.element.id+"_FormatDialogOuter",className:n.i}),t=i.i(a.createElement)("table",{id:this.parent.element.id+"_FormatTable",className:n.j,attrs:{role:"tableItems"}}),r=i.i(a.createElement)("tr"),o=i.i(a.createElement)("td"),s=i.i(a.createElement)("div",{id:this.parent.element.id+"_FormatValueLable",className:n.k});s.innerText=this.parent.localeObj.getConstant("values");var l=i.i(a.createElement)("div",{id:this.parent.element.id+"_FormatValueDrop"});o.appendChild(s),o.appendChild(l),r.appendChild(o),t.appendChild(r),r=i.i(a.createElement)("tr"),o=i.i(a.createElement)("td");var d=i.i(a.createElement)("div",{id:this.parent.element.id+"_FormatLable",className:n.l});d.innerText=this.parent.localeObj.getConstant("formatType");var h=i.i(a.createElement)("div",{id:this.parent.element.id+"_FormatDrop"});o.appendChild(d),o.appendChild(h),r.appendChild(o),t.appendChild(r),r=i.i(a.createElement)("tr"),o=i.i(a.createElement)("td");var p=i.i(a.createElement)("div",{id:this.parent.element.id+"_GroupingLable",className:n.m});p.innerText=this.parent.localeObj.getConstant("grouping");var u=i.i(a.createElement)("div",{id:this.parent.element.id+"_GroupingDrop"});o.appendChild(p),o.appendChild(u),r.appendChild(o),t.appendChild(r),r=i.i(a.createElement)("tr"),o=i.i(a.createElement)("td");var c=i.i(a.createElement)("div",{id:this.parent.element.id+"_DecimalLable",className:n.n});c.innerText=this.parent.localeObj.getConstant("decimalPlaces");var g=i.i(a.createElement)("div",{id:this.parent.element.id+"_DecimalDrop"});return o.appendChild(c),o.appendChild(g),r.appendChild(o),t.appendChild(r),r=i.i(a.createElement)("tr"),o=i.i(a.createElement)("td"),this.customLable=i.i(a.createElement)("div",{id:this.parent.element.id+"_CustomLable",className:n.o}),this.customLable.innerText=this.parent.localeObj.getConstant("customFormatString"),this.customText=i.i(a.createElement)("input",{id:this.parent.element.id+"_CustomText",attrs:{type:"text",tabindex:"0"},className:n.p+" "+n.q}),o.appendChild(this.customLable),o.appendChild(this.customText),r.appendChild(o),t.appendChild(r),r=i.i(a.createElement)("tr"),t.appendChild(r),e.appendChild(t),e},e.prototype.renderControls=function(){if(i.i(a.select)("#"+this.parent.element.id+"_FormatValueDrop",this.dialog.element)){var e=[];e.push({index:0,name:this.parent.localeObj.getConstant("AllValues"),field:this.parent.localeObj.getConstant("AllValues")});for(var t=0;t<this.parent.dataSourceSettings.values.length;t++){var r=this.parent.dataSourceSettings.values[t].caption||this.parent.dataSourceSettings.values[t].name;r=this.parent.enableHtmlSanitizer?a.SanitizeHtmlHelper.sanitize(r):r,e.push({index:t+1,name:r,field:this.parent.dataSourceSettings.values[t].name})}this.valuesDropDown=new s.DropDownList({dataSource:e,fields:{text:"name",value:"field"},enableRtl:this.parent.enableRtl,locale:this.parent.locale,index:0,cssClass:n.r+(this.parent.cssClass?" "+this.parent.cssClass:""),change:this.valueChange.bind(this),width:"100%",open:this.customUpdate.bind(this)}),this.valuesDropDown.isStringTemplate=!0,this.valuesDropDown.appendTo("#"+this.parent.element.id+"_FormatValueDrop")}if(i.i(a.select)("#"+this.parent.element.id+"_FormatDrop",this.dialog.element)){var o=[{index:0,name:this.parent.localeObj.getConstant("number")},{index:1,name:this.parent.localeObj.getConstant("currency")},{index:2,name:this.parent.localeObj.getConstant("percentage")},{index:3,name:this.parent.localeObj.getConstant("Custom")}];this.formatDropDown=new s.DropDownList({dataSource:o,fields:{text:"name",value:"name"},index:0,change:this.dropDownChange.bind(this),enableRtl:this.parent.enableRtl,locale:this.parent.locale,cssClass:n.s+(this.parent.cssClass?" "+this.parent.cssClass:""),width:"100%"}),this.formatDropDown.isStringTemplate=!0,this.formatDropDown.appendTo("#"+this.parent.element.id+"_FormatDrop")}if(i.i(a.select)("#"+this.parent.element.id+"_GroupingDrop",this.dialog.element)){var o=[{index:0,name:this.parent.localeObj.getConstant("true")},{index:1,name:this.parent.localeObj.getConstant("false")}];this.groupingDropDown=new s.DropDownList({dataSource:o,fields:{text:"name",value:"name"},enableRtl:this.parent.enableRtl,locale:this.parent.locale,index:0,cssClass:n.t+(this.parent.cssClass?" "+this.parent.cssClass:""),width:"100%",change:this.groupingChange.bind(this)}),this.groupingDropDown.isStringTemplate=!0,this.groupingDropDown.appendTo("#"+this.parent.element.id+"_GroupingDrop")}if(i.i(a.select)("#"+this.parent.element.id+"_DecimalDrop",this.dialog.element)){var o=[{index:0,name:0},{index:1,name:1},{index:2,name:2},{index:3,name:3},{index:4,name:4},{index:5,name:5},{index:6,name:6},{index:7,name:7},{index:8,name:8},{index:9,name:9},{index:10,name:10}];this.decimalDropDown=new s.DropDownList({dataSource:o,fields:{text:"name",value:"name"},enableRtl:this.parent.enableRtl,locale:this.parent.locale,index:0,cssClass:n.u+(this.parent.cssClass?" "+this.parent.cssClass:""),popupHeight:150,width:"100%",change:this.decimalChange.bind(this)}),this.decimalDropDown.isStringTemplate=!0,this.decimalDropDown.appendTo("#"+this.parent.element.id+"_DecimalDrop")}if(this.formatDropDown.value!==this.parent.localeObj.getConstant("Custom")&&(this.customText.disabled=!0),0!==this.lastFormattedValue.length){this.valuesDropDown.value=this.lastFormattedValue[0].name;var l=this.lastFormattedValue[0].format,d=""===l?"":l.split("")[0].toLowerCase(),h=this.lastFormattedValue[0].useGrouping?this.parent.localeObj.getConstant("true"):this.parent.localeObj.getConstant("false");this.updateFormattingDialog(l,d,h)}},e.prototype.valueChange=function(e){for(var t=this.newFormat,i=!1,r=0;r<t.length;r++)if(t[r].name===e.value){var a=t[r].format,n=""===a?"":a.split("")[0].toLowerCase(),o=t[r].useGrouping?this.parent.localeObj.getConstant("true"):this.parent.localeObj.getConstant("false");this.updateFormattingDialog(a,n,o),i=!0;break}i||(this.formatDropDown.value=this.parent.localeObj.getConstant("number"),this.decimalDropDown.value=0,this.groupingDropDown.value=this.parent.localeObj.getConstant("true"))},e.prototype.updateFormattingDialog=function(e,t,i){2===e.length&&["n","p","c"].indexOf(t)>-1?(this.formatDropDown.value="n"===t?this.parent.localeObj.getConstant("number"):"p"===t?this.parent.localeObj.getConstant("percentage"):"c"===t?this.parent.localeObj.getConstant("currency"):this.parent.localeObj.getConstant("number"),this.decimalDropDown.value=Number(e.split("")[1]),this.groupingDropDown.value=i):(this.formatDropDown.value=this.parent.localeObj.getConstant("Custom"),this.customText.value=e)},e.prototype.customUpdate=function(){if(this.formatDropDown.value===this.parent.localeObj.getConstant("Custom")){var e=this.getIndexValue();this.newFormat[e].format=this.customText.value}},e.prototype.dropDownChange=function(e){var t=this.getIndexValue();if(e.value===this.parent.localeObj.getConstant("Custom"))this.customText.disabled=!1,this.groupingDropDown.enabled=!1,this.decimalDropDown.enabled=!1,this.newFormat[t].format=this.customText.value;else{var i=this.formattedText();this.newFormat[t].format=i,this.customText.disabled=!0,this.groupingDropDown.enabled=!0,this.decimalDropDown.enabled=!0,this.customText.value=""}},e.prototype.groupingChange=function(){var e=this.getIndexValue();this.newFormat[e].useGrouping=this.groupingDropDown.value===this.parent.localeObj.getConstant("true")},e.prototype.getIndexValue=function(){for(var e=[],t=0;t<this.newFormat.length;t++)e.push(this.newFormat[t].name);return e.indexOf(this.valuesDropDown.value.toString())},e.prototype.decimalChange=function(){var e=this.getIndexValue(),t=this.formattedText();this.newFormat[e].format=t},e.prototype.formattedText=function(){var e;return this.formatDropDown.value===this.parent.localeObj.getConstant("number")||this.formatDropDown.value===this.parent.localeObj.getConstant("percentage")||this.formatDropDown.value===this.parent.localeObj.getConstant("currency")?(e=this.formatDropDown.value===this.parent.localeObj.getConstant("number")?"N":this.formatDropDown.value===this.parent.localeObj.getConstant("currency")?"C":"P",e+=this.decimalDropDown.value):e=this.customText.value},e.prototype.removeDialog=function(){this.dialog&&!this.dialog.isDestroyed&&this.dialog.destroy(),document.getElementById(this.parent.element.id+"_FormatDialog")&&i.i(a.remove)(document.getElementById(this.parent.element.id+"_FormatDialog"))},e.prototype.updateFormatting=function(){var e=this,t=this.formattedText(),r=this.getIndexValue();this.newFormat.splice(r,1);for(var n=i.i(a.extend)([],this.newFormat,!0),s=this.parent.dataSourceSettings.formatSettings,d=0;d<s.length;d++)this.insertFormat(s[d].name,s[d].format,s[d].type);if(this.valuesDropDown.value===this.parent.localeObj.getConstant("AllValues"))for(var d=0;d<this.parent.dataSourceSettings.values.length;d++)this.insertFormat(this.parent.dataSourceSettings.values[d].name,t);else this.insertFormat(this.valuesDropDown.value.toString(),t);var h={formatSettings:l.a.cloneFormatSettings(this.newFormat),formatName:this.valuesDropDown.value.toString(),cancel:!1};this.parent.trigger(o._8,h,function(t){if(t.cancel)e.dialog.close(),e.parent.setProperties({dataSourceSettings:{formatSettings:n}},!0);else{e.parent.setProperties({dataSourceSettings:{formatSettings:t.formatSettings}},!0);var i={numberFormattingInfo:e.parent.dataSourceSettings.formatSettings};e.parent.actionObj.actionInfo=i;try{e.parent.updateDataSource(),e.dialog.close()}catch(t){e.parent.setProperties({dataSourceSettings:{formatSettings:n}},!0),e.parent.pivotCommon.errorDialog.createErrorDialog(e.parent.localeObj.getConstant("error"),e.parent.localeObj.getConstant("invalidFormat"),e.dialog.element),e.parent.hideWaitingPopup()}}})},e.prototype.insertFormat=function(e,t,i){for(var r=!1,a={name:e,format:t,useGrouping:this.groupingDropDown.value===this.parent.localeObj.getConstant("true"),type:i},n=this.newFormat,o=0;o<n.length;o++)n[o].name===e&&(n[o]=a,r=!0);r||n.push(a),this.lastFormattedValue=[],this.lastFormattedValue.push(a)},e.prototype.addEventListener=function(){this.parent.isDestroyed||this.parent.on(o._30,this.showNumberFormattingDialog,this)},e.prototype.removeEventListener=function(){this.parent.isDestroyed||this.parent.off(o._30,this.showNumberFormattingDialog)},e.prototype.destroy=function(){this.dialog&&!this.dialog.isDestroyed&&this.dialog.destroy(),this.removeEventListener()},e}()},function(e,t,i){"use strict";i.d(t,"a",function(){return c});var r=i(0),a=(i.n(r),i(2)),n=i(4),o=(i.n(n),i(9)),s=(i.n(o),i(7)),l=(i.n(s),i(3)),d=i(15),h=i(10),p=(i.n(h),i(42)),u=(i.n(p),i(1)),c=function(){function e(e){this.dateGroup=/_date_group_years|_date_group_quarters|_date_group_quarterYear|_date_group_months|_date_group_days|_date_group_hours|_date_group_minutes|_date_group_seconds/g,this.parent=e,this.parent.groupingModule=this,this.addEventListener()}return e.prototype.getModuleName=function(){return"grouping"},e.prototype.render=function(e){var t=e.target,i=e.option,r=e.parentElement;this.parentElement=r,this.selectedCellsInfo=[],this.isUpdate=!1;var a=Number(t.getAttribute("data-colindex")),n=Number(t.getAttribute("index")),o=this.parent.engineModule.pivotValues[n][a],s=o.valueSort.axis.toString();this.selectedCellsInfo=this.getSelectedCells(o.axis,s,o.actualText.toString()),this.selectedCellsInfo.push({axis:o.axis,fieldName:s,name:o.actualText.toString(),cellInfo:o}),-1!==i.replace(r.id,"").indexOf("_custom_group")?this.createGroupSettings(s):this.updateUnGroupSettings(s)},e.prototype.getSelectedOptions=function(e){for(var t=[],i=0,r=e;i<r.length;i++){var a=r[i];-1===l.a.inArray(a.name,t)&&t.push(a.name)}return t},e.prototype.createGroupSettings=function(e){var t=this.parent.engineModule.fieldList[e],i=this.getGroupSettings(e);if(this.selectedCellsInfo.length>0){var r=void 0,a=!1;if(t.isCustomField)if(i)i&&"Custom"===i.type?1===this.selectedCellsInfo.length?a=!0:(a=!1,r="custom"):i&&"Number"===i.type&&(a=!1,r="number");else{var n=this.getGroupSettings(e.replace(this.dateGroup,"")),o=this.getGroupSettings(e.replace(/_custom_group/g,""));n?(a=!1,r="date",e=e.replace(this.dateGroup,"")):o&&(a=1===this.selectedCellsInfo.length,r="custom")}else i?"Number"===i.type||"Date"===i.type?(a=!1,r="Date"===i.type?"date":"number"):"Custom"===i.type&&(a=1===this.selectedCellsInfo.length,r="custom"):"number"===t.type||-1!==["datetime","date"].indexOf(t.type)||this.isDateType(e)?(a=!1,r=1===this.selectedCellsInfo.length?-1!==["datetime","date"].indexOf(t.type)||this.isDateType(e)?"date":"number":"custom"):"string"===t.type&&(a=1===this.selectedCellsInfo.length,r="custom");a?(this.parent.pivotCommon.errorDialog.createErrorDialog(this.parent.localeObj.getConstant("warning"),this.parent.localeObj.getConstant("invalidSelection")),this.parent.grid.clearSelection()):r&&""!==r&&this.createGroupDialog(e,r)}},e.prototype.updateUnGroupSettings=function(e){var t=this.parent.engineModule.fieldList[e],i=l.a.cloneGroupSettings(this.parent.dataSourceSettings.groupSettings),r=this.getGroupSettings(e);if(this.selectedCellsInfo.length>0){var a=void 0;if(t.isCustomField)if(r)"Custom"===r.type&&(a="custom");else{var n=this.getGroupSettings(e.replace(this.dateGroup,"")),o=this.getGroupSettings(e.replace(/_custom_group/g,""));n?(a="date",e=e.replace(this.dateGroup,"")):o&&(a="custom")}else r&&("Number"!==r.type&&"Date"!==r.type||(a="Date"===r.type?"date":"number"));if("date"===a||"number"===a)i=this.validateSettings(e,i,a,[]);else if("custom"===a){var s=this.getSelectedOptions(this.selectedCellsInfo);i=this.validateSettings(e,i,a,s)}this.updateDateSource(i,a)}},e.prototype.updateDateSource=function(e,t){this.isUpdate&&(this.parent.setProperties({dataSourceSettings:{groupSettings:e}},!0),this.parent.updateGroupingReport(e,"date"===t?"Date":"custom"===t?"Custom":"Number"),"Server"===this.parent.dataSourceSettings.mode?this.parent.getEngine("onRefresh"):this.parent.initEngine())},e.prototype.removeGroupSettings=function(e,t,i,r){var a=r.indexOf(e);if(-1!==a)for(var n=i[a],o=0,s=n.customGroups.length;o<s;o++)if(n.customGroups[o]){var d=n.customGroups[o];-1!==l.a.inArray(d.groupName,t)&&(i=this.modifyParentGroupItems(e,i,[d.groupName],d.items,r),n.customGroups.splice(o,1),this.isUpdate=!0,o--,s--)}return delete this.parent.engineModule.groupingFieldsInfo[e],i},e.prototype.getGroupSettings=function(e){for(var t=0,i=this.parent.dataSourceSettings.groupSettings;t<i.length;t++){var r=i[t];if(r.name===e)return r}},e.prototype.isDateType=function(e){for(var t=0,i=this.parent.dataSourceSettings.formatSettings;t<i.length;t++){var r=i[t];if(r.name===e&&r.type)return!0}return!1},e.prototype.getSelectedCells=function(e,t,i){for(var r=[],n=this.parent.element.querySelectorAll("."+a.b+",."+a.c),o=0,s=n;o<s.length;o++){var l=s[o],d=Number(l.getAttribute("data-colindex")),h=Number(l.getAttribute("index")),p=this.parent.engineModule.pivotValues[h][d];p&&p.axis===e&&"grand sum"!==p.type&&"sum"!==p.type&&p.valueSort.axis===t&&i!==p.actualText.toString()&&r.push({axis:p.axis,fieldName:p.valueSort.axis.toString(),name:p.actualText.toString(),cellInfo:p})}return r},e.prototype.createGroupDialog=function(e,t){var o=this,s=i.i(r.createElement)("div",{id:this.parentElement.id+"_GroupDialog",className:"e-group-field-settings",attrs:{"data-field":e,"data-type":t}});this.parentElement.appendChild(s),this.groupDialog=new n.Dialog({animationSettings:{effect:"Fade"},allowDragging:!0,header:this.parent.localeObj.getConstant("grouping"),content:this.createGroupOptions(e,t),isModal:!0,visible:!0,showCloseIcon:!0,enableRtl:this.parent.enableRtl,locale:this.parent.locale,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,width:300,height:"auto",position:{X:"center",Y:"center"},buttons:[{click:this.updateGroupSettings.bind(this),buttonModel:{cssClass:a.d+(this.parent.cssClass?" "+this.parent.cssClass:""),content:this.parent.localeObj.getConstant("ok"),isPrimary:!0}},{click:function(){o.groupDialog.hide()},buttonModel:{cssClass:a.e+(this.parent.cssClass?" "+this.parent.cssClass:""),content:this.parent.localeObj.getConstant("cancel")}}],overlayClick:function(){o.removeDialog()},closeOnEscape:!0,close:this.removeDialog.bind(this),target:this.parentElement,cssClass:this.parent.cssClass}),this.groupDialog.isStringTemplate=!0,this.groupDialog.appendTo(s)},e.prototype.createGroupOptions=function(e,t){var n=this,d=this,u=i.i(r.createElement)("div",{className:"e-group-field-div-content",id:this.parentElement.id+"_group_field_div_content",attrs:{"data-fieldName":e,"data-type":t}}),c=i.i(r.createElement)("div",{className:"e-group-option-container"});u.appendChild(c);var g=this.parent.dataSourceSettings,m=l.a.getFieldByName(e,g.groupSettings);switch(t){case"custom":var f=void 0,v=g.rows;v=v.concat(g.columns,g.values,g.filters);var S=l.a.getFieldByName(e.replace(/_custom_group/g,""),v),y=l.a.getFieldByName(e,v),b=l.a.getFieldByName(e+"_custom_group",v);if(y){var C=e+"_custom_group";f=b?b.caption:this.parent.engineModule.fieldList[S.name].caption+(C.match(/_custom_group/g).length+1)}var x=i.i(r.createElement)("div",{className:"e-caption-option-text"});x.innerText=this.parent.localeObj.getConstant("groupFieldCaption");var w=i.i(r.createElement)("div",{className:"e-group-caption-container"}),T=i.i(r.createElement)("input",{id:this.parentElement.id+"group_caption_option",className:"e-group-caption-text",attrs:{type:"text"}});w.appendChild(x),w.appendChild(T),c.appendChild(w);var M=i.i(r.createElement)("div",{className:"e-input-option-text"});M.innerText=this.parent.localeObj.getConstant("groupTitle");var _=i.i(r.createElement)("div",{className:"e-group-input-container"}),D=i.i(r.createElement)("input",{id:this.parentElement.id+"group_input_option",className:"e-group-input-text",attrs:{type:"text"}});_.appendChild(M),_.appendChild(D),c.appendChild(_);var O=new o.MaskedTextBox({placeholder:this.parent.localeObj.getConstant("captionName"),enableRtl:this.parent.enableRtl,locale:this.parent.locale,value:f,width:"100%",cssClass:this.parent.cssClass});O.isStringTemplate=!0,O.appendTo(T);var P=new o.MaskedTextBox({placeholder:this.parent.localeObj.getConstant("groupName"),enableRtl:this.parent.enableRtl,locale:this.parent.locale,width:"100%",cssClass:this.parent.cssClass});P.isStringTemplate=!0,P.appendTo(D);break;case"date":case"number":var E=i.i(r.createElement)("div",{className:"e-group-start-option-container"}),N=i.i(r.createElement)("input",{id:this.parentElement.id+"group_start_option",className:"e-group_start_option",attrs:{type:"checkbox"}}),F=i.i(r.createElement)("input",{id:this.parentElement.id+"group_start_input",className:"e-group_start_input",attrs:{type:"text"}});E.appendChild(N),E.appendChild(F),c.appendChild(E);var I=i.i(r.createElement)("div",{className:"e-group-end-option-container"}),L=i.i(r.createElement)("input",{id:this.parentElement.id+"group_end_option",className:"e-group_end_option",attrs:{type:"checkbox"}}),A=i.i(r.createElement)("input",{id:this.parentElement.id+"group_end_input",className:"e-group_end_input",attrs:{type:"text"}});I.appendChild(L),I.appendChild(A),c.appendChild(I);var R=i.i(r.createElement)("div",{className:"e-group-interval-option-container"}),k=i.i(r.createElement)("div",{className:"e-group-inerval-option-text"});k.innerText=this.parent.localeObj.getConstant("groupBy");var j=i.i(r.createElement)("input",{id:this.parentElement.id+"group_interval_input",className:"e-group_interval_input",attrs:{type:"text"}});R.appendChild(k),R.appendChild(j),c.appendChild(R);var H=void 0,q=void 0;if("date"===t){var V=[],B=[{value:"Seconds",text:this.parent.localeObj.getConstant("Seconds")},{value:"Minutes",text:this.parent.localeObj.getConstant("Minutes")},{value:"Hours",text:this.parent.localeObj.getConstant("Hours")},{value:"Days",text:this.parent.localeObj.getConstant("Days")},{value:"Months",text:this.parent.localeObj.getConstant("Months")},{value:"QuarterYear",text:this.parent.localeObj.getConstant("QuarterYear")},{value:"Quarters",text:this.parent.localeObj.getConstant("Quarters")},{value:"Years",text:this.parent.localeObj.getConstant("Years")}];m&&"Date"===m.type?(V=m.groupInterval,H=m.startingAt?m.startingAt.toString():void 0,q=m.endingAt?m.endingAt.toString():void 0):V=["Months"];var U=new p.DateTimePicker({placeholder:this.parent.localeObj.getConstant("chooseDate"),enableRtl:this.parent.enableRtl,locale:this.parent.locale,format:"dd/MM/yyyy hh:mm:ss a",enabled:!(void 0===H),width:"100%",cssClass:this.parent.cssClass});U.isStringTemplate=!0,U.appendTo(F);var G=new p.DateTimePicker({placeholder:this.parent.localeObj.getConstant("chooseDate"),enableRtl:this.parent.enableRtl,locale:this.parent.locale,format:"dd/MM/yyyy hh:mm:ss a",enabled:!(void 0===q),width:"100%",cssClass:this.parent.cssClass});G.isStringTemplate=!0,G.appendTo(A),s.MultiSelect.Inject(s.CheckBoxSelection);var z=new s.MultiSelect({dataSource:B,value:V,fields:{text:"text",value:"value"},mode:"CheckBox",showDropDownIcon:!0,enableSelectionOrder:!1,placeholder:this.parent.localeObj.getConstant("selectGroup"),filterBarPlaceholder:this.parent.localeObj.getConstant("example")+" "+this.parent.localeObj.getConstant("Months"),enableRtl:this.parent.enableRtl,locale:this.parent.locale,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,cssClass:this.parent.cssClass,select:function(){d.groupDialog.element.querySelector("."+a.d).removeAttribute("disabled")},removed:function(){0===z.checkBoxSelectionModule.activeLi.length&&d.groupDialog.element.querySelector("."+a.d).setAttribute("disabled","disabled")}});z.isStringTemplate=!0,z.appendTo(j),U.value=void 0===H?null:new Date(H),U.dataBind(),G.value=void 0===q?null:new Date(q),G.dataBind()}else{var W=void 0;m&&"Number"===m.type?(W=m.rangeInterval,H=m.startingAt?m.startingAt.toString():void 0,q=m.endingAt?m.endingAt.toString():void 0):W=2;var U=new o.NumericTextBox({placeholder:this.parent.localeObj.getConstant("enterValue"),enableRtl:this.parent.enableRtl,locale:this.parent.locale,showClearButton:!0,format:"###",value:void 0===H?void 0:parseInt(H,10),enabled:!(void 0===H),width:"100%",cssClass:this.parent.cssClass});U.isStringTemplate=!0,U.appendTo(F);var G=new o.NumericTextBox({placeholder:this.parent.localeObj.getConstant("enterValue"),enableRtl:this.parent.enableRtl,locale:this.parent.locale,showClearButton:!0,format:"###",value:void 0===q?void 0:parseInt(q,10),enabled:!(void 0===q),width:"100%",cssClass:this.parent.cssClass});G.isStringTemplate=!0,G.appendTo(A);var Q=new o.NumericTextBox({placeholder:this.parent.localeObj.getConstant("enterValue"),enableRtl:this.parent.enableRtl,locale:this.parent.locale,showClearButton:!0,format:"###",min:1,value:W,width:"100%",cssClass:this.parent.cssClass});Q.isStringTemplate=!0,Q.appendTo(j)}var Y=new h.CheckBox({label:this.parent.localeObj.getConstant("startAt"),checked:!(void 0===H),enableRtl:this.parent.enableRtl,locale:this.parent.locale,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,cssClass:this.parent.cssClass,change:function(e){var a="date"===t?i.i(r.getInstance)(i.i(r.select)("#"+n.parentElement.id+"group_start_input"),p.DateTimePicker):i.i(r.getInstance)(i.i(r.select)("#"+n.parentElement.id+"group_start_input"),o.NumericTextBox);a.enabled=e.checked,a.dataBind()}});Y.isStringTemplate=!0,Y.appendTo(N);var K=new h.CheckBox({label:this.parent.localeObj.getConstant("endAt"),checked:!(void 0===q),enableRtl:this.parent.enableRtl,locale:this.parent.locale,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,cssClass:this.parent.cssClass,change:function(e){var a="date"===t?i.i(r.getInstance)(i.i(r.select)("#"+n.parentElement.id+"group_end_input"),p.DateTimePicker):i.i(r.getInstance)(i.i(r.select)("#"+n.parentElement.id+"group_end_input"),o.NumericTextBox);a.enabled=e.checked,a.dataBind()}});K.isStringTemplate=!0,K.appendTo(L)}return u},e.prototype.updateGroupSettings=function(){var e=this.groupDialog.element,t=e.getAttribute("data-type"),n=e.getAttribute("data-field"),u=l.a.cloneGroupSettings(this.parent.dataSourceSettings.groupSettings);if(0===u.length&&!this.parent.clonedDataSet&&!this.parent.clonedReport){var c=this.parent.engineModule.data;this.parent.clonedDataSet=l.a.getClonedData(c),this.parent.setProperties({dataSourceSettings:{dataSource:[]}},!0),this.parent.clonedReport=i.i(r.extend)({},this.parent.dataSourceSettings,null,!0),this.parent.setProperties({dataSourceSettings:{dataSource:c}},!0)}if("custom"===t){var g=i.i(r.getInstance)(i.i(r.select)("#"+this.parentElement.id+"group_input_option"),o.MaskedTextBox),m=i.i(r.getInstance)(i.i(r.select)("#"+this.parentElement.id+"group_caption_option"),o.MaskedTextBox);if(i.i(r.removeClass)([g.element],a.f),null===g.value||""===g.value)return i.i(r.addClass)([g.element],a.f),void g.element.focus();for(var f=this.getSelectedOptions(this.selectedCellsInfo),v={groupName:g.value,items:f},S=[],y=[],b={name:n,caption:m.value,type:"Custom",customGroups:[]},C=!1,x=0,w=u.length;x<w;x++)if(u[x].name===n){b=u[x],b.caption=m.value;for(var T=0,M=b.customGroups.length;T<M;T++)if(b.customGroups[T]){var _=b.customGroups[T];_.items&&d.a.isContainCommonElements(_.items,f)&&(S=this.mergeArray(S,[_.groupName]),y=this.mergeArray(y,_.items),b.customGroups.splice(T,1),T--,M--)}for(var D=0,O=f;D<O.length;D++){var P=O[D],E=y.indexOf(P);-1!==E&&y.splice(E,1)}y=this.mergeArray(y,[v.groupName]),b.customGroups.push(v),this.isUpdate=!0,C=!0;break}C||(b.customGroups.push(v),this.isUpdate=!0,u.push(b)),u=this.validateSettings(n,u,t,0===S.length?v.items:S,y)}else if("date"===t||"number"===t){var N=i.i(r.getInstance)(i.i(r.select)("#"+this.parentElement.id+"group_start_option"),h.CheckBox),F=i.i(r.getInstance)(i.i(r.select)("#"+this.parentElement.id+"group_end_option"),h.CheckBox),I="date"===t?i.i(r.getInstance)(i.i(r.select)("#"+this.parentElement.id+"group_start_input"),p.DateTimePicker):i.i(r.getInstance)(i.i(r.select)("#"+this.parentElement.id+"group_start_input"),o.NumericTextBox),L="date"===t?i.i(r.getInstance)(i.i(r.select)("#"+this.parentElement.id+"group_end_input"),p.DateTimePicker):i.i(r.getInstance)(i.i(r.select)("#"+this.parentElement.id+"group_end_input"),o.NumericTextBox),A="date"===t?i.i(r.getInstance)(i.i(r.select)("#"+this.parentElement.id+"group_interval_input"),s.MultiSelect):i.i(r.getInstance)(i.i(r.select)("#"+this.parentElement.id+"group_interval_input"),o.NumericTextBox),R=N.checked?I.value.toString():void 0,k=F.checked?L.value.toString():void 0,b={name:n,startingAt:R,endingAt:k};if("date"===t){for(var j=[],H=0,q=A.value;H<q.length;H++){var V=q[H];j.push(V)}b.type="Date",b.groupInterval=j}else b.type="Number",b.rangeInterval=A.value;for(var C=!1,x=0,w=u.length;x<w;x++)if(u[x].name===n){u.splice(x,1,b),this.isUpdate=!0,C=!0;break}C||(this.isUpdate=!0,u.push(b)),u=this.validateSettings(n,u,t,[],[])}this.groupDialog.close(),this.updateDateSource(u,t)},e.prototype.getGroupBasedSettings=function(e){for(var t={},i=0,r=e;i<r.length;i++){var a=r[i];t[a.type]?t[a.type].push(a):t[a.type]=[a]}return t},e.prototype.getGroupByName=function(e){for(var t={},i=0,r=e;i<r.length;i++){var a=r[i],n=a.name.replace(/_custom_group/g,"");t[n]?t[n].push(a):t[n]=[a]}return t},e.prototype.validateSettings=function(e,t,i,r,a){var n=[],o=this.getGroupBasedSettings(t),s=["Date","Number","Custom"];if(o[s[2]]&&"custom"===i){var l=this.getGroupByName(o[s[2]]);if(l[e.replace(/_custom_group/g,"")]){var d=l[e.replace(/_custom_group/g,"")],h=d.map(function(e){return e.name});d=a?this.modifyParentGroupItems(e,d,r,a,h):this.removeGroupSettings(e.replace("_custom_group",""),r,d,h)}for(var p=[],u=0,c=Object.keys(l);u<c.length;u++){var g=c[u],h=l[g].map(function(e){return e.name});p=this.reOrderSettings(l[g],h,p,g)}o[s[2]]=p}else if(("date"===i||"number"===i)&&!a){var m="date"===i?o[s[0]]:o[s[1]];"date"===i?(o[s[0]]=m.filter(function(t){return t.name!==e}),0===o[s[0]].length&&delete this.parent.engineModule.groupingFieldsInfo[e]):o[s[1]]=m.filter(function(t){return t.name!==e}),this.isUpdate=!0}for(var f=0,v=s;f<v.length;f++){var S=v[f];o[S]&&(n=n.concat(o[S]))}return n},e.prototype.reOrderSettings=function(e,t,i,r){var a=t.indexOf(r);return a>-1&&e[a].customGroups&&e[a].customGroups.length>0&&(i.push(e[a]),this.reOrderSettings(e,t,i,r+"_custom_group")),i},e.prototype.modifyParentGroupItems=function(e,t,i,r,a){var n=a.indexOf(e+"_custom_group");if(-1!==n){var o=t[n];if(o.customGroups&&o.customGroups.length>0)for(var s=0,l=o.customGroups.length;s<l;s++)if(o.customGroups[s]){var d=!1,h=o.customGroups[s];if(h.items){for(var p=0,u=i;p<u.length;p++){var c=u[p],g=h.items.indexOf(c);-1!==g&&(h.items.splice(g,1),this.isUpdate=!0,d=!0)}d&&(h.items=this.mergeArray(h.items,r))}}}return t},e.prototype.mergeArray=function(e,t){for(var i=[],r=e.concat(t),a=r.length,n={};a--;){var o=String(r[a]);n[o]||(i.unshift(o),n[o]=!0)}return i},e.prototype.removeDialog=function(){this.parent.grid&&this.parent.grid.isDestroyed||(this.parent.grid.clearSelection(),this.groupDialog&&!this.groupDialog.isDestroyed&&this.groupDialog.destroy(),this.parentElement&&document.getElementById(this.parentElement.id+"_GroupDialog")&&i.i(r.remove)(document.getElementById(this.parentElement.id+"_GroupDialog")))},e.prototype.addEventListener=function(){this.handlers={load:this.render},this.parent.isDestroyed||this.parent.on(u._31,this.handlers.load,this)},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.removeDialog(),this.parent.off(u._31,this.handlers.load))},e.prototype.destroy=function(){this.removeEventListener()},e}()},function(e,t,i){"use strict";i.d(t,"a",function(){return p});var r=i(5),a=(i.n(r),i(0)),n=(i.n(a),i(1)),o=i(4),s=(i.n(o),i(7)),l=(i.n(s),i(2)),d=i(11),h=(i.n(d),i(10)),p=(i.n(h),function(){function e(e){this.isMultiAxisChange=!1,this.isReportChange=!1,this.currentReport="",this.parent=e,this.parent.toolbarModule=this,this.addEventListener()}return e.prototype.getModuleName=function(){return"toolbar"},e.prototype.createToolbar=function(){this.parent.isModified=!1,this.renderDialog(),null!==i.i(a.select)("#"+this.parent.element.id+"pivot-toolbar",document)&&i.i(a.remove)(i.i(a.select)("#"+this.parent.element.id+"pivot-toolbar",document));var e=i.i(a.createElement)("div",{id:this.parent.element.id+"pivot-toolbar",className:l.v});this.parent.showFieldList&&i.i(a.select)("#"+this.parent.element.id+"_PivotFieldList",this.parent.element)?this.parent.element.insertBefore(e,i.i(a.select)("#"+this.parent.element.id+"_PivotFieldList",this.parent.element)):this.parent.showGroupingBar&&i.i(a.select)("#"+this.parent.element.id+" .e-pivot-grouping-bar",this.parent.element)?this.parent.element.insertBefore(e,i.i(a.select)("#"+this.parent.element.id+" .e-pivot-grouping-bar",this.parent.element)):this.parent.element.insertBefore(e,i.i(a.select)("#"+this.parent.element.id+"_grid",this.parent.element)),this.toolbar=new r.Toolbar({created:this.create.bind(this),enableRtl:this.parent.enableRtl,locale:this.parent.locale,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,items:this.getItems(),allowKeyboard:!1,cssClass:this.parent.cssClass,width:this.parent.gridSettings.allowAutoResizing?"auto":this.parent.grid?this.parent.getGridWidthAsNumber()-2:this.parent.getWidthAsNumber()-2}),this.toolbar.isStringTemplate=!0;var t="viewContainerRef";this.parent[t]&&(this.toolbar.registeredTemplate={},this.toolbar[t]=this.parent[t]),this.parent.toolbarTemplate&&"string"==typeof this.parent.toolbarTemplate?(this.toolbar.appendTo(this.parent.toolbarTemplate),this.parent.element.replaceChild(this.toolbar.element,this.parent.element.querySelector("."+l.v)),this.toolbar.element.classList.add(l.v)):this.toolbar.appendTo("#"+this.parent.element.id+"pivot-toolbar"),this.toolbar.width=this.parent.grid?this.parent.getGridWidthAsNumber()-2:this.parent.getWidthAsNumber()-2,this.parent.chart&&this.parent.chart.setProperties({width:this.parent.grid?this.parent.getGridWidthAsNumber().toString():this.parent.getWidthAsNumber().toString()},!0),this.parent.showGroupingBar&&this.parent.groupingBarModule&&this.parent.element.querySelector("."+l.w)&&this.parent.groupingBarModule.refreshUI()},e.prototype.fetchReports=function(){var e={reportName:[]};return this.parent.trigger(n.I,e),e},e.prototype.fetchReportsArgs=function(){var e=new d.Deferred,t={reportName:[]};return this.parent.trigger(n.I,t,function(t){e.resolve(t)}),e},e.prototype.getItems=function(){for(var e=this.parent.toolbar.filter(function(e,t,i){return i.indexOf(e)===t}),t=[],r=0,o=e;r<o.length;r++){var s=o[r];switch(s){case"New":t.push({prefixIcon:l.x+" "+l.a,tooltipText:this.parent.localeObj.getConstant("new"),click:this.actionClick.bind(this),id:this.parent.element.id+"new"});break;case"Save":t.push({prefixIcon:l.y+" "+l.a,tooltipText:this.parent.localeObj.getConstant("save"),click:this.actionClick.bind(this),id:this.parent.element.id+"save"});break;case"SaveAs":t.push({prefixIcon:l.z+" "+l.a,tooltipText:this.parent.localeObj.getConstant("saveAs"),click:this.actionClick.bind(this),id:this.parent.element.id+"saveas"});break;case"Rename":t.push({prefixIcon:l.A+" "+l.a,tooltipText:this.parent.localeObj.getConstant("rename"),click:this.actionClick.bind(this),id:this.parent.element.id+"rename"});break;case"Remove":t.push({prefixIcon:l.B+" "+l.a,tooltipText:this.parent.localeObj.getConstant("deleteReport"),click:this.actionClick.bind(this),id:this.parent.element.id+"remove"});break;case"Load":t.push({template:"<div><input class="+l.C+" id="+this.parent.element.id+"_reportlist></input></div>",click:this.actionClick.bind(this),id:this.parent.element.id+"load"});break;case"Grid":var d="Chart"===this.parent.displayOption.view;t.push({prefixIcon:l.D+" "+l.a,tooltipText:this.parent.localeObj.getConstant("grid"),id:this.parent.element.id+"grid",cssClass:(d?l.E:"")+(this.parent.cssClass?" "+this.parent.cssClass:""),click:this.menuItemClick.bind(this)});break;case"Chart":var h="Table"===this.parent.displayOption.view;t.push({template:'<ul id="'+this.parent.element.id+'chart_menu"></ul>',id:this.parent.element.id+"chartmenu",cssClass:(h?l.E:"")+(this.parent.cssClass?" "+this.parent.cssClass:"")});break;case"MDX":"olap"===this.parent.dataType&&t.push({prefixIcon:l.F+" "+l.a,id:this.parent.element.id+"mdxQuery",click:this.actionClick.bind(this),tooltipText:this.parent.localeObj.getConstant("mdxQuery")});break;case"Export":t.push({template:'<ul id="'+this.parent.element.id+'export_menu"></ul>',id:this.parent.element.id+"exportmenu"});break;case"SubTotal":t.push({template:'<ul id="'+this.parent.element.id+'subtotal_menu"></ul>',id:this.parent.element.id+"subtotalmenu"});break;case"GrandTotal":t.push({template:'<ul id="'+this.parent.element.id+'grandtotal_menu"></ul>',id:this.parent.element.id+"grandtotalmenu"});break;case"ConditionalFormatting":t.push({prefixIcon:l.G+" "+l.a,id:this.parent.element.id+"formatting",click:this.actionClick.bind(this),tooltipText:this.parent.localeObj.getConstant("toolbarFormatting")});break;case"NumberFormatting":t.push({prefixIcon:l.H+" "+l.a,id:this.parent.element.id+"numberFormatting",click:this.actionClick.bind(this),tooltipText:this.parent.localeObj.getConstant("numberFormat")});break;case"Formatting":t.push({template:'<ul id="'+this.parent.element.id+'formatting_menu"></ul>',id:this.parent.element.id+"formattingmenu"});break;case"FieldList":t.push({prefixIcon:l.I+" "+l.a,tooltipText:this.parent.localeObj.getConstant("fieldList"),click:this.actionClick.bind(this),align:"Right",id:this.parent.element.id+"fieldlist"}),this.parent.element.querySelector(".e-toggle-field-list")&&(this.parent.element.querySelector(".e-toggle-field-list").style.display="none");break;default:"object"==typeof s&&t.push(s)}}this.parent.showFieldList&&-1===e.indexOf("FieldList")&&i.i(a.select)("#"+this.parent.element.id+"_PivotFieldList",this.parent.element)&&"none"===i.i(a.select)("#"+this.parent.element.id+"_PivotFieldList",this.parent.element).style.display&&(i.i(a.select)("#"+this.parent.element.id+"_PivotFieldList",this.parent.element).style.display="block");var p={customToolbar:t};return this.parent.trigger(n.N,p),t},e.prototype.reportChange=function(e){if(this.parent.actionObj.actionName=n._65,this.isReportChange=!0,this.parent.actionBeginMethod())return void(e.cancel=!0);try{this.dropArgs=e,this.parent.isModified&&""!==this.currentReport?this.createConfirmDialog(this.parent.localeObj.getConstant("alert"),this.parent.localeObj.getConstant("newReportConfirm")):this.reportLoad(e)}catch(e){this.parent.actionFailureMethod(e)}},e.prototype.reportLoad=function(e){var t=this;if("Save"!==this.action&&"Rename"!==this.action&&"New"!==this.action){var i={reportName:e.itemData.value},r={reportName:e.itemData.value};this.parent.actionObj.actionInfo=r,this.parent.trigger(n.J,i,function(e){t.currentReport=e.reportName,t.parent.isModified=!1})}},e.prototype.saveReport=function(e){if(this.currentReport&&""!==this.currentReport&&e.item.id===this.parent.element.id+"save"){var t={report:this.getCurrentReport(),reportName:this.currentReport};this.parent.actionObj.actionName=this.parent.getActionCompleteName();var i={reportName:this.currentReport};this.parent.actionObj.actionInfo=i,this.parent.trigger(n.H,t),this.parent.actionObj.actionName&&this.parent.actionCompleteMethod(),this.parent.isModified=!1}else{if(""===this.currentReport&&(e.item.id===this.parent.element.id+"save"||e.item.id===this.parent.element.id+"saveas"))return void this.parent.pivotCommon.errorDialog.createErrorDialog(this.parent.localeObj.getConstant("error"),this.parent.localeObj.getConstant("emptyReport"));this.dialogShow(e,"saveAs")}},e.prototype.mdxQueryDialog=function(){this.mdxDialog&&!this.mdxDialog.isDestroyed||this.renderMDXDialog();var e=i.i(a.createElement)("div",{className:l.J}),t=i.i(a.createElement)("textarea",{className:l.K,attrs:{readonly:"readonly","aria-label":this.parent.localeObj.getConstant("mdxQuery")}});t.innerText=this.parent.olapEngineModule.getMDXQuery(this.parent.dataSourceSettings).trim(),e.appendChild(t),this.mdxDialog.content=e,this.mdxDialog.show()},e.prototype.dialogShow=function(e,t){if(e){this.dialog.header=e.item.tooltipText;var r=i.i(a.createElement)("div",{className:l.L}),n=i.i(a.createElement)("div",{className:l.M});n.innerText=this.parent.localeObj.getConstant("reportName");var o=i.i(a.createElement)("input",{className:l.N+" "+l.p,attrs:{placeholder:this.parent.localeObj.getConstant("emptyReportName"),value:t&&"rename"===t?this.currentReport:""}});o.innerText=t&&"rename"===t?this.currentReport:"",o.setSelectionRange(o.textContent.length,o.textContent.length),r.appendChild(n),r.appendChild(o),this.dialog.content=r,this.dialog.refresh(),this.dialog.show()}},e.prototype.renameReport=function(e){if(this.parent.trigger(n.O,e),!this.currentReport||""===this.currentReport)return void this.parent.pivotCommon.errorDialog.createErrorDialog(this.parent.localeObj.getConstant("error"),this.parent.localeObj.getConstant("emptyReport"));this.dialogShow(e,"rename")},e.prototype.actionClick=function(e){var t=e.item.id===this.parent.element.id+"new"?n._35:e.item.id===this.parent.element.id+"save"?n._36:e.item.id===this.parent.element.id+"saveas"?n._37:e.item.id===this.parent.element.id+"rename"?n._38:e.item.id===this.parent.element.id+"remove"?n._39:e.item.id===this.parent.element.id+"load"?n._40:e.item.id===this.parent.element.id+"formatting"?n._41:e.item.id===this.parent.element.id+"numberFormatting"?n._42:e.item.id===this.parent.element.id+"mdxQuery"?n._43:e.item.id===this.parent.element.id+"fieldlist"?n._44:"";if(this.parent.actionObj.actionName=t,!this.parent.actionBeginMethod())try{switch(e.item.id){case this.parent.element.id+"save":case this.parent.element.id+"saveas":this.saveReport(e);break;case this.parent.element.id+"remove":return this.action="Remove",void(this.currentReport&&""!==this.currentReport?this.createConfirmDialog(this.parent.localeObj.getConstant("alert"),this.parent.localeObj.getConstant("removeConfirm")):this.parent.pivotCommon.errorDialog.createErrorDialog(this.parent.localeObj.getConstant("error"),this.parent.localeObj.getConstant("emptyReport")));case this.parent.element.id+"rename":this.renameReport(e);break;case this.parent.element.id+"new":this.action="New",this.newArgs=e,this.parent.isModified&&this.currentReport&&""!==this.currentReport?this.createConfirmDialog(this.parent.localeObj.getConstant("alert"),this.parent.localeObj.getConstant("newReportConfirm")):this.createNewReport(e);break;case this.parent.element.id+"load":this.action="Load";break;case this.parent.element.id+"fieldlist":this.parent.pivotFieldListModule&&this.parent.pivotFieldListModule.dialogRenderer&&this.parent.pivotFieldListModule.dialogRenderer.onShowFieldList();break;case this.parent.element.id+"formatting":this.parent.conditionalFormattingModule&&this.parent.conditionalFormattingModule.showConditionalFormattingDialog();break;case this.parent.element.id+"mdxQuery":this.mdxQueryDialog();break;case this.parent.element.id+"numberFormatting":this.parent.numberFormattingModule&&this.parent.numberFormattingModule.showNumberFormattingDialog()}}catch(e){this.parent.actionFailureMethod(e)}},e.prototype.renderDialog=function(){null!==i.i(a.select)("#"+this.parent.element.id+"report-dialog",document)&&i.i(a.remove)(i.i(a.select)("#"+this.parent.element.id+"report-dialog",document)),this.parent.element.appendChild(i.i(a.createElement)("div",{id:this.parent.element.id+"report-dialog",className:l.O})),this.dialog=new o.Dialog({animationSettings:{effect:"Fade"},allowDragging:!0,position:{X:"center",Y:"center"},buttons:[{click:this.okBtnClick.bind(this),buttonModel:{content:this.parent.localeObj.getConstant("ok"),isPrimary:!0}},{click:this.cancelBtnClick.bind(this),buttonModel:{content:this.parent.localeObj.getConstant("cancel")}}],isModal:!0,visible:!1,showCloseIcon:!0,enableRtl:this.parent.enableRtl,locale:this.parent.locale,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,width:"auto",height:"auto",zIndex:1000001,closeOnEscape:!0,target:document.body,cssClass:this.parent.cssClass}),this.dialog.isStringTemplate=!0,this.dialog.appendTo("#"+this.parent.element.id+"report-dialog")},e.prototype.renderMDXDialog=function(){null!==i.i(a.select)("#"+this.parent.element.id+"mdx-dialog",document)&&i.i(a.remove)(i.i(a.select)("#"+this.parent.element.id+"mdx-dialog",document)),this.parent.element.appendChild(i.i(a.createElement)("div",{id:this.parent.element.id+"mdx-dialog",className:l.P})),this.mdxDialog=new o.Dialog({animationSettings:{effect:"Fade"},allowDragging:!0,position:{X:"center",Y:"center"},buttons:[{click:this.copyMDXQuery.bind(this),buttonModel:{content:this.parent.localeObj.getConstant("copy"),isPrimary:!0}}],header:this.parent.localeObj.getConstant("mdxQuery"),isModal:!0,visible:!1,showCloseIcon:!0,enableRtl:this.parent.enableRtl,locale:this.parent.locale,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,width:"auto",height:"auto",zIndex:1000001,closeOnEscape:!0,target:document.body,cssClass:this.parent.cssClass}),this.mdxDialog.isStringTemplate=!0,this.mdxDialog.appendTo("#"+this.parent.element.id+"mdx-dialog")},e.prototype.copyMDXQuery=function(){var e=this.mdxDialog.element.querySelector("."+l.K);try{e.select(),document.execCommand("copy")}catch(e){window.alert("Oops, unable to copy")}},e.prototype.okBtnClick=function(){var e=this,t=this.dialog.element.querySelector("."+l.N);if(t&&""===t.value)return void t.focus();if(this.dialog.header!==this.parent.localeObj.getConstant("save")&&this.dialog.header!==this.parent.localeObj.getConstant("saveAs")||!t.value||""===t.value){if(this.dialog.header===this.parent.localeObj.getConstant("new")&&t.value&&""!==t.value){this.action="New",this.currentReport=t.value;var i=!1,r=this,a={reportName:[]};this.parent.trigger(n.I,a,function(o){for(var s=0;s<o.reportName.length;s++)if(t.value===a.reportName[s]){i=!0;break}if(i)return void r.createConfirmDialog(r.parent.localeObj.getConstant("alert"),r.parent.localeObj.getConstant("replaceConfirmBefore")+'"'+t.value+'"'+r.parent.localeObj.getConstant("replaceConfirmAfter"));r.parent.trigger(n.M);var l={report:r.getCurrentReport(),reportName:t.value},d={reportName:t.value};e.parent.actionObj.actionInfo=d,r.parent.trigger(n.H,l),r.parent.isModified=!1,r.updateReportList(),r.dialog.hide()})}else if(this.dialog.header===this.parent.localeObj.getConstant("rename")&&t.value&&""!==t.value){if(this.currentReport===t.value)return void this.dialog.hide();this.action="Rename";var o=!1;this.renameText=t.value;for(var s=0;s<this.reportList.dataSource.length;s++)if(t.value===this.reportList.dataSource[s]){o=!0;break}if(o)return void this.createConfirmDialog(this.parent.localeObj.getConstant("alert"),this.parent.localeObj.getConstant("replaceConfirmBefore")+'"'+t.value+'"'+this.parent.localeObj.getConstant("replaceConfirmAfter"));var d={reportName:this.currentReport,rename:t.value},h={reportName:{oldName:this.currentReport,newName:t.value}};this.parent.actionObj.actionInfo=h,this.parent.trigger(n.K,d),this.currentReport=t.value,this.updateReportList(),this.dialog.hide()}}else{this.action="Save",this.currentReport=t.value;var p=!1,u=this,c={reportName:[]};this.parent.trigger(n.I,c,function(i){for(var r=0;r<i.reportName.length;r++)if(t.value===i.reportName[r]){p=!0;break}if(p)return void u.createConfirmDialog(u.parent.localeObj.getConstant("alert"),u.parent.localeObj.getConstant("replaceConfirmBefore")+'"'+t.value+'"'+u.parent.localeObj.getConstant("replaceConfirmAfter"));var a={report:u.getCurrentReport(),reportName:t.value},o={reportName:t.value};e.parent.actionObj.actionInfo=o,u.parent.trigger(n.H,a),u.parent.isModified=!1,u.updateReportList(),u.dialog.hide()})}this.parent.actionObj.actionName=this.parent.getActionCompleteName(),this.parent.actionObj.actionName&&this.parent.actionCompleteMethod()},e.prototype.createNewReport=function(e){this.dialogShow(e)},e.prototype.cancelBtnClick=function(){this.dialog.hide()},e.prototype.createConfirmDialog=function(e,t){document.getElementById(this.parent.element.id+"_ConfirmDialog")&&i.i(a.remove)(document.getElementById(this.parent.element.id+"_ConfirmDialog").parentElement);var r=i.i(a.createElement)("div",{id:this.parent.element.id+"_ConfirmDialog",className:l.Q});this.parent.element.appendChild(r),this.confirmPopUp=new o.Dialog({animationSettings:{effect:"Fade"},allowDragging:!0,showCloseIcon:!0,enableRtl:this.parent.enableRtl,locale:this.parent.locale,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,header:e,content:t,isModal:!0,visible:!0,closeOnEscape:!0,target:document.body,cssClass:this.parent.cssClass,width:"auto",height:"auto",position:{X:"center",Y:"center"},buttons:[{buttonModel:{content:this.parent.localeObj.getConstant("yes"),isPrimary:!0,cssClass:l.d+(this.parent.cssClass?" "+this.parent.cssClass:"")},click:this.okButtonClick.bind(this)},{buttonModel:{content:this.parent.localeObj.getConstant("no"),cssClass:l.e+(this.parent.cssClass?" "+this.parent.cssClass:"")},click:this.cancelButtonClick.bind(this)}]}),this.confirmPopUp.isStringTemplate=!0,this.confirmPopUp.appendTo(r),this.confirmPopUp.element.querySelector(".e-dlg-header").innerText=this.parent.enableHtmlSanitizer?a.SanitizeHtmlHelper.sanitize(e):e},e.prototype.okButtonClick=function(){var e=this;if("Remove"===this.action){var t={reportName:this.currentReport},i={reportName:this.currentReport};this.parent.actionObj.actionInfo=i,this.parent.trigger(n.L,t);var r=this.fetchReports();if(r.reportName&&r.reportName.length>0){var a={reportName:r.reportName[r.reportName.length-1]};this.parent.trigger(n.J,a,function(t){e.currentReport=t.reportName,e.parent.isModified=!1}),this.currentReport=r.reportName[r.reportName.length-1]}else this.currentReport="",this.parent.isModified=!1,this.action="";this.updateReportList(),this.parent.actionObj.actionName=n._91,this.parent.actionObj.actionName&&this.parent.actionCompleteMethod()}else if("New"===this.action||"Save"!==this.action&&"Rename"!==this.action&&"New"!==this.action){if(this.currentReport&&""!==this.currentReport&&this.parent.isModified){var o={report:this.getCurrentReport(),reportName:this.currentReport},i={reportName:this.currentReport};this.parent.actionObj.actionInfo=i,this.parent.actionObj.actionName=n._87,this.parent.actionObj.actionName&&this.parent.actionCompleteMethod(),this.parent.trigger(n.H,o),this.parent.isModified=!1,"New"===this.action?(this.parent.actionObj.actionName=n._35,this.createNewReport(this.newArgs)):(this.parent.actionObj.actionName=n._65,this.reportLoad(this.dropArgs))}else if("New"===this.action){this.parent.trigger(n.M);var o={report:this.getCurrentReport(),reportName:this.currentReport};this.parent.trigger(n.H,o),this.parent.isModified=!1,this.updateReportList(),this.dialog.hide()}}else if("Save"===this.action){var o={report:this.getCurrentReport(),reportName:this.currentReport};this.parent.trigger(n.H,o),this.parent.isModified=!1,this.updateReportList(),this.dialog.hide()}else if("Rename"===this.action){var s={reportName:this.currentReport,rename:this.renameText,isReportExists:!0};this.parent.trigger(n.K,s),this.currentReport=this.renameText,this.parent.isModified=!1,this.updateReportList(),this.dialog.hide()}this.confirmPopUp.hide()},e.prototype.cancelButtonClick=function(){"New"===this.action?this.parent.isModified?this.createNewReport(this.newArgs):this.dialog.hide():"Save"===this.action?(this.currentReport=this.reportList.value,this.dialog.hide()):"Rename"===this.action?this.dialog.hide():this.dropArgs&&"Remove"!==this.action&&this.reportLoad(this.dropArgs),this.confirmPopUp.hide()},e.prototype.createChartMenu=function(){var e=this;if(i.i(a.select)("#"+this.parent.element.id+"chart_menu",document)){for(var t=[],n=this.getValidChartType(),o=0;o<n.length&&o<7;o++){var s=n[o];t.push({text:this.parent.localeObj.getConstant(s.toLowerCase()),id:this.parent.element.id+"_"+s})}7===t.length&&(t.splice(6),t.push({text:this.parent.localeObj.getConstant("MoreOption"),id:this.parent.element.id+"_ChartMoreOption"}));var d=t.length<=0||"Table"===this.parent.displayOption.view;t.push({separator:!0}),t.push({text:this.parent.localeObj.getConstant("multipleAxes"),id:this.parent.element.id+"_multipleAxes"}),t.push({text:this.parent.localeObj.getConstant("showLegend"),id:this.parent.element.id+"_showLegend"});var h=[{iconCss:l.R+" "+l.a,items:d?[]:t}];this.chartMenu&&!this.chartMenu.isDestroyed&&this.chartMenu.destroy(),this.chartMenu=new r.Menu({items:h,enableRtl:this.parent.enableRtl,locale:this.parent.locale,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,cssClass:l.S+(this.parent.cssClass?" "+this.parent.cssClass:""),select:this.menuItemClick.bind(this),beforeOpen:this.whitespaceRemove.bind(this),onClose:function(){e.focusToolBar()},beforeItemRender:this.multipleAxesCheckbox.bind(this)}),this.chartMenu.isStringTemplate=!0,this.chartMenu.appendTo("#"+this.parent.element.id+"chart_menu")}},e.prototype.create=function(){var e=this;if(i.i(a.select)("#"+this.parent.element.id+"chart_menu",this.parent.element)&&this.createChartMenu(),i.i(a.select)("#"+this.parent.element.id+"export_menu",this.parent.element)){var t=[{iconCss:l.T+" "+l.a,items:[{text:this.parent.localeObj.getConstant("pdf"),iconCss:l.U+" "+l.a,id:this.parent.element.id+"pdf"},{text:this.parent.localeObj.getConstant("excel"),iconCss:l.V+" "+l.a,id:this.parent.element.id+"excel"},{text:this.parent.localeObj.getConstant("csv"),iconCss:l.W+" "+l.a,id:this.parent.element.id+"csv"},{text:this.parent.localeObj.getConstant("png"),iconCss:l.X+" "+l.a,id:this.parent.element.id+"png"},{text:this.parent.localeObj.getConstant("jpeg"),iconCss:l.Y+" "+l.a,id:this.parent.element.id+"jpeg"},{text:this.parent.localeObj.getConstant("svg"),iconCss:l.Z+" "+l.a,id:this.parent.element.id+"svg"}]}];this.exportMenu=new r.Menu({items:t,enableRtl:this.parent.enableRtl,locale:this.parent.locale,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,cssClass:l.S+(this.parent.cssClass?" "+this.parent.cssClass:""),select:this.menuItemClick.bind(this),beforeOpen:this.updateExportMenu.bind(this),onClose:function(){e.focusToolBar()}}),this.exportMenu.isStringTemplate=!0,this.exportMenu.appendTo("#"+this.parent.element.id+"export_menu")}if(i.i(a.select)("#"+this.parent.element.id+"subtotal_menu",this.parent.element)){var t=[{iconCss:l._0+" "+l.a,items:[{text:this.parent.localeObj.getConstant("showSubTotals"),id:this.parent.element.id+"subtotal",iconCss:l._1+" "+l.a},{text:this.parent.localeObj.getConstant("doNotShowSubTotals"),id:this.parent.element.id+"notsubtotal",iconCss:l._1+" "+l.a},{text:this.parent.localeObj.getConstant("showSubTotalsRowsOnly"),id:this.parent.element.id+"subtotalrow",iconCss:l._1+" "+l.a},{text:this.parent.localeObj.getConstant("showSubTotalsColumnsOnly"),id:this.parent.element.id+"subtotalcolumn",iconCss:l._1+" "+l.a},{separator:!0},{text:this.parent.localeObj.getConstant("subTotalPosition"),id:this.parent.element.id+"subtotalpositions",iconCss:l._2+" "+l.a,items:[{text:this.parent.localeObj.getConstant("auto"),id:this.parent.element.id+"sub-none-position",iconCss:l._1+" "+l.a},{text:this.parent.localeObj.getConstant("top"),id:this.parent.element.id+"sub-top-position",iconCss:l._1+" "+l.a},{text:this.parent.localeObj.getConstant("bottom"),id:this.parent.element.id+"sub-bottom-position",iconCss:l._1+" "+l.a}]}]}];this.subTotalMenu=new r.Menu({items:t,enableRtl:this.parent.enableRtl,locale:this.parent.locale,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,cssClass:l.S+(this.parent.cssClass?" "+this.parent.cssClass:""),select:this.menuItemClick.bind(this),beforeOpen:this.updateSubtotalSelection.bind(this),onClose:function(){e.focusToolBar()}}),this.subTotalMenu.isStringTemplate=!0,this.subTotalMenu.appendTo("#"+this.parent.element.id+"subtotal_menu")}if(i.i(a.select)("#"+this.parent.element.id+"grandtotal_menu",this.parent.element)){var t=[{iconCss:l._3+" "+l.a,items:[{text:this.parent.localeObj.getConstant("showGrandTotals"),id:this.parent.element.id+"grandtotal",iconCss:l._1+" "+l.a},{text:this.parent.localeObj.getConstant("doNotShowGrandTotals"),id:this.parent.element.id+"notgrandtotal",iconCss:l._1+" "+l.a},{text:this.parent.localeObj.getConstant("showGrandTotalsRowsOnly"),id:this.parent.element.id+"grandtotalrow",iconCss:l._1+" "+l.a},{text:this.parent.localeObj.getConstant("showGrandTotalsColumnsOnly"),id:this.parent.element.id+"grandtotalcolumn",iconCss:l._1+" "+l.a},{separator:!0},{text:this.parent.localeObj.getConstant("grandTotalPosition"),id:this.parent.element.id+"grandtotalpositions",iconCss:l._2+" "+l.a,items:[{text:this.parent.localeObj.getConstant("top"),id:this.parent.element.id+"top-position",iconCss:l._1+" "+l.a},{text:this.parent.localeObj.getConstant("bottom"),id:this.parent.element.id+"bottom-position",iconCss:l._1+" "+l.a}]}]}];this.grandTotalMenu=new r.Menu({items:t,enableRtl:this.parent.enableRtl,locale:this.parent.locale,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,cssClass:l.S+(this.parent.cssClass?" "+this.parent.cssClass:""),select:this.menuItemClick.bind(this),beforeOpen:this.updateGrandtotalSelection.bind(this),onClose:function(){e.focusToolBar()}}),this.grandTotalMenu.isStringTemplate=!0,this.grandTotalMenu.appendTo("#"+this.parent.element.id+"grandtotal_menu")}if(i.i(a.select)("#"+this.parent.element.id+"formatting_menu",this.parent.element)){var t=[{iconCss:l._4+" "+l.a,items:[{text:this.parent.localeObj.getConstant("numberFormatMenu"),iconCss:l._5+" "+l.a,id:this.parent.element.id+"numberFormattingMenu"},{text:this.parent.localeObj.getConstant("conditionalFormatingMenu"),iconCss:l._6+" "+l.a,id:this.parent.element.id+"conditionalFormattingMenu"}]}];this.formattingMenu=new r.Menu({items:t,enableRtl:this.parent.enableRtl,locale:this.parent.locale,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,cssClass:l.S+(this.parent.cssClass?" "+this.parent.cssClass:""),select:this.menuItemClick.bind(this)}),this.formattingMenu.isStringTemplate=!0,this.formattingMenu.appendTo("#"+this.parent.element.id+"formatting_menu")}if(i.i(a.select)("#"+this.parent.element.id+"_reportlist",this.parent.element)){var o={report:this.parent.getPersistData(),reportName:this.parent.localeObj.getConstant("defaultReport")};this.currentReport=this.parent.localeObj.getConstant("defaultReport"),this.parent.trigger(n.H,o);var d=this.fetchReports();this.reportList=new s.DropDownList({dataSource:d.reportName,width:"150px",popupHeight:"200px",placeholder:""===this.currentReport?this.parent.localeObj.getConstant("reportList"):"",enableRtl:this.parent.enableRtl,locale:this.parent.locale,cssClass:l._7+(this.parent.cssClass?" "+this.parent.cssClass:""),select:this.reportChange.bind(this),value:this.currentReport}),this.reportList.isStringTemplate=!0,this.reportList.appendTo("#"+this.parent.element.id+"_reportlist")}this.updateItemElements()},e.prototype.getCurrentReport=function(){var e=this.parent.getPersistData();if("CSV"===this.parent.dataSourceSettings.type){var t=JSON.parse(e);t.dataSourceSettings.dataSource.splice(0,0,this.parent.engineModule.fields),e=JSON.stringify(t)}return e},e.prototype.updateItemElements=function(){for(var e=[].slice.call(this.toolbar.element.querySelectorAll(".e-toolbar-item")),t=0,i=e;t<i.length;t++){var r=i[t];r.querySelector("button")?r.querySelector("button").setAttribute("tabindex","0"):r.querySelector(".e-menu.e-menu-parent")&&(r.querySelector(".e-menu.e-menu-parent").setAttribute("tabindex","-1"),r.querySelector(".e-menu-item.e-menu-caret-icon")&&r.querySelector(".e-menu-item.e-menu-caret-icon").setAttribute("tabindex","0"))}},e.prototype.whitespaceRemove=function(e){e.element.style.padding="0px";var t=e.element.querySelector(".e-separator");t&&(t.style.margin="0px")},e.prototype.multipleAxesCheckbox=function(e){var t=this;if(this.parent.element.id+"_multipleAxes"===e.element.id){var r=i.i(a.createElement)("input",{id:this.parent.element.id+"_checkBox"});r.style.display="none",this.parent.element.appendChild(r);var n=new h.CheckBox({label:this.parent.localeObj.getConstant("multipleAxes"),cssClass:"e-multipleAxes"+(this.parent.cssClass?" "+this.parent.cssClass:""),checked:this.parent.chartSettings.enableMultipleAxis,change:function(){document.getElementById(t.parent.element.id+"_multipleAxes").click()},enableRtl:this.parent.enableRtl,locale:this.parent.locale,enableHtmlSanitizer:this.parent.enableHtmlSanitizer});e.element.innerText="",n.appendTo("#"+this.parent.element.id+"_checkBox"),["Pie","Funnel","Pyramid","Doughnut","Pareto"].indexOf(this.parent.chartSettings.chartSeries.type)>-1&&!e.element.classList.contains(l.E)?(e.element.classList.add(l.E),n.disabled=!0):["Pie","Funnel","Pyramid","Doughnut","Pareto"].indexOf(this.parent.chartSettings.chartSeries.type)<0&&e.element.classList.contains(l.E)&&(e.element.classList.remove(l.E),n.disabled=!1);var o=this.parent.element.querySelector(".e-checkbox-wrapper.e-multipleAxes");e.element.appendChild(o)}else if(this.parent.element.id+"_showLegend"===e.element.id){var r=i.i(a.createElement)("input",{id:this.parent.element.id+"_showLegendCheckBox"});r.style.display="none",this.parent.element.appendChild(r);var n=new h.CheckBox({label:this.parent.localeObj.getConstant("showLegend"),checked:this.getLableState(),cssClass:"e-showLegend"+(this.parent.cssClass?" "+this.parent.cssClass:""),change:function(){document.getElementById(t.parent.element.id+"_showLegend").click()},enableRtl:this.parent.enableRtl,locale:this.parent.locale,enableHtmlSanitizer:this.parent.enableHtmlSanitizer});e.element.innerText="",n.appendTo("#"+this.parent.element.id+"_showLegendCheckBox");var o=this.parent.element.querySelector(".e-checkbox-wrapper.e-showLegend");e.element.appendChild(o)}},e.prototype.getLableState=function(){var e=JSON.parse(this.parent.getPersistData()).chartSettings;return e&&e.legendSettings&&void 0!==e.legendSettings.visible?this.showLableState=e.legendSettings.visible:this.showLableState=!0,this.showLableState},e.prototype.getAllChartItems=function(){return["Line","Column","Area","Bar","StackingColumn","StackingArea","StackingBar","StackingLine","StepLine","StepArea","SplineArea","Scatter","Spline","StackingColumn100","StackingBar100","StackingArea100","StackingLine100","Bubble","Pareto","Polar","Radar","Pie","Pyramid","Funnel","Doughnut"]},e.prototype.updateExportMenu=function(e){var t=[].slice.call(e.element.querySelectorAll("li"));"Table"===this.parent.currentView?(i.i(a.addClass)(t.slice(3),l._8),i.i(a.removeClass)(t.slice(1,3),l._8)):(i.i(a.addClass)(t.slice(1,3),l._8),i.i(a.removeClass)(t.slice(3),l._8))},e.prototype.updateSubtotalSelection=function(e){e.parentItem.id!==this.parent.element.id+"subtotalpositions"?(i.i(a.select)("#"+this.parent.element.id+"subtotal ."+l._1,e.element).classList.contains(l._2)||i.i(a.select)("#"+this.parent.element.id+"subtotal ."+l._1,e.element).classList.add(l._2),i.i(a.select)("#"+this.parent.element.id+"notsubtotal ."+l._1,e.element).classList.contains(l._2)||i.i(a.select)("#"+this.parent.element.id+"notsubtotal ."+l._1,e.element).classList.add(l._2),i.i(a.select)("#"+this.parent.element.id+"subtotalrow ."+l._1,e.element).classList.contains(l._2)||i.i(a.select)("#"+this.parent.element.id+"subtotalrow ."+l._1,e.element).classList.add(l._2),i.i(a.select)("#"+this.parent.element.id+"subtotalcolumn ."+l._1,e.element).classList.contains(l._2)||i.i(a.select)("#"+this.parent.element.id+"subtotalcolumn ."+l._1,e.element).classList.add(l._2),this.parent.dataSourceSettings.showSubTotals&&this.parent.dataSourceSettings.showRowSubTotals&&!this.parent.dataSourceSettings.showColumnSubTotals?i.i(a.select)("#"+this.parent.element.id+"subtotalrow ."+l._1,e.element).classList.remove(l._2):this.parent.dataSourceSettings.showSubTotals&&!this.parent.dataSourceSettings.showRowSubTotals&&this.parent.dataSourceSettings.showColumnSubTotals?i.i(a.select)("#"+this.parent.element.id+"subtotalcolumn ."+l._1,e.element).classList.remove(l._2):this.parent.dataSourceSettings.showSubTotals&&this.parent.dataSourceSettings.showRowSubTotals&&this.parent.dataSourceSettings.showColumnSubTotals?i.i(a.select)("#"+this.parent.element.id+"subtotal ."+l._1,e.element).classList.remove(l._2):this.parent.dataSourceSettings.showSubTotals&&(this.parent.dataSourceSettings.showRowSubTotals||this.parent.dataSourceSettings.showColumnSubTotals)||i.i(a.select)("#"+this.parent.element.id+"notsubtotal ."+l._1,e.element).classList.remove(l._2)):(i.i(a.select)("#"+this.parent.element.id+"sub-none-position ."+l._1,e.element).classList.add(l._2),"Auto"===this.parent.dataSourceSettings.subTotalsPosition&&i.i(a.select)("#"+this.parent.element.id+"sub-none-position ."+l._1,e.element).classList.remove(l._2),i.i(a.select)("#"+this.parent.element.id+"sub-top-position ."+l._1,e.element).classList.add(l._2),"Top"===this.parent.dataSourceSettings.subTotalsPosition&&i.i(a.select)("#"+this.parent.element.id+"sub-top-position ."+l._1,e.element).classList.remove(l._2),i.i(a.select)("#"+this.parent.element.id+"sub-bottom-position ."+l._1,e.element).classList.add(l._2),"Bottom"===this.parent.dataSourceSettings.subTotalsPosition&&i.i(a.select)("#"+this.parent.element.id+"sub-bottom-position ."+l._1,e.element).classList.remove(l._2))},e.prototype.updateGrandtotalSelection=function(e){e.parentItem.id!==this.parent.element.id+"grandtotalpositions"?(i.i(a.select)("#"+this.parent.element.id+"grandtotal ."+l._1,e.element).classList.contains(l._2)||i.i(a.select)("#"+this.parent.element.id+"grandtotal ."+l._1,e.element).classList.add(l._2),i.i(a.select)("#"+this.parent.element.id+"notgrandtotal ."+l._1,e.element).classList.contains(l._2)||i.i(a.select)("#"+this.parent.element.id+"notgrandtotal ."+l._1,e.element).classList.add(l._2),i.i(a.select)("#"+this.parent.element.id+"grandtotalrow ."+l._1,e.element).classList.contains(l._2)||i.i(a.select)("#"+this.parent.element.id+"grandtotalrow ."+l._1,e.element).classList.add(l._2),i.i(a.select)("#"+this.parent.element.id+"grandtotalcolumn ."+l._1,e.element).classList.contains(l._2)||i.i(a.select)("#"+this.parent.element.id+"grandtotalcolumn ."+l._1,e.element).classList.add(l._2),this.parent.dataSourceSettings.showGrandTotals&&this.parent.dataSourceSettings.showRowGrandTotals&&!this.parent.dataSourceSettings.showColumnGrandTotals?i.i(a.select)("#"+this.parent.element.id+"grandtotalrow ."+l._1,e.element).classList.remove(l._2):this.parent.dataSourceSettings.showGrandTotals&&!this.parent.dataSourceSettings.showRowGrandTotals&&this.parent.dataSourceSettings.showColumnGrandTotals?i.i(a.select)("#"+this.parent.element.id+"grandtotalcolumn ."+l._1,e.element).classList.remove(l._2):this.parent.dataSourceSettings.showGrandTotals&&this.parent.dataSourceSettings.showRowGrandTotals&&this.parent.dataSourceSettings.showColumnGrandTotals?i.i(a.select)("#"+this.parent.element.id+"grandtotal ."+l._1,e.element).classList.remove(l._2):this.parent.dataSourceSettings.showGrandTotals&&(this.parent.dataSourceSettings.showRowGrandTotals||this.parent.dataSourceSettings.showColumnGrandTotals)||i.i(a.select)("#"+this.parent.element.id+"notgrandtotal ."+l._1,e.element).classList.remove(l._2)):(i.i(a.select)("#"+this.parent.element.id+"top-position ."+l._1,e.element).classList.add(l._2),"Top"===this.parent.dataSourceSettings.grandTotalsPosition&&i.i(a.select)("#"+this.parent.element.id+"top-position ."+l._1,e.element).classList.remove(l._2),i.i(a.select)("#"+this.parent.element.id+"bottom-position ."+l._1,e.element).classList.add(l._2),"Bottom"===this.parent.dataSourceSettings.grandTotalsPosition&&i.i(a.select)("#"+this.parent.element.id+"bottom-position ."+l._1,e.element).classList.remove(l._2))},e.prototype.updateReportList=function(){var e=this.fetchReports();this.reportList.dataSource=e.reportName,""===this.currentReport&&this.reportList.dataSource.length>0?(this.reportList.value=this.reportList.dataSource[this.reportList.dataSource.length-1],this.reportList.text=this.reportList.dataSource[this.reportList.dataSource.length-1],this.currentReport=this.reportList.dataSource[this.reportList.dataSource.length-1]):(this.reportList.value=this.currentReport,this.reportList.text=this.currentReport),this.reportList.refresh()},e.prototype.menuItemClick=function(e){var t,i=this,r={},a=e.item.id===this.parent.element.id+"grid"?n._45:e.item.id===this.parent.element.id+"_Column"?n._46:e.item.id===this.parent.element.id+"_Bar"?n._46:e.item.id===this.parent.element.id+"_Line"?n._46:e.item.id===this.parent.element.id+"_Area"?n._46:e.item.id===this.parent.element.id+"_Scatter"?n._46:e.item.id===this.parent.element.id+"_Polar"?n._46:e.item.id===this.parent.element.id+"_ChartMoreOption"?n._46:e.item.id===this.parent.element.id+"_multipleAxes"?n._47:e.item.id===this.parent.element.id+"_showLegend"?n._48:e.item.id===this.parent.element.id+"pdf"?n._49:e.item.id===this.parent.element.id+"png"?n._50:e.item.id===this.parent.element.id+"excel"?n._51:e.item.id===this.parent.element.id+"csv"?n._52:e.item.id===this.parent.element.id+"jpeg"?n._53:e.item.id===this.parent.element.id+"svg"?n._54:e.item.id===this.parent.element.id+"notsubtotal"?n._55:e.item.id===this.parent.element.id+"subtotalrow"?n._56:e.item.id===this.parent.element.id+"subtotalcolumn"?n._57:e.item.id===this.parent.element.id+"subtotal"?n._58:e.item.id===this.parent.element.id+"notgrandtotal"?n._59:e.item.id===this.parent.element.id+"grandtotalrow"?n._60:e.item.id===this.parent.element.id+"grandtotalcolumn"?n._61:e.item.id===this.parent.element.id+"grandtotal"?n._62:e.item.id===this.parent.element.id+"numberFormattingMenu"?n._63:e.item.id===this.parent.element.id+"conditionalFormattingMenu"?n._64:"";if(this.parent.actionObj.actionName=a,!this.parent.actionBeginMethod()){(this.getAllChartItems().indexOf(e.item.id.split(this.parent.element.id+"_")[1])>-1||"ChartMoreOption"===e.item.id.split(this.parent.element.id+"_")[1]||"multipleAxes"===e.item.id.split(this.parent.element.id+"_")[1]||"showLegend"===e.item.id.split(this.parent.element.id+"_")[1])&&(t=e.item.id.split(this.parent.element.id+"_")[1]);try{switch(e.item.id){case this.parent.element.id+"grid":if(this.parent.grid&&this.parent.chart){this.parent.grid.element.style.display="",this.parent.chart.element.style.display="none",this.parent.chartSettings.enableMultipleAxis&&this.parent.chartSettings.enableScrollOnMultiAxis&&(this.parent.element.querySelector(".e-pivotchart").style.display="none"),this.parent.currentView="Table",this.parent.setProperties({displayOption:{primary:"Table"}},!0),this.parent.showGroupingBar&&this.parent.groupingBarModule&&(this.parent.element.querySelector(".e-pivot-grouping-bar").style.display="",this.parent.element.querySelector(".e-chart-grouping-bar").style.display="none");var o={toolbarInfo:{displayOption:this.parent.displayOption,gridSettings:this.parent.gridSettings}};this.parent.actionObj.actionInfo=o,this.parent.layoutRefresh()}break;case this.parent.element.id+"pdf":"Table"===this.parent.currentView?this.parent.pdfExport({fileName:"Export.pdf"},!1,void 0,!1):this.parent.chartExport("PDF",{fileName:"result"},void 0,null,void 0);break;case this.parent.element.id+"excel":r={excelExportProperties:{fileName:"Export.xlsx"},isBlob:void 0,isMultipleExport:void 0,workbook:void 0},this.parent.trigger(n.h,r,function(e){"Server"===i.parent.dataSourceSettings.mode?i.parent.getEngine("onExcelExport",null,null,null,null,null,null,null,null,e.excelExportProperties):i.parent.excelExport(e.excelExportProperties,e.isMultipleExport,e.workbook,e.isBlob)});break;case this.parent.element.id+"csv":r={excelExportProperties:{fileName:"Export.csv"},isBlob:!1,isMultipleExport:!1,workbook:void 0},this.parent.trigger(n.h,r,function(e){"Server"===i.parent.dataSourceSettings.mode?i.parent.getEngine("onCsvExport",null,null,null,null,null,null,null,null,e.excelExportProperties):i.parent.csvExport(e.excelExportProperties,e.isMultipleExport,e.workbook,e.isBlob)});break;case this.parent.element.id+"png":this.parent.chartExport("PNG",{fileName:"result"},void 0,null,void 0);break;case this.parent.element.id+"jpeg":this.parent.chartExport("JPEG",{fileName:"result"},void 0,null,void 0);break;case this.parent.element.id+"svg":this.parent.chartExport("SVG",{fileName:"result"},void 0,null,void 0);break;case this.parent.element.id+"notsubtotal":this.parent.setProperties({dataSourceSettings:{showSubTotals:!1,showColumnSubTotals:!1,showRowSubTotals:!1}},!0),this.parent.refreshData();break;case this.parent.element.id+"subtotalrow":this.parent.setProperties({dataSourceSettings:{showSubTotals:!0,showColumnSubTotals:!1,showRowSubTotals:!0}},!0),this.parent.refreshData();break;case this.parent.element.id+"subtotalcolumn":this.parent.setProperties({dataSourceSettings:{showSubTotals:!0,showColumnSubTotals:!0,showRowSubTotals:!1}},!0),this.parent.refreshData();break;case this.parent.element.id+"subtotal":this.parent.setProperties({dataSourceSettings:{showSubTotals:!0,showColumnSubTotals:!0,showRowSubTotals:!0}},!0),this.parent.refreshData();break;case this.parent.element.id+"notgrandtotal":this.parent.setProperties({dataSourceSettings:{showGrandTotals:!1,showColumnGrandTotals:!1,showRowGrandTotals:!1}},!0),this.parent.refreshData();break;case this.parent.element.id+"grandtotalrow":this.parent.setProperties({dataSourceSettings:{showGrandTotals:!0,showColumnGrandTotals:!1,showRowGrandTotals:!0}},!0),this.parent.refreshData();break;case this.parent.element.id+"grandtotalcolumn":this.parent.setProperties({dataSourceSettings:{showGrandTotals:!0,showColumnGrandTotals:!0,showRowGrandTotals:!1}},!0),this.parent.refreshData();break;case this.parent.element.id+"grandtotal":this.parent.setProperties({dataSourceSettings:{showGrandTotals:!0,showColumnGrandTotals:!0,showRowGrandTotals:!0}},!0),this.parent.refreshData();break;case this.parent.element.id+"top-position":this.parent.setProperties({dataSourceSettings:{grandTotalsPosition:"Top"}},!0),this.parent.refreshData();break;case this.parent.element.id+"bottom-position":this.parent.setProperties({dataSourceSettings:{grandTotalsPosition:"Bottom"}},!0),this.parent.refreshData();break;case this.parent.element.id+"sub-top-position":this.parent.setProperties({dataSourceSettings:{subTotalsPosition:"Top"}},!0),this.parent.refreshData();break;case this.parent.element.id+"sub-bottom-position":this.parent.setProperties({dataSourceSettings:{subTotalsPosition:"Bottom"}},!0),this.parent.refreshData();break;case this.parent.element.id+"sub-none-position":this.parent.setProperties({dataSourceSettings:{subTotalsPosition:"Auto"}},!0),this.parent.refreshData();break;case this.parent.element.id+"numberFormattingMenu":this.parent.numberFormattingModule&&this.parent.numberFormattingModule.showNumberFormattingDialog();break;case this.parent.element.id+"conditionalFormattingMenu":this.parent.conditionalFormattingModule&&this.parent.conditionalFormattingModule.showConditionalFormattingDialog();break;case this.parent.element.id+"_"+t:e.item&&e.item.text&&("ChartMoreOption"===t?this.createChartTypeDialog():"multipleAxes"===t?(this.parent.chartSettings.enableScrollOnMultiAxis&&(this.isMultiAxisChange=!0),this.parent.chartSettings.enableMultipleAxis=!this.parent.chartSettings.enableMultipleAxis,this.updateChartType(this.parent.chartSettings.chartSeries.type,!0)):this.getAllChartItems().indexOf(t)>-1?this.updateChartType(t,!1):"showLegend"===t&&(this.parent.chart.legendSettings.visible=!this.showLableState,this.parent.chartSettings.legendSettings?this.parent.chartSettings.legendSettings.visible=!this.showLableState:this.parent.setProperties({chartSettings:{legendSettings:{visible:!this.showLableState}}},!0),this.updateChartType(this.parent.chartSettings.chartSeries.type,!0)))}}catch(e){this.parent.actionFailureMethod(e)}}},e.prototype.addEventListener=function(){this.parent.isDestroyed||this.parent.on(n._28,this.createToolbar,this)},e.prototype.getValidChartType=function(){for(var e=[],t=0;t<=this.parent.chartTypes.length;t++){var i=this.parent.chartTypes[t];this.getAllChartItems().indexOf(i)>-1&&e.indexOf(i)<0&&e.push(i)}return e},e.prototype.createChartTypeDialog=function(){var e=this,t=this.parent.element.appendChild(i.i(a.createElement)("div",{id:this.parent.element.id+"_ChartTypeDialog",className:l._9}));this.chartTypesDialog=new o.Dialog({animationSettings:{effect:"Fade"},allowDragging:!0,header:this.parent.localeObj.getConstant("chartTypeSettings"),content:this.getDialogContent(),isModal:!0,beforeOpen:this.beforeOpen.bind(this),visible:!0,showCloseIcon:!0,enableRtl:this.parent.enableRtl,locale:this.parent.locale,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,width:"auto",height:"auto",position:{X:"center",Y:"center"},buttons:[{click:function(){e.chartTypeDialogUpdate()},buttonModel:{cssClass:l.d+(this.parent.cssClass?" "+this.parent.cssClass:""),content:this.parent.localeObj.getConstant("ok"),isPrimary:!0}},{click:function(){e.removeDialog()},buttonModel:{cssClass:l.e+(this.parent.cssClass?" "+this.parent.cssClass:""),content:this.parent.localeObj.getConstant("cancel")}}],closeOnEscape:!0,target:this.parent.element,cssClass:this.parent.cssClass,close:this.removeDialog.bind(this)}),this.chartTypesDialog.isStringTemplate=!0,this.chartTypesDialog.appendTo(t)},e.prototype.removeDialog=function(){this.chartTypesDialog&&!this.chartTypesDialog.isDestroyed&&this.chartTypesDialog.destroy(),document.getElementById(this.parent.element.id+"_ChartTypeDialog")&&i.i(a.remove)(document.getElementById(this.parent.element.id+"_ChartTypeDialog"))},e.prototype.chartTypeDialogUpdate=function(){var e=i.i(a.getInstance)(i.i(a.select)("#"+this.parent.element.id+"_ChartTypeOption"),s.DropDownList).value,t=i.i(a.getInstance)(i.i(a.select)("#"+this.parent.element.id+"_DialogMultipleAxis"),h.CheckBox).checked,r=i.i(a.getInstance)(i.i(a.select)("#"+this.parent.element.id+"_DialogShowLabel"),h.CheckBox).checked;this.parent.chart.legendSettings.visible=r,this.chartLableState&&(this.parent.chart.legendSettings.visible=r,this.parent.chartSettings.legendSettings?this.parent.chartSettings.legendSettings.visible=r:this.parent.setProperties({chartSettings:{legendSettings:{visible:r}}},!0)),this.updateChartType(e,!1),this.parent.chartSettings.enableMultipleAxis=t,this.parent.chartSettings.multipleAxisMode=i.i(a.getInstance)(i.i(a.select)("#"+this.parent.element.id+"_AxisModeOption"),s.DropDownList).value,this.chartTypesDialog.close()},e.prototype.updateChartType=function(e,t){if(this.getAllChartItems().indexOf(e)>-1&&this.parent.chart){this.parent.currentView="Chart",this.parent.setProperties({displayOption:{primary:"Chart"}},!0),this.parent.chartSettings.enableScrollOnMultiAxis&&this.parent.chartSettings.enableMultipleAxis&&(this.parent.element.querySelector("."+l._10).style.width=i.i(a.formatUnit)(this.parent.grid?this.parent.getGridWidthAsNumber():this.parent.getWidthAsNumber())),this.parent.chart.setProperties({width:i.i(a.formatUnit)(this.parent.grid?this.parent.getGridWidthAsNumber():this.parent.getWidthAsNumber())},!0),this.parent.chartSettings.chartSeries.type!==e||t?this.parent.chartSettings.chartSeries.type=e:this.parent.chart.refresh();var r={toolbarInfo:{displayOption:this.parent.displayOption,chartSettings:this.parent.chartSettings}};this.parent.actionObj.actionInfo=r}},e.prototype.getDialogContent=function(){var e=i.i(a.createElement)("div",{className:"e-chart-type-div-content"}),t=i.i(a.createElement)("div",{className:"e-chart-type-option-container"}),r=i.i(a.createElement)("div",{className:"e-multiple-axes-mode-container"}),n=i.i(a.createElement)("div",{className:"e-chart-type-option-text"});n.innerText=this.parent.localeObj.getConstant("ChartType");var o=i.i(a.createElement)("div",{className:"e-multiple-axes-mode-text"});o.innerText=this.parent.localeObj.getConstant("multipleAxisMode");var l=i.i(a.createElement)("div",{id:this.parent.element.id+"_ChartTypeOption"}),d=i.i(a.createElement)("div",{id:this.parent.element.id+"_AxisModeOption"});t.appendChild(n),t.appendChild(l);for(var h=[],p=[{value:"Stacked",text:this.parent.localeObj.getConstant("stacked")},{value:"Single",text:this.parent.localeObj.getConstant("single")},{value:"Combined",text:this.parent.localeObj.getConstant("combined")}],u=this.getValidChartType(),c=0;c<u.length;c++)h.push({value:u[c],text:this.parent.localeObj.getConstant(u[c].toLowerCase())});var g=new s.DropDownList({dataSource:h,enableRtl:this.parent.enableRtl,locale:this.parent.locale,fields:{value:"value",text:"text"},value:this.parent.chartSettings.chartSeries.type?this.parent.chartSettings.chartSeries.type:this.getValidChartType()[0],width:"100%",change:this.changeDropDown.bind(this),cssClass:this.parent.cssClass});g.isStringTemplate=!0,g.appendTo(l),e.appendChild(t);var m=i.i(a.createElement)("input",{id:this.parent.element.id+"_DialogMultipleAxis",attrs:{type:"checkbox"}});e.appendChild(m);var f=i.i(a.createElement)("input",{id:this.parent.element.id+"_DialogShowLabel",attrs:{type:"checkbox"}});e.appendChild(f),r.appendChild(o),r.appendChild(d),e.appendChild(r);var v=new s.DropDownList({dataSource:p,enableRtl:this.parent.enableRtl,locale:this.parent.locale,fields:{value:"value",text:"text"},value:this.parent.chartSettings.multipleAxisMode?this.parent.chartSettings.multipleAxisMode:"Stacked",width:"100%",enabled:this.parent.chartSettings.enableMultipleAxis,cssClass:this.parent.cssClass});return v.isStringTemplate=!0,v.appendTo(d),e},e.prototype.changeDropDown=function(e){var t=JSON.parse(this.parent.getPersistData()).chartSettings;if(t&&t.legendSettings&&void 0!==t.legendSettings.visible||(i.i(a.getInstance)(i.i(a.select)("#"+this.parent.element.id+"_DialogShowLabel"),h.CheckBox).checked=!0),["Pie","Funnel","Pyramid","Doughnut","Pareto"].indexOf(e.value.toString())>-1)i.i(a.getInstance)(i.i(a.select)("#"+this.parent.element.id+"_DialogMultipleAxis"),h.CheckBox).disabled=!0,i.i(a.getInstance)(i.i(a.select)("#"+this.parent.element.id+"_AxisModeOption"),s.DropDownList).enabled=!1;else{var r=i.i(a.getInstance)(i.i(a.select)("#"+this.parent.element.id+"_DialogMultipleAxis"),h.CheckBox);r.disabled=!1,i.i(a.getInstance)(i.i(a.select)("#"+this.parent.element.id+"_AxisModeOption"),s.DropDownList).enabled=r.checked}},e.prototype.beforeOpen=function(){var e=this,t=new h.CheckBox({label:this.parent.localeObj.getConstant("multipleAxes"),cssClass:"e-dialog-multiple-axis"+(this.parent.cssClass?" "+this.parent.cssClass:""),checked:!!this.parent.chartSettings.enableMultipleAxis&&this.parent.chartSettings.enableMultipleAxis,change:function(t){i.i(a.getInstance)(i.i(a.select)("#"+e.parent.element.id+"_AxisModeOption"),s.DropDownList).enabled=t.checked},enableRtl:this.parent.enableRtl,locale:this.parent.locale,enableHtmlSanitizer:this.parent.enableHtmlSanitizer});new h.CheckBox({label:this.parent.localeObj.getConstant("showLegend"),checked:this.getLableState(),change:function(){e.chartLableState=!0},cssClass:"e-dialog-show-legend"+(this.parent.cssClass?" "+this.parent.cssClass:""),enableRtl:this.parent.enableRtl,locale:this.parent.locale,enableHtmlSanitizer:this.parent.enableHtmlSanitizer}).appendTo(i.i(a.select)("#"+this.parent.element.id+"_DialogShowLabel",this.chartTypesDialog.element)),t.appendTo(i.i(a.select)("#"+this.parent.element.id+"_DialogMultipleAxis",this.chartTypesDialog.element)),["Pie","Funnel","Pyramid","Doughnut","Pareto"].indexOf(this.parent.chartSettings.chartSeries.type)>-1&&(t.disabled=!0,i.i(a.getInstance)(i.i(a.select)("#"+this.parent.element.id+"_AxisModeOption"),s.DropDownList).enabled=!1);var r=JSON.parse(this.parent.getPersistData()).chartSettings;r&&r.legendSettings&&void 0!==r.legendSettings.visible?this.chartLableState=!0:this.chartLableState=!1},e.prototype.refreshToolbar=function(){this.createToolbar()},e.prototype.removeEventListener=function(){this.parent.isDestroyed||this.parent.off(n._28,this.createToolbar)},e.prototype.destroy=function(){this.removeEventListener(),this.confirmPopUp&&!this.confirmPopUp.isDestroyed&&this.confirmPopUp.destroy(),this.dialog&&!this.dialog.isDestroyed&&this.dialog.destroy(),this.mdxDialog&&!this.mdxDialog.isDestroyed&&this.mdxDialog.destroy(),this.chartMenu&&!this.chartMenu.isDestroyed&&this.chartMenu.destroy(),this.chartTypesDialog&&!this.chartTypesDialog.isDestroyed&&this.chartTypesDialog.destroy(),this.exportMenu&&!this.exportMenu.isDestroyed&&this.exportMenu.destroy(),this.subTotalMenu&&!this.subTotalMenu.isDestroyed&&this.subTotalMenu.destroy(),this.grandTotalMenu&&!this.grandTotalMenu.isDestroyed&&this.grandTotalMenu.destroy(),this.formattingMenu&&!this.formattingMenu.isDestroyed&&this.formattingMenu.destroy(),this.reportList&&!this.reportList.isDestroyed&&this.reportList.destroy(),this.toolbar&&!this.toolbar.isDestroyed&&this.toolbar.destroy(),i.i(a.select)("#"+this.parent.element.id+"pivot-toolbar",document)&&i.i(a.remove)(i.i(a.select)("#"+this.parent.element.id+"pivot-toolbar",document))},e.prototype.focusToolBar=function(){i.i(a.removeClass)(document.querySelector("."+l.v).querySelectorAll(".e-menu-item.e-focused"),"e-focused"),i.i(a.removeClass)(document.querySelector("."+l.v).querySelectorAll(".e-menu-item.e-selected"),"e-selected"),document.querySelector(".e-toolbar-items")&&i.i(a.addClass)([document.querySelector(".e-toolbar-items")],"e-focused")},e}())},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(46);i.d(t,"GroupingBarSettings",function(){return r.a}),i.d(t,"CellEditSettings",function(){return r.b}),i.d(t,"ConditionalSettings",function(){return r.c}),i.d(t,"HyperlinkSettings",function(){return r.d}),i.d(t,"PageSettings",function(){return r.e}),i.d(t,"PagerSettings",function(){return r.f}),i.d(t,"DisplayOption",function(){return r.g}),i.d(t,"PivotView",function(){return r.h}),i.d(t,"Render",function(){return r.i}),i.d(t,"ExcelExport",function(){return r.j}),i.d(t,"PDFExport",function(){return r.k}),i.d(t,"KeyboardInteraction",function(){return r.l}),i.d(t,"VirtualScroll",function(){return r.m}),i.d(t,"DrillThrough",function(){return r.n}),i.d(t,"Pager",function(){return r.o});var a=i(22);i.d(t,"PivotChart",function(){return a.a});var n=i(45);i.d(t,"PivotFieldList",function(){return n.a}),i.d(t,"TreeViewRenderer",function(){return n.b}),i.d(t,"AxisFieldRenderer",function(){return n.c}),i.d(t,"AxisTableRenderer",function(){return n.d}),i.d(t,"DialogRenderer",function(){return n.e});var o=i(43);i.d(t,"EventBase",function(){return o.a}),i.d(t,"NodeStateModified",function(){return o.b}),i.d(t,"DataSourceUpdate",function(){return o.c}),i.d(t,"FieldList",function(){return o.d}),i.d(t,"CommonKeyboardInteraction",function(){return o.e}),i.d(t,"Common",function(){return o.f}),i.d(t,"GroupingBar",function(){return o.g}),i.d(t,"CalculatedField",function(){return o.h}),i.d(t,"ConditionalFormatting",function(){return o.i}),i.d(t,"PivotCommon",function(){return o.j}),i.d(t,"load",function(){return o.k}),i.d(t,"enginePopulating",function(){return o.l}),i.d(t,"enginePopulated",function(){return o.m}),i.d(t,"onFieldDropped",function(){return o.n}),i.d(t,"fieldDrop",function(){return o.o}),i.d(t,"beforePivotTableRender",function(){return o.p}),i.d(t,"afterPivotTableRender",function(){return o.q}),i.d(t,"beforeExport",function(){return o.r}),i.d(t,"exportComplete",function(){return o.s}),i.d(t,"excelHeaderQueryCellInfo",function(){return o.t}),i.d(t,"pdfHeaderQueryCellInfo",function(){return o.u}),i.d(t,"excelQueryCellInfo",function(){return o.v}),i.d(t,"pdfQueryCellInfo",function(){return o.w}),i.d(t,"onPdfCellRender",function(){return o.x}),i.d(t,"dataBound",function(){return o.y}),i.d(t,"queryCellInfo",function(){return o.z}),i.d(t,"headerCellInfo",function(){return o.A}),i.d(t,"hyperlinkCellClick",function(){return o.B}),i.d(t,"resizing",function(){return o.C}),i.d(t,"resizeStop",function(){return o.D}),i.d(t,"cellClick",function(){return o.E}),i.d(t,"drillThrough",function(){return o.F}),i.d(t,"beforeColumnsRender",function(){return o.G}),i.d(t,"selected",function(){return o.H}),i.d(t,"cellSelecting",function(){return o.I}),i.d(t,"drill",function(){return o.J}),i.d(t,"cellSelected",function(){return o.K}),i.d(t,"cellDeselected",function(){return o.L}),i.d(t,"rowSelected",function(){return o.M}),i.d(t,"rowDeselected",function(){return o.N}),i.d(t,"beginDrillThrough",function(){return o.O}),i.d(t,"editCompleted",function(){return o.P}),i.d(t,"multiLevelLabelClick",function(){return o.Q}),i.d(t,"saveReport",function(){return o.R}),i.d(t,"fetchReport",function(){return o.S}),i.d(t,"loadReport",function(){return o.T}),i.d(t,"renameReport",function(){return o.U}),i.d(t,"removeReport",function(){return o.V}),i.d(t,"newReport",function(){return o.W}),i.d(t,"toolbarRender",function(){return o.X}),i.d(t,"toolbarClick",function(){return o.Y}),i.d(t,"chartTooltipRender",function(){return o.Z}),i.d(t,"chartLegendClick",function(){return o._0}),i.d(t,"chartLoaded",function(){return o._1}),i.d(t,"chartLoad",function(){return o._2}),i.d(t,"chartResized",function(){return o._3}),i.d(t,"chartAxisLabelRender",function(){return o._4}),i.d(t,"chartSeriesCreated",function(){return o._5}),i.d(t,"aggregateCellInfo",function(){return o._6}),i.d(t,"onHeadersSort",function(){return o._7}),i.d(t,"contextMenuClick",function(){return o._8}),i.d(t,"contextMenuOpen",function(){return o._9}),i.d(t,"fieldListRefreshed",function(){return o._10}),i.d(t,"conditionalFormatting",function(){return o._11}),i.d(t,"beforePdfExport",function(){return o._12}),i.d(t,"beforeExcelExport",function(){return o._13}),i.d(t,"memberFiltering",function(){return o._14}),i.d(t,"calculatedFieldCreate",function(){return o._15}),i.d(t,"memberEditorOpen",function(){return o._16}),i.d(t,"fieldRemove",function(){return o._17}),i.d(t,"numberFormatting",function(){return o._18}),i.d(t,"aggregateMenuOpen",function(){return o._19}),i.d(t,"fieldDragStart",function(){return o._20}),i.d(t,"chartPointClick",function(){return o._21}),i.d(t,"beforeServiceInvoke",function(){return o._22}),i.d(t,"actionBegin",function(){return o._23}),i.d(t,"actionComplete",function(){return o._24}),i.d(t,"actionFailure",function(){return o._25}),i.d(t,"initialLoad",function(){return o._26}),i.d(t,"uiUpdate",function(){return o._27}),i.d(t,"scroll",function(){return o._28}),i.d(t,"verticalScroll",function(){return o._29}),i.d(t,"horizontalScroll",function(){return o._30}),i.d(t,"contentReady",function(){return o._31}),i.d(t,"dataReady",function(){return o._32}),i.d(t,"initSubComponent",function(){return o._33}),i.d(t,"treeViewUpdate",function(){return o._34}),i.d(t,"pivotButtonUpdate",function(){return o._35}),i.d(t,"initCalculatedField",function(){return o._36}),i.d(t,"click",function(){return o._37}),i.d(t,"initToolbar",function(){return o._38}),i.d(t,"initPivotPager",function(){return o._39}),i.d(t,"initFormatting",function(){return o._40}),i.d(t,"initGrouping",function(){return o._41}),i.d(t,"sortValue",function(){return o._42}),i.d(t,"drillUp",function(){return o._43}),i.d(t,"drillDown",function(){return o._44}),i.d(t,"addNewReport",function(){return o._45}),i.d(t,"saveCurrentReport",function(){return o._46}),i.d(t,"saveAsCurrentReport",function(){return o._47}),i.d(t,"renameCurrentReport",function(){return o._48}),i.d(t,"removeCurrentReport",function(){return o._49}),i.d(t,"loadReports",function(){return o._50}),i.d(t,"openConditionalFormatting",function(){return o._51}),i.d(t,"openNumberFormatting",function(){return o._52}),i.d(t,"MdxQuery",function(){return o._53}),i.d(t,"showFieldList",function(){return o._54}),i.d(t,"tableView",function(){return o._55}),i.d(t,"chartView",function(){return o._56}),i.d(t,"multipleAxis",function(){return o._57}),i.d(t,"showLegend",function(){return o._58}),i.d(t,"pdfExport",function(){return o._59}),i.d(t,"pngExport",function(){return o._60}),i.d(t,"excelExport",function(){return o._61}),i.d(t,"csvExport",function(){return o._62}),i.d(t,"jpegExport",function(){return o._63}),i.d(t,"svgExport",function(){return o._64}),i.d(t,"hideSubTotals",function(){return o._65}),i.d(t,"subTotalsRow",function(){return o._66}),i.d(t,"subTotalsColumn",function(){return o._67}),i.d(t,"showSubTotals",function(){return o._68}),i.d(t,"hideGrandTotals",function(){return o._69}),i.d(t,"grandTotalsRow",function(){return o._70}),i.d(t,"grandTotalsColumn",function(){return o._71}),i.d(t,"showGrandTotals",function(){return o._72}),i.d(t,"numberFormattingMenu",function(){return o._73}),i.d(t,"conditionalFormattingMenu",function(){return o._74}),i.d(t,"reportChange",function(){return o._75}),i.d(t,"sortFieldTree",function(){return o._76}),i.d(t,"editCalculatedField",function(){return o._77}),i.d(t,"sortField",function(){return o._78}),i.d(t,"filterField",function(){return o._79}),i.d(t,"removeField",function(){return o._80}),i.d(t,"openCalculatedField",function(){return o._81}),i.d(t,"editRecord",function(){return o._82}),i.d(t,"saveEditedRecords",function(){return o._83}),i.d(t,"addNewRecord",function(){return o._84}),i.d(t,"removeRecord",function(){return o._85}),i.d(t,"aggregateField",function(){return o._86}),i.d(t,"contextMenuCalculatedField",function(){return o._87}),i.d(t,"windowResize",function(){return o._88}),i.d(t,"rowPageNavigation",function(){return o._89}),i.d(t,"columnPageNavigation",function(){return o._90}),i.d(t,"calculatedFieldApplied",function(){return o._91}),i.d(t,"editedRecordsSaved",function(){return o._92}),i.d(t,"newRecordAdded",function(){return o._93}),i.d(t,"recordRemoved",function(){return o._94}),i.d(t,"closeFieldlist",function(){return o._95}),i.d(t,"fieldTreeSorted",function(){return o._96}),i.d(t,"reportSaved",function(){return o._97}),i.d(t,"newReportAdded",function(){return o._98}),i.d(t,"reportReSaved",function(){return o._99}),i.d(t,"reportRenamed",function(){return o._100}),i.d(t,"reportRemoved",function(){return o._101}),i.d(t,"excelExported",function(){return o._102}),i.d(t,"csvExported",function(){return o._103}),i.d(t,"pdfExported",function(){return o._104}),i.d(t,"pngExported",function(){return o._105}),i.d(t,"jpegExported",function(){return o._106}),i.d(t,"svgExported",function(){return o._107}),i.d(t,"conditionallyFormatted",function(){return o._108}),i.d(t,"numberFormatted",function(){return o._109}),i.d(t,"tableViewed",function(){return o._110}),i.d(t,"chartViewed",function(){return o._111}),i.d(t,"subTotalsHidden",function(){return o._112}),i.d(t,"subTotalsRowShown",function(){return o._113}),i.d(t,"subTotalsColumnShown",function(){return o._114}),i.d(t,"subTotalsShown",function(){return o._115}),i.d(t,"grandTotalsHidden",function(){return o._116}),i.d(t,"grandTotalsRowShown",function(){return o._117}),i.d(t,"grandTotalsColumnShown",function(){return o._118}),i.d(t,"grandTotalsShown",function(){return o._119}),i.d(t,"valueSorted",function(){return o._120}),i.d(t,"calculatedFieldEdited",function(){return o._121}),i.d(t,"fieldSorted",function(){return o._122}),i.d(t,"fieldFiltered",function(){return o._123}),i.d(t,"fieldRemoved",function(){return o._124}),i.d(t,"fieldAggregated",function(){return o._125}),i.d(t,"recordEdited",function(){return o._126}),i.d(t,"reportChanged",function(){return o._127}),i.d(t,"windowResized",function(){return o._128}),i.d(t,"recordUpdated",function(){return o._129}),i.d(t,"drillThroughClosed",function(){return o._130}),i.d(t,"verticalScrolled",function(){return o._131}),i.d(t,"horizontalScrolled",function(){return o._132}),i.d(t,"rowPageNavigated",function(){return o._133}),i.d(t,"columnPageNavigated",function(){return o._134}),i.d(t,"actionDropped",function(){return o._135}),i.d(t,"Theme",function(){return o._136}),i.d(t,"ErrorDialog",function(){return o._137}),i.d(t,"FilterDialog",function(){return o._138}),i.d(t,"PivotContextMenu",function(){return o._139}),i.d(t,"AggregateMenu",function(){return o._140}),i.d(t,"Toolbar",function(){return o._141}),i.d(t,"NumberFormatting",function(){return o._142}),i.d(t,"Grouping",function(){return o._143});var s=(i(13),i(44));i.d(t,"FieldOptions",function(){return s.a}),i.d(t,"FieldListFieldOptions",function(){return s.b}),i.d(t,"Style",function(){return s.c}),i.d(t,"Filter",function(){return s.d}),i.d(t,"ConditionalFormatSettings",function(){return s.e}),i.d(t,"Sort",function(){return s.f}),i.d(t,"FormatSettings",function(){return s.g}),i.d(t,"GroupSettings",function(){return s.h}),i.d(t,"CustomGroups",function(){return s.i}),i.d(t,"CalculatedFieldSettings",function(){return s.j}),i.d(t,"DrillOptions",function(){return s.k}),i.d(t,"ValueSortSettings",function(){return s.l}),i.d(t,"Authentication",function(){return s.m}),i.d(t,"DataSourceSettings",function(){return s.n})},function(e,t,i){"use strict";i.d(t,"a",function(){return l});var r=i(0),a=(i.n(r),i(74)),n=(i.n(a),i(12)),o=(i.n(n),i(1)),s=i(3),l=function(){function e(e){this.parent=e}return e.prototype.getModuleName=function(){return"chartExport"},e.prototype.pdfChartExport=function(e,t,a,o){var s=this,l=[this.parent.chart],d=this.getChartInfo(l),h=d.width,p=d.height,u=this.parent.chart.svgObject;this.parent.chart.enableCanvas||(u=i.i(r.createElement)("canvas",{id:"ej2-canvas",attrs:{width:h.toString(),height:p.toString()}}));var c=window.URL.createObjectURL(new Blob([(new XMLSerializer).serializeToString(d.svg)],{type:"image/svg+xml"})),g=new Image,m=u.getContext("2d");return g.src=c,new Promise(function(l){g.onload=function(){i.i(r.isNullOrUndefined)(t)?s.pdfDocument=new n.PdfDocument:s.pdfDocument=t,m.drawImage(g,0,0),window.URL.revokeObjectURL(c),s.exportPdf(u,a,o,h,p,e),l(s.pdfDocument)}})},e.prototype.getChartInfo=function(e,t){var n,o=0,s=0,l=this.parent.chart.enableCanvas,d=new a.SvgRenderer("").createSvg({id:"Svg_Export_Element",width:200,height:200});return e.map(function(e){var a=e.svgObject.cloneNode(!0),h=e.renderer.createGroup({style:i.i(r.isNullOrUndefined)(t)||t?"transform: translateY("+s+"px)":"transform: translateX("+o+"px)"});n=a.childNodes[0]?a.childNodes[0].getAttribute("fill"):"transparent","transparent"===n&&(n=e.theme.indexOf("Dark")>-1||"HighContrast"===e.theme?"rgba(0, 0, 0, 1)":"rgba(255, 255, 255, 1)"),l||h.appendChild(a),o=e.availableSize.width,s=e.availableSize.height,l||d.appendChild(h)}),l||(d.setAttribute("width",o+""),d.setAttribute("height",s+""),d.setAttribute("style","background-color: "+n+";")),{width:o,height:s,svg:d}},e.prototype.exportPdf=function(e,t,a,l,d,h){var p=this,u=this.pdfDocument.sections.add(),c=this.pdfDocument.pageSettings.width,g=this.pdfDocument.pageSettings.height,m=this.pdfDocument.pageSettings.margins,f=l+m.left+m.right;this.pdfDocument.pageSettings.size=new n.SizeF(f,g);var v=this.exportProperties.fileName?this.exportProperties.fileName:i.i(r.isNullOrUndefined)(h)||i.i(r.isNullOrUndefined)(h.fileName)?"default":h.fileName;if(this.exportProperties.width||this.exportProperties.height?(this.pdfDocument.pageSettings.orientation=this.exportProperties.width>this.exportProperties.height||!this.exportProperties.height&&this.exportProperties.width>g||!this.exportProperties.width&&c>this.exportProperties.height?n.PdfPageOrientation.Landscape:n.PdfPageOrientation.Portrait,this.pdfDocument.pageSettings.size=new n.SizeF(this.exportProperties.width?this.exportProperties.width:c,this.exportProperties.height?this.exportProperties.height:g)):(this.pdfDocument.pageSettings.orientation=0===this.exportProperties.orientation||this.exportProperties.orientation?this.exportProperties.orientation:i.i(r.isNullOrUndefined)(h)||i.i(r.isNullOrUndefined)(h.pageOrientation)?n.PdfPageOrientation.Landscape:"Landscape"===h.pageOrientation?n.PdfPageOrientation.Landscape:n.PdfPageOrientation.Portrait,i.i(r.isNullOrUndefined)(h)||i.i(r.isNullOrUndefined)(h.pageSize)||(this.pdfDocument.pageSettings.size=s.a.getPageSize(h.pageSize))),!i.i(r.isNullOrUndefined)(this.exportProperties.pdfMargins)){var S=this.pdfDocument.pageSettings.margins;S.top=i.i(r.isNullOrUndefined)(this.exportProperties.pdfMargins.top)?S.top:this.exportProperties.pdfMargins.top,S.bottom=i.i(r.isNullOrUndefined)(this.exportProperties.pdfMargins.bottom)?S.bottom:this.exportProperties.pdfMargins.bottom,S.left=i.i(r.isNullOrUndefined)(this.exportProperties.pdfMargins.left)?S.left:this.exportProperties.pdfMargins.left,S.right=i.i(r.isNullOrUndefined)(this.exportProperties.pdfMargins.right)?S.right:this.exportProperties.pdfMargins.right}u.setPageSettings(this.pdfDocument.pageSettings),g=this.pdfDocument.pageSettings.height;var y=e.toDataURL("image/jpeg").replace("image/jpeg","image/octet-stream");y=y.slice(y.indexOf(",")+1);var b=new n.PdfBitmap(y),C=u.pages.add();C.graphics.drawImage(b,0,0,g<d||this.exportProperties.width||this.pdfDocument.pageSettings.size?C.getClientSize().width:f,g<d?C.getClientSize().height:d),a||t?a&&(this.blobPromise=this.pdfDocument.save()):(this.pdfDocument.save(v+".pdf"),this.pdfDocument.destroy());var x={type:"PDF",promise:a?this.blobPromise:null};return this.parent.trigger(o.i,x),new Promise(function(){p.pdfDocument})},e.prototype.destroy=function(){this.pdfDocument&&(this.pdfDocument.destroy(),this.pdfDocument=null),this.blobPromise&&(this.blobPromise=null),this.exportProperties&&(this.exportProperties=null)},e}()},function(e,t,i){"use strict";i.d(t,"a",function(){return h});var r=i(1),a=i(2),n=i(6),o=(i.n(n),i(0)),s=(i.n(o),i(3)),l=i(5),d=(i.n(l),i(4)),h=(i.n(d),function(){function e(){this.headerColl={},this.maxLevel=0,this.columnGroupObject={},this.selectedLegend=0,this.chartSeriesInfo={},this.fieldPosition=[],this.measurePos=-1,this.measuresNames={},this.accumulationType=["Pie","Pyramid","Doughnut","Funnel"]}return e.prototype.getModuleName=function(){return"pivotChart"},e.prototype.loadChart=function(e,t){if(this.parent=e,this.measuresNames={},this.engineModule="olap"===this.parent.dataType?this.parent.olapEngineModule:this.parent.engineModule,this.dataSourceSettings=this.parent.dataSourceSettings,this.chartSettings=t,!("olap"===e.dataType?""!==e.dataSourceSettings.url&&!e.olapEngineModule.isEmptyData&&e.olapEngineModule.tupColumnInfo.length>0&&e.olapEngineModule.tupRowInfo.length>0&&(!i.i(o.isNullOrUndefined)(e.olapEngineModule.colMeasurePos)||!i.i(o.isNullOrUndefined)(e.olapEngineModule.rowMeasurePos)):"Server"===this.parent.dataSourceSettings.mode?!i.i(o.isNullOrUndefined)(e.dataSourceSettings.url)&&""!==e.dataSourceSettings.url&&e.dataSourceSettings.values.length>0&&!e.engineModule.isEmptyData:e.dataSourceSettings.values.length>0&&e.dataSourceSettings.dataSource&&e.dataSourceSettings.dataSource.length>0&&!e.engineModule.isEmptyData)){if(this.parent.chart)return this.parent.element.querySelector(".e-chart")?(this.parent.chart.series=[],this.parent.chart.rows=[],this.parent.chart.primaryXAxis.title="",this.parent.chart.primaryYAxis.title="",this.parent.chart.primaryXAxis.multiLevelLabels=[],this.parent.chart.primaryYAxis.multiLevelLabels=[],this.parent.chart.axes.length>0&&(this.parent.chart.axes[0].title=""),this.parent.chart.primaryXAxis.zoomFactor=i.i(o.isNullOrUndefined)(this.parent.chartSettings.primaryXAxis.zoomFactor)?1:this.parent.chartSettings.primaryXAxis.zoomFactor):this.parent.element.querySelector(".e-accumulationchart")&&(this.parent.chart.series[0].dataSource=[{}],this.parent.chart.series[0].dataLabel={}),void this.parent.chart.refresh();if(!i.i(o.select)("#"+this.parent.element.id+"_chart",this.parent.element)){"Both"===this.parent.displayOption.view&&"Chart"===this.parent.displayOption.primary?this.parent.element.insertBefore(i.i(o.createElement)("div",{className:a._10,id:this.parent.element.id+"_chart"}),this.parent.element.querySelector("."+a._142)):this.parent.element.appendChild(i.i(o.createElement)("div",{className:a._10,id:this.parent.element.id+"_chart"}));var s=this.parent.width.toString();this.parent.showToolbar&&this.parent.grid&&(s=this.parent.getGridWidthAsNumber().toString());var l=this.getChartHeight(),d=void 0;d=this.chartSettings&&this.chartSettings.chartSeries&&this.accumulationType.indexOf(this.chartSettings.chartSeries.type)>-1?new n.AccumulationChart({width:s,height:l}):new n.Chart({width:s,height:l}),d.appendTo("#"+this.parent.element.id+"_chart"),this.parent.showToolbar&&("Both"===this.parent.displayOption.view&&"Chart"===this.parent.currentView&&(this.parent.grid.element.style.display="none"),"Chart"!==this.parent.currentView&&(i.i(o.select)("#"+this.parent.element.id+"_chart",this.parent.element).style.display="none"))}return void this.parent.notify(r._21,{})}this.parent.chart||!this.parent.element.querySelector(".e-chart")&&!this.parent.element.querySelector(".e-accumulationchart")||i.i(o.remove)(i.i(o.select)("#"+this.parent.element.id+"_chart",this.parent.element)),this.chartSettings.enableMultipleAxis&&this.accumulationType.indexOf(t.chartSeries.type)<0&&"Pareto"!==this.chartSettings.chartSeries.type?this.measureList=this.dataSourceSettings.values.map(function(e){return e.name}):this.measureList=[""===t.value?this.dataSourceSettings.values[0].name:t.value];for(var h=0,p=this.dataSourceSettings.values;h<p.length;h++){var u=p[h],c=u.name.replace(/[^A-Z0-9]+/gi,"_");this.measuresNames[u.name]=c,this.measuresNames[c]=u.name,"Polar"!==this.chartSettings.chartSeries.type&&"Radar"!==this.chartSettings.chartSeries.type||(this.measuresNames[u.caption?u.caption:u.name]=u.name)}this.columnGroupObject={},this.accEmptyPoint=!1;var g=this.engineModule.pivotValues;this.currentMeasure=t.enableMultipleAxis&&this.accumulationType.indexOf(t.chartSeries.type)<0&&"Pareto"!==this.chartSettings.chartSeries.type?this.measureList[0]:(""===t.value||0===this.dataSourceSettings.values.filter(function(e){return e.name===t.value}).length)&&this.dataSourceSettings.values.length>0?this.dataSourceSettings.values[0].name:t.value;var m,f,v,S=this.getColumnTotalIndex(g),y=Object.keys(g),b={},C=0,x=-.5;this.headerColl={},this.maxLevel=0;var w,T={},M="",_="",D="";this.chartSeriesInfo={},this.selectedLegend=0;for(var O=!1,P={},E=!1,N=this.parent.dataSourceSettings.valueSortSettings.headerDelimiter,F=0,I=this.dataSourceSettings.values;F<I.length;F++){var u=I[F],c=u.name;P[c]=u.caption?u.caption:c,P[u.caption?u.caption:c]=c}"olap"===this.parent.dataType&&(T=this.groupHierarchyWithLevels(g),M=this.fieldPosition[this.fieldPosition.length-1],_=this.measurePos===this.fieldPosition.length-1&&this.fieldPosition.length>1?this.fieldPosition[this.fieldPosition.length-2]:M,D=_);for(var L=0,A=y;L<A.length;L++){var R=A[L],k=Number(R);if(!i.i(o.isNullOrUndefined)(g[k])){var j=g[k][0],H=j&&j.valueSort&&!i.i(o.isNullOrUndefined)(j.valueSort.levelName)?j.valueSort.levelName.toString().split(N):void 0;if(E=!1,H&&"Grand Total"!==H[0]&&((t.enableMultipleAxis&&this.accumulationType.indexOf(t.chartSeries.type)<0&&"Pareto"!==this.chartSettings.chartSeries.type||H.indexOf(P[this.currentMeasure])>-1)&&(E=!0),!E)){for(var q=0,V=H;q<V.length;q++){var B=V[q];if(P[B]){E=!0;break}}E=!E}if(j&&"row"===j.axis&&(0===this.dataSourceSettings.rows.length||"grand sum"!==j.type&&E)){var U=g[k][0];if(U.isSum)continue;var G="olap"===this.parent.dataType?this.engineModule.tupRowInfo[U.ordinal]:void 0,z=-1,W=U.level;"olap"===this.parent.dataType?(O="[Measures]"===U.hierarchy?O:this.isAttributeDrill(U.hierarchy,G.drillInfo),D=D===_?_:"[Measures]"===U.hierarchy||U.isNamedSet||this.engineModule.fieldList[U.hierarchy]&&!this.engineModule.fieldList[U.hierarchy].hasAllMember?_:D,z=G.drillInfo.length-1,3===U.memberType||G.measureName&&G.measureName!==this.dataSourceSettings.values[0].name||(f=void 0===f?U.levelUniqueName:f,C=f===U.levelUniqueName?0:C,b=0===C?{}:b,C=v&&f!==U.levelUniqueName?v.hierarchy===U.hierarchy?C+(U.level-v.level):i.i(o.isNullOrUndefined)(b[U.levelUniqueName])?T[U.hierarchy].start:b[U.levelUniqueName]:C,b[U.levelUniqueName]=C,W=C,x+=!v||D!==v.hierarchy||v.isDrilled&&v.hasChild?0:1,D=O?U.hierarchy:_,m=C,v=U)):"value"!==U.type&&(void 0===m||m<W||x++,m=W),this.maxLevel=W>this.maxLevel?W:this.maxLevel;var Q="olap"===this.parent.dataType?U.formattedText:U.actualText?U.actualText.toString():U.formattedText.toString(),Y=this.engineModule.fieldList[this.currentMeasure],K=0===this.parent.dataSourceSettings.rows.length?this.parent.localeObj.getConstant("total")+" "+this.parent.localeObj.getConstant(Y.aggregateType)+" "+this.parent.localeObj.getConstant("of")+" "+(i.i(o.isNullOrUndefined)(Y.caption)?Y.name:Y.caption):U.formattedText?U.formattedText.toString():Q,X=U.hasChild&&!U.isNamedSet?(U.isDrilled?" - ":" + ")+K:K,B=G?G.uNameCollection:U.valueSort.levelName.toString(),J={name:Q,text:X,hasChild:U.hasChild,isDrilled:U.isDrilled,levelName:B,level:W,fieldName:U.valueSort.axis?U.valueSort.axis.toString():"",rowIndex:k,colIndex:0,cell:U};("olap"===this.parent.dataType?3!==U.memberType:"value"!==U.type)&&(this.headerColl[x]?this.headerColl[x][W]=J:(this.headerColl[x]={},this.headerColl[x][W]=J));var Z=g[k],$=Object.keys(Z),ee=void 0;if("olap"===this.parent.dataType)w=3!==U.memberType?U:w;else if(w="value"!==U.type?U:w,"value"!==U.type)w=U;else{var te=U&&U.valueSort&&U.valueSort.levelName&&U.valueSort.levelName.toString().split(N),ie=void 0;if(te&&te.length>0&&(te.splice(te.length-1,1),ie=te.join(N)),this.parent.dataSourceSettings.valueIndex<=0||this.engineModule.valueAxis&&this.dataSourceSettings.rows.length===this.engineModule.measureIndex||i.i(o.isNullOrUndefined)(w.valueSort)||ie===w.valueSort.levelName)w=w;else for(var re=k;re>-1;)g[re]&&g[re][0]&&g[re][0].valueSort&&g[re][0].valueSort.levelName===ie&&(w=g[re][0],re=0),re--}for(var ae=0,ne=$;ae<ne.length;ae++){var oe=ne[ae],se=Number(oe),le=g[k][se],de=!i.i(o.isNullOrUndefined)(le.rowHeaders)||0===this.dataSourceSettings.rows.length,he="olap"===this.parent.dataType&&G&&G.measureName?G.measureName:le.actualText;if(("olap"!==this.parent.dataType||!le.isGrandSum)&&!S[le.colIndex]&&"value"===le.axis&&"header"!==U.type&&""!==he&&(t.enableMultipleAxis&&this.accumulationType.indexOf(t.chartSeries.type)<0&&"Pareto"!==this.chartSettings.chartSeries.type||he===this.currentMeasure)){if(i.i(o.isNullOrUndefined)(U.members)&&(U.members=[]),"olap"===this.parent.dataType?M!==U.hierarchy&&!O||(3===U.memberType&&ee?z!==this.measurePos||ee.isDrilled&&ee.hasChild:U.isDrilled&&U.hasChild):("value"===U.type&&ee?ee.members.length>0&&ee.isDrilled:U.members.length>0&&U.isDrilled)||!de)break;var pe="olap"===this.parent.dataType?le.columnHeaders.toString().split(/~~|::/).join(" - "):le.columnHeaders.toString().split(N).join(" - "),ue="olap"===this.parent.dataType?le.rowHeaders.toString().split(/~~|::/).join(" - "):le.rowHeaders.toString().split(N).join(" - "),ce=pe+" | "+he;this.chartSeriesInfo[pe]={uniqueName:pe,caption:le.hierarchyName&&le.hierarchyName.toString().split(N).join(" - "),colorIndex:[]},this.chartSeriesInfo[this.chartSeriesInfo[pe].caption]=this.chartSeriesInfo[pe];var ge="pivot"===this.parent.dataType&&this.engineModule.aggregatedValueMatrix[k]&&!i.i(o.isNullOrUndefined)(this.engineModule.aggregatedValueMatrix[k][se])?Number(this.engineModule.aggregatedValueMatrix[k][se]):i.i(o.isNullOrUndefined)(le.value)?le.value:Number(le.value);ge=ge===1/0?null:ge,0===ge&&(this.accEmptyPoint=!0),this.columnGroupObject[ce]?this.columnGroupObject[ce].push({x:0===this.dataSourceSettings.rows.length?U.formattedText:ue,y:ge,rIndex:k,cIndex:se}):this.columnGroupObject[ce]=[{x:0===this.dataSourceSettings.rows.length?U.formattedText:ue,y:ge,rIndex:k,cIndex:se}]}ee=w}}}}this.refreshChart()},e.prototype.refreshChart=function(){this.chartSeries=[];var e=0,t={},a=Object.keys(this.columnGroupObject);this.persistSettings=JSON.parse(this.parent.getPersistData()).chartSettings;for(var s=this.persistSettings.palettes&&this.persistSettings.palettes.length>0?this.persistSettings.palettes:i.i(n.getSeriesColor)(this.chartSettings.theme),l=this.parent.chartSettings.columnDelimiter?this.parent.chartSettings.columnDelimiter:"-",d=this.parent.chartSettings.columnHeader&&""!==this.parent.chartSettings.columnHeader?this.parent.chartSettings.columnHeader.split(l).join(" - "):"",h=this.chartSettings.chartSeries?this.chartSettings.chartSeries.type:void 0,p={},u=0;u<this.parent.dataSourceSettings.values.length;u++)p[this.parent.dataSourceSettings.values[u].name]=i.i(o.isNullOrUndefined)(this.parent.dataSourceSettings.values[u].caption)?void 0:this.parent.dataSourceSettings.values[u].caption;if(this.accumulationType.indexOf(h)>-1&&a.length>0){this.currentColumn=a.indexOf(d+" | "+this.currentMeasure)>-1&&void 0!==d?d+" | "+this.currentMeasure:a[0];var c={};c=this.persistSettings.chartSeries?this.frameChartSeries(this.persistSettings.chartSeries):c,(i.i(o.isNullOrUndefined)(c.palettes)||0===c.palettes.length)&&!i.i(o.isNullOrUndefined)(this.persistSettings.palettes)&&this.persistSettings.palettes.length>0&&(c.palettes=this.persistSettings.palettes),c.dataSource=this.columnGroupObject[this.currentColumn],c.xName="x",c.yName="y",this.persistSettings.chartSeries&&this.persistSettings.chartSeries.dataLabel?(c.dataLabel=this.persistSettings.chartSeries.dataLabel,c.dataLabel.name="x"):(c.dataLabel={visible:!0,position:"Outside",name:"x"},this.parent.setProperties({chartSettings:{chartSeries:{dataLabel:{visible:!0,position:"Outside"}}}},!0)),this.accEmptyPoint&&c.emptyPointSettings?c.emptyPointSettings.mode="Zero":this.accEmptyPoint&&(c.emptyPointSettings={mode:"Zero"}),c.name=this.currentColumn,"Doughnut"===h?(c.type="Pie",c.innerRadius=this.chartSettings.chartSeries.innerRadius?this.chartSettings.chartSeries.innerRadius:"40%"):"Pie"===h&&(c.innerRadius=this.chartSettings.chartSeries.innerRadius?this.chartSettings.chartSeries.innerRadius:"0"),this.chartSeries=this.chartSeries.concat(c)}else for(var g=0,m=a;g<m.length;g++){var f=m[g],c={};c=this.persistSettings.chartSeries?this.frameChartSeries(this.persistSettings.chartSeries):c,!i.i(o.isNullOrUndefined)(c.palettes)&&c.palettes.length>0&&(i.i(o.isNullOrUndefined)(this.persistSettings.palettes)||0===this.persistSettings.palettes.length)&&(this.chartSettings.palettes=c.palettes);for(var u=0;u<this.columnGroupObject[f].length;u++){var v=this.engineModule.fieldList[this.currentMeasure];this.columnGroupObject[f][u].x=0!==this.parent.dataSourceSettings.rows.length||this.chartSettings.showMultiLevelLabels?""===this.columnGroupObject[f][u].x?this.parent.localeObj.getConstant("blank"):this.columnGroupObject[f][u].x:this.parent.localeObj.getConstant("total")+" "+this.parent.localeObj.getConstant(v.aggregateType)+" "+this.parent.localeObj.getConstant("of")+" "+(i.i(o.isNullOrUndefined)(v.caption)?v.name:v.caption)}c.dataSource=this.columnGroupObject[f],c.xName="x",c.yName="y",c.visible=!0;var S=void 0;if(this.chartSettings.enableMultipleAxis){var y=f.split(" | ")[1];y=i.i(o.isNullOrUndefined)(p[y])?y:p[y],S=f.split(" | ")[0]+" | "+y}if(c.name=this.chartSettings.enableMultipleAxis?S:f.split(" | ")[0],this.chartSettings.showPointColorByMembers&&this.chartSettings.enableMultipleAxis){c.name=c.name.split(" |")[0];var b=this.chartSeriesInfo[c.name].caption;c.name=void 0!==b&&null!==b?b:c.name,t[c.name]?(c.fill=t[c.name].color,this.chartSeriesInfo[c.name].colorIndex.push(this.selectedLegend++),c.name=void 0):(e=s[e]?e:0,t[c.name]={name:c.name,color:s[e]},c.fill=s[e++],this.chartSeriesInfo[c.name].colorIndex.push(this.selectedLegend++))}if(["Radar","Polar"].indexOf(h)<0){var C=f.split(" | ")[1];c.tooltipMappingName=this.measuresNames[C],c.yAxisName=this.chartSettings.enableMultipleAxis&&"Combined"===this.chartSettings.multipleAxisMode?this.measureList.join("_"):this.measuresNames[C]?this.measuresNames[C]:C}this.persistSettings.chartSeries&&this.persistSettings.chartSeries.emptyPointSettings&&(c.emptyPointSettings=this.persistSettings.chartSeries.emptyPointSettings),c.emptyPointSettings||(c.emptyPointSettings={mode:"Zero"}),this.chartSeries=this.chartSeries.concat(c)}var x={series:this.chartSeries,cancel:!1},w=this;this.parent.trigger(r.V,x,function(e){e.cancel?(w.element&&i.i(o.remove)(w.element),w.parent.notify(r._21,{})):w.bindChart()})},e.prototype.frameObjectWithKeys=function(e){for(var t=Object.keys(e),i=0,r={};i<t.length;)r[t[i]]=e[t[i]],i++;return r},e.prototype.frameChartSeries=function(e){for(var t=Object.keys(e),i=0,r={};i<t.length;)this.accumulationType.indexOf(this.parent.chartSettings.chartSeries.type)>-1&&["fill","dashArray","width","segmentAxis","drawType","isClosed","segments","stackingGroup","marker","errorBar","trendlines","minRadius","splineType","maxRadius","cardinalSplineTension","columnWidth","columnSpacing","cornerRadius"].indexOf(t[i])>-1||this.accumulationType.indexOf(this.parent.chartSettings.chartSeries.type)<0&&["endAngle","explode","explodeAll","explodeIndex","explodeOffset","gapRatio","groupMode","groupTo","neckHeight","neckWidth","pyramidMode","startAngle","dataLabel","innerRadius"].indexOf(t[i])>-1?i++:(r[t[i]]=e[t[i]],i++);return r},e.prototype.bindChart=function(){this.parent.showWaitingPopup();var e=this.configXAxis(),t=this.configTooltipSettings(),r=this.configLegendSettings(),s=this.configZoomSettings(),l=this.frameAxesWithRows(),h=this.chartSettings.chartSeries.type;"Both"===this.parent.displayOption.view?this.element="Chart"===this.parent.displayOption.primary?this.parent.element.insertBefore(this.element?this.element:i.i(o.createElement)("div",{className:a._10,id:this.parent.element.id+"_chart"}),this.parent.element.querySelector("."+a._142)):this.parent.element.appendChild(this.element?this.element:i.i(o.createElement)("div",{className:a._10,id:this.parent.element.id+"_chart"})):this.element||(this.element=this.parent.element.appendChild(i.i(o.createElement)("div",{className:a._10,id:this.parent.element.id+"_chart"}))),!this.chartElement&&this.parent.chartSettings.enableScrollOnMultiAxis&&this.parent.chartSettings.enableMultipleAxis&&"Pareto"!==this.chartSettings.chartSeries.type&&(this.parent.element.querySelector("."+a._10).innerHTML="",this.chartElement=this.parent.element.querySelector("."+a._10).appendChild(i.i(o.createElement)("div",{className:a._218,id:this.parent.element.id+"_chartInner"}))),this.parent.element.querySelector("."+a._218)&&(this.parent.element.querySelector("."+a._218).innerHTML=""),this.parent.showGroupingBar?this.element.style.minWidth="400px !important":this.element.style.minWidth="310px !important";var p=this.parent.width.toString();this.parent.showToolbar&&this.parent.grid&&(p=this.parent.getGridWidthAsNumber().toString());var u=this.getChartHeight();this.parent.chartSettings.enableScrollOnMultiAxis&&this.parent.chartSettings.enableMultipleAxis&&this.accumulationType.indexOf(h)<0&&"Pareto"!==this.chartSettings.chartSeries.type&&(this.parent.element.querySelector("."+a._10).style.height=("auto"===u?this.getChartAutoHeight():u)+"px",this.parent.element.querySelector("."+a._10).style.width=p+"px","Polar"!==this.parent.chartSettings.chartSeries.type&&"Radar"!==this.parent.chartSettings.chartSeries.type&&(this.parent.element.querySelector("."+a._10).style.overflow="auto",this.parent.element.querySelector("."+a._10).style.overflowX="hidden")),this.parent.chart&&("accumulationchart"===this.parent.chart.getModuleName()&&this.accumulationType.indexOf(h)<0||"chart"===this.parent.chart.getModuleName()&&this.accumulationType.indexOf(h)>-1&&"Pareto"!==this.chartSettings.chartSeries.type)&&(this.parent.chart.destroy(),i.i(o.select)("#"+this.parent.element.id+"_chart",this.parent.element)&&(i.i(o.select)("#"+this.parent.element.id+"_chart",this.parent.element).innerHTML="",i.i(o.select)("#"+this.parent.element.id+"_chart",this.parent.element).appendChild(i.i(o.createElement)("div",{className:a._218,id:this.parent.element.id+"_chartInner"})))),!(this.parent.chart&&this.parent.chart.element&&this.parent.element.querySelector(".e-chart")||this.parent.element.querySelector(".e-accumulationchart"))||this.parent.toolbarModule&&this.parent.toolbarModule.isMultiAxisChange?(this.parent.toolbarModule&&this.parent.toolbarModule.isMultiAxisChange&&this.parent.chart&&(this.parent.chart.isDestroyed||this.parent.chart.destroy(),this.parent.chart=void 0,i.i(o.select)("#"+this.parent.element.id+"_chart",this.parent.element).innerHTML="",i.i(o.select)("#"+this.parent.element.id+"_chart",this.parent.element).appendChild(i.i(o.createElement)("div",{className:a._218,id:this.parent.element.id+"_chartInner"})),this.parent.toolbarModule.isMultiAxisChange=!1),n.Chart.Inject(n.ColumnSeries,n.StackingColumnSeries,n.RangeColumnSeries,n.BarSeries,n.StackingBarSeries,n.ScatterSeries,n.BubbleSeries,n.LineSeries,n.StepLineSeries,n.SplineSeries,n.SplineAreaSeries,n.MultiColoredLineSeries,n.PolarSeries,n.RadarSeries,n.AreaSeries,n.RangeAreaSeries,n.StackingAreaSeries,n.StepAreaSeries,n.StackingLineSeries,n.MultiColoredAreaSeries,n.ParetoSeries,n.Legend,n.Tooltip,n.Category,n.MultiLevelLabel,n.ScrollBar,n.Zoom,n.Export,n.Crosshair,n.Selection,n.StripLine,n.DataLabel),n.AccumulationChart.Inject(n.PieSeries,n.FunnelSeries,n.PyramidSeries,n.AccumulationDataLabel,n.AccumulationLegend,n.AccumulationTooltip,n.Export),this.accumulationType.indexOf(h)>-1?this.parent.chart=new n.AccumulationChart({series:this.chartSeries.length>0?this.chartSeries:[{}],legendSettings:r,tooltip:t,width:p,height:u.toString(),title:this.chartSettings.title,enableSmartLabels:this.chartSettings.enableSmartLabels,center:this.chartSettings.pieCenter,enableBorderOnMouseMove:this.chartSettings.enableBorderOnMouseMove,highlightMode:this.chartSettings.highlightMode,highlightPattern:this.chartSettings.highlightPattern,titleStyle:this.chartSettings.titleStyle,subTitle:this.chartSettings.subTitle,subTitleStyle:this.chartSettings.subTitleStyle,margin:this.chartSettings.margin,border:this.chartSettings.border,background:this.chartSettings.background,theme:this.chartSettings.theme,selectionMode:this.chartSettings.accumulationSelectionMode,isMultiSelect:this.chartSettings.isMultiSelect,enableExport:this.chartSettings.enableExport,selectedDataIndexes:this.chartSettings.selectedDataIndexes,enableAnimation:this.chartSettings.enableAnimation,useGroupingSeparator:this.chartSettings.useGroupingSeparator,locale:this.parent.locale,enableRtl:this.parent.enableRtl,beforePrint:this.chartSettings.beforePrint?this.chartSettings.beforePrint.bind(this):void 0,animationComplete:this.chartSettings.animationComplete?this.chartSettings.animationComplete.bind(this):void 0,legendRender:this.chartSettings.legendRender?this.chartSettings.legendRender.bind(this):void 0,textRender:this.chartSettings.textRender?this.chartSettings.textRender.bind(this):void 0,pointRender:this.chartSettings.pointRender?this.chartSettings.pointRender.bind(this):void 0,seriesRender:this.chartSettings.seriesRender?this.chartSettings.seriesRender.bind(this):void 0,chartMouseMove:this.chartSettings.chartMouseMove?this.chartSettings.chartMouseMove.bind(this):void 0,chartMouseClick:this.chartSettings.chartMouseClick?this.chartSettings.chartMouseClick.bind(this):void 0,pointMove:this.chartSettings.pointMove?this.chartSettings.pointMove.bind(this):void 0,pointClick:this.pointClick.bind(this),chartMouseLeave:this.chartSettings.chartMouseLeave?this.chartSettings.chartMouseLeave.bind(this):void 0,chartMouseDown:this.chartSettings.chartMouseDown?this.chartSettings.chartMouseDown.bind(this):void 0,chartMouseUp:this.chartSettings.chartMouseUp?this.chartSettings.chartMouseUp.bind(this):void 0,tooltipRender:this.tooltipRender.bind(this),loaded:this.loaded.bind(this),load:this.load.bind(this),resized:this.resized.bind(this)}):this.parent.chart=new n.Chart({series:this.chartSeries.length>0?this.chartSeries:[{}],legendSettings:r,tooltip:t,zoomSettings:s,axes:"Polar"===h||"Radar"===h?[]:l.axes,rows:"Polar"===h||"Radar"===h?[{}]:"Bar"===h||"StackingBar"===h||"StackingBar100"===h||"Pareto"===h&&this.chartSettings.enableMultipleAxis?[{height:"100%"}]:l.rows,columns:"Polar"===h||"Radar"===h?[{}]:"Bar"===h||"StackingBar"===h||"StackingBar100"===h&&this.chartSettings.enableMultipleAxis?l.columns:[{width:"100%"}],primaryYAxis:"Polar"===h||"Radar"===h?l.axes[0]:{visible:!1},primaryXAxis:e,width:p,height:"Polar"!==this.parent.chartSettings.chartSeries.type&&"Radar"!==this.parent.chartSettings.chartSeries.type&&this.parent.chartSettings.enableScrollOnMultiAxis&&this.parent.chartSettings.enableMultipleAxis&&"Pareto"!==this.parent.chartSettings.chartSeries.type&&this.parent.dataSourceSettings.values.length>0?Number(u)>235*this.parent.dataSourceSettings.values.length+100?isNaN(Number(u))?u.toString():(Number(u)-5).toString():!isNaN(Number(u))||this.parent.dataSourceSettings.values.length>1?(235*this.parent.dataSourceSettings.values.length+100).toString():u.toString():u.toString(),title:this.chartSettings.title,titleStyle:this.chartSettings.titleStyle,subTitle:this.chartSettings.subTitle,subTitleStyle:this.chartSettings.subTitleStyle,margin:this.chartSettings.margin,border:this.chartSettings.border,background:this.chartSettings.background,chartArea:this.chartSettings.chartArea,palettes:this.chartSettings.palettes,theme:this.chartSettings.theme,crosshair:this.chartSettings.crosshair,selectionMode:this.chartSettings.selectionMode,isMultiSelect:this.chartSettings.isMultiSelect,enableExport:this.chartSettings.enableExport,selectedDataIndexes:this.chartSettings.selectedDataIndexes,isTransposed:this.chartSettings.isTransposed,enableAnimation:this.chartSettings.enableAnimation,enableCanvas:this.chartSettings.enableCanvas,useGroupingSeparator:this.chartSettings.useGroupingSeparator,description:this.chartSettings.description,tabIndex:this.chartSettings.tabIndex,locale:this.parent.locale,enableRtl:this.parent.enableRtl,enableSideBySidePlacement:this.chartSettings.enableSideBySidePlacement,beforePrint:this.chartSettings.beforePrint?this.chartSettings.beforePrint.bind(this):void 0,animationComplete:this.chartSettings.animationComplete?this.chartSettings.animationComplete.bind(this):void 0,legendRender:this.chartSettings.legendRender?this.chartSettings.legendRender.bind(this):void 0,textRender:this.chartSettings.textRender?this.chartSettings.textRender.bind(this):void 0,pointRender:this.chartSettings.pointRender?this.chartSettings.pointRender.bind(this):void 0,seriesRender:this.chartSettings.seriesRender?this.chartSettings.seriesRender.bind(this):void 0,axisMultiLabelRender:this.chartSettings.multiLevelLabelRender?this.chartSettings.multiLevelLabelRender.bind(this):void 0,chartMouseMove:this.chartSettings.chartMouseMove?this.chartSettings.chartMouseMove.bind(this):void 0,chartMouseClick:this.chartSettings.chartMouseClick?this.chartSettings.chartMouseClick.bind(this):void 0,pointMove:this.chartSettings.pointMove?this.chartSettings.pointMove.bind(this):void 0,pointClick:this.pointClick.bind(this),chartMouseLeave:this.chartSettings.chartMouseLeave?this.chartSettings.chartMouseLeave.bind(this):void 0,chartMouseDown:this.chartSettings.chartMouseDown?this.chartSettings.chartMouseDown.bind(this):void 0,chartMouseUp:this.chartSettings.chartMouseUp?this.chartSettings.chartMouseUp.bind(this):void 0,dragComplete:this.chartSettings.dragComplete?this.chartSettings.dragComplete.bind(this):void 0,zoomComplete:this.chartSettings.zoomComplete?this.chartSettings.zoomComplete.bind(this):void 0,scrollStart:this.chartSettings.scrollStart?this.chartSettings.scrollStart.bind(this):void 0,scrollEnd:this.chartSettings.scrollEnd?this.chartSettings.scrollEnd.bind(this):void 0,scrollChanged:this.chartSettings.scrollChanged?this.chartSettings.scrollChanged.bind(this):void 0,tooltipRender:this.tooltipRender.bind(this),legendClick:this.legendClick.bind(this),loaded:this.loaded.bind(this),load:this.load.bind(this),resized:this.resized.bind(this),axisLabelRender:this.axisLabelRender.bind(this),multiLevelLabelClick:this.multiLevelLabelClick.bind(this)}),this.parent.chart.isStringTemplate=!0):(this.parent.chart.series=this.chartSeries,this.parent.chart.title=this.parent.chartSettings.title,this.parent.chart.subTitle=this.parent.chartSettings.subTitle,this.parent.chart.background=this.parent.chartSettings.background,this.parent.chart.theme=this.parent.chartSettings.theme,this.parent.chart.legendSettings=r,this.parent.chart.selectionMode=this.parent.chartSettings.selectionMode,this.parent.chart.enableExport=this.parent.chartSettings.enableExport,this.parent.chart.isMultiSelect=this.parent.chartSettings.isMultiSelect,this.parent.chart.enableAnimation=this.parent.chartSettings.enableAnimation,this.parent.chart.useGroupingSeparator=this.parent.chartSettings.useGroupingSeparator,this.parent.chart.highlightPattern=this.parent.chartSettings.highlightPattern,this.accumulationType.indexOf(h)>-1?(this.parent.chart.enableBorderOnMouseMove=this.parent.chartSettings.enableBorderOnMouseMove,this.parent.chart.highlightMode=this.parent.chartSettings.highlightMode,this.parent.chart.enableSmartLabels=this.parent.chartSettings.enableSmartLabels):(this.parent.chart.palettes=this.parent.chartSettings.palettes,this.parent.chart.isTransposed=this.parent.chartSettings.isTransposed,this.parent.chart.enableSideBySidePlacement=this.parent.chartSettings.enableSideBySidePlacement,this.parent.chart.tabIndex=this.parent.chartSettings.tabIndex,this.parent.chart.description=this.parent.chartSettings.description,this.parent.chart.enableCanvas=this.parent.chartSettings.enableCanvas),"Polar"===h||"Radar"===h?(this.parent.chart.primaryXAxis=e,this.parent.chart.primaryYAxis.visible=!0,this.parent.chart.primaryYAxis=l.axes[0],this.parent.chart.axes=[],this.parent.chart.rows=[{}]):this.accumulationType.indexOf(h)<0&&"chart"===this.parent.chart.getModuleName()&&(this.parent.chart.primaryYAxis.visible=!1,this.parent.chart.primaryXAxis=e,this.parent.chart.axes=l.axes,"Bar"===h||"StackingBar"===h||"StackingBar100"===h&&this.chartSettings.enableMultipleAxis?(this.parent.chart.rows=[{height:"100%"}],this.parent.chart.columns=l.columns):"Pareto"===h&&this.chartSettings.enableMultipleAxis?(this.parent.chart.rows=[{height:"100%"}],this.parent.chart.columns=[{width:"100%"}]):(this.parent.chart.rows=l.rows,this.parent.chart.columns=[{width:"100%"}])),this.parent.chart.refresh(),this.accumulationType.indexOf(h)>-1&&"accumulationchart"===this.parent.chart.getModuleName()&&(0===this.parent.dataSourceSettings.rows.length||0===this.parent.dataSourceSettings.columns.length)&&(this.parent.hideWaitingPopup(),this.parent.pivotFieldListModule&&i.i(d.hideSpinner)(this.parent.pivotFieldListModule.fieldListSpinnerElement))),this.parent.chartSettings.enableScrollOnMultiAxis&&this.parent.chartSettings.enableMultipleAxis?this.parent.chart.appendTo("#"+this.parent.element.id+"_chartInner"):this.parent.chart.appendTo("#"+this.parent.element.id+"_chart")},e.prototype.legendClick=function(e){if(this.chartSettings.showPointColorByMembers&&this.chartSettings.enableMultipleAxis)for(var t=this.chartSeriesInfo[e.legendText].colorIndex,i=1;i<t.length;i++)e.chart.series[t[i]].visible=!e.chart.series[t[i]].visible;this.parent.trigger(r.Q,e)},e.prototype.pointClick=function(e){var t=e.series.dataSource?e.series.dataSource:this.parent.chart.series[e.seriesIndex].dataSource;if((["Pie","Funnel","Doughnut","Pyramid","Radar","Polar"].indexOf(this.parent.chartSettings.chartSeries.type)>-1||!this.parent.chartSettings.showMultiLevelLabels)&&("olap"===this.parent.dataType||this.parent.dataSourceSettings.rows.length>1)){this.pivotIndex={rIndex:t?t[e.pointIndex].rIndex:void 0,cIndex:t?t[e.pointIndex].cIndex:void 0},this.creatMenu();var i=this.parent.element.getBoundingClientRect(),a=(this.parent.element.querySelector(".e-pivot-toolbar")?this.parent.element.querySelector(".e-pivot-toolbar").clientHeight:0)+(this.parent.element.querySelector(".e-chart-grouping-bar")?this.parent.element.querySelector(".e-chart-grouping-bar").clientHeight:0)+(window.scrollY||document.documentElement.scrollTop)+i.top;this.accumulationMenu.open(a+e.y,e.x+i.left+(window.scrollX||document.documentElement.scrollLeft))}else if((this.parent.allowDrillThrough||this.parent.editSettings.allowEditing)&&this.parent.drillThroughModule){var n=t[e.pointIndex].rIndex,o=t[e.pointIndex].cIndex;this.parent.drillThroughModule.executeDrillThrough(this.parent.pivotValues[n][o],n,o)}this.parent.trigger(r._11,e)},e.prototype.frameAxesWithRows=function(){var e=[],t=[],r=[],a=[],n=this.persistSettings.chartSeries&&("StackingColumn100"===this.persistSettings.chartSeries.type||"StackingBar100"===this.persistSettings.chartSeries.type||"StackingArea100"===this.persistSettings.chartSeries.type||"StackingLine100"===this.persistSettings.chartSeries.type),l=["PercentageOfGrandTotal","PercentageOfColumnTotal","PercentageOfRowTotal","PercentageOfDifferenceFrom","PercentageOfParentRowTotal","PercentageOfParentColumnTotal","PercentageOfParentTotal"];if(this.chartSettings.enableMultipleAxis)for(var d=0,h=100/this.dataSourceSettings.values.length+"%",p=0,u=this.dataSourceSettings.values;p<u.length;p++){var c=u[p],g=this.engineModule.fieldList[c.name],m=("olap"===this.parent.dataType?"":this.parent.localeObj.getConstant(g.aggregateType)+" "+this.parent.localeObj.getConstant("of")+" ")+g.caption;a.push(m);for(var f=void 0,v=0,S=this.dataSourceSettings.formatSettings;v<S.length;v++){var y=S[v];if(y.name===c.name){f=y;break}}var b=-1!==s.a.inArray(g.aggregateType,l)?"P2":f?null===f.format.toLowerCase().match(/n|p|c/)?"N":f.format:"olap"===this.parent.dataType?this.getFormat(g.formatString):"N",C="Polar"===this.chartSettings.chartSeries.type||"Radar"===this.chartSettings.chartSeries.type,x={};x=this.persistSettings.primaryYAxis?this.frameObjectWithKeys(this.persistSettings.primaryYAxis):x,x.labelFormat=x.labelFormat?x.labelFormat:n?"":C?"N":b,x.title="Combined"===this.chartSettings.multipleAxisMode?a.join(" - "):x.title?x.title:m,x.zoomFactor=i.i(o.isNullOrUndefined)(this.chartSettings.primaryYAxis.zoomFactor)?1:this.chartSettings.primaryYAxis.zoomFactor,x.edgeLabelPlacement=this.chartSettings.primaryYAxis.edgeLabelPlacement?this.chartSettings.primaryYAxis.edgeLabelPlacement:this.persistSettings.primaryYAxis.edgeLabelPlacement,"Bar"===this.chartSettings.chartSeries.type||"StackingBar"===this.chartSettings.chartSeries.type||"StackingBar100"===this.chartSettings.chartSeries.type?x.plotOffsetRight=x.plotOffsetRight?x.plotOffsetRight:30:x.plotOffsetTop=x.plotOffsetTop?x.plotOffsetTop:30,C||(x.name="Combined"===this.chartSettings.multipleAxisMode?this.measureList.join("_"):this.measuresNames[c.name]?this.measuresNames[c.name]:c.name),e=e.concat(x),"Combined"===this.chartSettings.multipleAxisMode&&(e=[e[e.length-1]]),"Stacked"===this.chartSettings.multipleAxisMode?(x.rowIndex=d,x.columnIndex=d,t.push({height:h}),r.push({width:h})):(x.rowIndex=0,x.columnIndex=0,t=[{height:"100%"}],r=[{width:"100%"}]),d++}else{for(var g=this.engineModule.fieldList[this.currentMeasure],m=("olap"===this.parent.dataType?"":this.parent.localeObj.getConstant(g.aggregateType)+" "+this.parent.localeObj.getConstant("of")+" ")+g.caption,f=void 0,w=0,T=this.dataSourceSettings.formatSettings;w<T.length;w++){var c=T[w];if(c.name===this.currentMeasure){f=c;break}}var M=void 0;f&&(M=f.format.length);var x={},b=-1!==s.a.inArray(g.aggregateType,l)?"P2":f?null===f.format.toLowerCase().match(/n[0-10]|p[0-10]|c[0-10]/)||M>3?"N":f.format:"olap"===this.parent.dataType?this.getFormat(g.formatString):"N";x=this.persistSettings.primaryYAxis?this.frameObjectWithKeys(this.persistSettings.primaryYAxis):x,x.zoomFactor=i.i(o.isNullOrUndefined)(this.chartSettings.primaryYAxis.zoomFactor)?1:this.chartSettings.primaryYAxis.zoomFactor,x.rowIndex=0,x.columnIndex=0,x.edgeLabelPlacement=this.chartSettings.primaryYAxis.edgeLabelPlacement?this.chartSettings.primaryYAxis.edgeLabelPlacement:this.persistSettings.primaryYAxis.edgeLabelPlacement,"Polar"!==this.chartSettings.chartSeries.type&&"Radar"!==this.chartSettings.chartSeries.type&&(x.name=this.measuresNames[this.currentMeasure]?this.measuresNames[this.currentMeasure]:this.currentMeasure),x.labelFormat=x.labelFormat?x.labelFormat:n?"":b,x.title=x.title?x.title:m,e=e.concat(x),t.push({height:"100%"}),r.push({width:"100%"})}return{axes:e,rows:t,columns:r}},e.prototype.getFormat=function(e){return e="Currency"===e?"C":"Percent"===e?"P":"N"},e.prototype.getColumnTotalIndex=function(e){for(var t={},r=Object.keys(e),a=0,n=r;a<n.length;a++){var s=n[a],l=e[Number(s)],d=void 0;if(!i.i(o.isNullOrUndefined)(l)){d=Object.keys(l);for(var h=0,p=d;h<p.length;h++){var u=p[h],c=l[Number(u)];if(!i.i(o.isNullOrUndefined)(c)){if("column"!==c.axis)return t;("sum"===c.type||0!==this.dataSourceSettings.columns.length&&"grand sum"===c.type)&&-1!==c.rowSpan&&(t[c.colIndex]=c.colIndex)}}}}return t},e.prototype.groupHierarchyWithLevels=function(e){var t,r;this.fieldPosition=[];var a={},n=0,s={};this.measurePos=this.engineModule.tupRowInfo[0].measurePosition;for(var l=0;l<e.length;l++){var d=e[l][0];d&&"row"===d.axis&&"grand sum"!==d.type&&(i.i(o.isNullOrUndefined)(a[d.hierarchy])?(3===d.memberType?n===this.measurePos?(this.fieldPosition[this.measurePos]=d.hierarchy,a[d.hierarchy]=(t={},t[d.levelUniqueName]=d.levelUniqueName,t)):n--:(this.fieldPosition[n]=d.hierarchy,a[d.hierarchy]=(r={},r[d.levelUniqueName]=d.levelUniqueName,r)),n++):a[d.hierarchy][d.levelUniqueName]=d.levelUniqueName)}for(var h=-1,p=0;p<this.fieldPosition.length;p++)this.measurePos!==p&&(s[this.fieldPosition[p]]={start:h+1,end:h+Object.keys(a[this.fieldPosition[p]]).length},h=s[this.fieldPosition[p]].end);return s},e.prototype.frameMultiLevelLabels=function(){for(var e=Object.keys(this.headerColl),t=this.headerColl[-.5],i=0,r=e;i<r.length;i++){for(var a=r[i],n=Number(a),o=this.headerColl[n],s=0,l=!1;s<=this.maxLevel;)l?o[s]||(o[s]={name:o[s-1].name,text:"",hasChild:o[s-1].hasChild,isDrilled:o[s-1].isDrilled,levelName:o[s-1].levelName,level:o[s-1].level,fieldName:o[s-1].fieldName,rowIndex:o[s-1].rowIndex,colIndex:o[s-1].colIndex,span:-1}):o[s]?l=!0:o[s]=t[s],s++;t=this.headerColl[n]}for(var d={},h=0,p=e;h<p.length;h++){for(var a=p[h],n=Number(a),o=this.headerColl[n],u=Object.keys(o),c=0,g=u;c<g.length;c++){var m=g[c],f=Number(m);if(d[f]){var v=d[f].length;o[f].levelName===t[f].levelName?d[f][v-1].end=d[f][v-1].end+1:d[f].push({start:n,end:n+1,text:o[f].text,type:-1===o[f].span?"WithoutTopandBottomBorder":"WithoutTopBorder",customAttributes:o[f]})}else d[f]=[{start:n,end:n+1,text:o[f].text,type:-1===o[f].span?"WithoutTopandBottomBorder":"WithoutTopBorder",customAttributes:o[f]}]}t=o}for(var S=Object.keys(d).length,y=[],b=S-1;b>-1;b--)y.push({categories:d[b],border:{width:1},overflow:"Trim"});return y},e.prototype.getZoomFactor=function(){this.calculatedWidth=this.getCalulatedWidth();var e=10*this.chartSeries.length>120?10*this.chartSeries.length:120,t=this.chartSeries.length>0?this.calculatedWidth/(Object.keys(this.chartSeries[0].dataSource).length*e):1;return t=t<1&&t>0?t:1},e.prototype.getCalulatedWidth=function(){return isNaN(Number(this.parent.width))?this.parent.width.indexOf("%")>-1?this.calculatedWidth=this.parent.element.clientWidth*(parseFloat(this.parent.width)/100):this.parent.width.indexOf("px")>-1?this.calculatedWidth=Number(this.parent.width.toString().split("px")[0]):this.calculatedWidth=this.parent.element.clientWidth:this.calculatedWidth=Number(this.parent.width),this.calculatedWidth},e.prototype.configTooltipSettings=function(){var e=this.persistSettings.tooltip?this.persistSettings.tooltip:this.chartSettings.tooltip;return e.enable=void 0===e.enable||e.enable,e.enable&&e.template&&(this.templateFn=this.parent.templateParser(e.template)),this.parent.tooltipTemplate&&(e.template=e.template?e.template:this.parent.tooltipTemplate),e.header=e.header?e.header:"",e.enableMarker=void 0===e.enableMarker||e.enableMarker,e},e.prototype.configLegendSettings=function(){var e={};if(this.chartSettings.legendSettings)for(var t=0,i=Object.keys(this.chartSettings.legendSettings);t<i.length;)e[i[t]]=this.chartSettings.legendSettings[i[t]],t++;return e.visible=!1!==e.visible,e.padding=e.padding?e.padding:25,e.shapePadding=e.shapePadding?e.shapePadding:10,e},e.prototype.configXAxis=function(){var e={};return e=this.persistSettings.primaryXAxis?this.frameObjectWithKeys(this.persistSettings.primaryXAxis):e,e.valueType="Category",e.labelIntersectAction=e.labelIntersectAction?e.labelIntersectAction:"Rotate45",e.title=e.title?e.title:this.dataSourceSettings.rows.map(function(e){return e.caption||e.name}).join(" / "),e.zoomFactor=i.i(o.isNullOrUndefined)(this.parent.chartSettings.primaryXAxis.zoomFactor)?this.getZoomFactor():this.parent.chartSettings.primaryXAxis.zoomFactor,this.parent.chartSettings.zoomSettings.enableScrollbar||(e.zoomFactor=1),this.chartSettings.showMultiLevelLabels&&"Pareto"!==this.chartSettings.chartSeries.type?(e.multiLevelLabels=this.frameMultiLevelLabels(),e.border={width:1,type:"WithoutTopandBottomBorder"},e.majorTickLines={width:0,height:-10}):(e.multiLevelLabels=[],e.border={width:1,type:"Rectangle"},e.majorTickLines={width:0,height:5}),e},e.prototype.configZoomSettings=function(){var e=this.chartSettings.zoomSettings;return e.enableSelectionZooming=void 0===e.enableSelectionZooming||e.enableSelectionZooming,e.enableScrollbar=void 0===e.enableScrollbar||e.enableScrollbar,e},e.prototype.tooltipRender=function(e){var t=this.chartSettings.enableMultipleAxis&&"Combined"===this.chartSettings.multipleAxisMode&&this.accumulationType.indexOf(this.chartSettings.chartSeries.type)<0&&"Radar"!==this.chartSettings.chartSeries.type&&"Polar"!==this.chartSettings.chartSeries.type?e.series.tooltipMappingName:e.series.yAxisName?e.series.yAxisName.split("_CumulativeAxis")[0]:this.chartSettings.enableMultipleAxis&&this.accumulationType.indexOf(this.chartSettings.chartSeries.type)<0&&"Pareto"!==this.chartSettings.chartSeries.type?e.series.name?e.series.name.split(" | ")[1]:e.data.seriesName?e.data.seriesName.split(" | ")[1]:this.currentMeasure:this.measuresNames[this.currentMeasure]?this.measuresNames[this.currentMeasure]:this.currentMeasure,a=e.series.dataSource?e.series.dataSource:this.parent.chart.series[e.data.seriesIndex].dataSource,n=a?a[e.data.pointIndex].rIndex:void 0,s=a?a[e.data.pointIndex].cIndex:void 0,l=this.engineModule.fieldList[this.measuresNames[t]?this.measuresNames[t]:t],d="olap"===this.parent.dataType?"":this.parent.localeObj.getConstant(l.aggregateType),h=("olap"===this.parent.dataType?"":d+" "+this.parent.localeObj.getConstant("of")+" ")+l.caption,p=this.engineModule.pivotValues[n][s].formattedText,u=this.engineModule.formatFields[l.id],c=this.engineModule.getFormattedValue(e.point.y,l.id,p),g=u&&u.format&&null!==u.format.toLowerCase().match(/n|p|c/)&&this.chartSettings.useGroupingSeparator?"olap"===this.parent.dataType?c.toString():c.formattedText:p,m=this.parent.pivotValues[n][s].columnHeaders,f=i.i(o.isNullOrUndefined)(m)?void 0:"olap"===this.parent.dataType?this.chartSeriesInfo[m.toString().split(/~~|::/).join(" - ")].uniqueName:this.chartSeriesInfo[m.toString().split(this.parent.dataSourceSettings.valueSortSettings.headerDelimiter).join(" - ")].uniqueName,v=e.point.x;if(this.parent.tooltipTemplate&&void 0!==this.parent.getTooltipTemplate()||this.chartSettings.tooltip.template){var S=a?this.parent.getHeaderField(n,s,"row"):"",y=a?this.parent.getHeaderField(n,s,"Column"):"",b={rowHeaders:v,columnHeaders:f,aggregateType:d,value:g,valueField:l.caption,rowFields:S,columnFields:y},C=void 0;C=this.parent.chartSettings&&this.parent.chartSettings.tooltip&&this.parent.chartSettings.tooltip.enable&&this.parent.chartSettings.tooltip.template?this.tooltipTemplateFn()(b,this,"tooltipTemplate",this.element.id+"1tooltipTemplate")[0].outerHTML:this.parent.getTooltipTemplate()(b,this,"tooltipTemplate",this.element.id+"tooltipTemplate")[0].outerHTML,e.template=C}else e.text=h+": "+g+(0===this.dataSourceSettings.columns.length?"":" <br/>"+this.parent.localeObj.getConstant("column")+": "+f)+(0===this.dataSourceSettings.rows.length?"":" <br/>"+this.parent.localeObj.getConstant("row")+": "+v),this.parent.trigger(r.P,e)},e.prototype.tooltipTemplateFn=function(){return this.templateFn},e.prototype.loaded=function(e){this.parent.isChartLoaded=!0;var t=this.parent.grid?this.parent.getGridWidthAsNumber().toString():this.parent.getWidthAsNumber().toString();if(this.parent.chart&&this.parent.showGroupingBar&&this.parent.groupingBarModule&&this.parent.showFieldList&&"Chart"===this.parent.currentView&&this.parent.groupingBarModule.alignIcon(),this.chartSettings.showMultiLevelLabels){var n=s.a.inArray(this.chartSettings.chartSeries.type,["Bar","StackingBar","StackingBar100"])>-1?"_chartYAxisMultiLevelLabel0":"_chartXAxisMultiLevelLabel0";i.i(o.isNullOrUndefined)(i.i(o.select)("#"+this.parent.element.id+n,this.parent.element))||this.parent.element.querySelector("#"+this.parent.element.id+n).setAttribute("cursor","pointer")}this.parent.chartSettings.enableScrollOnMultiAxis&&this.parent.chartSettings.enableMultipleAxis&&(["Pie","Funnel","Pyramid","Doughnut","Radar","Polar","Pareto"].indexOf(this.parent.chartSettings.chartSeries.type)>=0?this.parent.element.querySelector("."+a._10).style.overflow="visible":(this.parent.element.querySelector("."+a._10).style.overflow="auto",this.parent.element.querySelector("."+a._10).style.overflowX="hidden"),this.parent.element.querySelector("."+a._10).style.width=t+"px"),this.updateView(),this.parent.notify(r._21,{}),this.parent.trigger(r.R,e),("Server"===this.parent.dataSourceSettings.mode&&this.parent.isServerWaitingPopup||"Local"===this.parent.dataSourceSettings.mode)&&this.parent.hideWaitingPopup()},e.prototype.updateView=function(){if(this.parent.grid&&this.parent.chart&&this.parent.showToolbar)if("Table"===this.parent.currentView){if(this.parent.grid.element.style.display="",this.parent.chart.element.style.display="none",this.parent.showGroupingBar&&this.parent.groupingBarModule&&this.parent.element.querySelector(".e-pivot-grouping-bar")&&this.parent.element.querySelector(".e-chart-grouping-bar")){var e=this.parent.element.querySelector(".e-pivot-grouping-bar");e.style.display="",e&&e.querySelector("."+a._143)&&null!=this.parent.groupingBarModule.gridPanel&&!this.parent.groupingBarModule.gridPanel.isDestroyed&&this.parent.groupingBarModule.gridPanel.refreshOverflow(),this.parent.element.querySelector(".e-chart-grouping-bar").style.display="none"}this.parent.chartSettings.enableMultipleAxis&&this.parent.chartSettings.enableScrollOnMultiAxis&&(this.parent.element.querySelector(".e-pivotchart").style.display="none")}else{if(this.parent.grid.element.style.display="none",this.parent.chart.element.style.display="",this.parent.showGroupingBar&&this.parent.groupingBarModule&&this.parent.element.querySelector(".e-pivot-grouping-bar")&&this.parent.element.querySelector(".e-chart-grouping-bar")){this.parent.element.querySelector(".e-pivot-grouping-bar").style.display="none";var t=this.parent.element.querySelector(".e-chart-grouping-bar");t.style.display="",t&&t.querySelector("."+a._143)&&null!=this.parent.groupingBarModule.chartPanel&&!this.parent.groupingBarModule.chartPanel.isDestroyed&&this.parent.groupingBarModule.chartPanel.refreshOverflow()}this.parent.chartSettings.enableMultipleAxis&&this.parent.chartSettings.enableScrollOnMultiAxis&&(this.parent.element.querySelector(".e-pivotchart").style.display="")}},e.prototype.creatMenu=function(){this.accumulationMenu&&!this.accumulationMenu.isDestroyed&&this.accumulationMenu.destroy();for(var e=(this.parent.allowDrillThrough||this.parent.editSettings.allowEditing)&&this.parent.drillThroughModule?["expand","collapse","drillThrough","exit"]:["expand","collapse","exit"],t=[],r=0;r<e.length;r++)t.push({id:this.parent.element.id+"_DrillMenuChart_"+e[r],text:this.parent.localeObj.getConstant(e[r]),items:[]});for(var a=this.getMenuItems(),n=[],s=[],r=0;r<a.length;r++)"expand"===a[r].type?n.push({id:this.element.id+"drillExpand_"+a[r].key,text:a[r].value}):s.push({id:this.element.id+"drillCollapse_"+a[r].key,text:a[r].value});n.length>0&&(t[0].items=n),s.length>0&&(t[1].items=s);var d={cssClass:this.parent.element.id+"_accumulationChart"+(this.parent.cssClass?" "+this.parent.cssClass:""),items:t,enableRtl:this.parent.enableRtl,beforeOpen:this.drillMenuOpen.bind(this),select:this.drillMenuSelect.bind(this),locale:this.parent.locale};this.accumulationMenu=new l.ContextMenu(d);var h;i.i(o.select)("#"+this.parent.element.id+"_accumulationChart",this.parent.element)?(h=i.i(o.select)("#"+this.parent.element.id+"_accumulationChart",this.parent.element),h.innerHTML=""):(h=i.i(o.createElement)("ul",{id:this.parent.element.id+"_accumulationChart"}),this.parent.element.appendChild(h)),this.accumulationMenu.isStringTemplate=!0,this.accumulationMenu.appendTo(h)},e.prototype.drillMenuOpen=function(e){e.items[0]&&e.items[0].text===this.parent.localeObj.getConstant("expand")&&e.items[0].items&&0===e.items[0].items.length&&this.accumulationMenu.enableItems([this.parent.localeObj.getConstant("expand")],!1),e.items[1]&&e.items[1].text===this.parent.localeObj.getConstant("collapse")&&e.items[1].items&&0===e.items[1].items.length&&this.accumulationMenu.enableItems([this.parent.localeObj.getConstant("collapse")],!1)},e.prototype.getMenuItems=function(){for(var e=this.pivotIndex.rIndex,t=[],i=this.engineModule.pivotValues,r=[],a=i[e][this.pivotIndex.cIndex],n=!i[e][0].isNamedSet&&i[e][0].hasChild?i[e][0].level:void 0,o="olap"===this.parent.dataType?a.rowHeaders.toString().split(/~~|::/):a.rowHeaders.toString().split(this.engineModule.valueSortSettings.headerDelimiter);i[e][0];){if(a=i[e][0],0!==o.length&&o.indexOf(a.formattedText.toString())===o.length-1){a.hasChild&&!a.isNamedSet&&r.indexOf(a.level)<0&&(n?n>=a.level:0!==n||0===a.level)&&(a.isDrilled&&a.hasChild?t.push({key:e,type:"collapse",value:a.formattedText}):t.push({key:e,type:"expand",value:a.formattedText}),r.push(a.level),n=n?n-1:a.level-1);var s=o.indexOf(a.formattedText.toString());o.splice(s,1)}0===a.level&&a.hasChild&&!a.isNamedSet&&(n=void 0,r=[]),e--}return t},e.prototype.drillMenuSelect=function(e){var t="olap"===this.parent.dataType?this.parent.olapEngineModule.pivotValues:this.parent.engineModule.pivotValues,i=e.element.id.split("_DrillMenuChart_")[1];if(0===e.element.id.indexOf(this.element.id+"drill")){var r=e.element.id.split(this.element.id+"drill")[1].indexOf("Expand")>=0?"drillExpand":"drillCollapse",a=Number(e.element.id.split(this.element.id+r+"_")[1]),n=t[a][0],o="olap"===this.parent.dataType?n.formattedText:n.actualText?n.actualText.toString():n.formattedText.toString(),s=n.formattedText?n.formattedText.toString():o,l=n.hasChild&&!n.isNamedSet?(n.isDrilled?" - ":" + ")+s:s,d="olap"===this.parent.dataType?this.engineModule.tupRowInfo[n.ordinal]:void 0,h=d?d.uNameCollection:n.valueSort.levelName.toString(),p={fieldName:n.valueSort.axis,level:n.level,hasChild:n.hasChild,levelName:h,name:o,text:l,rowIndex:a,colIndex:0,isDrilled:n.isDrilled,cell:n};"olap"===this.parent.dataType?this.parent.onDrill(void 0,p):this.onDrill({customAttributes:p})}else"drillThrough"===i?this.parent.drillThroughModule.executeDrillThrough(t[this.pivotIndex.rIndex][this.pivotIndex.cIndex],this.pivotIndex.rIndex,this.pivotIndex.rIndex):"exit"===i&&this.accumulationMenu.close()},e.prototype.getChartHeight=function(){var e,t;if(i.i(o.isNullOrUndefined)(this.parent.getHeightAsNumber()))e="auto";else{var r=this.parent.showToolbar?6:5;e=(this.parent.getHeightAsNumber()-r).toString(),t=this.parent.getHeightAsNumber()-r}if(i.i(o.isNullOrUndefined)(this.parent.getHeightAsNumber()))e="auto";else{var a=!1;null!==this.parent.element.querySelector(".e-chart-grouping-bar")&&"none"===this.parent.element.querySelector(".e-chart-grouping-bar").style.display.toLowerCase()&&(a=!0,this.parent.element.querySelector(".e-chart-grouping-bar").style.display="block"),this.parent.showToolbar&&this.parent.showGroupingBar?e=(t-(this.parent.element.querySelector(".e-pivot-toolbar")?this.parent.element.querySelector(".e-pivot-toolbar").clientHeight:42)-(this.parent.element.querySelector(".e-chart-grouping-bar")?this.parent.element.querySelector(".e-chart-grouping-bar").clientHeight:62)).toString():this.parent.showToolbar?e=(t-(this.parent.element.querySelector(".e-pivot-toolbar")?this.parent.element.querySelector(".e-pivot-toolbar").clientHeight:42)).toString():this.parent.showGroupingBar?e=(t-(this.parent.element.querySelector(".e-chart-grouping-bar")?this.parent.element.querySelector(".e-chart-grouping-bar").clientHeight:62)).toString():(this.parent.chart&&parseInt(this.parent.chart.height,10)<200||t<200)&&(e="200"),a&&(this.parent.element.querySelector(".e-chart-grouping-bar").style.display="none")}return e},e.prototype.getChartAutoHeight=function(){var e=this.parent.element.offsetHeight<this.parent.minHeight?this.parent.minHeight:this.parent.element.offsetHeight;return this.parent.showToolbar&&this.parent.showGroupingBar?e=e-(this.parent.element.querySelector(".e-pivot-toolbar")?this.parent.element.querySelector(".e-pivot-toolbar").clientHeight:42)-(this.parent.element.querySelector(".e-chart-grouping-bar")?this.parent.element.querySelector(".e-chart-grouping-bar").clientHeight:62):this.parent.showToolbar?e-=this.parent.element.querySelector(".e-pivot-toolbar")?this.parent.element.querySelector(".e-pivot-toolbar").clientHeight:42:this.parent.showGroupingBar&&(e-=this.parent.element.querySelector(".e-chart-grouping-bar")?this.parent.element.querySelector(".e-chart-grouping-bar").clientHeight:62),e},e.prototype.axisLabelRender=function(e){if(this.chartSettings.showMultiLevelLabels&&"Pareto"!==this.chartSettings.chartSeries.type&&"primaryXAxis"===e.axis.name&&(e.text=""),"primaryXAxis"!==e.axis.name){var t=this.engineModule.formatFields[this.chartSettings.enableMultipleAxis&&"Combined"===this.chartSettings.multipleAxisMode?this.currentMeasure:e.axis.name],i=this.engineModule.getFormattedValue(e.value,this.chartSettings.enableMultipleAxis&&"Combined"===this.chartSettings.multipleAxisMode?this.currentMeasure:e.axis.name,e.text),a=t&&t.format&&null!==t.format.toLowerCase().match(/n|p|c/)&&this.chartSettings.useGroupingSeparator?"olap"===this.parent.dataType?i.toString():i.formattedText:e.value.toString();e.text=a}this.parent.trigger(r.U,e)},e.prototype.multiLevelLabelClick=function(e){var t={axis:e.axis,text:e.text,cell:i.i(o.isNullOrUndefined)(e.customAttributes)?void 0:e.customAttributes.cell,cancel:!1};this.parent.trigger(r.G,t),!t.cancel&&e.customAttributes&&e.customAttributes.hasChild&&!e.customAttributes.cell.isNamedSet&&("olap"===this.parent.dataType?this.parent.onDrill(void 0,e.customAttributes):this.onDrill(e))},e.prototype.onDrill=function(e){var t=e.customAttributes,i=this.dataSourceSettings.drilledMembers[0]&&this.dataSourceSettings.drilledMembers[0].delimiter?this.dataSourceSettings.drilledMembers[0].delimiter:"**",a=t.fieldName,n=this.engineModule.pivotValues[t.rowIndex][t.colIndex],o=n.valueSort.levelName.split(this.engineModule.valueSortSettings.headerDelimiter).join(i),l=!1;if(0===this.dataSourceSettings.drilledMembers.length)this.parent.setProperties({dataSourceSettings:{drilledMembers:[{name:a,items:[o],delimiter:i}]}},!0);else{for(var d=0;d<this.dataSourceSettings.drilledMembers.length;d++){var h=this.dataSourceSettings.drilledMembers[d];if(o=o.split(i).join(h.delimiter?h.delimiter:i),i=h.delimiter=h.delimiter?h.delimiter:i,h.name===a){l=!0;var p=h.items.indexOf(o);p>-1?h.items.splice(p,1):h.items.push(o)}}l||this.dataSourceSettings.drilledMembers.push({name:a,items:[o],delimiter:i})}this.parent.showWaitingPopup();var u=this,c={fieldName:a,memberName:o,delimiter:i,axis:"row",action:t.isDrilled?"up":"down",currentCell:n},g={drillInfo:c,pivotview:u.parent};u.parent.trigger(r.z,g);var m={dataSourceSettings:s.a.getClonedDataSourceSettings(this.parent.dataSourceSettings)};this.parent.trigger(r.b,m),this.parent.setProperties({dataSourceSettings:m.dataSourceSettings},!0),u.parent.enableVirtualization||u.parent.enablePaging?"Server"===u.parent.dataSourceSettings.mode?u.parent.getEngine("onDrill",c,null,null,null,null,null):(u.engineModule.drilledMembers=u.dataSourceSettings.drilledMembers,u.engineModule.onDrill(c)):"Server"===u.parent.dataSourceSettings.mode?u.parent.getEngine("onDrill",c,null,null,null,null,null):u.engineModule.generateGridData(u.dataSourceSettings,!0),u.parent.allowServerDataBinding=!1,u.parent.setProperties({pivotValues:u.engineModule.pivotValues},!0),delete u.parent.bulkChanges.pivotValues,u.parent.allowServerDataBinding=!0;var f={dataSourceSettings:s.a.getClonedDataSourceSettings(this.parent.dataSourceSettings),pivotValues:this.parent.pivotValues};this.parent.trigger(r.c,f),u.engineModule.pivotValues=f.pivotValues,u.parent.renderPivotGrid()},e.prototype.isAttributeDrill=function(e,t){for(var i=!1,r=0;r<this.dataSourceSettings.drilledMembers.length;r++)if(this.dataSourceSettings.drilledMembers[r].name===e)for(var a=0;a<this.dataSourceSettings.drilledMembers[r].items.length;a++){for(var n=this.dataSourceSettings.drilledMembers[r].items[a].split(this.dataSourceSettings.drilledMembers[r].delimiter),o="",s=0;s<n.length;s++)t[s]&&t[s].uName&&(o=o+(""===o?"":this.dataSourceSettings.drilledMembers[r].delimiter)+(t[s].uName.indexOf("[Measures]")>-1?"[Measures]":t[s].uName));if(o===this.dataSourceSettings.drilledMembers[r].items[a]){i=!0;break}}return i},e.prototype.load=function(e){e.chart.zoomModule&&(e.chart.zoomModule.isZoomed=!0),this.parent.trigger(r.S,e)},e.prototype.resized=function(e){this.accumulationType.indexOf(this.chartSettings.chartSeries.type)<0&&(e.chart.primaryXAxis.zoomFactor=i.i(o.isNullOrUndefined)(this.parent.chartSettings.primaryXAxis.zoomFactor)?this.getZoomFactor():this.parent.chartSettings.primaryXAxis.zoomFactor,this.parent.chartSettings.zoomSettings.enableScrollbar||(e.chart.primaryXAxis.zoomFactor=i.i(o.isNullOrUndefined)(this.parent.chartSettings.primaryXAxis.zoomFactor)?1:this.parent.chartSettings.primaryXAxis.zoomFactor)),this.parent.trigger(r.T,e)},e.prototype.getResizedChartHeight=function(){return["Pie","Funnel","Pyramid","Doughnut","Radar","Polar","Pareto"].indexOf(this.parent.chartSettings.chartSeries.type)<0&&this.parent.chartSettings.enableScrollOnMultiAxis&&this.parent.chartSettings.enableMultipleAxis&&this.parent.dataSourceSettings.values.length>0?Number(this.parent.chart.height)>235*this.parent.dataSourceSettings.values.length+100?isNaN(Number(this.getChartHeight()))?this.getChartHeight().toString():(Number(this.getChartHeight())-5).toString():!isNaN(Number(this.getChartHeight()))||this.parent.dataSourceSettings.values.length>1?(235*this.parent.dataSourceSettings.values.length+100).toString():this.getChartHeight().toString():this.getChartHeight().toString()},e.prototype.destroy=function(){this.parent&&this.parent.isDestroyed||(this.engineModule&&!this.parent.destroyEngine&&(this.engineModule.fieldList={},this.engineModule={}),this.chartSeries&&(this.chartSeries=null),this.columnGroupObject&&(this.columnGroupObject=null),this.chartSeriesInfo&&(this.chartSeriesInfo={},this.selectedLegend=null),this.chartSettings&&(this.chartSettings=null),this.dataSourceSettings&&(this.dataSourceSettings=null),this.accumulationMenu&&!this.accumulationMenu.isDestroyed&&(this.accumulationMenu.destroy(),this.accumulationMenu=null),this.parent&&this.parent.chart&&!this.parent.chart.isDestroyed&&(this.parent.chart.destroy(),this.parent.chart=null))},e}())},function(e,t,i){"use strict";var r=i(20);i.d(t,"a",function(){return r.a})},function(e,t,i){"use strict";var r=i(37);i.d(t,"a",function(){return r.a});var a=i(21);i.d(t,"b",function(){return a.a});var n=i(35);i.d(t,"c",function(){return n.a});var o=i(36);i.d(t,"d",function(){return o.a})},function(e,t,i){"use strict";i.d(t,"a",function(){return s});var r=i(36),a=i(37),n=i(35),o=i(21),s=function(){function e(e){this.parent=e,this.parent.dialogRenderer=new r.a(this.parent),this.parent.treeViewModule=new a.a(this.parent),this.parent.axisTableModule=new n.a(this.parent),this.parent.axisFieldModule=new o.a(this.parent)}return e.prototype.render=function(){this.parent.dialogRenderer.render(),this.parent.isAdaptive||this.parent.treeViewModule.render(),this.parent.axisTableModule.render()},e}()},function(e,t,i){"use strict";var r=i(63);i.d(t,"a",function(){return r.a});var a=i(65);i.d(t,"b",function(){return a.a});var n=i(39);i.d(t,"c",function(){return n.a});var o=i(40);i.d(t,"d",function(){return o.a});var s=i(38);i.d(t,"e",function(){return s.a});var l=i(64);i.d(t,"f",function(){return l.a})},function(e,t,i){"use strict";i.d(t,"a",function(){return s});var r=i(71),a=(i.n(r),i(1)),n=i(0),o=(i.n(n),i(15)),s=function(){function e(e){this.actualrCnt=0,this.parent=e}return e.prototype.getModuleName=function(){return"excelExport"},e.prototype.addHeaderAndFooter=function(e,t,r,a){var o=[];if(i.i(n.isNullOrUndefined)(e.rows))""!==t&&("footer"===r&&this.actualrCnt++,o.push({index:1,value:t}),this.rows.push({index:this.actualrCnt+1,cells:o}),this.actualrCnt="header"===r?this.actualrCnt+2:this.actualrCnt);else{this.actualrCnt="footer"===r?this.actualrCnt+a-e.rows[0].cells.length:this.actualrCnt;for(var s=e.rows,l=0;l<s.length;l++){var d=0;o=[];for(var h=s[l],p=0;p<h.cells.length;p++)o.push({index:d+1,value:h.cells[p].value,colSpan:h.cells[p].colSpan,rowSpan:h.cells[p].rowSpan,style:h.cells[p].style}),d+=o[p].colSpan;this.actualrCnt++,this.rows.push({index:this.actualrCnt,cells:o})}this.actualrCnt="header"===r?a:this.actualrCnt}},e.prototype.exportToExcel=function(e,t,s){this.rows=[],this.actualrCnt=0;var l=!i.i(n.isNullOrUndefined)(t)&&!i.i(n.isNullOrUndefined)(t.header),d=!i.i(n.isNullOrUndefined)(t)&&!i.i(n.isNullOrUndefined)(t.footer),h=!i.i(n.isNullOrUndefined)(t)&&!i.i(n.isNullOrUndefined)(t.fileName);this.engine="olap"===this.parent.dataType?this.parent.olapEngineModule:this.parent.engineModule;var p,u=o.a.getClonedPivotValues(this.engine.pivotValues),c=h?t.fileName:"default.xlsx";if(this.parent.exportAllPages&&(this.parent.enableVirtualization||this.parent.enablePaging)&&"olap"!==this.parent.dataType){var g=this.engine.pageSettings;this.engine.pageSettings=null,this.engine.isPagingOrVirtualizationEnabled=!1,this.engine.generateGridData(this.parent.dataSourceSettings,!0),this.parent.applyFormatting(this.engine.pivotValues),p=o.a.getClonedPivotValues(this.engine.pivotValues),this.engine.pivotValues=u,this.engine.pageSettings=g,this.engine.isPagingOrVirtualizationEnabled=!0}else p=u;var m,f,v,S,y={fileName:c,header:"",footer:"",dataCollections:[p],excelExportProperties:t};this.parent.trigger(a.h,y,function(e){m=e.fileName,f=e.header,v=e.footer,S=e.dataCollections}),!l&&i.i(n.isNullOrUndefined)(y.excelExportProperties)&&""!==f?this.addHeaderAndFooter({},f,"header",void 0):i.i(n.isNullOrUndefined)(y.excelExportProperties)||i.i(n.isNullOrUndefined)(y.excelExportProperties.header)||this.addHeaderAndFooter(y.excelExportProperties.header,"","header",y.excelExportProperties.header.headerRows);for(var b=[],C=0;C<S.length;C++){for(var x=S[C],w=0,T=x.length,M=this.parent.renderModule.getFormatList(),_=0,D=0;D<T;D++)if(x[D]){this.actualrCnt++,w=x[D].length;for(var O=[],P=0;P<w;P++)if(x[D][P]){var E=x[D][P];E&&"value"===E.axis&&""===E.formattedText&&(E.value=E.formattedText);var N="row"===this.parent.dataSourceSettings.valueAxis&&"olap"===this.parent.dataType&&E.rowOrdinal&&this.engine.tupRowInfo[E.rowOrdinal]?this.engine.tupRowInfo[E.rowOrdinal].measureName:E.actualText,F="row"===E.axis?{hAlign:"Left",bold:!0,wrapText:!0}:{numberFormat:M[N],bold:!1,wrapText:!0},I={bold:!0,vAlign:"Center",wrapText:!0,indent:0===P?10*E.level:0};if(-1!==E.level||E.rowSpan){var L=this.engine.aggregatedValueMatrix,A="value"===E.axis?L[D]&&L[D][P]?L[D][P]:"#DIV/0!"===E.formattedText?E.formattedText:E.value:E.formattedText,R=0===this.parent.dataSourceSettings.rows.length&&"row"===this.parent.dataSourceSettings.valueAxis||0===this.parent.dataSourceSettings.columns.length&&"column"===this.parent.dataSourceSettings.valueAxis;if(A="grand sum"!==E.type||1===this.parent.dataSourceSettings.values.length&&"row"===this.parent.dataSourceSettings.valueAxis&&"column"===E.axis?"sum"===E.type?A.toString().replace("Total",this.parent.localeObj.getConstant("total")):!i.i(n.isNullOrUndefined)(E.valueSort)&&this.parent.localeObj.getConstant("grandTotal")+this.parent.dataSourceSettings.valueSortSettings.headerDelimiter+E.formattedText===E.valueSort.levelName&&R?this.parent.getValuesHeader(E,"value"):A:R?this.parent.getValuesHeader(E,"grandTotal"):this.parent.localeObj.getConstant("grandTotal"),-1!==E.level||E.rowSpan){O.push({index:P+1,value:A,colSpan:E.colSpan,rowSpan:-1===E.rowSpan?1:E.rowSpan});var k=O[O.length-1];if("value"===E.axis)(isNaN(E.value)||""===E.formattedText||void 0===E.formattedText||i.i(n.isNullOrUndefined)(E.value))&&(k.value="Excel"===e?null:""),F.numberFormat="string"==typeof A?void 0:F.numberFormat,k.style=i.i(n.isNullOrUndefined)(k.value)?{bold:!1,wrapText:!0}:F;else if(k.style=I,"row"===E.axis&&0===P)if(k.style=F,"olap"===this.parent.dataType){var j=this.parent.renderModule.indentCollection[D];k.style.indent=2*j,_=_>j?_:j}else{var H=E.valueSort?E.valueSort.levelName.toString():"",q=E.actualText?E.actualText.toString().split(this.parent.dataSourceSettings.valueSortSettings.headerDelimiter).length:0,V=H.split(this.parent.dataSourceSettings.valueSortSettings.headerDelimiter).length-(q?q-1:q),B=V?V-1:0;k.style.indent=2*B,_=B>_?B:_}(E.style||k.style.backColor||k.style.backgroundColor||k.style.fontColor||k.style.fontName||k.style.fontSize)&&(k.style.backColor=k.style.backgroundColor?k.style.backgroundColor:E.style.backgroundColor,k.style.fontColor=k.style.fontColor?k.style.fontColor:E.style.color,k.style.fontName=k.style.fontName?k.style.fontName:E.style.fontFamily,k.style.fontSize=k.style.fontSize?Number(k.style.fontSize):Number(E.style.fontSize.split("px")[0])),k.style.borders={color:"#000000",lineStyle:"Thin"};var U=void 0,G=void 0;"column"===E.axis?(U={style:I,cell:E},this.parent.trigger(a.j,U)):(G={style:F,cell:E,column:void 0,data:x,value:A},this.parent.trigger(a.l,G)),k.value="column"===E.axis?U.cell.formattedText:G.value,k.style="column"===E.axis?U.style:G.style}}P+=E.colSpan?E.colSpan-1:0}else{var E={formattedText:""},U=void 0;E&&(U={style:void 0,cell:E},this.parent.trigger(a.j,U)),O.push({index:P+1,colSpan:1,rowSpan:1,value:E.formattedText,style:U.style})}this.rows.push({index:this.actualrCnt,cells:O})}d?this.addHeaderAndFooter(t.footer,"","footer",t.footer.footerRows):!d&&""!==v&&i.i(n.isNullOrUndefined)(y.excelExportProperties)?this.addHeaderAndFooter({},v,"footer",void 0):i.i(n.isNullOrUndefined)(y.excelExportProperties)||i.i(n.isNullOrUndefined)(y.excelExportProperties.footer)||this.addHeaderAndFooter(y.excelExportProperties.footer,"","footer",y.excelExportProperties.footer.footerRows);for(var z=[],P=0;P<w;P++)z.push({index:P+1,width:100});_>0&&(z[0].width=100+20*_),b.push({columns:z,rows:this.rows})}this.book=new r.Workbook({worksheets:b},"Excel"===e?"xlsx":"csv",void 0,this.parent.currencyCode);var W=m.split(".").pop();s?this.blobData=this.book.saveAsBlob("xlsx"===W||"Excel"===e?"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":"text/csv"):this.book.save("xlsx"===W||"csv"===W?m:m+("Excel"===e?".xlsx":".csv"));var Q={type:e,promise:s?this.blobData:null};this.parent.trigger(a.i,Q)},e.prototype.destroy=function(){this.engine&&(this.engine=null),this.blobData&&(this.blobData=null),this.book&&(this.book=null)},e}()},function(e,t,i){"use strict";i.d(t,"a",function(){return d});var r=i(2),a=i(1),n=i(0),o=(i.n(n),i(8)),s=(i.n(o),i(7)),l=(i.n(s),i(9)),d=(i.n(l),function(){function e(e){this.parent=e,this.parent.pagerModule=this,this.addEventListener()}return e.prototype.getModuleName=function(){return"pager"},e.prototype.addEventListener=function(){this.parent.isDestroyed||this.parent.on(a._29,this.createPager,this)},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(i.i(n.isNullOrUndefined)(this.parent.pagerSettings.template)&&this.unWireEvent(),this.parent.off(a._29,this.createPager))},e.prototype.createPager=function(){null!==i.i(n.select)("#"+this.parent.element.id+"pivot-pager",this.parent.element)&&(i.i(n.remove)(i.i(n.select)("#"+this.parent.element.id+"pivot-pager",this.parent.element)),this.destroy(),this.addEventListener());var e=this.parent.grid?this.parent.getGridWidthAsNumber():this.parent.getWidthAsNumber(),t=this.parent.pagerSettings;if(this.parent.enablePaging){var a=i.i(n.createElement)("div",{id:this.parent.element.id+"pivot-pager",className:r._219+" "+(this.parent.isAdaptive||e<650?r._168:"")+" "+(this.parent.enableRtl?r._30:"")+" "+("Top"===this.parent.pagerSettings.position?" "+r._220:" "+r._221)+" "+(t.enableCompactView||e<400?r._222:""),styles:"width:"+(this.parent.grid?this.parent.getGridWidthAsNumber():this.parent.getWidthAsNumber())+"px"});this.parent.showFieldList&&i.i(n.select)("#"+this.parent.element.id+"_PivotFieldList",this.parent.element)&&"Top"===t.position?this.parent.element.insertBefore(a,i.i(n.select)("#"+this.parent.element.id+"_PivotFieldList",this.parent.element)):this.parent.showGroupingBar&&i.i(n.select)("#"+this.parent.element.id+" ."+r._133,this.parent.element)&&"Top"===t.position?this.parent.element.insertBefore(a,i.i(n.select)("#"+this.parent.element.id+" ."+r._133,this.parent.element)):"Top"===this.parent.pagerSettings.position?this.parent.element.insertBefore(a,i.i(n.select)("#"+this.parent.element.id+"_grid",this.parent.element)):this.parent.element.append(a);var d=this,h=function(){return d.createPagerContainer()};if(this.pager=new o.Pager({enableRtl:this.parent.enableRtl,locale:this.parent.locale,template:""===t.template||t.template?t.template:i.i(n.initializeCSPTemplate)(h),cssClass:this.parent.cssClass}),this.pager.isVue=this.parent.isVue,this.pager.appendTo("#"+this.parent.element.id+"pivot-pager"),i.i(n.isNullOrUndefined)(t.template)){if(t.showRowPager&&(!t.enableCompactView&&e>400&&(this.rowPagerTextBox=new l.NumericTextBox({min:1,max:this.parent.engineModule.rowPageCount,showSpinButton:!1,format:"#",validateDecimalOnType:!0,decimals:0,strictMode:!0,value:this.parent.pageSettings.currentRowPage,enableRtl:this.parent.enableRtl,locale:this.parent.locale,width:e<669?"50px":"64px",change:this.rowPageChange.bind(this),cssClass:this.parent.cssClass}),this.rowPagerTextBox.appendTo("#"+this.parent.element.id+"_row_textbox")),t.showRowPageSize)){var p=this.parent.pagerSettings.rowPageSizes.slice(0);-1===this.parent.pagerSettings.rowPageSizes.indexOf(this.parent.pageSettings.rowPageSize)&&(p.push(this.parent.pageSettings.rowPageSize),p.sort(function(e,t){return e-t})),this.rowPageSizeDropDown=new s.DropDownList({dataSource:p,value:this.parent.pageSettings.rowPageSize,enableRtl:this.parent.enableRtl,locale:this.parent.locale,change:this.rowPageSizeChange.bind(this),popupHeight:"300px",popupWidth:"100%",width:"64px",cssClass:this.parent.cssClass}),this.rowPageSizeDropDown.appendTo("#"+this.parent.element.id+"_row_size_list")}if(t.showColumnPager&&(!t.enableCompactView&&e>400&&(this.columnPagerTextBox=new l.NumericTextBox({min:1,max:this.parent.engineModule.columnPageCount,showSpinButton:!1,format:"#",validateDecimalOnType:!0,decimals:0,strictMode:!0,value:this.parent.pageSettings.currentColumnPage,enableRtl:this.parent.enableRtl,locale:this.parent.locale,width:e<669?"50px":"64px",change:this.columnPageChange.bind(this),cssClass:this.parent.cssClass}),this.columnPagerTextBox.appendTo("#"+this.parent.element.id+"_column_textbox")),t.showColumnPageSize)){var u=this.parent.pagerSettings.columnPageSizes.slice(0);-1===this.parent.pagerSettings.columnPageSizes.indexOf(this.parent.pageSettings.columnPageSize)&&(u.push(this.parent.pageSettings.columnPageSize),u.sort(function(e,t){return e-t})),this.columnPageSizeDropDown=new s.DropDownList({dataSource:u,value:this.parent.pageSettings.columnPageSize,enableRtl:this.parent.enableRtl,locale:this.parent.locale,change:this.columnPageSizeChange.bind(this),popupHeight:"300px",popupWidth:"100%",width:"64px",cssClass:this.parent.cssClass}),this.columnPageSizeDropDown.appendTo("#"+this.parent.element.id+"_column_size_list")}this.unWireEvent(),this.wireEvent()}}},e.prototype.wireEvent=function(){for(var e=[].slice.call(this.parent.element.querySelectorAll("."+r._223+", ."+r._224+", ."+r._225+", ."+r._226)),t=0;t<e.length;t++)n.EventHandler.add(e[t],"click",this.updatePageSettings,this)},e.prototype.unWireEvent=function(){for(var e=[].slice.call(this.parent.element.querySelectorAll("."+r._223+", ."+r._224+", ."+r._225+", ."+r._226)),t=0;t<e.length;t++)n.EventHandler.remove(e[t],"click",this.updatePageSettings)},e.prototype.columnPageChange=function(e){this.parent.pageSettings.currentColumnPage=e.value},e.prototype.rowPageChange=function(e){this.parent.pageSettings.currentRowPage=e.value},e.prototype.columnPageSizeChange=function(e){this.parent.pageSettings.columnPageSize=Number(e.value)},e.prototype.rowPageSizeChange=function(e){this.parent.pageSettings.rowPageSize=Number(e.value)},e.prototype.updatePageSettings=function(e){var t=e.target.id;switch(t){case this.parent.element.id+"_row_firstIcon":this.parent.pageSettings.currentRowPage=1;break;case this.parent.element.id+"_row_prevIcon":this.parent.pageSettings.currentRowPage=this.parent.pageSettings.currentRowPage>1?this.parent.pageSettings.currentRowPage-1:this.parent.pageSettings.currentRowPage;break;case this.parent.element.id+"_row_nextIcon":this.parent.pageSettings.currentRowPage=this.parent.pageSettings.currentRowPage<this.parent.engineModule.rowPageCount?this.parent.pageSettings.currentRowPage+1:this.parent.pageSettings.currentRowPage;break;case this.parent.element.id+"_row_lastIcon":this.parent.pageSettings.currentRowPage=this.parent.engineModule.rowPageCount;break;case this.parent.element.id+"_column_firstIcon":this.parent.pageSettings.currentColumnPage=1;break;case this.parent.element.id+"_column_prevIcon":this.parent.pageSettings.currentColumnPage=this.parent.pageSettings.currentColumnPage>1?this.parent.pageSettings.currentColumnPage-1:this.parent.pageSettings.currentColumnPage;break;case this.parent.element.id+"_column_nextIcon":this.parent.pageSettings.currentColumnPage=this.parent.pageSettings.currentColumnPage<this.parent.engineModule.columnPageCount?this.parent.pageSettings.currentColumnPage+1:this.parent.pageSettings.currentColumnPage;break;case this.parent.element.id+"_column_lastIcon":this.parent.pageSettings.currentColumnPage=this.parent.engineModule.columnPageCount}-1!==t.indexOf("_row")?this.parent.actionObj.actionName=a._79:-1!==t.indexOf("_column")&&(this.parent.actionObj.actionName=a._80)},e.prototype.createPagerContainer=function(){var e,t,a=this.parent.grid?this.parent.getGridWidthAsNumber():this.parent.getWidthAsNumber(),o=this.parent.pagerSettings;o.showRowPager&&(e=this.createPagerItems("row",o,a)),o.showColumnPager&&(t=this.createPagerItems("column",o,a));var s=i.i(n.createElement)("div",{id:this.parent.element.id+"_mainDiv",className:r._227+" "+(o.showRowPager&&o.showColumnPager?"":r._228)+" "+(o.isInversed?r._229:"")}),l=i.i(n.createElement)("div",{id:this.parent.element.id+"_vertical_separator",className:this.parent.isAdaptive||a<650?r._230:r._231});return o.isInversed&&o.showColumnPager&&o.showRowPager?s.append(t,l,e):o.showColumnPager&&o.showRowPager?s.append(e,l,t):o.showRowPager&&!o.showColumnPager?s.append(e):!o.showRowPager&&o.showColumnPager&&s.append(t),s.outerHTML},e.prototype.createPagerItems=function(e,t,a){var o=!t.showRowPager||!t.showColumnPager,s=i.i(n.createElement)("div",{id:this.parent.element.id+"_"+e+"_mainDiv",className:"row"===e?r._232+" "+(t.showRowPageSize?"":r._233):r._234+" "+(t.showColumnPageSize?"":r._233)}),l=i.i(n.createElement)("div",{id:this.parent.element.id+"_"+e+"_pagerSettings",className:"row"===e?r._235:r._236}),d="column"===e&&1===this.parent.pageSettings.currentColumnPage||"row"===e&&1===this.parent.pageSettings.currentRowPage,h="column"===e&&this.parent.pageSettings.currentColumnPage===this.parent.engineModule.columnPageCount||"row"===e&&this.parent.pageSettings.currentRowPage===this.parent.engineModule.rowPageCount,p=i.i(n.createElement)("div",{id:this.parent.element.id+"_"+e+"_NavContainer",attrs:{class:r._237+" "+r._238}}),u=i.i(n.createElement)("div",{id:this.parent.element.id+"_"+e+"_PageInfoContainer",attrs:{class:r._239+" "+r._238}}),c=i.i(n.createElement)("div",{id:this.parent.element.id+"_"+e+"_firstIcon",attrs:{class:r._240+(d?" "+r._241+" "+r._18:" "+r._242),title:this.parent.localeObj.getConstant("gotofirstpage"),"aria-label":this.parent.localeObj.getConstant("gotofirstpage"),tabindex:"-1",role:"button"}}),g=i.i(n.createElement)("div",{id:this.parent.element.id+"_"+e+"_prevIcon",attrs:{class:r._243+(d?" "+r._244+" "+r._18:" "+r._245),title:this.parent.localeObj.getConstant("gotopreviouspage"),"aria-label":this.parent.localeObj.getConstant("gotopreviouspage"),tabindex:"-1",role:"button"}}),m=i.i(n.createElement)("span",{id:this.parent.element.id+"_"+e+"_pagerString",className:"row"===e?r._246:r._247});m.innerText="row"===e?this.parent.localeObj.getConstant("rowPage"):this.parent.localeObj.getConstant("columnPage");var f=i.i(n.createElement)("input",{id:this.parent.element.id+"_"+e+"_textbox",className:"row"===e?r._248:r._249}),v=i.i(n.createElement)("div",{id:this.parent.element.id+"_"+e+"_of_string_mainDiv",className:"row"===e?r._250:r._251}),S=i.i(n.createElement)("span",{id:this.parent.element.id+"_"+e+"_ofString",className:"row"===e?r._252:r._253});S.innerText=this.parent.localeObj.getConstant("of")+" ";var y=i.i(n.createElement)("span",{id:this.parent.element.id+"_"+e+"_pagerNumber",className:"row"===e?r._254:r._255});y.innerText=("row"===e?this.parent.engineModule.rowPageCount:this.parent.engineModule.columnPageCount).toString();var b=i.i(n.createElement)("div",{id:this.parent.element.id+"_"+e+"_nextIcon",attrs:{class:r._256+(h?" "+r._257+" "+r._18:" "+r._258),title:this.parent.localeObj.getConstant("gotonextpage"),"aria-label":this.parent.localeObj.getConstant("gotonextpage"),tabindex:"-1",role:"button"}}),C=i.i(n.createElement)("div",{id:this.parent.element.id+"_"+e+"_lastIcon",attrs:{class:r._259+(h?" "+r._260+" "+r._18:" "+r._261),title:this.parent.localeObj.getConstant("gotolastpage"),"aria-label":this.parent.localeObj.getConstant("gotolastpage"),tabindex:"-1",role:"button"}}),x=i.i(n.createElement)("span",{id:this.parent.element.id+"_"+e+"_size",className:"row"===e?r._262:r._263});x.innerText="row"===e?this.parent.localeObj.getConstant("rowPerPage"):this.parent.localeObj.getConstant("columnPerPage");var w=i.i(n.createElement)("div",{id:this.parent.element.id+"_"+e+"_size_list_maindiv",className:r._264+" "+r._238}),T=i.i(n.createElement)("div",{id:this.parent.element.id+"_"+e+"_size_list",className:"row"===e?r._265:r._266}),M=i.i(n.createElement)("div",{id:this.parent.element.id+"_"+e+"_text_div",className:r._267}),_=i.i(n.createElement)("div",{id:this.parent.element.id+"_"+e+"_text_div_1",className:r._268});return w.append(T),t.enableCompactView||a<400?(p.append(g,b),l.append(p)):(v.append(S,y),p.append(c,g,b,C),u.append(f,v),l.append(p,u)),("row"===e&&t.showRowPager||"column"===e&&t.showColumnPager)&&(("column"===e&&!t.showRowPager||"row"===e&&!t.showColumnPager)&&o&&_.append(x,w),t.showColumnPager&&t.showRowPager||!o?("row"===e&&t.showRowPageSize||"column"===e&&t.showColumnPageSize?!t.enableCompactView&&a>400?(M.append(m,x),_.append(l,w)):(M.append(m,l),_.append(x,w)):("row"===e&&!t.showRowPageSize||"column"===e&&!t.showColumnPageSize)&&(M.append(m),_.append(l)),s.append(M,_)):("row"===e&&(t.showRowPageSize?s.append(l,m,_):s.append(l,m)),"column"===e&&(t.showColumnPageSize?s.append(l,m,_):s.append(l,m)))),s},e.prototype.destroy=function(){this.removeEventListener(),this.parent.pagerModule&&(this.columnPagerTextBox&&this.columnPagerTextBox.destroy(),this.rowPagerTextBox&&this.rowPagerTextBox.destroy(),this.columnPageSizeDropDown&&this.columnPageSizeDropDown.destroy(),this.rowPageSizeDropDown&&this.rowPageSizeDropDown.destroy(),this.pager&&this.pager.destroy(),this.columnPagerTextBox=null,this.rowPagerTextBox=null,this.columnPageSizeDropDown=null,this.rowPageSizeDropDown=null,this.pager=null)},e}())},function(e,t,i){"use strict";i.d(t,"a",function(){return l});var r=i(12),a=(i.n(r),i(1)),n=i(0),o=(i.n(n),i(15)),s=i(3),l=function(){function e(e){this.parent=e}return e.prototype.getModuleName=function(){return"pdfExport"},e.prototype.addPage=function(e,t){t=t||this.exportProperties.pdfExportProperties;var a=e.document.sections.add(),o=e.document.pageSettings.height,l=e.document.pageSettings.width;if(this.exportProperties.width||this.exportProperties.height?(e.document.pageSettings.orientation=this.exportProperties.width>this.exportProperties.height||!this.exportProperties.height&&this.exportProperties.width>o||!this.exportProperties.width&&l>this.exportProperties.height?r.PdfPageOrientation.Landscape:r.PdfPageOrientation.Portrait,e.document.pageSettings.size=new r.SizeF(this.exportProperties.width?this.exportProperties.width:l,this.exportProperties.height?this.exportProperties.height:o)):(e.document.pageSettings.orientation=0===this.exportProperties.orientation||this.exportProperties.orientation?this.exportProperties.orientation:i.i(n.isNullOrUndefined)(t)||i.i(n.isNullOrUndefined)(t.pageOrientation)?r.PdfPageOrientation.Landscape:"Landscape"===t.pageOrientation?r.PdfPageOrientation.Landscape:r.PdfPageOrientation.Portrait,i.i(n.isNullOrUndefined)(t)||i.i(n.isNullOrUndefined)(t.pageSize)||(e.document.pageSettings.size=s.a.getPageSize(t.pageSize))),!i.i(n.isNullOrUndefined)(this.exportProperties.pdfMargins)){var d=e.document.pageSettings.margins;d.top=i.i(n.isNullOrUndefined)(this.exportProperties.pdfMargins.top)?d.top:this.exportProperties.pdfMargins.top,d.bottom=i.i(n.isNullOrUndefined)(this.exportProperties.pdfMargins.bottom)?d.bottom:this.exportProperties.pdfMargins.bottom,d.left=i.i(n.isNullOrUndefined)(this.exportProperties.pdfMargins.left)?d.left:this.exportProperties.pdfMargins.left,d.right=i.i(n.isNullOrUndefined)(this.exportProperties.pdfMargins.right)?d.right:this.exportProperties.pdfMargins.right}a.setPageSettings(e.document.pageSettings);var h=a.pages.add(),p=i.i(n.isNullOrUndefined)(t)||i.i(n.isNullOrUndefined)(t.header)||i.i(n.isNullOrUndefined)(t.header.contents)||i.i(n.isNullOrUndefined)(t.header.contents[0].value)?this.exportProperties.header?this.exportProperties.header:"":t.header.contents[0].value,u=i.i(n.isNullOrUndefined)(t)||i.i(n.isNullOrUndefined)(t.footer)||i.i(n.isNullOrUndefined)(t.footer.contents)||i.i(n.isNullOrUndefined)(t.footer.contents[0].value)?this.exportProperties.footer?this.exportProperties.footer:"":t.footer.contents[0].value,c=new r.PdfStandardFont(r.PdfFontFamily.TimesRoman,15,r.PdfFontStyle.Regular),g=!(i.i(n.isNullOrUndefined)(t)||i.i(n.isNullOrUndefined)(t.header)||i.i(n.isNullOrUndefined)(t.header.contents)||i.i(n.isNullOrUndefined)(t.header.contents[0].style)),m=!(i.i(n.isNullOrUndefined)(t)||i.i(n.isNullOrUndefined)(t.footer)||i.i(n.isNullOrUndefined)(t.footer.contents)||i.i(n.isNullOrUndefined)(t.footer.contents[0].style)),f=g?this.hexDecToRgb(t.header.contents[0].style.textBrushColor):new r.PdfColor(0,0,0),v=g?new r.PdfSolidBrush(new r.PdfColor(f.r,f.g,f.b)):new r.PdfSolidBrush(new r.PdfColor(0,0,0)),S=m?this.hexDecToRgb(t.footer.contents[0].style.textBrushColor):new r.PdfColor(0,0,0),y=m?new r.PdfSolidBrush(new r.PdfColor(S.r,S.g,S.b)):new r.PdfSolidBrush(new r.PdfColor(0,0,0)),b=new r.PdfPen(new r.PdfColor(0,0,0),.5),C=new r.PdfPageTemplateElement(new r.RectangleF(0,0,h.graphics.clientSize.width,20));C.graphics.drawString(p,c,b,v,0,0,new r.PdfStringFormat(r.PdfTextAlignment.Center)),e.document.template.top=C;var x=new r.PdfPageTemplateElement(new r.RectangleF(0,0,h.graphics.clientSize.width,20));return x.graphics.drawString(u,c,b,y,0,0,new r.PdfStringFormat(r.PdfTextAlignment.Center)),e.document.template.bottom=x,h},e.prototype.hexDecToRgb=function(e){if(null===e||""===e||7!==e.length)throw new Error("please set valid hex value for color..");e=e.substring(1);var t=parseInt(e,16);return{r:t>>16&255,g:t>>8&255,b:255&t}},e.prototype.getFontStyle=function(e){var t=r.PdfFontStyle.Regular;return!i.i(n.isNullOrUndefined)(e)&&e.bold&&(t|=r.PdfFontStyle.Bold),!i.i(n.isNullOrUndefined)(e)&&e.italic&&(t|=r.PdfFontStyle.Italic),!i.i(n.isNullOrUndefined)(e)&&e.underline&&(t|=r.PdfFontStyle.Underline),!i.i(n.isNullOrUndefined)(e)&&e.strikeout&&(t|=r.PdfFontStyle.Strikeout),t},e.prototype.getBorderStyle=function(e){var t=new r.PdfBorders;if(i.i(n.isNullOrUndefined)(e)){var a=new r.PdfColor(234,234,234);t.all=new r.PdfPen(a)}else{var o=e.width,s=i.i(n.isNullOrUndefined)(o)||"number"!=typeof o?void 0:.75*o,l=new r.PdfColor(196,196,196);if(!i.i(n.isNullOrUndefined)(e.color)){var d=this.hexDecToRgb(e.color);l=new r.PdfColor(d.r,d.g,d.b)}var h=new r.PdfPen(l,s);i.i(n.isNullOrUndefined)(e.dashStyle)||(h.dashStyle=this.getDashStyle(e.dashStyle)),t.all=h}return t},e.prototype.getDashStyle=function(e){switch(e){case"Dash":return 1;case"Dot":return 2;case"DashDot":return 3;case"DashDotDot":return 4;default:return 0}},e.prototype.getStyle=function(){var e=new r.PdfBorders;if(i.i(n.isNullOrUndefined)(this.gridStyle))return{brush:new r.PdfSolidBrush(new r.PdfColor),border:e,font:void 0};var t=i.i(n.isNullOrUndefined)(this.gridStyle.header.fontName)?r.PdfFontFamily.Helvetica:this.getFontFamily(this.gridStyle.header.fontName),a=this.getFontStyle(this.gridStyle.header),o=i.i(n.isNullOrUndefined)(this.gridStyle.header.fontSize)?10.5:this.gridStyle.header.fontSize,s=new r.PdfColor;if(!i.i(n.isNullOrUndefined)(this.gridStyle.header.fontColor)){var l=this.hexDecToRgb(this.gridStyle.header.fontColor);s=new r.PdfColor(l.r,l.g,l.b)}var d=new r.PdfStandardFont(t,o,a);return i.i(n.isNullOrUndefined)(this.gridStyle.header.font)||(d=this.gridStyle.header.font),{border:this.getBorderStyle(this.gridStyle.header.border),font:d,brush:new r.PdfSolidBrush(s)}},e.prototype.setRecordThemeStyle=function(e,t){if(!i.i(n.isNullOrUndefined)(this.gridStyle)&&!i.i(n.isNullOrUndefined)(this.gridStyle.record)){var a=i.i(n.isNullOrUndefined)(this.gridStyle.record.fontName)?r.PdfFontFamily.Helvetica:this.getFontFamily(this.gridStyle.record.fontName),o=i.i(n.isNullOrUndefined)(this.gridStyle.record.fontSize)?9.75:this.gridStyle.record.fontSize,s=this.getFontStyle(this.gridStyle.record),l=new r.PdfStandardFont(a,o,s);i.i(n.isNullOrUndefined)(this.gridStyle.record.font)||(l=this.gridStyle.record.font),e.style.setFont(l);var d=new r.PdfColor;if(!i.i(n.isNullOrUndefined)(this.gridStyle.record.fontColor)){var h=this.hexDecToRgb(this.gridStyle.record.fontColor);d=new r.PdfColor(h.r,h.g,h.b)}e.style.setTextBrush(new r.PdfSolidBrush(d))}var p=this.gridStyle&&this.gridStyle.record&&this.gridStyle.record.border?this.getBorderStyle(this.gridStyle.record.border):t;return e.style.setBorder(p),e},e.prototype.exportToPDF=function(e,t,o,s){var l=this;this.engine="olap"===this.parent.dataType?this.parent.olapEngineModule:this.parent.engineModule,this.gridStyle=this.exportProperties.style;var d=this.applyEvent();i.i(n.isNullOrUndefined)(o)||(d.document=o);var h=this.getStyle(),p=this.exportProperties.fileName?this.exportProperties.fileName:i.i(n.isNullOrUndefined)(e)||i.i(n.isNullOrUndefined)(e.fileName)?"default":e.fileName,u=this.parent.renderModule.maxIndent?this.parent.renderModule.maxIndent:5,c=100+20*u,g=Math.floor((540-c)/90)+1,m=0,f=d.args.pivotValues[m];(this.exportProperties.columnSize||this.exportProperties.width||this.exportProperties.height)&&(g=this.exportProperties.columnSize>0?this.exportProperties.columnSize:f[0].length);for(var v=!this.exportProperties.allowRepeatHeader||this.exportProperties.allowRepeatHeader,S=0;v&&g>1&&S<f.length;S++)for(var y=g;f[S]&&y<f[S].length;y+=g)f[S].splice(y,0,f[S][0]);var b=f&&f.length>0?f[0].length:0,C=0;do{i.i(n.isNullOrUndefined)(e)||(this.exportProperties.header=i.i(n.isNullOrUndefined)(e.header)||i.i(n.isNullOrUndefined)(e.header.contents)||i.i(n.isNullOrUndefined)(e.header.contents[0].value)?this.exportProperties.header:e.header.contents[0].value,this.exportProperties.footer=i.i(n.isNullOrUndefined)(e.footer)||i.i(n.isNullOrUndefined)(e.footer.contents)||i.i(n.isNullOrUndefined)(e.footer.contents[0].value)?this.exportProperties.footer:e.footer.contents[0].value);var x=this.addPage(d,e),w=new r.PdfGrid,T=g>0?g:5;if(f&&f.length>0){w.columns.add(f[0].length-C>=T?T:f[0].length-C);for(var M=f.length,_=0,D=0,O=0;O<M;O++)if(f[O]){var P=!(f[O][0]&&"row"===f[O][0].axis),E=f[O].length>C+T?C+T:f[O].length;P&&w.headers.add(1);var N=P?w.headers.getHeader(_):w.rows.addRow();P?(N.style.setBorder(h.border),h.font&&N.style.setFont(h.font),N.style.setTextBrush(h.brush)):this.setRecordThemeStyle(N,h.border);for(var F=0,I=!0,L=C;L<E;L++){var A=!1;if(f[O][L]){var R=f[O][L],k=R.formattedText;k=0===this.parent.dataSourceSettings.rows.length||0===this.parent.dataSourceSettings.columns.length?this.parent.getValuesHeader(R,"value"):k,k="grand sum"===R.type?0===this.parent.dataSourceSettings.rows.length||0===this.parent.dataSourceSettings.columns.length?this.parent.getValuesHeader(R,"grandTotal"):this.parent.localeObj.getConstant("grandTotal"):"sum"===R.type?k.toString().replace("Total",this.parent.localeObj.getConstant("total")):k,(-1!==R.level||R.rowSpan)&&((-1!==R.level||R.rowSpan)&&(N.cells.getCell(F).columnSpan=R.colSpan?T-F<R.colSpan?T-F:R.colSpan:1,P&&R.rowSpan&&R.rowSpan>1&&(N.cells.getCell(F).rowSpan=R.rowSpan?R.rowSpan:1),N.cells.getCell(F).value=k?k.toString():""),""!==k&&(I=!1)),D=R.level>D?R.level:D,A="value"===R.axis,L+=N.cells.getCell(F).columnSpan?N.cells.getCell(F).columnSpan-1:0,F+=N.cells.getCell(F).columnSpan?N.cells.getCell(F).columnSpan-1:0,R.style&&(N=this.applyStyle(N,R,F));var j={style:void 0,pivotCell:R,cell:N.cells.getCell(F)};this.parent.trigger(a.n,j),"column"===R.axis?(j={style:j.style,cell:j.cell,gridCell:j.pivotCell},this.parent.trigger(a.k,j),N.cells.getCell(F).value=j.gridCell.formattedText?j.gridCell.formattedText:k):(j={style:j.style,cell:j.cell,column:void 0,data:j.pivotCell,value:k},this.parent.trigger(a.m,j),N.cells.getCell(F).value=j.value?j.value:k),j.style&&this.processCellStyle(N.cells.getCell(F),j)}else{var j={style:void 0,pivotCell:void 0,cell:N.cells.getCell(F)};this.parent.trigger(a.n,j);var R={formattedText:""};"column"===R.axis&&(j={style:j.style,cell:j.cell,gridCell:j.pivotCell},this.parent.trigger(a.k,j)),j.style&&this.processCellStyle(N.cells.getCell(F),j),N.cells.getCell(F).value="",0===L&&P&&this.parent.dataSourceSettings.columns&&this.parent.dataSourceSettings.columns.length>0?w.headers.getHeader(0).cells.getCell(0).rowSpan++:0!==L&&P&&this.parent.dataSourceSettings.columns&&this.parent.dataSourceSettings.columns.length>0&&w.headers.getHeader(0).cells.getCell(0).rowSpan<Object.keys(this.engine.headerContent).length&&w.headers.getHeader(0).cells.getCell(0).rowSpan++}var H=new r.PdfStringFormat;if("olap"===this.parent.dataType){var q=!P&&0===F&&f[O][L]?this.parent.renderModule.indentCollection[f[O][L].rowIndex]:0;H.paragraphIndent=15*q,D=D>q?D:q}else if(H.paragraphIndent=0,!P&&0===F&&f[O][L]&&-1!==f[O][L].level){var V=f[O][L],B=V.valueSort?V.valueSort.levelName.toString():"",U=V.actualText?V.actualText.toString().split(this.parent.dataSourceSettings.valueSortSettings.headerDelimiter).length:0,G=B.split(this.parent.dataSourceSettings.valueSortSettings.headerDelimiter).length-(U?U-1:U),z=G?G-1:0;H.paragraphIndent=10*z}H.alignment=A?r.PdfTextAlignment.Right:r.PdfTextAlignment.Left,H.lineAlignment=r.PdfVerticalAlignment.Middle,N.cells.getCell(F).style.stringFormat=H,F++}I&&(N.height=16),_++}w.columns.getColumn(0).width=100+20*D}0===C&&this.parent.dataSourceSettings.columns&&this.parent.dataSourceSettings.columns.length>0&&w.headers.getHeader(0).cells.getCell(0).rowSpan--,w.draw(x,new r.PointF(10,20)),C+=T,C>=b&&d.args.pivotValues.length>m+1&&(m++,f=d.args.pivotValues[m],b=f&&f.length>0?f[0].length:0,C=0)}while(C<b);return new Promise(function(e){var i;s||t?s&&(i=d.document.save()):(d.document.save(p+".pdf"),d.document.destroy());var r={type:"PDF",promise:s?i:null};l.parent.trigger(a.i,r),e(d.document)})},e.prototype.applyStyle=function(e,t,i){var a=this.parent.conditionalFormattingModule.hexToRgb(t.style.backgroundColor),n=new r.PdfSolidBrush(new r.PdfColor(a.r,a.g,a.b));e.cells.getCell(i).style.backgroundBrush=n;var o=Number(t.style.fontSize.split("px")[0]),s=new r.PdfStandardFont(r.PdfFontFamily.TimesRoman,o,r.PdfFontStyle.Regular);return e.cells.getCell(i).style.font=s,a=this.parent.conditionalFormattingModule.hexToRgb(t.style.color),n=new r.PdfSolidBrush(new r.PdfColor(a.r,a.g,a.b)),e.cells.getCell(i).style.textBrush=n,e},e.prototype.getFontFamily=function(e){switch(e){case"TimesRoman":return 2;case"Courier":return 1;case"Symbol":return 3;case"ZapfDingbats":return 4;default:return 0}},e.prototype.getFont=function(e){if(e.style.font)return e.style.font;var t=e.cell.cellStyle.font&&e.cell.cellStyle.font.fontSize?e.cell.cellStyle.font.fontSize:i.i(n.isNullOrUndefined)(e.style.fontSize)?9.75:.75*e.style.fontSize,a=i.i(n.isNullOrUndefined)(e.style.fontFamily)?r.PdfFontFamily.TimesRoman:this.getFontFamily(e.style.fontFamily),o=r.PdfFontStyle.Regular;return!i.i(n.isNullOrUndefined)(e.style.bold)&&e.style.bold&&(o|=r.PdfFontStyle.Bold),!i.i(n.isNullOrUndefined)(e.style.italic)&&e.style.italic&&(o|=r.PdfFontStyle.Italic),!i.i(n.isNullOrUndefined)(e.style.underline)&&e.style.underline&&(o|=r.PdfFontStyle.Underline),!i.i(n.isNullOrUndefined)(e.style.strikeout)&&e.style.strikeout&&(o|=r.PdfFontStyle.Strikeout),new r.PdfStandardFont(a,t,o)},e.prototype.processCellStyle=function(e,t){if(!i.i(n.isNullOrUndefined)(t.style.backgroundColor)){var a=this.hexDecToRgb(t.style.backgroundColor);e.style.backgroundBrush=new r.PdfSolidBrush(new r.PdfColor(a.r,a.g,a.b))}if(!i.i(n.isNullOrUndefined)(t.style.textBrushColor)){var o=this.hexDecToRgb(t.style.textBrushColor);e.style.textBrush=new r.PdfSolidBrush(new r.PdfColor(o.r,o.g,o.b))}if(!i.i(n.isNullOrUndefined)(t.style.textPenColor)){var s=this.hexDecToRgb(t.style.textPenColor);e.style.textPen=new r.PdfPen(new r.PdfColor(s.r,s.g,s.b))}if(i.i(n.isNullOrUndefined)(t.style.fontFamily)&&i.i(n.isNullOrUndefined)(t.style.fontSize)&&i.i(n.isNullOrUndefined)(t.style.bold)&&i.i(n.isNullOrUndefined)(t.style.italic)&&i.i(n.isNullOrUndefined)(t.style.underline)&&i.i(n.isNullOrUndefined)(t.style.strikeout)||(e.style.font=this.getFont(t)),!i.i(n.isNullOrUndefined)(t.style.border)){var l=new r.PdfBorders,d=t.style.border.width,h=i.i(n.isNullOrUndefined)(d)||"number"!=typeof d?void 0:.75*d,p=new r.PdfColor(196,196,196);if(!i.i(n.isNullOrUndefined)(t.style.border.color)){var u=this.hexDecToRgb(t.style.border.color);p=new r.PdfColor(u.r,u.g,u.b)}var c=new r.PdfPen(p,h);i.i(n.isNullOrUndefined)(t.style.border.dashStyle)||(c.dashStyle=this.getDashStyle(t.style.border.dashStyle)),l.all=c,e.style.borders=l}},e.prototype.applyEvent=function(){var e,t=o.a.getClonedPivotValues(this.engine.pivotValues);if(this.parent.exportAllPages&&(this.parent.enableVirtualization||this.parent.enablePaging)&&"olap"!==this.parent.dataType){var i=this.engine.pageSettings;this.engine.pageSettings=null,this.engine.isPagingOrVirtualizationEnabled=!1,this.engine.generateGridData(this.parent.dataSourceSettings,!0),this.parent.applyFormatting(this.engine.pivotValues),e=o.a.getClonedPivotValues(this.engine.pivotValues),this.engine.pivotValues=t,this.engine.pageSettings=i,this.engine.isPagingOrVirtualizationEnabled=!0}else e=t;var n={pivotValues:[e]};return this.parent.trigger(a.c,n),this.document=new r.PdfDocument,{document:this.document,args:n}},e.prototype.destroy=function(){this.engine&&(this.engine=null),this.exportProperties&&(this.exportProperties=null),this.document&&(this.document=null)},e}()},function(e,t,i){"use strict";var r=i(67);i.d(t,"a",function(){return r.a}),i.d(t,"b",function(){return r.b}),i.d(t,"c",function(){return r.c}),i.d(t,"d",function(){return r.d}),i.d(t,"e",function(){return r.e}),i.d(t,"f",function(){return r.f}),i.d(t,"g",function(){return r.g}),i.d(t,"h",function(){return r.h})},function(e,t,i){"use strict";i.d(t,"a",function(){return D}),i.d(t,"b",function(){return O}),i.d(t,"c",function(){return P}),i.d(t,"d",function(){return E}),i.d(t,"e",function(){return N}),i.d(t,"f",function(){return F}),i.d(t,"g",function(){return I}),i.d(t,"h",function(){return L});var r=i(0),a=(i.n(r),i(14)),n=i(4),o=(i.n(n),i(1)),s=i(2),l=i(41),d=i(24),h=i(19),p=i(69),u=i(8),c=(i.n(u),i(39)),g=i(32),m=i(11),f=(i.n(m),i(40)),v=i(38),S=i(3),y=i(22),b=i(68),C=i(12),x=(i.n(C),i(16)),w=i(57),T=i(72),M=(i.n(T),this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}()),_=this&&this.__decorate||function(e,t,i,r){var a,n=arguments.length,o=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(n<3?a(o):n>3?a(t,i,o):a(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},D=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return M(t,e),_([i.i(r.Property)(!0)],t.prototype,"showFilterIcon",void 0),_([i.i(r.Property)(!0)],t.prototype,"showSortIcon",void 0),_([i.i(r.Property)(!0)],t.prototype,"showRemoveIcon",void 0),_([i.i(r.Property)(!0)],t.prototype,"showValueTypeIcon",void 0),_([i.i(r.Property)("Both")],t.prototype,"displayMode",void 0),_([i.i(r.Property)(!0)],t.prototype,"allowDragAndDrop",void 0),_([i.i(r.Property)(!1)],t.prototype,"showFieldsPanel",void 0),t}(r.ChildProperty),O=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return M(t,e),_([i.i(r.Property)(!1)],t.prototype,"allowAdding",void 0),_([i.i(r.Property)(!1)],t.prototype,"allowEditing",void 0),_([i.i(r.Property)(!1)],t.prototype,"allowDeleting",void 0),_([i.i(r.Property)(!1)],t.prototype,"allowCommandColumns",void 0),_([i.i(r.Property)(!1)],t.prototype,"allowInlineEditing",void 0),_([i.i(r.Property)("Normal")],t.prototype,"mode",void 0),_([i.i(r.Property)(!0)],t.prototype,"allowEditOnDblClick",void 0),_([i.i(r.Property)(!0)],t.prototype,"showConfirmDialog",void 0),_([i.i(r.Property)(!1)],t.prototype,"showDeleteConfirmDialog",void 0),t}(r.ChildProperty),P=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return M(t,e),_([i.i(r.Property)()],t.prototype,"measure",void 0),_([i.i(r.Property)()],t.prototype,"label",void 0),_([i.i(r.Property)("NotEquals")],t.prototype,"conditions",void 0),_([i.i(r.Property)()],t.prototype,"value1",void 0),_([i.i(r.Property)()],t.prototype,"value2",void 0),t}(r.ChildProperty),E=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return M(t,e),_([i.i(r.Property)(!1)],t.prototype,"showHyperlink",void 0),_([i.i(r.Property)(!1)],t.prototype,"showRowHeaderHyperlink",void 0),_([i.i(r.Property)(!1)],t.prototype,"showColumnHeaderHyperlink",void 0),_([i.i(r.Property)(!1)],t.prototype,"showValueCellHyperlink",void 0),_([i.i(r.Property)(!1)],t.prototype,"showSummaryCellHyperlink",void 0),_([i.i(r.Collection)([],P)],t.prototype,"conditionalSettings",void 0),_([i.i(r.Property)()],t.prototype,"headerText",void 0),_([i.i(r.Property)("")],t.prototype,"cssClass",void 0),t}(r.ChildProperty),N=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return M(t,e),_([i.i(r.Property)(5)],t.prototype,"columnPageSize",void 0),_([i.i(r.Property)(5)],t.prototype,"rowPageSize",void 0),_([i.i(r.Property)(1)],t.prototype,"currentColumnPage",void 0),_([i.i(r.Property)(1)],t.prototype,"currentRowPage",void 0),t}(r.ChildProperty),F=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return M(t,e),_([i.i(r.Property)("Bottom")],t.prototype,"position",void 0),_([i.i(r.Property)(!1)],t.prototype,"isInversed",void 0),_([i.i(r.Property)(!0)],t.prototype,"showRowPager",void 0),_([i.i(r.Property)(!0)],t.prototype,"showColumnPager",void 0),_([i.i(r.Property)(!0)],t.prototype,"showRowPageSize",void 0),_([i.i(r.Property)(!0)],t.prototype,"showColumnPageSize",void 0),_([i.i(r.Property)([10,50,100,200])],t.prototype,"rowPageSizes",void 0),_([i.i(r.Property)([5,10,20,50,100])],t.prototype,"columnPageSizes",void 0),_([i.i(r.Property)(!1)],t.prototype,"enableCompactView",void 0),_([i.i(r.Property)()],t.prototype,"template",void 0),t}(r.ChildProperty),I=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return M(t,e),_([i.i(r.Property)("Table")],t.prototype,"view",void 0),_([i.i(r.Property)("Table")],t.prototype,"primary",void 0),t}(r.ChildProperty),L=function(e){function t(t,a){var n=e.call(this,t,a)||this;return n.verticalScrollScale=1,n.horizontalScrollScale=1,n.scrollerBrowserLimit=8e6,n.lastSortInfo={},n.lastFilterInfo={},n.lastAggregationInfo={},n.lastCalcFieldInfo={},n.isScrolling=!1,n.allowEngineExport=!1,n.isInitial=!0,n.shiftLockedPos=[],n.savedSelectedCellsPos=[],n.cellSelectionPos=[],n.isPopupClicked=!1,n.isMouseDown=!1,n.isMouseUp=!1,n.fieldsType={},n.remoteData=[],n.defaultItems={},n.isCellBoxMultiSelection=!1,n.gridHeaderCellInfo=[],n.gridCellCollection={},n.rowRangeSelection={enable:!1,startIndex:0,endIndex:0},n.isStaticRefresh=!1,n.resizeInfo={},n.scrollPosObject={vertical:0,horizontal:0,verticalSection:0,horizontalSection:0,top:0,left:0,scrollDirection:{direction:"",position:0}},n.pivotColumns=[],n.totColWidth=0,n.posCount=0,n.isModified=!1,n.isInitialRendering=!1,n.needsID=!0,n.pivotRefresh=r.Component.prototype.refresh,n.request=new XMLHttpRequest,n.isServerWaitingPopup=!1,n.actionObj={},n.defaultFieldListOrder="None",n.destroyEngine=!1,n.pivotView=n,i.i(r.setValue)("mergePersistData",n.mergePersistPivotData,n),n}return M(t,e),t.prototype.requiredModules=function(){var e=[];return this.showGroupingBar&&e.push({args:[this],member:"groupingBar"}),this.allowConditionalFormatting&&e.push({args:[this],member:"conditionalFormatting"}),this.allowNumberFormatting&&e.push({args:[this],member:"numberFormatting"}),this.allowCalculatedField&&e.push({args:[this],member:"calculatedField"}),this.showToolbar&&(this.toolbar.length>0||this.toolbarTemplate)&&e.push({args:[this],member:"toolbar"}),this.showFieldList&&e.push({args:[this],member:"fieldList"}),this.allowExcelExport&&e.push({args:[this],member:"excelExport"}),this.allowPdfExport&&(e.push({args:[this],member:"pdfExport"}),e.push({args:[this],member:"chartExport"})),this.enableVirtualization&&e.push({args:[this],member:"virtualscroll"}),this.allowGrouping&&e.push({args:[this],member:"grouping"}),(this.allowDrillThrough||this.editSettings&&this.editSettings.allowEditing)&&e.push({args:[this],member:"drillThrough"}),"Table"!==this.displayOption.view&&e.push({args:[this],member:"pivotChart"}),this.enablePaging&&e.push({args:[this],member:"pager"}),e},t.prototype.preRender=function(){this.dataSourceSettings&&"SSAS"===this.dataSourceSettings.providerType?(this.dataType="olap",this.olapEngineModule=new x.a):(this.dataType="pivot",this.engineModule=new a.a),this.isAdaptive=r.Browser.isDevice,r.Browser.isIE||"edge"===r.Browser.info.name?this.scrollerBrowserLimit=15e5:"chrome"===r.Browser.info.name&&(this.scrollerBrowserLimit=15e6),this.isTouchMode=!!i.i(r.closest)(this.element,"e-bigger"),this.initProperties(),this.renderToolTip(),this.keyboardModule=new c.a(this),this.contextMenuModule=new g.a(this),this.globalize=new r.Internationalization(this.locale),(this.showFieldList||this.showGroupingBar||this.allowNumberFormatting||this.allowCalculatedField||this.toolbar||this.allowGrouping||this.gridSettings.contextMenuItems)&&(this.commonModule=new d.a(this)),!this.allowPdfExport||"Both"!==this.displayOption.view&&"Chart"!==this.displayOption.view||(this.chartExportModule=new w.a(this)),this.defaultLocale={grandTotal:"Grand Total",total:"Total",value:"Value",noValue:"No value",row:"Row",column:"Column",collapse:"Collapse",expand:"Expand",rowAxisPrompt:"Drop row here",columnAxisPrompt:"Drop column here",valueAxisPrompt:"Drop value here",filterAxisPrompt:"Drop filter here",filter:"Filter",filtered:"Filtered",sort:"Sort",filters:"Filters",rows:"Rows",columns:"Columns",values:"Values",close:"Close",cancel:"Cancel",delete:"Delete",CalculatedField:"Calculated Field",createCalculatedField:"Create Calculated Field",fieldName:"Enter the field name",error:"Error",invalidFormula:"Invalid formula.",dropText:'Example: ("Sum(Order_Count)" + "Sum(In_Stock)") * 250',dropTextMobile:"Add fields and edit formula here.",dropAction:"Calculated field cannot be place in any other region except value axis.",alert:"Alert",warning:"Warning",ok:"OK",search:"Search",drag:"Drag",remove:"Remove",allFields:"All Fields",formula:"Formula",addToRow:"Add to Row",addToColumn:"Add to Column",addToValue:"Add to Value",addToFilter:"Add to Filter",emptyData:"No records to display",fieldExist:"A field already exists in this name. Please enter a different name.",confirmText:"A calculation field already exists in this name. Do you want to replace it?",noMatches:"No matches",format:"Summaries values by",edit:"Edit",clear:"Clear",sortAscending:"Sort ascending order",sortDescending:"Sort descending order",sortNone:"Sort data order",clearCalculatedField:"Clear edited field info",editCalculatedField:"Edit calculated field",formulaField:"Drag and drop fields to formula",dragField:"Drag field to formula",clearFilter:"Clear",by:"by",all:"All",multipleItems:"Multiple items",member:"Member",label:"Label",date:"Date",enterValue:"Enter value",chooseDate:"Enter date",Before:"Before",BeforeOrEqualTo:"Before Or Equal To",After:"After",AfterOrEqualTo:"After Or Equal To",labelTextContent:"Show the items for which the label",dateTextContent:"Show the items for which the date",valueTextContent:"Show the items for which",Equals:"Equals",DoesNotEquals:"Does Not Equal",BeginWith:"Begins With",DoesNotBeginWith:"Does Not Begin With",EndsWith:"Ends With",DoesNotEndsWith:"Does Not End With",Contains:"Contains",DoesNotContains:"Does Not Contain",GreaterThan:"Greater Than",GreaterThanOrEqualTo:"Greater Than Or Equal To",LessThan:"Less Than",LessThanOrEqualTo:"Less Than Or Equal To",Between:"Between",NotBetween:"Not Between",And:"and",Sum:"Sum",Count:"Count",DistinctCount:"Distinct Count",Product:"Product",Avg:"Avg",Median:"Median",Min:"Min",SampleVar:"Sample Var",PopulationVar:"Population Var",RunningTotals:"Running Totals",Max:"Max",Index:"Index",SampleStDev:"Sample StDev",PopulationStDev:"Population StDev",PercentageOfRowTotal:"% of Row Total",PercentageOfParentTotal:"% of Parent Total",PercentageOfParentColumnTotal:"% of Parent Column Total",PercentageOfParentRowTotal:"% of Parent Row Total",DifferenceFrom:"Difference From",PercentageOfDifferenceFrom:"% of Difference From",PercentageOfGrandTotal:"% of Grand Total",PercentageOfColumnTotal:"% of Column Total",MoreOption:"More...",NotEquals:"Not Equals",AllValues:"All Values",conditionalFormating:"Conditional Formatting",apply:"Apply",condition:"Add Condition",formatLabel:"Format",valueFieldSettings:"Value field settings",baseField:"Base field",baseItem:"Base item",summarizeValuesBy:"Summarize values by",sourceName:"Field name :",sourceCaption:"Field caption",example:"e.g:",editorDataLimitMsg:" more items. Search to refine further.",details:"Details",manageRecords:"Manage Records",Years:"Years",Quarters:"Quarters",Months:"Months",Days:"Days",Hours:"Hours",Minutes:"Minutes",Seconds:"Seconds",save:"Save a report",new:"Create a new report",load:"Load",saveAs:"Save as current report",rename:"Rename a current report",deleteReport:"Delete a current report",export:"Export",subTotals:"Sub totals",grandTotals:"Grand totals",reportName:"Report Name :",pdf:"PDF",excel:"Excel",csv:"CSV",png:"PNG",jpeg:"JPEG",svg:"SVG",mdxQuery:"MDX Query",showSubTotals:"Show subtotals",doNotShowSubTotals:"Do not show subtotals",showSubTotalsRowsOnly:"Show subtotals rows only",showSubTotalsColumnsOnly:"Show subtotals columns only",showGrandTotals:"Show grand totals",doNotShowGrandTotals:"Do not show grand totals",showGrandTotalsRowsOnly:"Show grand totals rows only",showGrandTotalsColumnsOnly:"Show grand totals columns only",fieldList:"Show fieldlist",grid:"Show table",toolbarFormatting:"Conditional formatting",chart:"Chart",reportMsg:"Please enter vaild report name!!!",reportList:"Report list",removeConfirm:"Are you sure you want to delete this report?",emptyReport:"No reports found!!",bar:"Bar",pie:"Pie",funnel:"Funnel",doughnut:"Doughnut",pyramid:"Pyramid",stackingcolumn:"Stacked Column",stackingarea:"Stacked Area",stackingbar:"Stacked Bar",stackingline:"Stacked Line",stepline:"Step Line",steparea:"Step Area",splinearea:"Spline Area",spline:"Spline",stackingcolumn100:"100% Stacked Column",stackingbar100:"100% Stacked Bar",stackingarea100:"100% Stacked Area",stackingline100:"100% Stacked Line",bubble:"Bubble",pareto:"Pareto",radar:"Radar",line:"Line",area:"Area",scatter:"Scatter",polar:"Polar",of:"of",emptyFormat:"No format found!!!",emptyInput:"Enter a value",newReportConfirm:"Do you want to save the changes to this report?",emptyReportName:"Enter a report name",qtr:"Qtr",null:"null",undefined:"undefined",groupOutOfRange:"Out of Range",fieldDropErrorAction:"The field you are moving cannot be placed in that area of the report",aggregate:"Aggregate",drillThrough:"Drill Through",ascending:"Ascending",descending:"Descending",number:"Number",currency:"Currency",percentage:"Percentage",formatType:"Format Type",customText:"Currency Symbol",symbolPosition:"Symbol Position",left:"Left",right:"Right",grouping:"Grouping",true:"True",false:"False",decimalPlaces:"Decimal Places",numberFormat:"Number Formatting",memberType:"Field Type",formatString:"Format",expressionField:"Expression",customFormat:"Enter custom format string",numberFormatString:"Example: C, P, 0000 %, ###0.##0#, etc.",selectedHierarchy:"Parent Hierarchy",olapDropText:"Example: [Measures].[Order Quantity] + ([Measures].[Order Quantity] * 0.10)",Percent:"Percent",Currency:"Currency",Custom:"Custom",Measure:"Measure",Dimension:"Dimension",Standard:"Standard",blank:"(Blank)",fieldTooltip:'Drag and drop fields to create an expression. And, if you want to edit the existing calculated fields! You can achieve it by simply selecting the field under "Calculated Members".',fieldTitle:"Field Name",QuarterYear:"Quarter Year",drillError:"Cannot show the raw items of calculated fields.",caption:"Field Caption",copy:"Copy",defaultReport:"Sample Report",customFormatString:"Custom Format",invalidFormat:"Invalid Format.",group:"Group",unGroup:"Ungroup",invalidSelection:"Cannot group that selection.",groupName:"Enter the caption to display in header",captionName:"Enter the caption for group field",selectedItems:"Selected items",groupFieldCaption:"Field caption",groupTitle:"Group name",startAt:"Starting at",endAt:"Ending at",groupBy:"Interval by",selectGroup:"Select groups",multipleAxes:"Multiple Axis",showLegend:"Show Legend",exit:"Exit",chartTypeSettings:"Chart Type Settings",ChartType:"Chart Type",yes:"Yes",no:"No",numberFormatMenu:"Number Formatting...",conditionalFormatingMenu:"Conditional Formatting...",removeCalculatedField:"Are you sure you want to delete this calculated field?",replaceConfirmBefore:"A report named ",replaceConfirmAfter:" already exists. Do you want to replace it?",invalidJSON:"Invalid JSON data",invalidCSV:"Invalid CSV data",stacked:"Stacked",single:"Single",combined:"Combined",multipleAxisMode:"Multiple Axis Mode",grandTotalPosition:"Grand totals position",top:"Top",bottom:"Bottom",None:"None",rowPage:"Row pager",rowPerPage:"Rows per page",columnPage:"Column pager",columnPerPage:"Columns per page",goToFirstPage:"Go to first page",goToPreviousPage:"Go to previous page",goToNextPage:"Go to next page",goToLastPage:"Go to last page",subTotalPosition:"Subtotals position",auto:"Auto"},this.localeObj=new r.L10n(this.getModuleName(),this.defaultLocale,this.locale),this.renderContextMenu(),this.isDragging=!1,this.addInternalEvents()},t.prototype.onBeforeTooltipOpen=function(e){e.element.classList.add("e-pivottooltipwrap")},t.prototype.renderToolTip=function(){this.showTooltip?(this.tooltipTemplate?this.tooltip=new n.Tooltip({target:"td.e-valuescontent",cssClass:"e-pivottooltiptemplate"+(this.cssClass?" "+this.cssClass:""),showTipPointer:!1,position:"BottomRight",mouseTrail:!0,enableRtl:this.enableRtl,locale:this.locale,enableHtmlSanitizer:this.enableHtmlSanitizer,beforeRender:this.setToolTip.bind(this),beforeOpen:this.onBeforeTooltipOpen}):this.tooltip=new n.Tooltip({target:"td.e-valuescontent",cssClass:this.cssClass,showTipPointer:!1,position:"BottomRight",mouseTrail:!0,enableRtl:this.enableRtl,locale:this.locale,enableHtmlSanitizer:this.enableHtmlSanitizer,beforeRender:this.setToolTip.bind(this),beforeOpen:this.onBeforeTooltipOpen}),this.tooltip.isStringTemplate=!0,this.tooltip.appendTo(this.element)):this.tooltip&&this.tooltip.destroy()},t.prototype.renderContextMenu=function(){if(this.gridSettings.contextMenuItems||this.allowGrouping&&"pivot"===this.dataType){var e=[],t=[],i=[],r=[],a=[],n=[],o=[];if(this.gridSettings.contextMenuItems)for(var s=0,l=this.gridSettings.contextMenuItems;s<l.length;s++){var d=l[s];if("string"==typeof d&&-1!==this.getDefaultItems().indexOf(d))if(-1!==d.toString().toLowerCase().indexOf("aggregate")&&"pivot"===this.dataType){o=[{text:this.localeObj.getConstant("Sum")}];var h=this.buildDefaultItems("Aggregate");h.items=o,a.push(h)}else-1!==d.toString().toLowerCase().indexOf("export")?r.push(this.buildDefaultItems(d)):e.push(this.buildDefaultItems(d));else"string"!=typeof d&&i.push(d)}if(this.allowGrouping&&"pivot"===this.dataType&&(this.getFieldByID(this.element.id+"_custom_group",this.gridSettings.contextMenuItems)||t.push(this.buildDefaultItems("Group")),this.getFieldByID(this.element.id+"_custom_ungroup",this.gridSettings.contextMenuItems)||t.push(this.buildDefaultItems("Ungroup"))),r.length>0){var p=this.buildDefaultItems("export");p.items=r,n.push(p)}var u=[];Array.prototype.push.apply(u,a),Array.prototype.push.apply(u,e),Array.prototype.push.apply(u,t),Array.prototype.push.apply(u,n),Array.prototype.push.apply(u,i),this.setProperties({gridSettings:{contextMenuItems:u}},!0)}},t.prototype.getFieldByID=function(e,t){return new m.DataManager({json:t}).executeLocal((new m.Query).where("id","equal",e))[0]},t.prototype.getAllSummaryType=function(){return["Sum","Count","DistinctCount","Product","Min","Max","Avg","Median","Index","PopulationVar","SampleVar","PopulationStDev","SampleStDev","RunningTotals","PercentageOfGrandTotal","PercentageOfColumnTotal","PercentageOfRowTotal","PercentageOfParentColumnTotal","PercentageOfParentRowTotal","DifferenceFrom","PercentageOfDifferenceFrom","PercentageOfParentTotal"]},t.prototype.getDefaultItems=function(){return["Drillthrough","Expand","Collapse","Pdf Export","Excel Export","Csv Export","Sort Ascending","Sort Descending","Aggregate","CalculatedField"]},t.prototype.buildDefaultItems=function(e){var t;switch(e){case"Aggregate":t={text:this.localeObj.getConstant("aggregate"),target:"th.e-valuesheader,td.e-valuescontent,.e-stot.e-rowsheader",id:this.element.id+"_aggregate"};break;case"CalculatedField":t={text:this.localeObj.getConstant("CalculatedField"),target:"td.e-valuescontent",id:this.element.id+"_CalculatedField"};break;case"Drillthrough":t={text:this.localeObj.getConstant("drillThrough"),target:"td.e-valuescontent",id:this.element.id+"_drillthrough_menu",iconCss:s._297+" "+s.a};break;case"export":t={text:this.localeObj.getConstant("export"),target:"td.e-valuescontent",id:this.element.id+"_exporting",iconCss:s._298+" "+s.a};break;case"Pdf Export":t={text:this.localeObj.getConstant("pdf"),id:this.element.id+"_pdf",iconCss:s.U+" "+s.a};break;case"Excel Export":t={text:this.localeObj.getConstant("excel"),id:this.element.id+"_excel",iconCss:s.V+" "+s.a};break;case"Csv Export":t={text:this.localeObj.getConstant("csv"),id:this.element.id+"_csv",iconCss:s.W+" "+s.a};break;case"Expand":t={text:this.localeObj.getConstant("expand"),target:"td.e-rowsheader,.e-columnsheader",id:this.element.id+"_expand",iconCss:s._299+" "+s.a};break;case"Collapse":t={text:this.localeObj.getConstant("collapse"),target:"td.e-rowsheader,.e-columnsheader",id:this.element.id+"_collapse",iconCss:s._300+" "+s.a};break;case"Sort Ascending":t={text:this.localeObj.getConstant("ascending"),target:"th.e-valuesheader,.e-stot",id:this.element.id+"_sortasc",iconCss:s._301+" "+s.a};break;case"Sort Descending":t={text:this.localeObj.getConstant("descending"),target:"th.e-valuesheader,.e-stot",id:this.element.id+"_sortdesc",iconCss:s._302+" "+s.a};break;case"Group":t={text:this.localeObj.getConstant("group"),target:"td.e-rowsheader,.e-columnsheader",id:this.element.id+"_custom_group",iconCss:s._303+" "+s.a};break;case"Ungroup":t={text:this.localeObj.getConstant("unGroup"),target:"td.e-rowsheader,.e-columnsheader",id:this.element.id+"_custom_ungroup",iconCss:s._304+" "+s.a}}return this.defaultItems[e]={text:t.text,id:t.id,target:t.target,iconCss:t.iconCss},this.defaultItems[e]},t.prototype.initProperties=function(){this.pivotRefresh=r.Component.prototype.refresh,this.minHeight=i.i(r.isNullOrUndefined)(this.minHeight)?300:this.minHeight<10?10:this.minHeight,this.isScrolling=!1,this.allowServerDataBinding=!1,this.isStaticRefresh=!1,this.setProperties({pivotValues:[]},!0),delete this.bulkChanges.pivotValues,this.allowServerDataBinding=!0,this.scrollPosObject={vertical:0,horizontal:0,verticalSection:0,horizontalSection:0,top:0,left:0,scrollDirection:{direction:"",position:0}},this.queryCellInfo=this.gridSettings.queryCellInfo?this.gridSettings.queryCellInfo.bind(this):void 0,this.headerCellInfo=this.gridSettings.headerCellInfo?this.gridSettings.headerCellInfo.bind(this):void 0,this.resizing=this.gridSettings.resizing?this.gridSettings.resizing.bind(this):void 0,this.resizeStop=this.gridSettings.resizeStop?this.gridSettings.resizeStop.bind(this):void 0,this.pdfHeaderQueryCellInfo=this.gridSettings.pdfHeaderQueryCellInfo?this.gridSettings.pdfHeaderQueryCellInfo:void 0,this.pdfQueryCellInfo=this.gridSettings.pdfQueryCellInfo?this.gridSettings.pdfQueryCellInfo:void 0,this.excelHeaderQueryCellInfo=this.gridSettings.excelHeaderQueryCellInfo?this.gridSettings.excelHeaderQueryCellInfo:void 0,this.excelQueryCellInfo=this.gridSettings.excelQueryCellInfo?this.gridSettings.excelQueryCellInfo:void 0,this.columnDragStart=this.gridSettings.columnDragStart?this.gridSettings.columnDragStart.bind(this):void 0,this.columnDrag=this.gridSettings.columnDrag?this.gridSettings.columnDrag.bind(this):void 0,this.columnDrop=this.gridSettings.columnDrop?this.gridSettings.columnDrop.bind(this):void 0,this.beforeColumnsRender=this.gridSettings.columnRender?this.gridSettings.columnRender:void 0,this.selected=this.gridSettings.cellSelected?this.gridSettings.cellSelected:void 0,this.cellDeselected=this.gridSettings.cellDeselected?this.gridSettings.cellDeselected:void 0,this.rowSelected=this.gridSettings.rowSelected?this.gridSettings.rowSelected:void 0,this.rowDeselected=this.gridSettings.rowDeselected?this.gridSettings.rowDeselected:void 0,this.chartTooltipRender=this.chartSettings.tooltipRender?this.chartSettings.tooltipRender:void 0,this.chartLegendClick=this.chartSettings.legendClick?this.chartSettings.legendClick:void 0,this.chartLoaded=this.chartSettings.loaded?this.chartSettings.loaded:void 0,this.chartLoad=this.chartSettings.load?this.chartSettings.load:void 0,this.chartResized=this.chartSettings.resized?this.chartSettings.resized:void 0,this.chartAxisLabelRender=this.chartSettings.axisLabelRender?this.chartSettings.axisLabelRender:void 0,this.multiLevelLabelClick=this.chartSettings.multiLevelLabelClick?this.chartSettings.multiLevelLabelClick:void 0,this.chartPointClick=this.chartSettings.pointClick?this.chartSettings.pointClick:void 0,this.contextMenuClick=this.gridSettings.contextMenuClick?this.gridSettings.contextMenuClick:void 0,this.contextMenuOpen=this.gridSettings.contextMenuOpen?this.gridSettings.contextMenuOpen:void 0,this.beforePdfExport=this.gridSettings.beforePdfExport?this.gridSettings.beforePdfExport.bind(this):void 0,this.beforeExcelExport=this.gridSettings.beforeExcelExport?this.gridSettings.beforeExcelExport.bind(this):void 0,null===this.gridSettings.rowHeight&&(this.isTouchMode?this.setProperties({gridSettings:{rowHeight:36}},!0):this.setProperties({gridSettings:{rowHeight:this.isAdaptive?36:30}},!0)),this.chartSettings&&this.chartSettings.showMemberSeries&&!this.chartSettings.showPointColorByMembers&&this.setProperties({chartSettings:{showPointColorByMembers:!0}},!0),this.element.style.height="100%",this.enableVirtualization&&this.updatePageSettings(!0),this.isCellBoxMultiSelection=this.gridSettings.allowSelection&&"Box"===this.gridSettings.selectionSettings.cellSelectionMode&&"Cell"===this.gridSettings.selectionSettings.mode&&"Multiple"===this.gridSettings.selectionSettings.type,this.allowGrouping&&!this.isCellBoxMultiSelection&&(this.isCellBoxMultiSelection=!0,this.setProperties({gridSettings:{allowSelection:!0,selectionSettings:{cellSelectionMode:"Box",mode:"Cell",type:"Multiple"}}},!0)),"Table"!==this.displayOption.view&&(this.pivotChartModule=new y.a),this.currentView=this.currentView?this.currentView:"Both"===this.displayOption.view?this.displayOption.primary:this.displayOption.view},t.prototype.updatePageSettings=function(e){if(this.enableVirtualization){var t=1,i=1;this.dataSourceSettings.values.length>1&&"pivot"===this.dataType&&("row"===this.dataSourceSettings.valueAxis?i=this.dataSourceSettings.values.length:t=this.dataSourceSettings.values.length);var r=this.getHeightAsNumber();isNaN(r)&&(r=this.element.offsetHeight),this.pageSettings={currentColumnPage:e?1:this.pageSettings.currentColumnPage,currentRowPage:e?1:this.pageSettings.currentRowPage,columnPageSize:Math.ceil((Math.floor(this.getWidthAsNumber()/this.gridSettings.columnWidth)-1)/t),rowPageSize:Math.ceil(Math.floor(r/this.gridSettings.rowHeight)/i)}}},t.prototype.render=function(){this.loadData()},t.prototype.loadData=function(){if(this.dataSourceSettings.formatSettings.length>0)for(var e=this.dataSourceSettings.formatSettings,t=0;t<e.length;t++)i.i(r.isNullOrUndefined)(e[t].maximumFractionDigits)&&i.i(r.isNullOrUndefined)(e[t].minimumFractionDigits)||null!==e[t].format.match(/^(P|N|C|P[0-9]|C[0-9]|N[0-9])$/g)||(e[t].maximumFractionDigits=void 0,e[t].minimumIntegerDigits=void 0);if("pivot"===this.dataType&&this.dataSourceSettings.url&&""!==this.dataSourceSettings.url)if("Server"===this.dataSourceSettings.mode)this.guid=S.a.generateUUID(),this.initialLoad(),"Chart"!==this.displayOption.view&&this.renderEmptyGrid(),this.showWaitingPopup();else{var a=new r.Fetch(this.dataSourceSettings.url,"GET");a.send().then(function(e){return"string"==typeof e?e:e.text()}).then(this.onReadyStateChange.bind(this))}else this.initialLoad()},t.prototype.onSuccess=function(e){if(this.request.readyState===XMLHttpRequest.DONE)if("onExcelExport"===this.currentAction||"onCsvExport"===this.currentAction){if("OK"===this.request.statusText){var t=this.request.response,a=i.i(r.isNullOrUndefined)(e.fileName)?"onExcelExport"===this.currentAction?"default.xlsx":"default.csv":e.fileName;T.Save.save(a,t)}}else{this.isServerWaitingPopup=!0;try{var n=JSON.parse(this.request.responseText);if("fetchFieldMembers"===this.currentAction){for(var o=JSON.parse(n.members),s=[],l={},d={},h=0;h<o.length;h++)s.push({formattedText:o[h].FormattedText,actualText:o[h].ActualText}),l[o[h].FormattedText]={},d[o[h].ActualText]={};this.engineModule.fieldList[n.memberName].dateMember=s,this.engineModule.fieldList[n.memberName].formattedMembers=l,this.engineModule.fieldList[n.memberName].members=d,this.showGroupingBar?this.pivotButtonModule.updateFilterEvents():this.pivotFieldListModule.pivotButtonModule.updateFilterEvents()}else if("fetchRawData"===this.currentAction){for(var p=this.engineModule.fieldList[this.drillThroughValue.actualText.toString()]?this.engineModule.fieldList[this.drillThroughValue.actualText.toString()].caption:this.drillThroughValue.actualText.toString(),u=this.engineModule.fieldList[this.drillThroughValue.actualText]?this.engineModule.fieldList[this.drillThroughValue.actualText].aggregateType:"",c=JSON.parse(n.rawData),g=JSON.parse(n.indexObject),m={},f=0;f<g.length;f++)m[g[f].Key]=g[f].Value;this.drillThroughValue.indexObject=m,this.drillThroughModule.triggerDialog(p,u,c,this.drillThroughValue,this.drillThroughElement)}else{var v=S.a.formatFieldList(JSON.parse(n.fieldList));if(this.engineModule.fieldList)for(var y=Object.keys(this.engineModule.fieldList),h=0;h<y.length;h++)this.engineModule.fieldList[y[h]]&&v[y[h]]&&(v[y[h]].dateMember=this.engineModule.fieldList[y[h]].dateMember,v[y[h]].formattedMembers=this.engineModule.fieldList[y[h]].formattedMembers,v[y[h]].members=this.engineModule.fieldList[y[h]].members);this.engineModule.fieldList=v,this.engineModule.fields=JSON.parse(n.fields),this.engineModule.rowCount=JSON.parse(n.pivotCount).RowCount,this.engineModule.columnCount=JSON.parse(n.pivotCount).ColumnCount,this.engineModule.rowStartPos=JSON.parse(n.pivotCount).RowStartPosition,this.engineModule.colStartPos=JSON.parse(n.pivotCount).ColumnStartPosition,this.engineModule.rowFirstLvl=JSON.parse(n.pivotCount).RowFirstLevel,this.engineModule.colFirstLvl=JSON.parse(n.pivotCount).ColumnFirstLevel,this.engineModule.columnPageCount=JSON.parse(n.pivotCount).ColumnPageCount,this.engineModule.rowPageCount=JSON.parse(n.pivotCount).RowPageCount;for(var b=void 0,C=S.a.formatPivotValues(JSON.parse(n.pivotValue)),x=0;x<C.length;x++)if(C[x]&&C[x][0]&&"row"===C[x][0].axis){b=x;break}this.engineModule.headerContent=S.a.frameContent(C,"header",b,this),this.engineModule.pageSettings=this.pageSettings,this.dataSourceSettings.groupSettings.length>0&&S.a.updateReport(this,JSON.parse(n.dataSourceSettings));var w=JSON.parse(n.dataSourceSettings).ValueSortSettings;this.engineModule.valueSortSettings={headerText:w.HeaderText,headerDelimiter:w.HeaderDelimiter,sortOrder:w.SortOrder,columnIndex:w.ColumnIndex},this.engineModule.pivotValues=C}}catch(e){this.engineModule.pivotValues=[]}if("onScroll"===this.currentAction)if("vertical"===this.scrollDirection){var M="row"===this.dataSourceSettings.valueAxis?this.dataSourceSettings.values.length:1,_=this.pageSettings.rowPageSize*M*this.gridSettings.rowHeight,D=Math.ceil(this.engineModule.rowStartPos/(this.pageSettings.rowPageSize*M)),O=_*D-this.engineModule.rowFirstLvl*M*this.gridSettings.rowHeight;this.scrollPosObject.verticalSection=O}else if("horizondal"===this.scrollDirection){var P="column"===this.dataSourceSettings.valueAxis?this.dataSourceSettings.values.length:1,_=this.pageSettings.columnPageSize*P*this.gridSettings.columnWidth,D=Math.ceil(this.engineModule.colStartPos/(this.pageSettings.columnPageSize*P)),O=_*D-this.engineModule.colFirstLvl*P*this.gridSettings.columnWidth;this.scrollPosObject.horizontalSection=O}"fetchFieldMembers"!==this.currentAction&&"fetchRawData"!==this.currentAction&&(this.initEngine(),this.calculatedFieldModule&&this.calculatedFieldModule.isRequireUpdate&&(this.calculatedFieldModule.endDialog(),this.calculatedFieldModule.isRequireUpdate=!1),this.pivotFieldListModule&&this.pivotFieldListModule.calculatedFieldModule&&this.pivotFieldListModule.calculatedFieldModule.isRequireUpdate&&(this.pivotFieldListModule.calculatedFieldModule.endDialog(),this.pivotFieldListModule.calculatedFieldModule.isRequireUpdate=!1))}},t.prototype.getEngine=function(e,t,i,r,a,n,s,l,d,h){var p=this;this.engineModule.isEmptyData=!1,this.element.querySelector(".e-spin-hide")&&"onExcelExport"!==e&&"onCsvExport"!==e&&this.showWaitingPopup(),this.currentAction=e,this.isServerWaitingPopup=!1;var u={pageSettings:JSON.parse(this.getPersistData()).pageSettings,enableValueSorting:this.enableValueSorting,enablePaging:this.enablePaging,enableVirtualization:this.enableVirtualization,enableDrillThrough:this.allowDrillThrough||this.editSettings.allowEditing,locale:JSON.stringify(S.a.getLocalizedObject(this))};this.request.open("POST",this.dataSourceSettings.url,!0);var c={request:this.request,dataSourceSettings:JSON.parse(this.getPersistData()).dataSourceSettings,action:e,customProperties:{},internalProperties:u,drillItem:t,sortItem:i,aggregatedItem:r,calculatedItem:a,filterItem:n,memberName:s,fetchRawDataArgs:l,editArgs:d,hash:this.guid,excelExportProperties:h,exportAllPages:this.exportAllPages,isGroupingUpdated:"onRefresh"===this.currentAction&&this.dataSourceSettings.groupSettings.length>0||!!this.groupingModule&&this.groupingModule.isUpdate};this.trigger(o._12,c,function(e){p.request=e.request,c.internalProperties=e.internalProperties,c.customProperties=e.customProperties,c.dataSourceSettings=e.dataSourceSettings,c.calculatedItem=e.calculatedItem,c.drillItem=e.drillItem,c.editArgs=e.editArgs,c.fetchRawDataArgs=e.fetchRawDataArgs,c.filterItem=e.filterItem,c.hash=e.hash,c.memberName=e.memberName,c.sortItem=e.sortItem,c.excelExportProperties=e.excelExportProperties,c.exportAllPages=e.exportAllPages}),this.request.withCredentials=!1,this.request.onreadystatechange=this.onSuccess.bind(this,c.excelExportProperties),"onExcelExport"===c.action||"onCsvExport"===c.action?this.request.responseType="blob":this.request.responseType="",this.request.setRequestHeader("Content-type","application/json"),this.request.send(JSON.stringify(c))},t.prototype.onReadyStateChange=function(e){var t=[];if("CSV"===this.dataSourceSettings.type)for(var a=e.split(/\r?\n|\r/),n=0;n<a.length;n++)i.i(r.isNullOrUndefined)(a[n])||""===a[n]||t.push(a[n].split(","));else try{t=JSON.parse(e)}catch(e){t=[]}t&&t.length>0&&this.setProperties({dataSourceSettings:{dataSource:t}},!0),this.initialLoad()},t.prototype.initialLoad=function(){var e=this;try{this.cellTemplateFn=this.templateParser(this.cellTemplate),this.tooltipTemplateFn=this.templateParser(this.tooltipTemplate),this.spinnerTemplate?i.i(n.createSpinner)({target:this.element,template:this.spinnerTemplate,cssClass:this.cssClass?this.cssClass:void 0},this.createElement):i.i(n.createSpinner)({target:this.element,cssClass:this.cssClass?this.cssClass:void 0},this.createElement);var t={dataSourceSettings:this.dataSourceSettings,pivotview:this,fieldsType:{},defaultFieldListOrder:this.defaultFieldListOrder};this.trigger(o.a,t,function(i){e.dataSourceSettings=i.dataSourceSettings,e.fieldsType=i.fieldsType,e.defaultFieldListOrder=t.defaultFieldListOrder,e.updateClass(),e.notify(o._23,{}),"Server"!==e.dataSourceSettings.mode&&e.notify(o._16,{}),e.isAdaptive&&e.contextMenuModule.render(),e.notify(o._28,{}),e.notify(o._29,{})})}catch(e){this.actionFailureMethod(e)}},t.prototype.addInternalEvents=function(){this.on(o._16,this.generateData,this),this.on(o._22,this.renderPivotGrid,this),this.on(o._21,this.onContentReady,this)},t.prototype.removeInternalEvents=function(){this.off(o._16,this.generateData),this.off(o._22,this.renderPivotGrid),this.off(o._21,this.onContentReady)},t.prototype.getPersistData=function(){var e=["dataSourceSettings","pivotValues","gridSettings","chartSettings","displayOption","pageSettings"],t=this.gridSettings.columnRender,i=this.gridSettings.excelQueryCellInfo,r=this.gridSettings.excelHeaderQueryCellInfo,a=this.gridSettings.pdfQueryCellInfo,n=this.gridSettings.pdfHeaderQueryCellInfo,o=this.chartSettings.load,s=this.chartSettings.loaded,l=this.chartSettings.textRender,d=this.chartSettings.pointRender,h=this.chartSettings.seriesRender,p=this.chartSettings.legendRender,u=this.chartSettings.pointClick,c=this.chartSettings.tooltipRender,g=this.chartSettings.legendClick;this.gridSettings.columnRender=void 0,this.gridSettings.excelQueryCellInfo=void 0,this.gridSettings.excelHeaderQueryCellInfo=void 0,this.gridSettings.pdfQueryCellInfo=void 0,this.gridSettings.pdfHeaderQueryCellInfo=void 0,this.chartSettings.tooltipRender=void 0,this.chartSettings.legendClick=void 0,this.chartSettings.load=void 0,this.chartSettings.loaded=void 0,this.chartSettings.textRender=void 0,this.chartSettings.pointRender=void 0,this.chartSettings.seriesRender=void 0,this.chartSettings.legendRender=void 0,this.chartSettings.pointClick=void 0;var m=this.addOnPersist(e);return this.gridSettings.columnRender=t,this.gridSettings.excelQueryCellInfo=i,this.gridSettings.excelHeaderQueryCellInfo=r,this.gridSettings.pdfQueryCellInfo=a,this.gridSettings.pdfHeaderQueryCellInfo=n,this.chartSettings.load=o,this.chartSettings.loaded=s,this.chartSettings.textRender=l,this.chartSettings.pointRender=d,this.chartSettings.seriesRender=h,this.chartSettings.legendRender=p,this.chartSettings.pointClick=u,this.chartSettings.tooltipRender=c,this.chartSettings.legendClick=g,m},t.prototype.loadPersistData=function(e){var t=JSON.parse(e);this.allowServerDataBinding=!1,this.setProperties({gridSettings:t.gridSettings,pivotValues:t.pivotValues,chartSettings:t.chartSettings,displayOption:t.displayOption},!0),delete this.bulkChanges.pivotValues,this.allowServerDataBinding=!0,this.dataSourceSettings=t.dataSourceSettings},t.prototype.mergePersistPivotData=function(){var e=window.localStorage.getItem(this.getModuleName()+this.element.id);i.i(r.isNullOrUndefined)(e)||""===e||this.setProperties(JSON.parse(e),!0)},t.prototype.showConditionalFormattingDialog=function(){this.conditionalFormattingModule&&this.conditionalFormattingModule.showConditionalFormattingDialog()},t.prototype.createCalculatedFieldDialog=function(){this.calculatedFieldModule&&this.calculatedFieldModule.createCalculatedFieldDialog()},t.prototype.getModuleName=function(){return"pivotview"},t.prototype.copy=function(e){this.grid.copy(e)},t.prototype.onPropertyChanged=function(t,a){for(var n=!1,s=0,l=Object.keys(t);s<l.length;s++){var d=l[s];switch(d){case"dataSourceSettings":case"hyperlinkSettings":case"allowDrillThrough":case"editSettings":case"allowDataCompression":if(t.dataSourceSettings&&1===Object.keys(t.dataSourceSettings).length&&t.dataSourceSettings.groupSettings&&"pivot"===this.dataType&&this.updateGroupingReport(t.dataSourceSettings.groupSettings,"Date"),t.dataSourceSettings&&1===Object.keys(t.dataSourceSettings).length&&"dataSource"===Object.keys(t.dataSourceSettings)[0])!i.i(r.isNullOrUndefined)(this.savedDataSourceSettings)&&this.dataSourceSettings.dataSource.length>0&&(S.a.updateDataSourceSettings(this,this.savedDataSourceSettings),this.savedDataSourceSettings=void 0),0===(t.dataSourceSettings.dataSource&&t.dataSourceSettings.dataSource).length&&(this.savedDataSourceSettings=S.a.getClonedDataSourceSettings(this.dataSourceSettings),this.setProperties({dataSourceSettings:{rows:[]}},!0),this.setProperties({dataSourceSettings:{columns:[]}},!0),this.setProperties({dataSourceSettings:{values:[]}},!0),this.setProperties({dataSourceSettings:{filters:[]}},!0)),this.isStaticRefresh||(this.pivotValues=[],"pivot"===this.dataType?(this.engineModule.fieldList=null,this.engineModule.isEmptyData=!0,this.engineModule.data=[]):"olap"===this.dataType&&(this.olapEngineModule.fieldList={},this.olapEngineModule.fieldListData=void 0,this.olapEngineModule.isEmptyData=!0)),this.dataSourceSettings.groupSettings.length>0&&(this.clonedDataSet=t.dataSourceSettings.dataSource,this.updateGroupingReport(this.dataSourceSettings.groupSettings,"Date")),this.showWaitingPopup(),this.notify(o._16,{});else if(S.a.isButtonIconRefesh(d,a,t)){if(this.showGroupingBar&&this.groupingBarModule&&this.axisFieldModule.render(),this.showFieldList&&this.pivotFieldListModule){var h=S.a.cloneFieldSettings(this.dataSourceSettings.rows),p=S.a.cloneFieldSettings(this.dataSourceSettings.columns),u=S.a.cloneFieldSettings(this.dataSourceSettings.values),c=S.a.cloneFieldSettings(this.dataSourceSettings.filters);this.pivotFieldListModule.setProperties({dataSourceSettings:{rows:h,columns:p,values:u,filters:c}},!0),this.pivotFieldListModule.axisFieldModule.render(),this.pivotFieldListModule.treeViewModule.fieldTable&&!this.isAdaptive&&this.pivotFieldListModule.notify(o._24,{})}}else this.remoteData=[],"pivot"===this.dataType&&this.dataSourceSettings.url&&""!==this.dataSourceSettings.url&&("type"in t.dataSourceSettings||"url"in t.dataSourceSettings)?(this.engineModule.fieldList=null,this.loadData()):(t.dataSourceSettings&&("pivot"===this.dataType&&"dataSource"in t.dataSourceSettings||"olap"===this.dataType&&"url"in t.dataSourceSettings)&&(this.isStaticRefresh||("pivot"===this.dataType?(this.engineModule.fieldList=null,this.engineModule.isEmptyData=!0,this.engineModule.data=[]):"olap"===this.dataType&&(this.olapEngineModule.fieldList={},this.olapEngineModule.fieldListData=void 0,this.olapEngineModule.isEmptyData=!0),this.pivotValues=[])),this.notify(o._16,{}));break;case"height":case"width":this.layoutRefresh();break;case"pivotValues":case"displayOption":!this.showToolbar&&t.displayOption&&1===Object.keys(t.displayOption).length&&t.displayOption.view?(this.currentView="Both"===t.displayOption.view?this.displayOption.primary:t.displayOption.view,(this.showGroupingBar||this.showFieldList)&&(this.showFieldList&&this.pivotFieldListModule&&(this.pivotFieldListModule.destroyEngine=!0,this.pivotFieldListModule.destroy(),null!==i.i(r.select)("#"+this.element.id+"_PivotFieldList",this.element)&&i.i(r.remove)(i.i(r.select)("#"+this.element.id+"_PivotFieldList",this.element)),this.pivotFieldListModule.destroyEngine=!1),this.notify(o._23,this)),this.grid||"Chart"===t.displayOption.view?this.pivotChartModule||"Table"===this.displayOption.view||(this.grid&&(this.grid.destroy(),this.grid=void 0),this.pivotChartModule=new y.a):(this.renderEmptyGrid(),"Table"===t.displayOption.view&&this.pivotChartModule&&(this.destroyEngine=!0,this.pivotChartModule.destroy(),this.destroyEngine=!1,this.chart=void 0,this.pivotChartModule=void 0))):this.showToolbar&&!i.i(r.isNullOrUndefined)(t.displayOption)&&t.displayOption.view&&(this.currentView="Both"===t.displayOption.view?this.displayOption.primary:t.displayOption.view);var g="pivot"===this.dataType?this.engineModule:this.olapEngineModule;i.i(r.isNullOrUndefined)(g.fieldList)&&i.i(r.isNullOrUndefined)(g.pivotValues)||this.notify(o._22,{});break;case"gridSettings":this.lastGridSettings=t.gridSettings,this.isCellBoxMultiSelection=this.gridSettings.allowSelection&&"Box"===this.gridSettings.selectionSettings.cellSelectionMode&&"Cell"===this.gridSettings.selectionSettings.mode&&"Multiple"===this.gridSettings.selectionSettings.type,this.allowGrouping&&this.groupingModule&&!this.isCellBoxMultiSelection&&(this.setProperties({gridSettings:{allowSelection:!0,selectionSettings:{cellSelectionMode:"Box",mode:"Cell",type:"Multiple"}}},!0),this.isCellBoxMultiSelection=!0),this.renderModule.updateGridSettings();break;case"chartSettings":this.showGroupingBar&&this.groupingBarModule&&(-1!==Object.keys(t.chartSettings).indexOf("enableMultipleAxis")||t.chartSettings.chartSeries&&-1!==Object.keys(t.chartSettings.chartSeries).indexOf("type"))&&this.groupingBarModule.renderLayout(),i.i(r.isNullOrUndefined)(this.pivotChartModule)&&"Table"!==this.displayOption.view&&(this.pivotChartModule=new y.a);var m="pivot"===this.dataType?this.engineModule:this.olapEngineModule;i.i(r.isNullOrUndefined)(this.pivotChartModule)||i.i(r.isNullOrUndefined)(m.pivotValues)||this.pivotChartModule.loadChart(this,this.chartSettings),i.i(r.isNullOrUndefined)(m.pivotValues)||i.i(r.isNullOrUndefined)(m.fieldList)||this.notify(o._17,this);break;case"locale":case"currencyCode":case"enableRtl":if(this.tooltip&&this.tooltip.destroy(),this.dataSourceSettings.groupSettings&&this.dataSourceSettings.groupSettings.length>0&&this.clonedDataSet){var f=S.a.getClonedData(this.clonedDataSet);this.setProperties({dataSourceSettings:{dataSource:f}},!0)}e.prototype.refresh.call(this),this.updateClass();break;case"enableValueSorting":this.enableValueSorting=t.enableValueSorting,this.updateDataSource();break;case"showGroupingBar":this.element.querySelector(".e-grouping-bar")?this.element.querySelector(".e-grouping-bar").remove():this.groupingBarModule&&this.groupingBarModule.renderLayout(),i.i(r.isNullOrUndefined)(t.showFieldList)&&this.renderPivotGrid();break;case"showFieldList":this.initialLoad();break;case"groupingBarSettings":this.showGroupingBar&&this.groupingBarModule&&(t.groupingBarSettings&&Object.keys(t.groupingBarSettings).indexOf("showFieldsPanel")>-1?(this.groupingBarModule.RefreshFieldsPanel(),this.layoutRefresh()):this.axisFieldModule.render());break;case"showValuesButton":this.showGroupingBar&&this.groupingBarModule&&this.axisFieldModule&&this.axisFieldModule.render(),this.showFieldList&&this.pivotFieldListModule&&this.pivotFieldListModule.axisFieldModule&&(this.pivotFieldListModule.setProperties({showValuesButton:t.showValuesButton},!0),this.pivotFieldListModule.axisFieldModule.render());break;case"showTooltip":this.renderToolTip();break;case"toolbar":this.toolbarModule&&this.toolbarModule.refreshToolbar();break;case"chartTypes":this.toolbarModule&&this.toolbarModule.createChartMenu();break;case"aggregateTypes":this.showGroupingBar&&this.groupingBarModule&&this.axisFieldModule&&this.axisFieldModule.render(),this.showFieldList&&this.pivotFieldListModule&&this.pivotFieldListModule.axisFieldModule&&(this.pivotFieldListModule.setProperties({aggregateTypes:t.aggregateTypes},!0),this.pivotFieldListModule.axisFieldModule.render());break;case"enableFieldSearching":this.pivotFieldListModule&&(this.pivotFieldListModule.enableFieldSearching=this.enableFieldSearching);break;case"pageSettings":this.enableVirtualization||(this.engineModule.pageSettings=this.pageSettings,this.refreshPageData());break;case"pagerSettings":case"enablePaging":this.notify(o._29,this);break;case"cellTemplate":this.cellTemplateFn=this.templateParser(this.cellTemplate),n=!0;break;case"tooltipTemplate":this.tooltipTemplateFn=this.templateParser(this.tooltipTemplate),n=!0}}n&&this.grid&&this.grid.refreshColumns()},t.prototype.templateParser=function(e){if(e)try{return"function"!=typeof e&&document.querySelectorAll(e).length?i.i(r.compile)(document.querySelector(e).innerHTML.trim()):i.i(r.compile)(e)}catch(t){return i.i(r.compile)(e)}},t.prototype.getCellTemplate=function(){return this.cellTemplateFn},t.prototype.appendHtml=function(e,t){var a=document.createElement("div");return a.innerHTML=t,i.i(r.isNullOrUndefined)(a.firstChild)||e.appendChild(a.firstChild),e},t.prototype.renderPivotGrid=function(){this.clearTemplate(),this.pivotChartModule&&(this.pivotChartModule.engineModule=this.engineModule,this.pivotChartModule.loadChart(this,this.chartSettings),this.enableRtl&&this.chart&&"rtl"!==document.body.getAttribute("dir")&&i.i(r.addClass)([this.chart.element],s._305)),(this.showFieldList||this.showGroupingBar||this.allowNumberFormatting||this.allowCalculatedField||this.toolbar||this.allowGrouping||this.gridSettings.contextMenuItems)&&(this.notify(o._17,this),this.pivotFieldListModule&&this.allowDeferLayoutUpdate&&(this.pivotFieldListModule.clonedDataSource=i.i(r.extend)({},this.dataSourceSettings,null,!0))),this.enableVirtualization&&(this.virtualscrollModule=new f.a(this)),(this.allowDrillThrough||this.editSettings.allowEditing)&&(this.drillThroughModule=new v.a(this)),this.enablePaging&&this.notify(o._29,this),"Chart"!==this.displayOption.view?(this.hyperlinkSettings&&(this.isRowCellHyperlink=!!this.hyperlinkSettings.showRowHeaderHyperlink||!!this.hyperlinkSettings.showHyperlink,this.isColumnCellHyperlink=!!this.hyperlinkSettings.showColumnHeaderHyperlink||!!this.hyperlinkSettings.showHyperlink,this.isValueCellHyperlink=!!this.hyperlinkSettings.showValueCellHyperlink||!!this.hyperlinkSettings.showHyperlink,this.isSummaryCellHyperlink=!!this.hyperlinkSettings.showSummaryCellHyperlink||!!this.hyperlinkSettings.showHyperlink,this.applyHyperlinkSettings()),this.renderModule=this.renderModule?this.renderModule:new l.a(this),this.renderModule.render(!0)):this.grid&&i.i(r.remove)(this.grid.element),this.allowConditionalFormatting&&this.applyFormatting(this.pivotValues),this.showToolbar&&"Both"===this.displayOption.view&&this.chart&&this.grid&&(this.showGroupingBar&&this.groupingBarModule&&this.element.querySelector("."+s.w)&&this.groupingBarModule.refreshUI(),this.toolbarModule&&this.toolbarModule.toolbar&&(this.toolbarModule.toolbar.width=this.getGridWidthAsNumber()-2),this.chartSettings.enableScrollOnMultiAxis&&this.chartSettings.enableMultipleAxis&&(this.element.querySelector("."+s._10).style.width=i.i(r.formatUnit)(this.getGridWidthAsNumber())),this.chart.width=i.i(r.formatUnit)(this.getGridWidthAsNumber()),"Table"===this.currentView?(this.grid.element.style.display="",this.chart.element.style.display="none",this.chartSettings.enableMultipleAxis&&this.chartSettings.enableScrollOnMultiAxis&&(this.element.querySelector(".e-pivotchart").style.display="none")):(this.grid.element.style.display="none",this.chart.element.style.display="",this.chartSettings.enableMultipleAxis&&this.chartSettings.enableScrollOnMultiAxis&&(this.element.querySelector(".e-pivotchart").style.display=""))),this.toolbarModule&&(this.showFieldList&&i.i(r.select)("#"+this.element.id+"_PivotFieldList",this.element)&&(this.toolbar&&-1!==this.toolbar.indexOf("FieldList")?i.i(r.select)("#"+this.element.id+"_PivotFieldList",this.element).style.display="none":(i.i(r.select)("#"+this.element.id+"_PivotFieldList",this.element).style.top=this.element.querySelector("."+s.v).offsetHeight.toString()+"px",i.i(r.select)("#"+this.element.id+"_PivotFieldList",this.element).style.position="relative")),this.toolbar&&-1!==this.toolbar.indexOf("FieldList")&&this.showToolbar&&this.element.querySelector(".e-toggle-field-list")&&(this.element.querySelector(".e-toggle-field-list").style.display="none"),this.toolbarModule&&"New"!==this.toolbarModule.action&&"Load"!==this.toolbarModule.action&&"Remove"!==this.toolbarModule.action&&(this.isModified=!0),this.isInitialRendering||(this.isModified=!1,this.isInitialRendering=!this.isInitialRendering),this.toolbarModule.action="")},t.prototype.showWaitingPopup=function(){this.grid&&this.grid.element&&!this.spinnerTemplate&&"Table"===this.currentView?i.i(n.showSpinner)(this.grid.element):i.i(n.showSpinner)(this.element)},t.prototype.hideWaitingPopup=function(){this.grid&&this.grid.element&&!this.spinnerTemplate&&"Table"===this.currentView?i.i(n.hideSpinner)(this.grid.element):i.i(n.hideSpinner)(this.element)},t.prototype.updateDataSource=function(){var e=this;this.showWaitingPopup();var t=this,i=Object.keys(t.lastSortInfo).length>0,r=Object.keys(t.lastFilterInfo).length>0,a=Object.keys(t.lastAggregationInfo).length>0,n=Object.keys(t.lastCalcFieldInfo).length>0,s={dataSourceSettings:S.a.getClonedDataSourceSettings(t.dataSourceSettings)};t.trigger(o.b,s,function(o){if((t.enableVirtualization||t.enablePaging)&&(i||r||a||n)||S.a.updateDataSourceSettings(t,o.dataSourceSettings),t.updatePageSettings(!1),"pivot"===t.dataType&&(t.enableVirtualization||t.enablePaging)&&(i||r||a||n))i&&(t.setProperties({dataSourceSettings:{valueSortSettings:{headerText:""}}},!0),"Server"===e.dataSourceSettings.mode?t.getEngine("onSort",null,t.lastSortInfo,null,null,null,null):t.engineModule.onSort(t.lastSortInfo),t.lastSortInfo={}),a&&("Server"===e.dataSourceSettings.mode?t.getEngine("onAggregation",null,null,t.lastAggregationInfo,null,null,null):t.engineModule.onAggregation(t.lastAggregationInfo),t.lastAggregationInfo={}),n&&("Server"===e.dataSourceSettings.mode?t.getEngine("onCalcOperation",null,null,null,t.lastCalcFieldInfo,null,null):t.engineModule.onCalcOperation(t.lastCalcFieldInfo,t.dataSourceSettings),t.lastCalcFieldInfo={}),r&&("Server"===e.dataSourceSettings.mode?t.getEngine("onFilter",null,null,null,null,t.lastFilterInfo,null):t.engineModule.onFilter(t.lastFilterInfo,t.dataSourceSettings),t.lastFilterInfo={}),t.allowServerDataBinding=!1,t.setProperties({pivotValues:t.engineModule.pivotValues},!0),delete t.bulkChanges.pivotValues,t.allowServerDataBinding=!0,"Server"!==t.dataSourceSettings.mode&&t.enginePopulatedEventMethod("updateDataSource");else if("olap"===t.dataType){var s={mode:"",savedFieldList:t.olapEngineModule.fieldList,savedFieldListData:t.olapEngineModule.fieldListData,pageSettings:t.pageSettings,enableValueSorting:t.enableValueSorting,isDrillThrough:t.allowDrillThrough||t.editSettings.allowEditing,localeObj:t.localeObj,enableVirtualization:e.enableVirtualization};n||i?(t.olapEngineModule.savedFieldList=t.olapEngineModule.fieldList,t.olapEngineModule.savedFieldListData=t.olapEngineModule.fieldListData,n?(t.olapEngineModule.updateCalcFields(t.dataSourceSettings,t.lastCalcFieldInfo),t.lastCalcFieldInfo={}):(t.olapEngineModule.onSort(t.dataSourceSettings),t.lastSortInfo={})):t.olapEngineModule.renderEngine(t.dataSourceSettings,s,t.onHeadersSort?t.getHeaderSortInfo.bind(t):void 0),t.allowServerDataBinding=!1,t.setProperties({pivotValues:t.olapEngineModule.pivotValues},!0),delete t.bulkChanges.pivotValues,t.allowServerDataBinding=!0,t.enginePopulatedEventMethod("updateDataSource")}else{var s={mode:"",savedFieldList:t.engineModule.fieldList,pageSettings:t.pageSettings,enableValueSorting:t.enableValueSorting,isDrillThrough:t.allowDrillThrough||t.editSettings.allowEditing,localeObj:t.localeObj,fieldsType:t.fieldsType,clonedReport:t.clonedReport,globalize:t.globalize,currenyCode:t.currencyCode,enablePaging:e.enablePaging,enableVirtualization:e.enableVirtualization,allowDataCompression:e.allowDataCompression,enableHtmlSanitizer:e.enableHtmlSanitizer};"Server"===t.dataSourceSettings.mode?i?t.getEngine("onSort",null,t.lastSortInfo,null,null,null,null):a?t.getEngine("onAggregation",null,null,t.lastAggregationInfo,null,null,null):n?t.getEngine("onCalcOperation",null,null,null,t.lastCalcFieldInfo,null,null):r?t.getEngine("onFilter",null,null,null,null,t.lastFilterInfo,null):t.getEngine("onDrop",null,null,null,null,null,null):(i&&""!==t.dataSourceSettings.valueSortSettings.headerText&&t.setProperties({dataSourceSettings:{valueSortSettings:{headerText:""}}},!0),t.engineModule.renderEngine(t.dataSourceSettings,s,t.aggregateCellInfo?t.getValueCellInfo.bind(t):void 0,t.onHeadersSort?t.getHeaderSortInfo.bind(t):void 0),t.allowServerDataBinding=!1,t.setProperties({pivotValues:t.engineModule.pivotValues},!0),delete t.bulkChanges.pivotValues,t.allowServerDataBinding=!0,t.enginePopulatedEventMethod("updateDataSource")),t.lastSortInfo={},t.lastAggregationInfo={},t.lastCalcFieldInfo={},t.lastFilterInfo={}}})},t.prototype.refreshPageData=function(){var e={dataSourceSettings:S.a.getClonedDataSourceSettings(this.dataSourceSettings)};this.actionBeginMethod(),this.showWaitingPopup(),this.trigger(o.b,e),"pivot"===this.dataType&&("Server"===this.dataSourceSettings.mode?this.getEngine("onPageChange",null,null,null,null,null,null):this.engineModule.generateGridData(this.dataSourceSettings,!0,this.engineModule.headerCollection),this.setProperties({pivotValues:this.engineModule.pivotValues},!0),this.enginePopulatedEventMethod("updateDataSource")),this.actionObj.actionName=this.getActionCompleteName(),this.actionObj.actionName&&this.actionCompleteMethod()},t.prototype.excelExport=function(e,t,i,r,a){if(a&&"Server"===this.dataSourceSettings.mode)this.getEngine("onExcelExport",null,null,null,null,null,null,null,null,e);else{(this.enableVirtualization||this.enablePaging||this.allowEngineExport||this.allowConditionalFormatting&&this.dataSourceSettings.conditionalFormatSettings.length>0)&&"Server"!==this.dataSourceSettings.mode?this.excelExportModule.exportToExcel("Excel",e,r):(this.exportType="Excel",this.grid.excelExport(e,t,i,r)),this.actionObj.actionName=this.getActionCompleteName();var n={exportInfo:{type:this.exportType,info:e}};this.actionObj.actionInfo=n,this.actionObj.actionName&&this.actionCompleteMethod()}},t.prototype.csvExport=function(e,t,i,r,a){if(a&&"Server"===this.dataSourceSettings.mode)this.getEngine("onCsvExport",null,null,null,null,null,null,null,null,e);else{(this.enableVirtualization||this.enablePaging||this.allowEngineExport||this.allowConditionalFormatting&&this.dataSourceSettings.conditionalFormatSettings.length>0)&&"Server"!==this.dataSourceSettings.mode?this.excelExportModule.exportToExcel("CSV",e,r):(this.exportType="CSV",this.grid.csvExport(e,t,i,r)),this.actionObj.actionName=this.getActionCompleteName();var n={exportInfo:{type:this.exportType,info:e}};this.actionObj.actionInfo=n,this.actionObj.actionName&&this.actionCompleteMethod()}},t.prototype.gridPdfExport=function(e,t,i,r){var a={pdfExportProperties:e,isMultipleExport:t,isBlob:r,pdfDoc:i,currentExportView:"Table",pdfMargins:{}},n=null;this.trigger(o.h,a),this.pdfExportModule&&(this.pdfExportModule.exportProperties=a),n=(this.enableVirtualization||this.enablePaging||this.allowEngineExport||this.allowConditionalFormatting&&this.dataSourceSettings.conditionalFormatSettings.length>0||a.height||a.width||Object.keys(a.pdfMargins).length>0)&&"Server"!==this.dataSourceSettings.mode?this.pdfExportModule.exportToPDF(a.pdfExportProperties,a.isMultipleExport,a.pdfDoc,a.isBlob):this.grid.pdfExport(a.pdfExportProperties,a.isMultipleExport,a.pdfDoc,a.isBlob),this.actionObj.actionName=this.getActionCompleteName();var s={exportInfo:{type:"PDF",info:e}};return this.actionObj.actionInfo=s,this.actionObj.actionName&&this.actionCompleteMethod(),n},t.prototype.chartExport=function(e,t,a,n,s){var l={pdfExportProperties:t,isMultipleExport:a,isBlob:s,pdfDoc:n,type:e,currentExportView:"Chart",pdfMargins:{}};this.trigger(o.h,l),this.chartExportModule.exportProperties=l;var d,h=l.fileName?l.fileName:i.i(r.isNullOrUndefined)(t)||i.i(r.isNullOrUndefined)(t.fileName)?"default":t.fileName;if("PDF"===e)d=this.chartExportModule.pdfChartExport(l.pdfExportProperties,l.pdfDoc,l.isMultipleExport,l.isBlob);else{var p=0===l.orientation||l.orientation?l.orientation:i.i(r.isNullOrUndefined)(t)||i.i(r.isNullOrUndefined)(t.pageOrientation)?C.PdfPageOrientation.Landscape:"Landscape"===t.pageOrientation?C.PdfPageOrientation.Landscape:C.PdfPageOrientation.Portrait;d=this.chart.exportModule.export(l.type,h,p,null)}this.actionObj.actionName=this.getActionCompleteName();var u={exportInfo:{type:e,info:h}};return this.actionObj.actionInfo=u,this.actionObj.actionName&&this.actionCompleteMethod(),d},t.prototype.pdfExport=function(e,t,i,r,a){var n=this,o=null;return new Promise(function(s){if(a&&"Both"===n.displayOption.view)if("Chart"===n.displayOption.primary){var l=n.chartExport("PDF",e,!0,i,!1);l.then(function(i){o=n.gridPdfExport(e,t,i,r),s(o)})}else{var d=n.gridPdfExport(e,!0,i,!1);d.then(function(i){o=n.chartExport("PDF",e,t,i,r),s(o)})}else{var h=n.gridPdfExport(e,t,i,r);s(h)}})},t.prototype.printChart=function(){this.chart&&this.chart.print()},t.prototype.onDrill=function(e,t){var a=this,n=this.dataSourceSettings.drilledMembers[0]&&this.dataSourceSettings.drilledMembers[0].delimiter?this.dataSourceSettings.drilledMembers[0].delimiter:"**",l="",d="",h="";if(t?(l=t.fieldName,d=t.cell.axis,h=t.isDrilled?"up":"down"):(d=e.parentElement.classList.contains(s._282)?"row":"column",l="row"===d?i.i(r.closest)(e,"td").getAttribute("fieldname"):i.i(r.closest)(e,"th").getAttribute("fieldname"),h=e.classList.contains(s._287)?"up":"down"),"pivot"===this.dataType){var p=S.a.cloneDrillMemberSettings(this.dataSourceSettings.drilledMembers),u="row"===d?Number(i.i(r.closest)(e,"td").getAttribute("data-colindex")):Number(i.i(r.closest)(e,"th").getAttribute("data-colindex")),c="row"===d?Number(i.i(r.closest)(e,"td").getAttribute("index")):Number(i.i(r.closest)(e,"th").getAttribute("index")),g=t?t.cell:this.engineModule.pivotValues[c][u],m=g.valueSort.levelName.split(this.engineModule.valueSortSettings.headerDelimiter).join(n),f=!1;if(0===this.dataSourceSettings.drilledMembers.length)this.setProperties({dataSourceSettings:{drilledMembers:[{name:l,items:[m],delimiter:n}]}},!0);else{for(var v=S.a.cloneDrillMemberSettings(this.dataSourceSettings.drilledMembers),y=0;y<v.length;y++){var b=v[y];if(m=m.split(n).join(b.delimiter?b.delimiter:n),n=b.delimiter=b.delimiter?b.delimiter:n,b.name===l){f=!0;var C=b.items.indexOf(m);C>-1?b.items.splice(C,1):b.items.push(m)}}this.setProperties({dataSourceSettings:{drilledMembers:v}},!0),f||this.dataSourceSettings.drilledMembers.push({name:l,items:[m],delimiter:n})}this.showWaitingPopup();var x=this,w={fieldName:l,memberName:m,delimiter:n,axis:d,action:h,currentCell:g},T={drillInfo:w,pivotview:x,cancel:!1};x.trigger(o.z,T,function(e){if(e.cancel)a.hideWaitingPopup(),a.setProperties({dataSourceSettings:{drilledMembers:p}},!0);else{var t={dataSourceSettings:S.a.getClonedDataSourceSettings(a.dataSourceSettings)};x.trigger(o.b,t),x.setProperties({dataSourceSettings:t.dataSourceSettings},!0),x.enableVirtualization||x.enablePaging?"Server"===a.dataSourceSettings.mode?a.getEngine("onDrill",w,null,null,null,null,null):(x.engineModule.drilledMembers=x.dataSourceSettings.drilledMembers,x.engineModule.onDrill(w)):"Server"===a.dataSourceSettings.mode?a.getEngine("onDrill",w,null,null,null,null,null):x.engineModule.generateGridData(x.dataSourceSettings,!0),x.allowServerDataBinding=!1,x.setProperties({pivotValues:x.engineModule.pivotValues},!0),delete x.bulkChanges.pivotValues,x.allowServerDataBinding=!0;var i={dataSourceSettings:S.a.getClonedDataSourceSettings(t.dataSourceSettings),pivotValues:a.pivotValues};a.trigger(o.c,i),x.engineModule.pivotValues=i.pivotValues;var r={drillInfo:w};a.actionObj.actionInfo=r,x.renderPivotGrid()}})}else this.onOlapDrill(l,d,h,n,e,t)},t.prototype.onOlapDrill=function(e,t,a,n,s,l){var d,h=this,p=this,u=S.a.cloneDrillMemberSettings(this.dataSourceSettings.drilledMembers);if(l)d=l.cell;else{var c="row"===t?Number(i.i(r.closest)(s,"td").getAttribute("data-colindex")):Number(i.i(r.closest)(s,"th").getAttribute("data-colindex")),g="row"===t?Number(i.i(r.closest)(s,"td").getAttribute("index")):Number(i.i(r.closest)(s,"th").getAttribute("index"));d=this.olapEngineModule.pivotValues[g][c]}var m="row"===t?this.olapEngineModule.tupRowInfo[d.ordinal]:this.olapEngineModule.tupColumnInfo[d.ordinal],f={axis:t,action:a,fieldName:e,delimiter:"~~",memberName:m.uNameCollection,currentCell:d};this.showWaitingPopup();var v={drillInfo:f,pivotview:p,cancel:!1},y=this.olapEngineModule.fieldList[f.fieldName]&&this.olapEngineModule.fieldList[f.fieldName].isHierarchy,b=m.drillInfo.map(function(e){return e.hierarchy}).indexOf(d.hierarchy.toString()),C=S.a.cloneDrillMemberSettings(this.dataSourceSettings.drilledMembers);if(f&&"down"===f.action){for(var x=m.drillInfo.map(function(e){return e.uName}),w="",T=0;T<=b;T++){var M=x[T],_=M.split("~~");w=w+(""!==w?"~~":"")+_[_.length-1]}for(var D=this.olapEngineModule.getDrilledSets(f.memberName,d,this.olapEngineModule.fieldList[d.hierarchy]&&!this.olapEngineModule.fieldList[d.hierarchy].hasAllMember?d.valueSort.levelName.split(this.dataSourceSettings.valueSortSettings.headerDelimiter).length-1:b,t),O=Object.keys(D),P=0,E=O;P<E.length;P++)for(var N=E[P],F=D[N],I=0,L=C.length;I<L;I++){var A=C[I],R=F;A.delimiter&&(R=R.replace(/~~/g,A.delimiter));for(var k=[],j=0;j<A.items.length;j++)0!==A.items[j].indexOf(R)&&(k[k.length]=A.items[j]);A.items=k}this.olapEngineModule.drilledSets[d.actualText]=m.members[b],f.memberName=w;for(var H=[],q=0,V=C;q<V.length;q++){var M=V[q];M.name===f.fieldName&&H.push(M)}if(H.length>0){H[0].delimiter&&(w=w.replace(/~~/g,H[0].delimiter));var B=S.a.inArray(w,H[0].items);if(-1===B&&H[0].items.push(w),y)for(var I=0;I<H[0].items.length;)H[0].items[I]===w?H[0].items.splice(I,1):++I}else if(!y){var U={name:f.fieldName,items:[w],delimiter:"~~"};C?C.push(U):C=[U]}v.drillInfo.memberName=w,this.setProperties({dataSourceSettings:{drilledMembers:C}},!0),p.trigger(o.z,v,function(e){if(e.cancel)h.hideWaitingPopup(),h.setProperties({dataSourceSettings:{drilledMembers:u}},!0);else{var t={dataSourceSettings:S.a.getClonedDataSourceSettings(h.dataSourceSettings)};h.trigger(o.b,t),h.setProperties({dataSourceSettings:t.dataSourceSettings},!0),h.olapEngineModule.updateDrilledInfo(h.dataSourceSettings),h.allowServerDataBinding=!1,h.setProperties({pivotValues:h.olapEngineModule.pivotValues},!0),delete h.bulkChanges.pivotValues,h.allowServerDataBinding=!0;var i={dataSourceSettings:S.a.getClonedDataSourceSettings(t.dataSourceSettings),pivotValues:p.olapEngineModule.pivotValues};h.trigger(o.c,i),h.olapEngineModule.pivotValues=i.pivotValues,h.renderPivotGrid()}})}else{delete this.olapEngineModule.drilledSets[d.actualText];for(var D=this.olapEngineModule.getDrilledSets(f.memberName,d,b,t),O=Object.keys(D),x=m.drillInfo.map(function(e){return e.uName}),w="",T=0;T<=b;T++){var M=x[T],_=M.split("~~");w=w+(""!==w?"~~":"")+_[_.length-1]}for(var G=0,z=O;G<z.length;G++){for(var N=z[G],F=D[N],W=[],I=0,L=C.length;I<L;I++){var H=C[I],Q=F;if(H.name===f.fieldName&&W.push(H),H.delimiter&&(Q=F.replace(/~~/g,H.delimiter)),!y){for(var k=[],j=0;j<H.items.length;j++)0!==H.items[j].indexOf(Q)&&(k[k.length]=H.items[j]);H.items=k}}if(y)if(W.length>0){W[0].delimiter&&(w=w.replace(/~~/g,W[0].delimiter));var B=S.a.inArray(w,W[0].items);-1===B&&W[0].items.push(w)}else{var U={name:f.fieldName,items:[w],delimiter:"~~"};C?C.push(U):C=[U]}}for(var Y=[],K=0,X=C;K<X.length;K++){var J=X[K];J.items.length>0&&Y.push(J)}this.setProperties({dataSourceSettings:{drilledMembers:C}},!0),p.trigger(o.z,v,function(e){if(e.cancel)h.hideWaitingPopup(),h.setProperties({dataSourceSettings:{drilledMembers:u}},!0);else{var t={dataSourceSettings:S.a.getClonedDataSourceSettings(h.dataSourceSettings)};h.trigger(o.b,t),h.setProperties({dataSourceSettings:t.dataSourceSettings},!0),h.setProperties({dataSourceSettings:{drilledMembers:Y}},!0),h.olapEngineModule.updateDrilledInfo(h.dataSourceSettings),h.allowServerDataBinding=!1,h.setProperties({pivotValues:h.olapEngineModule.pivotValues},!0),delete h.bulkChanges.pivotValues,h.allowServerDataBinding=!0;var i={dataSourceSettings:S.a.getClonedDataSourceSettings(t.dataSourceSettings),pivotValues:p.olapEngineModule.pivotValues};h.trigger(o.c,i),h.olapEngineModule.pivotValues=i.pivotValues,h.renderPivotGrid()}})}},t.prototype.onContentReady=function(){if(this.isPopupClicked=!1,this.showFieldList&&this.pivotFieldListModule?(this.pivotFieldListModule.element.style.display="block",i.i(n.hideSpinner)(this.pivotFieldListModule.fieldListSpinnerElement)):this.fieldListSpinnerElement&&i.i(n.hideSpinner)(this.fieldListSpinnerElement),this.isEmptyGrid?(this.isEmptyGrid=!1,this.notEmpty=!0):("Server"===this.dataSourceSettings.mode&&this.isServerWaitingPopup||"Local"===this.dataSourceSettings.mode)&&this.hideWaitingPopup(),this.grid){var e="pivot"===this.dataType?this.engineModule:this.olapEngineModule;if(this.enableVirtualization&&e){this.element.querySelector("."+s._276)&&!this.element.querySelector("."+s._276).querySelector("."+s._281)&&(this.virtualDiv=i.i(r.createElement)("div",{className:s._281}),this.element.querySelector("."+s._276).appendChild(this.virtualDiv)),this.element.querySelector("."+s._278)&&!this.element.querySelector("."+s._278).querySelector("."+s._281)?(this.virtualHeaderDiv=i.i(r.createElement)("div",{className:s._281}),this.element.querySelector("."+s._278).appendChild(this.virtualHeaderDiv)):this.virtualHeaderDiv=this.element.querySelector("."+s._278).querySelector("."+s._281);var t=this.element.querySelector("."+s._276).querySelector(".e-table"),a=this.gridSettings.rowHeight*e.rowCount+.1-t.clientHeight;a>this.scrollerBrowserLimit&&(this.verticalScrollScale=a/this.scrollerBrowserLimit,a=this.scrollerBrowserLimit);var l=this.gridSettings.columnWidth*e.columnCount;l>this.scrollerBrowserLimit&&(this.horizontalScrollScale=l/this.scrollerBrowserLimit,l=this.scrollerBrowserLimit),i.i(r.setStyleAttribute)(this.virtualDiv,{height:(a>.1?a:.1)+"px",width:(l>.1?l:.1)+"px"}),i.i(r.setStyleAttribute)(this.virtualHeaderDiv,{height:0,width:(l>.1?l:.1)+"px"});var d=this.element.querySelector("."+s._276),h=this.element.querySelector("."+s._277),p=this.element.querySelector("."+s._278);this.isAdaptive&&(d.parentElement.parentElement.querySelector("."+s._279).children[0].style.minHeight="1px",d.parentElement.parentElement.querySelector("."+s._279).style.minHeight="1px");var u=this.isAdaptive?d:d.parentElement.parentElement.querySelector("."+s._279),c=d.parentElement.scrollTop>this.scrollerBrowserLimit?d.querySelector("."+s._280).style.transform.split(",")[1].trim():-(d.parentElement.scrollTop*this.verticalScrollScale-this.scrollPosObject.verticalSection-d.parentElement.scrollTop)+"px)",g=u.scrollLeft>this.scrollerBrowserLimit?d.querySelector("."+s._280).style.transform.split(",")[0].trim()+",":"translate("+-(u.scrollLeft*this.horizontalScrollScale-this.scrollPosObject.horizontalSection-u.scrollLeft)+"px,";i.i(r.setStyleAttribute)(h.querySelector(".e-table"),{transform:"translate(0px,"+c}),i.i(r.setStyleAttribute)(d.querySelector(".e-table"),{transform:g+c}),i.i(r.setStyleAttribute)(p.querySelector(".e-table"),{transform:g+0+"px)"}),i.i(r.isNullOrUndefined)(this.resizedValue)||(this.element.querySelector(".e-frozenscrollbar").style.width=this.resizedValue+"px"),this.grid.element.querySelector("."+s._306).style.width=l+(d.parentElement.offsetWidth-d.parentElement.clientWidth)+"px";var m="pivot"===this.dataType&&"column"===this.dataSourceSettings.valueAxis?this.dataSourceSettings.values.length:1,f=this.pageSettings.columnPageSize*m*this.gridSettings.columnWidth,v=u.scrollWidth-(u.scrollLeft+u.offsetWidth);if(this.virtualscrollModule&&f>0&&v<=f&&u.scrollLeft>0){this.virtualDiv.style.display="none";var S=d.scrollWidth-(d.scrollLeft+d.offsetWidth);this.virtualDiv.style.display="";var y=d.scrollWidth-(d.scrollLeft+d.offsetWidth);if(S>1&&(this.scrollPosObject.horizontalSection-=v<=0?S>v?S:-y:y===S?S-v:S<y&&(v===y||v>S)?-(y-S):0),"Sort value"===this.actionObj.actionName||"Sort field"===this.actionObj.actionName){var b=-this.scrollPosObject.horizontalSection;this.scrollPosObject.horizontalSection=this.scrollPosObject.horizontalSection+b}g=u.scrollLeft>this.scrollerBrowserLimit?d.querySelector("."+s._280).style.transform.split(",")[0].trim()+",":"translate("+-(u.scrollLeft*this.horizontalScrollScale-this.scrollPosObject.horizontalSection-u.scrollLeft)+"px,",i.i(r.setStyleAttribute)(d.querySelector(".e-table"),{transform:g+c}),i.i(r.setStyleAttribute)(p.querySelector(".e-table"),{transform:g+0+"px)"})}"auto"!==this.grid.height?this.grid.contentModule.setHeightToContent(this.virtualDiv.offsetHeight+t.clientHeight):this.grid.contentModule.setHeightToContent(this.element.querySelector("."+s._277+" ."+s._280).offsetHeight)}"Chart"!==this.currentView&&this.grid.hideScroll(),this.showGroupingBar?(this.element.style.minWidth="400px",this.grid.element.style.minWidth="400px"):(this.element.style.minWidth="310px",this.grid.element.style.minWidth="310px")}this.unwireEvents(),this.wireEvents(),this.isChartLoaded=!1,this.isEmptyGrid||this.trigger(o.o),this.actionObj.actionName=this.getActionCompleteName(),this.actionObj.actionName&&this.actionObj.actionName!==o._78&&this.actionCompleteMethod(),this.groupingModule&&(this.groupingModule.isUpdate=!1),this.engineModule&&this.engineModule.clearProperties()},t.prototype.setToolTip=function(e){var t=this,a=Number(e.target.getAttribute("data-colindex")),n=Number(e.target.getAttribute("index")),o=this.dataSourceSettings.values.length>0&&this.pivotValues&&this.pivotValues[n]&&this.pivotValues[n][a]?this.pivotValues[n][a]:void 0;this.tooltip.content="";var l,d,h=!1;if(o&&"olap"===this.dataType){var p=o.actualText;if(!i.i(r.isNullOrUndefined)(p)&&this.olapEngineModule.fieldList&&!this.olapEngineModule.fieldList[p]){var u=this.olapEngineModule.tupRowInfo;p=o.rowOrdinal>-1&&u.length>0&&u[o.rowOrdinal]&&!i.i(r.isNullOrUndefined)(u[o.rowOrdinal].measureName)?u[o.rowOrdinal].measureName:p}if(this.olapEngineModule.fieldList&&this.olapEngineModule.fieldList[p]){var c=this.olapEngineModule.fieldList[p];l=c.isCalculatedField?c.type:c.aggregateType,d=this.olapEngineModule.dataFields[p]&&this.olapEngineModule.dataFields[p].caption?this.olapEngineModule.dataFields[p].caption:c.caption,h=!0}}else if(o&&this.engineModule.fieldList&&this.engineModule.fieldList[o.actualText]){var c=this.engineModule.fieldList[o.actualText];l=c.aggregateType,l="DistinctCount"===l||"number"===c.type&&"include"!==c.type&&"exclude"!==c.type?void 0===l?"Sum":c.aggregateType:"Count",d=c.caption,h=!0}if(o&&h){var g=this.getRowText(n,0),m=this.getColText(0,a,n),f=""===o.formattedText?this.localeObj.getConstant("noValue"):o.formattedText;if(this.tooltipTemplate&&void 0!==this.getTooltipTemplate()){var v=this.getHeaderField(n,a,"row"),S=this.getHeaderField(n,a,"column"),y={rowHeaders:g,columnHeaders:m,aggregateType:l,valueField:d,value:f,rowFields:v,columnFields:S};if("function"==typeof this.tooltipTemplate&&this.isReact){var b=document.createElement("div");this.getTooltipTemplate()(y,this,"tooltipTemplate",this.element.id+"tooltipTemplate",null,null,b),this.renderReactTemplates(function(){t.enableHtmlSanitizer?t.tooltip.content=r.SanitizeHtmlHelper.sanitize(b.outerHTML):t.tooltip.content=b.outerHTML})}else{var C=this.getTooltipTemplate()(y,this,"tooltipTemplate",this.element.id+"tooltipTemplate")[0].outerHTML;this.enableHtmlSanitizer?this.tooltip.content=r.SanitizeHtmlHelper.sanitize(C):this.tooltip.content=C}}else{var x="<div class="+s._307+"><p class="+s._308+">"+this.localeObj.getConstant("row")+":</p><p class="+s._309+">"+g+"</p></br><p class="+s._308+">"+this.localeObj.getConstant("column")+":</p><p class="+s._309+">"+m+"</p></br>"+(""!==o.actualText?"<p class="+s._308+">"+("olap"===this.dataType?"":this.localeObj.getConstant(l)+" "+this.localeObj.getConstant("of")+" ")+d+":</p><p class="+s._309+">"+f+"</p></div>":""),w=function(){return x};this.tooltip.content=i.i(r.initializeCSPTemplate)(w)}}else e.cancel=!0},t.prototype.getTooltipTemplate=function(){return this.tooltipTemplateFn},t.prototype.getHeaderField=function(e,t,i){var r,a="",n="olap"===this.dataType?this.olapEngineModule:this.engineModule,o=n.valueSortSettings.headerDelimiter;if("row"===i){r=this.pivotValues[e][0].valueSort.levelName.toString().split(o).length;for(var s=0;s<r&&this.dataSourceSettings.rows.length>0&&this.dataSourceSettings.rows[s];s++)a+=(s?" - ":"")+(this.dataSourceSettings.rows[s].caption?this.dataSourceSettings.rows[s].caption:this.dataSourceSettings.rows[s].name)}else{if(this.dataSourceSettings.columns.length>0){var l=0===this.dataSourceSettings.values.length?0:Number(Object.keys(n.headerContent)[Object.keys(n.headerContent).length-1]);r=this.pivotValues[l][t].valueSort.levelName.toString().split(o).length,r=this.dataSourceSettings.values.length>1?r-1:r}for(var d=0;d<r&&this.dataSourceSettings.columns.length>0&&this.dataSourceSettings.columns[d];d++)a+=(d?" - ":"")+(this.dataSourceSettings.columns[d].caption?this.dataSourceSettings.columns[d].caption:this.dataSourceSettings.columns[d].name)}return a},t.prototype.getLevel=function(e){var t=e.valueSort?e.valueSort.levelName.toString():"",i=e.actualText?e.actualText.toString().split(this.dataSourceSettings.valueSortSettings.headerDelimiter).length:0,r=t.split(this.dataSourceSettings.valueSortSettings.headerDelimiter).length-(i?i-1:i);return r?r-1:0},t.prototype.getRowText=function(e,t){var a=this.pivotValues[e][t],n="";if(a){var o=this.getLevel(a);if(n="grand sum"===a.type?this.localeObj.getConstant("grandTotal"):a.formattedText,"row"===this.dataSourceSettings.valueAxis)n=0===this.dataSourceSettings.rows.length&&this.dataSourceSettings.values.length>1?this.pivotValues[e][0].valueSort.levelName.toString().slice((this.localeObj.getConstant("grandTotal")+this.dataSourceSettings.valueSortSettings.headerDelimiter).length).toString():1===this.dataSourceSettings.values.length?i.i(r.isNullOrUndefined)(this.dataSourceSettings.values[0].caption)?this.dataSourceSettings.values[0].name:this.dataSourceSettings.values[0].caption:this.pivotValues[e][0].valueSort.levelName.toString(),n=n.split(this.dataSourceSettings.valueSortSettings.headerDelimiter).join(" - ");else for(;o>0||void 0===a.index;)e--,a=this.pivotValues[e][t],void 0!==a.index&&o>a.level&&(n=n+this.dataSourceSettings.valueSortSettings.headerDelimiter+a.formattedText,o-=1);n=n.split(this.dataSourceSettings.valueSortSettings.headerDelimiter).reverse().join(" - ")}return n},t.prototype.getColText=function(e,t,i){for(var r=this.pivotValues[0][t],a=r.axis,n="grand sum"===r.type?this.localeObj.getConstant("grandTotal"):r.formattedText;"value"!==a&&i>e;)e++,this.pivotValues[e]&&(r=this.pivotValues[e][t],a=r.axis,"sum"!==r.type&&"grand sum"!==r.type&&"value"!==a&&(n=n+" - "+r.formattedText));return n},t.prototype.updateClass=function(){this.enableRtl?i.i(r.addClass)([this.element],s._30):i.i(r.removeClass)([this.element],s._30),this.isAdaptive?i.i(r.addClass)([this.element],s._168):i.i(r.removeClass)([this.element],s._168),this.cssClass&&i.i(r.addClass)([this.element],this.cssClass)},t.prototype.mouseRclickHandler=function(e){3===e.which?this.lastCellClicked=e.target:0===e.which&&(this.lastCellClicked=e.target),this.lastCellClicked=e.target},t.prototype.mouseDownHandler=function(e){3===e.which&&(this.lastCellClicked=e.target),this.isCellBoxMultiSelection&&(this.isMouseDown=!0,this.isMouseUp=!1,this.lastSelectedElement=void 0)},t.prototype.mouseMoveHandler=function(e){var t=this;if(this.isCellBoxMultiSelection&&(e.preventDefault(),this.isMouseDown&&e.target)){var a=e.target,n=a.parentElement.classList.contains(s._282)||a.classList.contains(s._282)?"row":"column";if(a="column"===n?i.i(r.closest)(a,"th"):i.i(r.closest)(a,"td")){var l=Number(a.getAttribute("data-colindex")),d=Number(a.getAttribute("index")),h={cancel:!1,isCellClick:!0,currentCell:a,data:this.pivotValues[d][l]};this.trigger(o.y,h,function(e){if(!e.cancel){t.grid.clearSelection();var i=t.parentAt(a,"TH");t.lastSelectedElement&&t.lastSelectedElement!==i&&i.classList.contains(s.c)?(t.lastSelectedElement.classList.remove(s._284),t.lastSelectedElement.classList.remove(s.c),t.lastSelectedElement=i):(t.lastSelectedElement=i,i.classList.add(s._284),i.classList.add(s.c)),t.renderModule.selected()}})}}},t.prototype.mouseUpHandler=function(e){this.isCellBoxMultiSelection&&(this.isMouseDown=!1,this.isMouseUp=!0)},t.prototype.parentAt=function(e,t){for(;e.tagName!==t&&e.parentElement;)e=e.parentElement;return e},t.prototype.mouseClickHandler=function(e){3===e.which?this.lastCellClicked=e.target:0===e.which&&(this.lastCellClicked=e.target);var t=e.target;if(!i.i(r.closest)(t,"."+s._14)){var a=null,n=t.parentElement.classList.contains(s._282)||t.classList.contains(s._282)?"row":"column";if(a="column"===n?i.i(r.closest)(t,"th"):i.i(r.closest)(t,"td"),"column"!==n||a||"Row"===this.gridSettings.selectionSettings.mode||(a=i.i(r.closest)(t,"td")),t.classList.contains(s._287)||t.classList.contains(s._286)||!this.enableValueSorting||"pivot"!==this.dataType){if(!t.classList.contains(s._287)&&!t.classList.contains(s._286))return void this.cellClicked(t,a,e);var l=t.parentElement.getAttribute("fieldname"),d=S.a.getFieldInfo(l,this),h=t.classList.contains(s._287)?this.actionObj.actionName=o._33:t.classList.contains(s._286)?this.actionObj.actionName=o._34:"";if(this.actionObj.actionName=h,this.actionObj.fieldInfo=d.fieldItem,this.actionBeginMethod())return;try{this.onDrill(t)}catch(e){this.actionFailureMethod(e)}}else{this.cellClicked(t,a,e);try{if(a&&(a.parentElement.parentElement.parentElement.parentElement.classList.contains("e-movableheader")&&"column"===this.dataSourceSettings.valueAxis||a.parentElement.classList.contains("e-row")&&"row"===this.dataSourceSettings.valueAxis&&(a.classList.contains("e-rowsheader")||a.classList.contains("e-stot")))){var p=a.getAttribute("fieldname"),d=S.a.getFieldInfo(p,this);if(this.actionObj.actionName=o._32,this.actionObj.fieldInfo=d.fieldItem,this.actionBeginMethod())return;var u=Number(a.getAttribute("data-colindex")),c=Number(a.getAttribute("index"));if("row"===this.dataSourceSettings.valueAxis&&(this.dataSourceSettings.values.length>1||this.dataSourceSettings.alwaysShowValueHeader)){var g=this.pivotValues[c][u];if(-1===this.dataSourceSettings.valueIndex)c="value"===g.type?c:c+1;else{c=this.getLevel(g)<=this.engineModule.measureIndex&&g.members&&g.members.length>0?g.members[0].rowIndex:c}}else"column"===this.dataSourceSettings.valueAxis&&(this.dataSourceSettings.values.length>1||this.dataSourceSettings.alwaysShowValueHeader)&&(u=Number(a.getAttribute("data-colindex"))+Number(a.getAttribute("aria-colspan"))-1,c=this.engineModule.headerContent.length-1);this.setProperties({dataSourceSettings:{valueSortSettings:{columnIndex:Number(a.getAttribute("data-colindex"))+Number(a.getAttribute("aria-colspan"))-1,sortOrder:"Descending"===this.dataSourceSettings.valueSortSettings.sortOrder?"Ascending":"Descending",headerText:this.pivotValues[c][u].valueSort.levelName,headerDelimiter:this.dataSourceSettings.valueSortSettings.headerDelimiter?this.dataSourceSettings.valueSortSettings.headerDelimiter:"."}}},!0),this.showWaitingPopup();var m=this;if(m.engineModule.enableValueSorting=!0,m.enableVirtualization||m.enablePaging){if(m.dataSourceSettings.enableSorting){for(var f=0,v=Object.keys(m.engineModule.fieldList);f<v.length;f++){var y=v[f];m.engineModule.fieldList[y].sort="Ascending"}m.setProperties({dataSourceSettings:{sortSettings:[]}},!0)}"Server"===m.dataSourceSettings.mode?m.getEngine("onValueSort",null,null,null,null,null,null):(m.engineModule.rMembers=m.engineModule.headerCollection.rowHeaders,m.engineModule.cMembers=m.engineModule.headerCollection.columnHeaders,m.engineModule.applyValueSorting(),m.engineModule.updateEngine())}else"Server"===m.dataSourceSettings.mode?m.getEngine("onValueSort",null,null,null,null,null,null):m.engineModule.generateGridData(m.dataSourceSettings,!0);m.allowServerDataBinding=!1,m.setProperties({pivotValues:m.engineModule.pivotValues},!0),delete m.bulkChanges.pivotValues,m.allowServerDataBinding=!0;var b={valueSortInfo:this.engineModule.valueSortSettings};this.actionObj.actionInfo=b,m.renderPivotGrid()}}catch(e){this.actionFailureMethod(e)}}}},t.prototype.updateTotColWidth=function(){this.totColWidth=0;for(var e=0,t=this.pivotColumns;e<t.length;e++){var i=t[e];this.totColWidth=this.totColWidth+i.width}},t.prototype.framePivotColumns=function(e){for(var t=0,i=e;t<i.length;t++){var r=i[t];if(r.columns&&r.columns.length>0)this.framePivotColumns(r.columns);else{var a="0.formattedText"===r.field?"":r.customAttributes&&r.customAttributes.cell&&r.customAttributes.cell.valueSort?r.customAttributes.cell.valueSort.levelName:"",n=this.renderModule.setSavedWidth("0.formattedText"===r.field?r.field:a,Number("auto"===r.width?r.minWidth:r.width));this.pivotColumns.push({allowReordering:r.allowReordering,allowResizing:r.allowResizing,headerText:a,width:n,autoFit:r.autoFit}),this.totColWidth=this.totColWidth+Number(n)}}},t.prototype.setGridColumns=function(e){if(!i.i(r.isNullOrUndefined)(this.totColWidth)&&this.totColWidth>0||this.renderModule.isAutoFitEnabled){for(var t=0,a=e;t<a.length;t++){var n=a[t];if(n.columns&&n.columns.length>0)this.setGridColumns(n.columns);else if(this.renderModule.isAutoFitEnabled)n.autoFit=this.pivotColumns[this.posCount].autoFit,this.posCount++;else{var o="0.formattedText"===n.field?"":n.customAttributes?n.customAttributes.cell.valueSort.levelName:"";n.allowReordering=this.pivotColumns[this.posCount].allowReordering,n.allowResizing=this.pivotColumns[this.posCount].allowResizing,n.autoFit=this.pivotColumns[this.posCount].autoFit;var s=this.renderModule.setSavedWidth("0.formattedText"===n.field?n.field:o,Number(this.pivotColumns[this.posCount].width));n.autoFit?this.renderModule.isAutoFitEnabled=!0:"auto"!==n.width?n.width=s:n.minWidth=s,this.posCount++,n.allowReordering&&(this.gridSettings.allowReordering=!0),n.allowResizing&&(this.gridSettings.allowResizing=!0)}}this.gridSettings.allowReordering&&u.Grid.Inject(u.Reorder),this.gridSettings.allowResizing&&u.Grid.Inject(u.Resize)}},t.prototype.fillGridColumns=function(e){for(var t=0,i=e;t<i.length;t++){var r=i[t];r.allowReordering=this.gridSettings.allowReordering,r.allowResizing=this.gridSettings.allowResizing,r.clipMode=this.gridSettings.clipMode,this.posCount++,r.columns&&r.columns.length>0&&this.fillGridColumns(r.columns)}},t.prototype.triggerColumnRenderEvent=function(e){this.pivotColumns=[],this.totColWidth=0,this.framePivotColumns(e);var t=this.pivotColumns[0].width,i={columns:this.pivotColumns,dataSourceSettings:this.dataSourceSettings,stackedColumns:this.getStackedColumns(e,[])};this.trigger(o.w,i),this.enableVirtualization&&i.columns.length>0&&i.columns[0].width!==e[0].width&&(this.element.querySelector(".e-frozenscrollbar").style.width=Number(i.columns[0].width.toString().split("px")[0])+"px"),this.updateTotColWidth(),t!==this.pivotColumns[0].width&&(this.firstColWidth=this.pivotColumns[0].width,this.renderModule.resColWidth=parseInt(this.firstColWidth.toString())),this.posCount=0,this.setGridColumns(e)},t.prototype.setCommonColumnsWidth=function(e,t){for(var i=0,r=e;i<r.length;i++){var a=r[i];"0.formattedText"!==a.field?a.columns?this.setCommonColumnsWidth(a.columns,t):a.autoFit||("auto"!==a.width?a.width=t:a.minWidth=t):a.width=this.firstColWidth?this.firstColWidth:a.width}},t.prototype.getHeightAsNumber=function(){var e;return isNaN(this.height)?this.height.toString().indexOf("%")>-1?e=parseFloat(this.height.toString())/100*this.element.offsetHeight:this.height.toString().indexOf("px")>-1&&(e=Number(this.height.toString().split("px")[0])):e=Number(this.height),e<this.minHeight&&(e=this.minHeight),e},t.prototype.getWidthAsNumber=function(){var e;return isNaN(this.width)?(this.width.toString().indexOf("%")>-1?e=parseFloat(this.width.toString())/100*this.element.offsetWidth:this.width.toString().indexOf("px")>-1&&(e=Number(this.width.toString().split("px")[0])),isNaN(e)&&(e=this.element.offsetWidth)):e=Number(this.width),e<400&&(e=400),e},t.prototype.getGridWidthAsNumber=function(){var e,t=this.element.offsetWidth?this.element.offsetWidth:this.element.getBoundingClientRect().width;return isNaN(this.grid.width)?(this.grid.width.toString().indexOf("%")>-1?e=parseFloat(this.grid.width.toString())/100*t:this.grid.width.toString().indexOf("px")>-1&&(e=Number(this.grid.width.toString().split("px")[0])),isNaN(e)&&(e=t)):e=Number(this.grid.width),e},t.prototype.onWindowResize=function(){this.actionObj.actionName=o._78,this.actionBeginMethod()||(clearTimeout(this.timeOutObj),this.timeOutObj=setTimeout(this.layoutRefresh.bind(this),500),this.actionObj.actionName=this.getActionCompleteName(),this.actionObj.actionName&&this.actionCompleteMethod())},t.prototype.refresh=function(){this.pivotRefresh()},t.prototype.layoutRefresh=function(){if(this.element&&this.element.classList.contains("e-pivotview")&&("olap"===this.dataType?this.olapEngineModule&&this.olapEngineModule.pivotValues:this.engineModule&&this.engineModule.pivotValues)){if(this.grid){var e="olap"===this.dataType&&this.olapEngineModule.pivotValues.length>0?this.olapEngineModule.pivotValues[0].length:this.dataSourceSettings.values.length>0&&this.engineModule.pivotValues.length>0?this.engineModule.pivotValues[0].length:2,t=this.renderModule.resizeColWidth(e);this.grid.width=this.renderModule.calculateGridWidth(),this.renderModule.calculateGridHeight(!0),this.gridSettings.allowAutoResizing&&this.setCommonColumnsWidth(this.grid.columns,t),this.pivotColumns=[],this.totColWidth=0,this.framePivotColumns(this.grid.columns),this.posCount=0,this.showGroupingBar||this.setGridColumns(this.grid.columns),this.grid.refreshColumns(),this.showGroupingBar&&this.groupingBarModule&&this.element.querySelector("."+s.w)&&this.groupingBarModule.setGridRowWidth(),(this.chart||this.pivotChartModule)&&(this.chart.height=this.pivotChartModule.getResizedChartHeight())}this.showToolbar&&this.toolbarModule&&this.toolbarModule.toolbar&&(this.toolbarModule.toolbar.width=this.grid?this.getGridWidthAsNumber()-2:this.getWidthAsNumber()-2),this.enablePaging&&this.notify(o._29,this),this.chart&&(this.showToolbar&&"Chart"===this.currentView||!this.showToolbar)&&(this.chart.width=this.showToolbar&&this.grid?this.getGridWidthAsNumber().toString():"Both"===this.displayOption.view&&this.grid?this.getGridWidthAsNumber().toString():this.getWidthAsNumber().toString(),this.chart.height=this.pivotChartModule.getResizedChartHeight(),"Chart"===this.displayOption.view&&this.showGroupingBar&&this.groupingBarModule&&this.element.querySelector("."+s._135)&&this.groupingBarModule.refreshUI())}},t.prototype.cellClicked=function(e,t,a){var n=this;if(e.classList.contains(s._310)&&(e.classList.contains(s._311)?this.isPopupClicked=!1:this.isPopupClicked=!0),t&&!i.i(r.isNullOrUndefined)(this.pivotValues)&&this.pivotValues.length>0){var l=Number(t.getAttribute("data-colindex")),d=Number(t.getAttribute("index")),h=Number(t.getAttribute("aria-colspan")),p={cancel:!1,isCellClick:!0,currentCell:t,data:this.pivotValues[d][l]};this.trigger(o.y,p,function(e){n.gridSettings.allowSelection&&(("Both"===n.gridSettings.selectionSettings.mode?t.classList.contains(s._285):"Row"===n.gridSettings.selectionSettings.mode)?n.clearSelection(t,a,l,d):e.cancel||(n.clearSelection(t,a,l,d),n.applyColumnSelection(a,t,l,l+(h>0?h-1:0),d)),"Column"===n.gridSettings.selectionSettings.mode||t.classList.contains(s._293)||n.rowDeselect(t,a,d,n.gridSettings.selectionSettings.mode,e),"Column"===n.gridSettings.selectionSettings.mode||e.cancel||(("Multiple"===n.gridSettings.selectionSettings.type?a.ctrlKey||a.shiftKey:n.selectedRowIndex===d)?n.selectedRowIndex=void 0:(n.selectedRowIndex=d,n.grid.selectionModule.selectRow(d-n.renderModule.rowStartPos)))),n.cellClick&&e.isCellClick&&n.trigger(o.u,{currentCell:t,data:n.pivotValues[d][l],nativeEvent:a}),n.getSelectedCellsPos()})}else this.clearSelection(null,a,null,null)},t.prototype.rowDeselect=function(e,t,a,n,o){if(!t.shiftKey&&!t.ctrlKey&&"Both"!==this.gridSettings.selectionSettings.mode||"Single"===this.gridSettings.selectionSettings.type)if(e.classList.contains(s.b)||e.classList.contains(s.c)||e.classList.contains(s._284)){if(i.i(r.removeClass)(this.element.querySelectorAll("."+s.b),s.b),i.i(r.removeClass)(this.element.querySelectorAll("."+s.c),s.c),i.i(r.removeClass)(this.element.querySelectorAll("."+s._284),s._284),o.cancel)this.setSavedSelectedCells();else if("Cell"===n)i.i(r.addClass)([e],[s.b]);else if("Row"===n||"Single"===this.gridSettings.selectionSettings.type){var l='[index="'+a+'"]';i.i(r.addClass)(this.element.querySelectorAll(l),[s.c,s._284]),"Row"!==n&&e.classList.add(s.b)}}else o.cancel?this.setSavedSelectedCells():(i.i(r.removeClass)(this.element.querySelectorAll("."+s.b),s.b),i.i(r.removeClass)(this.element.querySelectorAll("."+s.c),s.c),i.i(r.removeClass)(this.element.querySelectorAll("."+s._284),s._284));else(t.shiftKey||t.ctrlKey||"Both"===this.gridSettings.selectionSettings.mode)&&o.cancel&&(i.i(r.removeClass)(this.element.querySelectorAll("."+s.b),s.b),i.i(r.removeClass)(this.element.querySelectorAll("."+s.c),s.c),i.i(r.removeClass)(this.element.querySelectorAll("."+s._284),s._284),this.setSavedSelectedCells())},t.prototype.clearSelection=function(e,t,a,n){if(!t.shiftKey&&!t.ctrlKey||"Single"===this.gridSettings.selectionSettings.type)if("Cell"===this.gridSettings.selectionSettings.mode)e&&e.classList.contains(s._293)?i.i(r.removeClass)(this.element.querySelectorAll("."+s._285+"."+s.b),s.b):i.i(r.removeClass)(this.element.querySelectorAll("."+s._293+"."+s._284),[s._284,s.c]);else if("Both"===this.gridSettings.selectionSettings.mode)if(e&&e.classList.contains(s._285))for(var o=0,l=[].slice.call(this.element.querySelectorAll("."+s.c+", ."+s.b));o<l.length;o++){var d=l[o];i.i(r.removeClass)([d],[s._284,s.c,s.b])}else i.i(r.removeClass)(this.element.querySelectorAll("."+s.b),s.b)},t.prototype.applyRowSelection=function(e,t,i){var r=this.engineModule.pivotValues[t][e];if(i.ctrlKey||i.shiftKey||!r||this.selectedRowIndex===t)this.selectedRowIndex=void 0;else{this.selectedRowIndex=t;var a=r.level,n=t;do{n++,r=this.engineModule.pivotValues[n][e]}while(r&&a<r.level);var o=this;this.isAdaptive?this.rowRangeSelection={enable:!0,startIndex:t-o.renderModule.rowStartPos,endIndex:n-(1+o.renderModule.rowStartPos)}:o.grid.selectionModule.selectRowsByRange(t-o.renderModule.rowStartPos,n-(1+o.renderModule.rowStartPos))}},t.prototype.applyColumnSelection=function(e,t,a,n,o){if(!t.classList.contains(s._282)&&("Cell"!==this.gridSettings.selectionSettings.mode||t.classList.contains(s._293))){var l=e.ctrlKey;this.isAdaptive&&"Multiple"===this.gridSettings.selectionSettings.type&&(this.grid.selectionModule.showPopup(e),this.isPopupClicked?(this.element.querySelector("."+s._310).classList.add(s._311),l=!0):(this.element.querySelector("."+s._310).classList.remove(s._311),l=!1));for(var d=[],h=this.gridSettings.selectionSettings.type,p=t.classList.contains(s._284),u=[],c={},g=a;g<=n;g++)u.push(g.toString());if(l&&"Single"!==h)p=!1;else{for(var m=0,f=[].slice.call(this.element.querySelectorAll("."+s._284));m<f.length;m++){var v=f[m];i.i(r.removeClass)([v],[s._284,s.c]),-1===u.indexOf(v.getAttribute("data-colindex"))&&(p=!1);var S=Number(v.getAttribute("data-colindex"));c[S]=S}u=Object.keys(c).length>0?Object.keys(c).sort(function(e,t){return e-t}):u}"Multiple"===h&&e.shiftKey?(this.shiftLockedPos=0===this.shiftLockedPos.length?u:this.shiftLockedPos,Number(this.shiftLockedPos[0])<=a?a=Number(this.shiftLockedPos[0]):n=n<Number(this.shiftLockedPos[this.shiftLockedPos.length-1])?Number(this.shiftLockedPos[this.shiftLockedPos.length-1]):n):this.shiftLockedPos=[];var y=[];if(e.ctrlKey&&"Both"===this.gridSettings.selectionSettings.mode&&"Multiple"===h&&!t.classList.contains(s._282))for(var b=0,C=[].slice.call(this.element.querySelectorAll("."+s._282+"."+s.b));b<C.length;b++){var v=C[b];y.push(v.getAttribute("index"))}for(var x=a;x<=n;)d.push('[data-colindex="'+x+'"]'+("Cell"===this.gridSettings.selectionSettings.mode?'[index="'+o+'"]':"")),x++;if(!p){o=t.classList.contains("e-headercell")?o:this.renderModule.rowStartPos-1;for(var w=t.classList.contains(s._284),T=0,M=[].slice.call(this.element.querySelectorAll(d.toString()));T<M.length;T++){var v=M[T];Number(v.getAttribute("index"))>=o&&(w&&l&&-1===y.indexOf(v.getAttribute("index"))?i.i(r.removeClass)([v],[s._284,s.c]):i.i(r.addClass)([v],[s._284,s.c]))}}this.renderModule.selected()}},t.prototype.getSelectedCellsPos=function(){var e=this;e.savedSelectedCellsPos=[],e.cellSelectionPos=[];for(var t=0,i=[].slice.call(this.element.querySelectorAll("."+s.c));t<i.length;t++){var r=i[t];e.savedSelectedCellsPos.push({rowIndex:r.getAttribute("index"),colIndex:r.getAttribute("data-colindex")})}for(var a=0,n=[].slice.call(this.element.querySelectorAll("."+s.b));a<n.length;a++){var r=n[a];e.cellSelectionPos.push({rowIndex:r.getAttribute("index"),colIndex:r.getAttribute("data-colindex")})}},t.prototype.setSavedSelectedCells=function(){for(var e=this,t=0,a=[].slice.call(this.savedSelectedCellsPos);t<a.length;t++){var n=a[t],o='[data-colindex="'+n.colIndex+'"][index="'+n.rowIndex+'"]';i.i(r.addClass)([e.element.querySelector(o)],[s._284,s.c])}for(var l=0,d=[].slice.call(this.cellSelectionPos);l<d.length;l++){var n=d[l],o='[data-colindex="'+n.colIndex+'"][index="'+n.rowIndex+'"]';i.i(r.addClass)([e.element.querySelector(o)],[s.b])}},t.prototype.renderEmptyGrid=function(){var e=this;if(this.isEmptyGrid=!0,this.notEmpty=!1,this.isInitial=!0,this.renderModule=this.renderModule?this.renderModule:new l.a(this),this.grid&&this.grid.element&&this.element.querySelector(".e-grid"))this.notEmpty=!0,this.grid.setProperties({columns:this.renderModule.frameEmptyColumns(),dataSource:this.renderModule.frameEmptyData()},!0),this.grid.notify("datasource-modified",{}),this.grid.refreshColumns();else{this.element.querySelector("."+s._142)&&i.i(r.remove)(this.element.querySelector("."+s._142)),this.renderModule.bindGrid(this,!0),this.grid.showSpinner=function(){},this.grid.hideSpinner=function(){};var t=i.i(r.createElement)("div",{id:this.element.id+"_grid"});this.element.appendChild(t),this.grid.isStringTemplate=!0,this.grid.appendTo(t),this.grid.on("refresh-frozen-height",function(){e.enableVirtualization||e.grid.contentModule.setHeightToContent(e.grid.contentModule.getTable().offsetHeight)}),this.grid.off("data-ready",this.grid.dataReady),this.grid.on("data-ready",function(){e.grid.scrollModule.setWidth(),e.grid.scrollModule.setHeight()})}},t.prototype.initEngine=function(){var e=this;if(this.element.querySelector(".e-spin-hide")&&this.showWaitingPopup(),"pivot"===this.dataType){var t=i.i(r.isNullOrUndefined)(this.dataSourceSettings.dataSource)?i.i(r.isNullOrUndefined)(this.engineModule.data)?void 0:this.engineModule.data[0]:this.dataSourceSettings.dataSource[0];if(t&&this.pivotCommon){var a="[object Array]"===Object.prototype.toString.call(t);if(a&&"JSON"===this.dataSourceSettings.type)return void this.pivotCommon.errorDialog.createErrorDialog(this.localeObj.getConstant("error"),this.localeObj.getConstant("invalidJSON"));if(!a&&"CSV"===this.dataSourceSettings.type)return void this.pivotCommon.errorDialog.createErrorDialog(this.localeObj.getConstant("error"),this.localeObj.getConstant("invalidCSV"))}}var n={dataSourceSettings:S.a.getClonedDataSourceSettings(this.dataSourceSettings)};this.trigger(o.b,n,function(t){S.a.updateDataSourceSettings(e,t.dataSourceSettings),e.updatePageSettings(!1);var i={mode:"",savedFieldList:void 0,pageSettings:e.pageSettings,enableValueSorting:e.enableValueSorting,isDrillThrough:e.allowDrillThrough||e.editSettings.allowEditing,localeObj:e.localeObj,fieldsType:e.fieldsType,clonedReport:e.clonedReport,globalize:e.globalize,currenyCode:e.currencyCode,enablePaging:e.enablePaging,enableVirtualization:e.enableVirtualization,allowDataCompression:e.allowDataCompression,enableHtmlSanitizer:e.enableHtmlSanitizer};if("pivot"===e.dataType){if(e.dataSourceSettings.groupSettings&&e.dataSourceSettings.groupSettings.length>0){var r=e.engineModule.data;e.clonedDataSet=e.clonedDataSet?e.clonedDataSet:S.a.getClonedData(r);var a=JSON.parse(e.getPersistData()).dataSourceSettings;a.dataSource=[],e.clonedReport=e.clonedReport?e.clonedReport:a}"Server"!==e.dataSourceSettings.mode&&e.engineModule.renderEngine(e.dataSourceSettings,i,e.aggregateCellInfo?e.getValueCellInfo.bind(e):void 0,e.onHeadersSort?e.getHeaderSortInfo.bind(e):void 0),e.allowServerDataBinding=!1,e.setProperties({pivotValues:e.engineModule.pivotValues},!0),delete e.bulkChanges.pivotValues,e.allowServerDataBinding=!0,e.enginePopulatedEventMethod("initEngine")}else"SSAS"===e.dataSourceSettings.providerType&&"olap"===e.dataType&&(i.savedFieldList=e.olapEngineModule.fieldList,i.savedFieldListData=e.olapEngineModule.fieldListData,e.olapEngineModule.renderEngine(e.dataSourceSettings,i,e.onHeadersSort?e.getHeaderSortInfo.bind(e):void 0),e.allowServerDataBinding=!1,e.setProperties({pivotValues:e.olapEngineModule.pivotValues},!0),delete e.bulkChanges.pivotValues,e.allowServerDataBinding=!0,e.enginePopulatedEventMethod("initEngine"))})},t.prototype.enginePopulatedEventMethod=function(e,t){if("initEngine"===e){var i=t||this;this.trigger(o.c,{pivotValues:this.pivotValues},function(e){"olap"===i.dataType?(i.olapEngineModule.pivotValues=e.pivotValues,i.pivotValues=i.olapEngineModule.pivotValues):(i.engineModule.pivotValues=e.pivotValues,i.pivotValues=i.engineModule.pivotValues),i.notify(o._22,{}),i.notEmpty=!0})}else{var r=t||this,a={dataSourceSettings:r.dataSourceSettings,pivotValues:r.pivotValues};r.trigger(o.c,a,function(e){r.dataSourceSettings=e.dataSourceSettings,"olap"===r.dataType?(r.olapEngineModule.pivotValues=e.pivotValues,r.allowServerDataBinding=!1,r.setProperties({pivotValues:r.olapEngineModule.pivotValues},!0),delete r.bulkChanges.pivotValues,r.allowServerDataBinding=!0):(r.engineModule.pivotValues=e.pivotValues,r.allowServerDataBinding=!1,r.setProperties({pivotValues:r.engineModule.pivotValues},!0),delete r.bulkChanges.pivotValues,r.allowServerDataBinding=!0),r.pivotCommon.engineModule="olap"===r.dataType?r.olapEngineModule:r.engineModule,r.pivotCommon.dataSourceSettings=r.dataSourceSettings,r.renderPivotGrid()})}},t.prototype.generateData=function(){this.isStaticRefresh||("Chart"!==this.displayOption.view&&i.i(r.isNullOrUndefined)(this.grid)?(this.renderEmptyGrid(),this.showWaitingPopup()):(this.showWaitingPopup(),clearTimeout(this.timeOutObj),this.timeOutObj=setTimeout(this.refreshData.bind(this),100)))},t.prototype.refreshData=function(){var e=this;e.isStaticRefresh?(e.isStaticRefresh=!1,e.hideWaitingPopup()):e.dataSourceSettings&&(e.dataSourceSettings.dataSource||e.dataSourceSettings.url)?e.dataSourceSettings.dataSource instanceof m.DataManager?"pivot"===e.dataType&&e.remoteData.length>0?(this.element.querySelector(".e-spinner-pane")||this.showWaitingPopup(),this.engineModule.data=e.remoteData,this.initEngine()):setTimeout(e.getData.bind(e),100):""!==this.dataSourceSettings.url&&"olap"===this.dataType||e.dataSourceSettings.dataSource&&e.dataSourceSettings.dataSource.length>0||this.engineModule.data.length>0?("pivot"===e.dataType&&(this.hideWaitingPopup(),e.engineModule.data=e.dataSourceSettings.dataSource),e.initEngine()):"Server"===this.dataSourceSettings.mode?this.getEngine("onRefresh"):(this.notify(o._22,{}),this.hideWaitingPopup()):(this.notify(o._22,{}),this.hideWaitingPopup())},t.prototype.getValueCellInfo=function(e){var t=e;return this.trigger(o.W,t),t},t.prototype.getHeaderSortInfo=function(e){var t=e;return this.trigger(o.X,t),t},t.prototype.bindTriggerEvents=function(e){this.trigger(i.i(u.getObject)("name",e),e)},t.prototype.getData=function(){this.dataSourceSettings.dataSource.defaultQuery?this.dataSourceSettings.dataSource.executeQuery(this.dataSourceSettings.dataSource.defaultQuery).then(this.executeQuery.bind(this)):this.dataSourceSettings.dataSource.executeQuery(new m.Query).then(this.executeQuery.bind(this))},t.prototype.executeQuery=function(e){this.element.querySelector(".e-spinner-pane")||this.showWaitingPopup();var t=this;t.engineModule.data=e.result,!i.i(r.isNullOrUndefined)(t.engineModule.data)&&t.engineModule.data.length>0?t.initEngine():this.hideWaitingPopup()},t.prototype.applyFormatting=function(e){if(e){for(var t=[],a=e.length,n=0;n<a;n++)void 0!==e[n]&&void 0===e[n][0]&&t.push(n);for(var n=0;n<e.length;n++)for(var o=1;e[n]&&o<e[n].length;o++)if("value"===e[n][o].axis&&""!==e[n][o].formattedText){e[n][o].style=void 0,e[n][o].cssClass=void 0;for(var s=this.dataSourceSettings.conditionalFormatSettings,l=0;l<s.length;l++)(!0===s[l].applyGrandTotals||i.i(r.isNullOrUndefined)(s[l].applyGrandTotals)||""!==e[n][o].rowHeaders&&""!==e[n][o].columnHeaders)&&this.checkCondition(e[n][o].value,s[l].conditions,s[l].value1,s[l].value2)&&(s[l].measure&&e[n][o].actualText!==s[l].measure||void 0!==s[l].measure&&""===s[l].measure||void 0!==s[l].label&&""===s[l].label||!(!s[l].label||e[n][0].valueSort.levelName.indexOf(s[l].label)>-1||e[n][o].rowHeaders.indexOf(s[l].label)>-1||e[n][o].columnHeaders.indexOf(s[l].label)>-1)||(s[l].style&&s[l].style.backgroundColor&&(s[l].style.backgroundColor=this.conditionalFormattingModule.isHex(s[l].style.backgroundColor.substr(1))?s[l].style.backgroundColor:this.conditionalFormattingModule.colourNameToHex(s[l].style.backgroundColor)),s[l].style&&s[l].style.color&&(s[l].style.color=this.conditionalFormattingModule.isHex(s[l].style.color.substr(1))?s[l].style.color:this.conditionalFormattingModule.colourNameToHex(s[l].style.color)),e[n][o].style=s[l].style,e[n][o].cssClass="format"+this.element.id+l))}for(var d=this.dataSourceSettings.conditionalFormatSettings,l=0;l<d.length;l++){var h=this.createStyleSheet.bind(this)(),p="color: "+d[l].style.color+"!important;background-color: "+d[l].style.backgroundColor+"!important;font-size: "+d[l].style.fontSize+"!important;font-family: "+d[l].style.fontFamily+" !important;",u=".format"+this.element.id+l;h.insertRule(u+", "+u+" .e-cellvalue{"+p+"}",0)}}},t.prototype.createStyleSheet=function(){var e=document.createElement("style");return e.appendChild(document.createTextNode("")),document.head.appendChild(e),e.sheet},t.prototype.applyHyperlinkSettings=function(){if(this.pivotValues){for(var e=this.pivotValues,t=[],a=e.length,n=0;n<a;n++)i.i(r.isNullOrUndefined)(e[n])||void 0!==e[n][0]||t.push(n);if(this.hyperlinkSettings.conditionalSettings.length>0)for(var n=0;n<e.length;n++)for(var o=1;e[n]&&o<e[n].length;o++)if("value"===e[n][o].axis){e[n][o].enableHyperlink=!1;for(var s=this.hyperlinkSettings.conditionalSettings,l=0;l<s.length;l++)if(this.checkCondition(e[n][o].value,s[l].conditions,s[l].value1,s[l].value2)){var d="row"===this.dataSourceSettings.valueAxis?n:"pivot"===this.dataType?this.engineModule.headerContent.length-1:this.olapEngineModule.headerContent.length-1,h="row"===this.dataSourceSettings.valueAxis?0:o;(!s[l].measure||1===this.dataSourceSettings.values.length||e[d][h].valueSort&&e[d][h].actualText===s[l].measure)&&(!s[l].label||e[t[s[l].label.split(".").length-1]]&&e[t[s[l].label.split(".").length-1]][o]&&e[t[s[l].label.split(".").length-1]][o].valueSort&&e[t[s[l].label.split(".").length-1]][o].valueSort[s[l].label]||e[n][0].valueSort.levelName.indexOf(s[l].label)>-1)&&(e[n][o].enableHyperlink=!0)}}if(i.i(r.isNullOrUndefined)(this.hyperlinkSettings.headerText))return;for(var p=this.dataSourceSettings.valueSortSettings.headerDelimiter?this.dataSourceSettings.valueSortSettings.headerDelimiter:".",n=0;n<e.length;n++)for(var o=1;e[n]&&o<e[n].length;o++)if("value"===e[n][o].axis){var u=this.hyperlinkSettings.headerText;if(e[n][0].valueSort.levelName.indexOf(u)>-1)e[n][0].enableHyperlink=!0,e[n][o].enableHyperlink=!0;else{for(var c=!1,l=0;l<t.length;l++)u=p+this.hyperlinkSettings.headerText,(p+e[t[l]][o].valueSort.levelName).indexOf(u)>-1&&(e[t[l]][o].enableHyperlink=!0,c=!0);e[n][o].enableHyperlink=c}}}},t.prototype.checkCondition=function(e,t,i,r){switch(t){case"LessThan":return e<i;case"LessThanOrEqualTo":return e<=i;case"GreaterThan":return e>i;case"GreaterThanOrEqualTo":return e>=i;case"Equals":return e===i;case"NotEquals":return e!==i;case"Between":return i<r&&e>=i&&e<=r||i>r&&e<=i&&e>=r;case"NotBetween":return!(i<r&&e>=i&&e<=r||i>r&&e<=i&&e>=r);default:return!1}},t.prototype.updateGroupingReport=function(e,t){if(!this.clonedDataSet&&!this.clonedReport){var a=this.engineModule.data;this.clonedDataSet=S.a.getClonedData(a);var n=JSON.parse(this.getPersistData()).dataSourceSettings;n.dataSource=[],this.clonedReport=this.clonedReport?this.clonedReport:n}var o=/_date_group_years|_date_group_quarters|_date_group_quarterYear|_date_group_months|_date_group_days|_date_group_hours|_date_group_minutes|_date_group_seconds/g,s=S.a.getClonedData(this.clonedDataSet),l=this.dataSourceSettings,d=this.clonedReport.properties?this.clonedReport.properties:this.clonedReport,h=[l.rows,l.columns,l.values,l.filters],p=[l.filterSettings,l.sortSettings,l.formatSettings,l.drilledMembers],u=d.rows;if(u=u.concat(d.columns,d.values,d.filters),0===e.length||e.length>0){this.engineModule.groupingFields={},this.setProperties({dataSourceSettings:{dataSource:s,groupSettings:e.length>0?l.groupSettings:[]}},!0);for(var c,g="Date"===t,m=[],f=0,v=h.length;f<v;f++)for(var y,b,C=0,x=h[f].length;C<x;C++)!function(e,t){var a=h[f][e].name;-1===m.indexOf(a)&&m.push(a);var n=m.indexOf(a);if(!i.i(r.isNullOrUndefined)(a.match(o))&&g||-1!==a.indexOf("_custom_group")&&!S.a.getFieldByName(a.replace("_custom_group",""),l.groupSettings)){h[f].splice(e,1),m.splice(n,1),e--,t--,a=a.split("_")[0];for(var s=!1,d=0;d<h.length&&!(s=h[d].filter(function(e){return e.name===a}).length>0);d++);if(!s){c=a.split("_")[0];var p=S.a.getFieldByName(c,u);u=u.filter(function(e){return e.name!==c}),m.push(c),p&&(s?h[f].splice(e,1,p):h[f].splice(++e,0,p))}}else{var p=S.a.getFieldByName(a,u);p?h[f].splice(e,1,p):c===a&&h[f].splice(e,1)}y=e,b=t}(C,x),C=y,x=b;for(var w=0,T=m;w<T.length;w++)for(var M=T[w],_=S.a.getFilterItemByName(M,d.filterSettings),D=S.a.getFieldByName(M,d.sortSettings),O=S.a.getFieldByName(M,d.formatSettings),P=S.a.getFieldByName(M,d.drilledMembers),E=[_,D,O,P],f=0,v=p.length;f<v;f++){for(var N=!1,C=0,x=p[f].length;C<x;C++){var F=p[f][C].name;if(!i.i(r.isNullOrUndefined)(F.match(o))&&g||-1!==F.indexOf("_custom_group")&&!S.a.getFieldByName(F.replace("_custom_group",""),l.groupSettings))p[f].splice(C,1),C--,x--;else if(M===p[f][C].name){N=!0,E[f]?p[f].splice(C,1,E[f]):(p[f].splice(C,1),C--,x--);break}}!N&&0===f&&_&&p[f].push(_),!N&&1===f&&D&&p[f].push(D),!N&&2===f&&O&&p[f].push(O),!N&&3===f&&P&&p[f].push(P)}}},t.prototype.removeButtonFocus=function(e){document.querySelectorAll(".e-btn-focused")&&i.i(r.removeClass)(document.querySelectorAll(".e-btn-focused"),"e-btn-focused")},t.prototype.wireEvents=function(){"Chart"!==this.displayOption.view&&(r.EventHandler.add(this.element,this.isAdaptive?"touchend":"click",this.mouseClickHandler,this),r.EventHandler.add(this.element,"mousedown",this.mouseDownHandler,this),r.EventHandler.add(this.element.querySelector("."+s._296),"mousemove",this.mouseMoveHandler,this),r.EventHandler.add(this.element,"mouseup",this.mouseUpHandler,this),r.EventHandler.add(this.element,this.isAdaptive?"touchend":"contextmenu",this.mouseRclickHandler,this)),r.EventHandler.add(document,this.isAdaptive?"touchend":"click",this.removeButtonFocus,this),window.addEventListener("resize",this.onWindowResize.bind(this),!0)},t.prototype.unwireEvents=function(){"Chart"!==this.displayOption.view&&(r.EventHandler.remove(this.element,this.isAdaptive?"touchend":"click",this.mouseClickHandler),r.EventHandler.remove(this.element,"mousedown",this.mouseDownHandler),this.element.querySelector("."+s._296)&&r.EventHandler.remove(this.element.querySelector("."+s._296),"mousemove",this.mouseMoveHandler),r.EventHandler.remove(this.element,"mouseup",this.mouseUpHandler),r.EventHandler.remove(this.element,this.isAdaptive?"touchend":"contextmenu",this.mouseRclickHandler)),r.EventHandler.remove(document,this.isAdaptive?"touchend":"click",this.removeButtonFocus),window.removeEventListener("resize",this.onWindowResize.bind(this),!0)},t.prototype.actionBeginMethod=function(){var e={dataSourceSettings:S.a.getClonedDataSourceSettings(this.dataSourceSettings),actionName:this.actionObj.actionName,fieldInfo:this.actionObj.fieldInfo,cancel:!1};return this.trigger(o._13,e),e.cancel},t.prototype.actionCompleteMethod=function(){var e={dataSourceSettings:S.a.getClonedDataSourceSettings(this.dataSourceSettings),actionName:this.actionObj.actionName,fieldInfo:this.actionObj.fieldInfo,actionInfo:this.actionObj.actionInfo};this.trigger(o._14,e),this.actionObj.actionName="",this.actionObj.actionInfo=void 0,this.actionObj.fieldInfo=void 0},t.prototype.actionFailureMethod=function(e){var t={actionName:this.actionObj.actionName,errorInfo:e};this.trigger(o._15,t)},t.prototype.getActionCompleteName=function(){var e;switch(this.actionObj.actionName){case o._41:e=o._98;break;case o._42:e=o._99;break;case o._45:e=o._100;break;case o._46:e=o._101;break;case o._55:e=o._102;break;case o._56:e=o._103;break;case o._57:e=o._104;break;case o._58:e=o._105;break;case o._59:e=o._106;break;case o._60:e=o._107;break;case o._61:e=o._108;break;case o._62:e=o._109;break;case o._32:e=o._110;break;case o._71:e=o._81;break;case o._67:e=o._111;break;case o._68:e=o._112;break;case o._69:e=o._113;break;case o._70:e=o._114;break;case o._76:e=o._115;break;case o._72:e=o._116;break;case o._65:e=o._117;break;case o._73:e=o._82;break;case o._74:e=o._83;break;case o._75:e=o._84;break;case o._50:e=o._95;break;case o._53:e=o._96;break;case o._54:e=o._97;break;case o._49:e=o._94;break;case o._52:e=o._93;break;case o._51:e=o._92;break;case o._78:e=o._118;break;case o._36:e=o._87;break;case o._35:e=o._88;break;case o._37:e=o._89;break;case o._38:e=o._90;break;case o._20:e=o._122;break;case o._19:e=o._121;break;case o._79:e=o._123;break;case o._80:e=o._124;break;default:e=this.actionObj.actionName}return e},t.prototype.getStackedColumns=function(e,t){for(var i=0,r=e;i<r.length;i++){var a=r[i];t.push(a),a.columns&&a.columns.length>0&&this.getStackedColumns(a.columns,t)}return t},t.prototype.destroy=function(){this.removeInternalEvents(),this.engineModule&&(this.engineModule.fieldList={},this.engineModule.rMembers=null,this.engineModule.cMembers=null,this.engineModule.valueMatrix=null,this.engineModule.indexMatrix=null,this.engineModule={}),this.olapEngineModule&&(this.olapEngineModule.fieldList={},this.olapEngineModule={}),this.showGroupingBar&&this.groupingBarModule&&this.groupingBarModule.destroy(),this.allowGrouping&&this.groupingModule&&this.groupingModule.destroy(),this.showToolbar&&this.toolbarModule&&this.toolbarModule.destroy(),this.enablePaging&&this.pagerModule&&this.pagerModule.destroy(),this.enableVirtualization&&this.virtualscrollModule&&this.virtualscrollModule.destroy(),this.allowConditionalFormatting&&this.conditionalFormattingModule&&this.conditionalFormattingModule.destroy(),this.allowNumberFormatting&&this.numberFormattingModule&&this.numberFormattingModule.destroy(),this.contextMenuModule&&this.contextMenuModule.destroy(),this.keyboardModule&&this.keyboardModule.destroy(),this.tooltip&&!this.tooltip.isDestroyed&&this.tooltip.destroy(),this.calculatedFieldModule&&this.calculatedFieldModule.destroy(),this.chart&&!this.chart.isDestroyed&&(this.chart.destroy(),this.chart.isDestroyed&&i.i(r.select)("#"+this.element.id+"_chart",this.element)&&i.i(r.remove)(i.i(r.select)("#"+this.element.id+"_chart",this.element))),this.grid&&!this.grid.isDestroyed&&(this.grid.destroy(),this.grid.isDestroyed&&i.i(r.select)("#"+this.element.id+"_grid",this.element)&&i.i(r.remove)(i.i(r.select)("#"+this.element.id+"_grid",this.element))),this.commonModule&&this.commonModule.destroy(),this.pivotChartModule&&this.pivotChartModule.destroy(),this.pivotButtonModule&&!this.pivotButtonModule.isDestroyed&&this.pivotButtonModule.destroy(),this.pivotFieldListModule&&!this.pivotFieldListModule.isDestroyed&&(this.pivotFieldListModule.destroy(),this.pivotFieldListModule.isDestroyed&&null!==i.i(r.select)("#"+this.element.id+"_PivotFieldList",this.element)&&i.i(r.remove)(i.i(r.select)("#"+this.element.id+"_PivotFieldList",this.element))),(this.allowDrillThrough||this.editSettings&&this.editSettings.allowEditing)&&this.drillThroughModule&&this.drillThroughModule.destroy(),this.chartExportModule&&this.chartExportModule.destroy(),this.unwireEvents(),e.prototype.destroy.call(this),this.groupingBarModule&&(this.groupingBarModule=null),this.groupingModule&&(this.groupingModule=null),this.pivotFieldListModule&&(this.pivotFieldListModule=null),this.calculatedFieldModule&&(this.calculatedFieldModule=null),this.conditionalFormattingModule&&(this.conditionalFormattingModule=null),this.numberFormattingModule&&(this.numberFormattingModule=null),this.toolbarModule&&(this.toolbarModule=null),this.pagerModule&&(this.pagerModule=null),this.virtualscrollModule&&(this.virtualscrollModule=null),this.contextMenuModule&&(this.contextMenuModule=null),this.keyboardModule&&(this.keyboardModule=null),this.tooltip&&(this.tooltip=null),this.chart&&(this.chart=null),this.grid&&(this.grid=null),this.commonModule&&(this.commonModule=null),this.pivotChartModule&&(this.pivotChartModule=null),this.pivotButtonModule&&(this.pivotButtonModule=null),this.renderModule&&(this.renderModule=null),this.axisFieldModule&&(this.axisFieldModule=null),this.pdfExportModule&&(this.pdfExportModule=null),this.excelExportModule&&(this.excelExportModule=null),this.drillThroughModule&&(this.drillThroughModule=null),this.clonedDataSet&&(this.clonedDataSet=null),this.clonedReport&&(this.clonedReport=null),this.pagerModule&&(this.pagerModule=null),this.chartExportModule&&(this.chartExportModule=null),this.element.innerHTML="",i.i(r.removeClass)([this.element],s._167),i.i(r.removeClass)([this.element],s._30),i.i(r.removeClass)([this.element],s._168)},t.prototype.showNumberFormattingDialog=function(){this.allowNumberFormatting&&this.numberFormattingModule.showNumberFormattingDialog()},t.prototype.getValuesHeader=function(e,t){var a=this.dataSourceSettings.values;return"value"===t&&!i.i(r.isNullOrUndefined)(e.valueSort)&&this.localeObj.getConstant("grandTotal")+this.dataSourceSettings.valueSortSettings.headerDelimiter+e.formattedText===e.valueSort.levelName&&("column"===e.axis&&0===this.dataSourceSettings.columns.length&&"column"===this.dataSourceSettings.valueAxis||"row"===e.axis&&0===this.dataSourceSettings.rows.length&&"row"===this.dataSourceSettings.valueAxis)?this.localeObj.getConstant("total")+" "+this.localeObj.getConstant(this.engineModule.fieldList[e.actualText].aggregateType)+" "+this.localeObj.getConstant("of")+" "+e.formattedText:"grandTotal"===t&&1===a.length&&"row"===this.dataSourceSettings.valueAxis&&e.formattedText===this.localeObj.getConstant("grandTotal")?this.localeObj.getConstant("total")+" "+this.localeObj.getConstant(a[a.length-1].type)+" "+this.localeObj.getConstant("of")+" "+(i.i(r.isNullOrUndefined)(a[a.length-1].caption)?a[a.length-1].name:a[a.length-1].caption):e.formattedText},_([i.i(r.Property)("USD")],t.prototype,"currencyCode",void 0),_([i.i(r.Property)(!1)],t.prototype,"showFieldList",void 0),_([i.i(r.Complex)({},p.a)],t.prototype,"gridSettings",void 0),_([i.i(r.Complex)({},b.a)],t.prototype,"chartSettings",void 0),_([i.i(r.Complex)({},D)],t.prototype,"groupingBarSettings",void 0),_([i.i(r.Complex)({},E)],t.prototype,"hyperlinkSettings",void 0),_([i.i(r.Complex)({},N)],t.prototype,"pageSettings",void 0),_([i.i(r.Complex)({},F)],t.prototype,"pagerSettings",void 0),_([i.i(r.Complex)({},h.n)],t.prototype,"dataSourceSettings",void 0),_([i.i(r.Complex)({},O)],t.prototype,"editSettings",void 0),_([i.i(r.Complex)({},I)],t.prototype,"displayOption",void 0),_([i.i(r.Property)()],t.prototype,"pivotValues",void 0),_([i.i(r.Property)(!1)],t.prototype,"showGroupingBar",void 0),_([i.i(r.Property)(!0)],t.prototype,"showTooltip",void 0),_([i.i(r.Property)(!1)],t.prototype,"showToolbar",void 0),_([i.i(r.Property)([])],t.prototype,"toolbar",void 0),_([i.i(r.Property)(!1)],t.prototype,"showValuesButton",void 0),_([i.i(r.Property)(!1)],t.prototype,"allowCalculatedField",void 0),_([i.i(r.Property)(!1)],t.prototype,"enableFieldSearching",void 0),_([i.i(r.Property)(!1)],t.prototype,"enableValueSorting",void 0),_([i.i(r.Property)(!1)],t.prototype,"allowConditionalFormatting",void 0),_([i.i(r.Property)(!1)],t.prototype,"allowNumberFormatting",void 0),_([i.i(r.Property)("auto")],t.prototype,"height",void 0),_([i.i(r.Property)("auto")],t.prototype,"width",void 0),_([i.i(r.Property)(!1)],t.prototype,"allowExcelExport",void 0),_([i.i(r.Property)(!1)],t.prototype,"enableVirtualization",void 0),_([i.i(r.Property)(!1)],t.prototype,"enablePaging",void 0),_([i.i(r.Property)(!1)],t.prototype,"allowDrillThrough",void 0),_([i.i(r.Property)(!1)],t.prototype,"allowPdfExport",void 0),_([i.i(r.Property)(!1)],t.prototype,"allowDeferLayoutUpdate",void 0),_([i.i(r.Property)(!1)],t.prototype,"allowDataCompression",void 0),_([i.i(r.Property)(1e3)],t.prototype,"maxNodeLimitInMemberEditor",void 0),_([i.i(r.Property)(1e4)],t.prototype,"maxRowsInDrillThrough",void 0),_([i.i(r.Property)(!0)],t.prototype,"loadOnDemandInMemberEditor",void 0),_([i.i(r.Property)(!1)],t.prototype,"enableHtmlSanitizer",void 0),_([i.i(r.Property)()],t.prototype,"cellTemplate",void 0),_([i.i(r.Property)()],t.prototype,"toolbarTemplate",void 0),_([i.i(r.Property)()],t.prototype,"tooltipTemplate",void 0),_([i.i(r.Property)()],t.prototype,"spinnerTemplate",void 0),_([i.i(r.Property)(!1)],t.prototype,"allowGrouping",void 0),_([i.i(r.Property)(!0)],t.prototype,"exportAllPages",void 0),_([i.i(r.Property)(["Sum","Count","DistinctCount","Product","Min","Max","Avg","Median","Index","PopulationVar","SampleVar","PopulationStDev","SampleStDev","RunningTotals","PercentageOfGrandTotal","PercentageOfColumnTotal","PercentageOfRowTotal","PercentageOfParentColumnTotal","PercentageOfParentRowTotal","DifferenceFrom","PercentageOfDifferenceFrom","PercentageOfParentTotal"])],t.prototype,"aggregateTypes",void 0),_([i.i(r.Property)(["Column","Bar","Line","Area","Scatter","Polar","StackingColumn","StackingArea","StackingBar","StackingLine","StepLine","StepArea","SplineArea","Spline","StackingColumn100","StackingBar100","StackingArea100","StackingLine100","Bubble","Pareto","Radar","Pie","Doughnut","Funnel","Pyramid"])],t.prototype,"chartTypes",void 0),_([i.i(r.Property)("")],t.prototype,"cssClass",void 0),_([i.i(r.Event)()],t.prototype,"queryCellInfo",void 0),_([i.i(r.Event)()],t.prototype,"headerCellInfo",void 0),_([i.i(r.Event)()],t.prototype,"resizing",void 0),_([i.i(r.Event)()],t.prototype,"resizeStop",void 0),_([i.i(r.Event)()],t.prototype,"pdfHeaderQueryCellInfo",void 0),_([i.i(r.Event)()],t.prototype,"pdfQueryCellInfo",void 0),_([i.i(r.Event)()],t.prototype,"excelHeaderQueryCellInfo",void 0),_([i.i(r.Event)()],t.prototype,"excelQueryCellInfo",void 0),_([i.i(r.Event)()],t.prototype,"columnDragStart",void 0),_([i.i(r.Event)()],t.prototype,"columnDrag",void 0),_([i.i(r.Event)()],t.prototype,"columnDrop",void 0),_([i.i(r.Event)()],t.prototype,"beforePdfExport",void 0),_([i.i(r.Event)()],t.prototype,"beforeExcelExport",void 0),_([i.i(r.Event)()],t.prototype,"beforeColumnsRender",void 0),_([i.i(r.Event)()],t.prototype,"selected",void 0),_([i.i(r.Event)()],t.prototype,"cellDeselected",void 0),_([i.i(r.Event)()],t.prototype,"rowSelected",void 0),_([i.i(r.Event)()],t.prototype,"rowDeselected",void 0),_([i.i(r.Event)()],t.prototype,"chartTooltipRender",void 0),_([i.i(r.Event)()],t.prototype,"chartLegendClick",void 0),_([i.i(r.Event)()],t.prototype,"chartLoaded",void 0),_([i.i(r.Event)()],t.prototype,"chartLoad",void 0),_([i.i(r.Event)()],t.prototype,"chartResized",void 0),_([i.i(r.Event)()],t.prototype,"chartAxisLabelRender",void 0),_([i.i(r.Event)()],t.prototype,"multiLevelLabelClick",void 0),_([i.i(r.Event)()],t.prototype,"chartPointClick",void 0),_([i.i(r.Event)()],t.prototype,"contextMenuClick",void 0),_([i.i(r.Event)()],t.prototype,"contextMenuOpen",void 0),_([i.i(r.Event)()],t.prototype,"onPdfCellRender",void 0),_([i.i(r.Event)()],t.prototype,"saveReport",void 0),_([i.i(r.Event)()],t.prototype,"fetchReport",void 0),_([i.i(r.Event)()],t.prototype,"loadReport",void 0),_([i.i(r.Event)()],t.prototype,"renameReport",void 0),_([i.i(r.Event)()],t.prototype,"removeReport",void 0),_([i.i(r.Event)()],t.prototype,"newReport",void 0),_([i.i(r.Event)()],t.prototype,"toolbarRender",void 0),_([i.i(r.Event)()],t.prototype,"toolbarClick",void 0),_([i.i(r.Event)()],t.prototype,"load",void 0),_([i.i(r.Event)()],t.prototype,"enginePopulating",void 0),_([i.i(r.Event)()],t.prototype,"enginePopulated",void 0),_([i.i(r.Event)()],t.prototype,"onFieldDropped",void 0),_([i.i(r.Event)()],t.prototype,"fieldDrop",void 0),_([i.i(r.Event)()],t.prototype,"fieldDragStart",void 0),_([i.i(r.Event)()],t.prototype,"dataBound",void 0),_([i.i(r.Event)()],t.prototype,"created",void 0),_([i.i(r.Event)()],t.prototype,"destroyed",void 0),_([i.i(r.Event)()],t.prototype,"beforeExport",void 0),_([i.i(r.Event)()],t.prototype,"exportComplete",void 0),_([i.i(r.Event)()],t.prototype,"conditionalFormatting",void 0),_([i.i(r.Event)()],t.prototype,"memberFiltering",void 0),_([i.i(r.Event)()],t.prototype,"cellClick",void 0),_([i.i(r.Event)()],t.prototype,"drillThrough",void 0),_([i.i(r.Event)()],t.prototype,"editCompleted",void 0),_([i.i(r.Event)()],t.prototype,"beginDrillThrough",void 0),_([i.i(r.Event)()],t.prototype,"hyperlinkCellClick",void 0),_([i.i(r.Event)()],t.prototype,"cellSelecting",void 0),_([i.i(r.Event)()],t.prototype,"drill",void 0),_([i.i(r.Event)()],t.prototype,"cellSelected",void 0),_([i.i(r.Event)()],t.prototype,"chartSeriesCreated",void 0),_([i.i(r.Event)()],t.prototype,"aggregateCellInfo",void 0),_([i.i(r.Event)()],t.prototype,"fieldListRefreshed",void 0),_([i.i(r.Event)()],t.prototype,"memberEditorOpen",void 0),_([i.i(r.Event)()],t.prototype,"calculatedFieldCreate",void 0),_([i.i(r.Event)()],t.prototype,"numberFormatting",void 0),_([i.i(r.Event)()],t.prototype,"aggregateMenuOpen",void 0),_([i.i(r.Event)()],t.prototype,"fieldRemove",void 0),_([i.i(r.Event)()],t.prototype,"beforeServiceInvoke",void 0),_([i.i(r.Event)()],t.prototype,"actionBegin",void 0),_([i.i(r.Event)()],t.prototype,"actionComplete",void 0),_([i.i(r.Event)()],t.prototype,"actionFailure",void 0),_([i.i(r.Event)()],t.prototype,"onHeadersSort",void 0),t=_([r.NotifyPropertyChanges],t)}(r.Component)},function(e,t,i){"use strict";i.d(t,"a",function(){return H});var r=i(0),a=(i.n(r),i(30)),n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),o=this&&this.__decorate||function(e,t,i,r){var a,n=arguments.length,o=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(n<3?a(o):n>3?a(t,i,o):a(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),o([i.i(r.Property)(!0)],t.prototype,"enable",void 0),o([i.i(r.Property)(1e3)],t.prototype,"duration",void 0),o([i.i(r.Property)(0)],t.prototype,"delay",void 0),t}(r.ChildProperty),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),o([i.i(r.Property)(null)],t.prototype,"value",void 0),o([i.i(r.Property)(null)],t.prototype,"color",void 0),o([i.i(r.Property)("0")],t.prototype,"dashArray",void 0),t}(r.ChildProperty),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),o([i.i(r.Property)("Normal")],t.prototype,"fontStyle",void 0),o([i.i(r.Property)("16px")],t.prototype,"size",void 0),o([i.i(r.Property)("Normal")],t.prototype,"fontWeight",void 0),o([i.i(r.Property)("")],t.prototype,"color",void 0),o([i.i(r.Property)("Center")],t.prototype,"textAlignment",void 0),o([i.i(r.Property)("Segoe UI")],t.prototype,"fontFamily",void 0),o([i.i(r.Property)(1)],t.prototype,"opacity",void 0),o([i.i(r.Property)("Trim")],t.prototype,"textOverflow",void 0),t}(r.ChildProperty),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),o([i.i(r.Property)(10)],t.prototype,"left",void 0),o([i.i(r.Property)(10)],t.prototype,"right",void 0),o([i.i(r.Property)(10)],t.prototype,"top",void 0),o([i.i(r.Property)(10)],t.prototype,"bottom",void 0),t}(r.ChildProperty),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),o([i.i(r.Property)("")],t.prototype,"color",void 0),o([i.i(r.Property)(1)],t.prototype,"width",void 0),t}(r.ChildProperty),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),o([i.i(r.Property)(0)],t.prototype,"x",void 0),o([i.i(r.Property)(0)],t.prototype,"y",void 0),t}(r.ChildProperty),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),o([i.i(r.Property)(0)],t.prototype,"series",void 0),o([i.i(r.Property)(0)],t.prototype,"point",void 0),t}(r.ChildProperty),g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),o([i.i(r.Complex)({},p)],t.prototype,"border",void 0),o([i.i(r.Property)("transparent")],t.prototype,"background",void 0),o([i.i(r.Property)(1)],t.prototype,"opacity",void 0),o([i.i(r.Property)(null)],t.prototype,"backgroundImage",void 0),t}(r.ChildProperty),m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),o([i.i(r.Property)(!1)],t.prototype,"enable",void 0),o([i.i(r.Property)("")],t.prototype,"dashArray",void 0),o([i.i(r.Complex)({color:null,width:1},p)],t.prototype,"line",void 0),o([i.i(r.Property)("Both")],t.prototype,"lineType",void 0),t}(r.ChildProperty),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),o([i.i(r.Property)(!1)],t.prototype,"visible",void 0),o([i.i(r.Property)(null)],t.prototype,"name",void 0),o([i.i(r.Property)("transparent")],t.prototype,"fill",void 0),o([i.i(r.Property)(1)],t.prototype,"opacity",void 0),o([i.i(r.Property)(0)],t.prototype,"angle",void 0),o([i.i(r.Property)(!1)],t.prototype,"enableRotation",void 0),o([i.i(r.Property)("Auto")],t.prototype,"position",void 0),o([i.i(r.Property)(5)],t.prototype,"rx",void 0),o([i.i(r.Property)(5)],t.prototype,"ry",void 0),o([i.i(r.Property)("Center")],t.prototype,"alignment",void 0),o([i.i(r.Complex)({width:null,color:null},p)],t.prototype,"border",void 0),o([i.i(r.Complex)({left:5,right:5,top:5,bottom:5},h)],t.prototype,"margin",void 0),o([i.i(r.Complex)({size:"11px",color:"",fontStyle:"Normal",fontWeight:"Normal",fontFamily:"Segoe UI"},d)],t.prototype,"font",void 0),o([i.i(r.Property)(null)],t.prototype,"template",void 0),t}(r.ChildProperty),v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),o([i.i(r.Property)("Line")],t.prototype,"type",void 0),o([i.i(r.Property)(null)],t.prototype,"color",void 0),o([i.i(r.Property)(1)],t.prototype,"width",void 0),o([i.i(r.Property)(null)],t.prototype,"length",void 0),o([i.i(r.Property)("")],t.prototype,"dashArray",void 0),t}(r.ChildProperty),S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),o([i.i(r.Property)(!0)],t.prototype,"visible",void 0),o([i.i(r.Complex)({width:null,color:null},p)],t.prototype,"border",void 0),o([i.i(r.Complex)({size:"11px",color:"",fontStyle:"Normal",fontWeight:"Normal",fontFamily:"Segoe UI"},d)],t.prototype,"font",void 0),o([i.i(r.Property)("transparent")],t.prototype,"fill",void 0),o([i.i(r.Property)(0)],t.prototype,"angle",void 0),o([i.i(r.Property)(!1)],t.prototype,"enableRotation",void 0),o([i.i(r.Property)("Outside")],t.prototype,"position",void 0),o([i.i(r.Property)(5)],t.prototype,"rx",void 0),o([i.i(r.Property)(5)],t.prototype,"ry",void 0),o([i.i(r.Property)(null)],t.prototype,"template",void 0),o([i.i(r.Complex)({},v)],t.prototype,"connectorStyle",void 0),t}(r.ChildProperty),y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),o([i.i(r.Property)(!1)],t.prototype,"visible",void 0),o([i.i(r.Property)("Circle")],t.prototype,"shape",void 0),o([i.i(r.Property)("")],t.prototype,"imageUrl",void 0),o([i.i(r.Property)(5)],t.prototype,"width",void 0),o([i.i(r.Property)(5)],t.prototype,"height",void 0),o([i.i(r.Complex)({width:2,color:null},p)],t.prototype,"border",void 0),o([i.i(r.Complex)({x:0,y:0},u)],t.prototype,"offset",void 0),o([i.i(r.Property)(null)],t.prototype,"fill",void 0),o([i.i(r.Property)(1)],t.prototype,"opacity",void 0),o([i.i(r.Complex)({},f)],t.prototype,"dataLabel",void 0),t}(r.ChildProperty),b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),o([i.i(r.Property)(1)],t.prototype,"width",void 0),o([i.i(r.Property)(10)],t.prototype,"length",void 0),o([i.i(r.Property)(null)],t.prototype,"color",void 0),o([i.i(r.Property)(1)],t.prototype,"opacity",void 0),t}(r.ChildProperty),C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),o([i.i(r.Property)(!1)],t.prototype,"visible",void 0),o([i.i(r.Property)("Fixed")],t.prototype,"type",void 0),o([i.i(r.Property)("Both")],t.prototype,"direction",void 0),o([i.i(r.Property)("Vertical")],t.prototype,"mode",void 0),o([i.i(r.Property)(1)],t.prototype,"verticalError",void 0),o([i.i(r.Property)(null)],t.prototype,"color",void 0),o([i.i(r.Property)(1)],t.prototype,"width",void 0),o([i.i(r.Property)(1)],t.prototype,"horizontalError",void 0),o([i.i(r.Property)(3)],t.prototype,"verticalNegativeError",void 0),o([i.i(r.Property)(3)],t.prototype,"verticalPositiveError",void 0),o([i.i(r.Property)(1)],t.prototype,"horizontalNegativeError",void 0),o([i.i(r.Property)(1)],t.prototype,"horizontalPositiveError",void 0),o([i.i(r.Complex)(null,b)],t.prototype,"errorBarCap",void 0),t}(r.ChildProperty),x=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),o([i.i(r.Property)("")],t.prototype,"name",void 0),o([i.i(r.Property)("0")],t.prototype,"dashArray",void 0),o([i.i(r.Property)(!0)],t.prototype,"visible",void 0),o([i.i(r.Property)(2)],t.prototype,"period",void 0),o([i.i(r.Property)("Linear")],t.prototype,"type",void 0),o([i.i(r.Property)(0)],t.prototype,"backwardForecast",void 0),o([i.i(r.Property)(0)],t.prototype,"forwardForecast",void 0),o([i.i(r.Property)(2)],t.prototype,"polynomialOrder",void 0),o([i.i(r.Complex)({},y)],t.prototype,"marker",void 0),o([i.i(r.Property)(!0)],t.prototype,"enableTooltip",void 0),o([i.i(r.Complex)({},s)],t.prototype,"animation",void 0),o([i.i(r.Property)("")],t.prototype,"fill",void 0),o([i.i(r.Property)(1)],t.prototype,"width",void 0),o([i.i(r.Property)(null)],t.prototype,"intercept",void 0),o([i.i(r.Property)("SeriesType")],t.prototype,"legendShape",void 0),t}(r.ChildProperty),w=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),o([i.i(r.Property)(null)],t.prototype,"fill",void 0),o([i.i(r.Complex)({color:"transparent",width:0},p)],t.prototype,"border",void 0),o([i.i(r.Property)("Zero")],t.prototype,"mode",void 0),t}(r.ChildProperty),T=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),o([i.i(r.Property)(0)],t.prototype,"topLeft",void 0),o([i.i(r.Property)(0)],t.prototype,"topRight",void 0),o([i.i(r.Property)(0)],t.prototype,"bottomLeft",void 0),o([i.i(r.Property)(0)],t.prototype,"bottomRight",void 0),t}(r.ChildProperty),M=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),o([i.i(r.Property)(!1)],t.prototype,"enable",void 0),o([i.i(r.Property)(null)],t.prototype,"fill",void 0),o([i.i(r.Complex)(a.a.crosshairLabelFont,d)],t.prototype,"textStyle",void 0),t}(r.ChildProperty),_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),o([i.i(r.Property)(!0)],t.prototype,"visible",void 0),o([i.i(r.Property)(!1)],t.prototype,"startFromAxis",void 0),o([i.i(r.Property)(null)],t.prototype,"start",void 0),o([i.i(r.Property)(null)],t.prototype,"end",void 0),o([i.i(r.Property)(null)],t.prototype,"size",void 0),o([i.i(r.Property)("#808080")],t.prototype,"color",void 0),o([i.i(r.Property)(null)],t.prototype,"dashArray",void 0),o([i.i(r.Property)("Auto")],t.prototype,"sizeType",void 0),o([i.i(r.Property)(!1)],t.prototype,"isRepeat",void 0),o([i.i(r.Property)(null)],t.prototype,"repeatEvery",void 0),o([i.i(r.Property)(null)],t.prototype,"repeatUntil",void 0),o([i.i(r.Property)(!1)],t.prototype,"isSegmented",void 0),o([i.i(r.Property)(null)],t.prototype,"segmentStart",void 0),o([i.i(r.Property)(null)],t.prototype,"segmentEnd",void 0),o([i.i(r.Property)(null)],t.prototype,"segmentAxisName",void 0),o([i.i(r.Complex)({color:"transparent",width:1},p)],t.prototype,"border",void 0),o([i.i(r.Property)("")],t.prototype,"text",void 0),o([i.i(r.Property)(null)],t.prototype,"rotation",void 0),o([i.i(r.Property)("Middle")],t.prototype,"horizontalAlignment",void 0),o([i.i(r.Property)("Middle")],t.prototype,"verticalAlignment",void 0),o([i.i(r.Complex)(a.a.stripLineLabelFont,d)],t.prototype,"textStyle",void 0),o([i.i(r.Property)("Behind")],t.prototype,"zIndex",void 0),o([i.i(r.Property)(1)],t.prototype,"opacity",void 0),t}(r.ChildProperty),D=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),o([i.i(r.Property)("")],t.prototype,"color",void 0),o([i.i(r.Property)(1)],t.prototype,"width",void 0),o([i.i(r.Property)("Rectangle")],t.prototype,"type",void 0),t}(r.ChildProperty),O=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),o([i.i(r.Property)(1)],t.prototype,"width",void 0),o([i.i(r.Property)("")],t.prototype,"dashArray",void 0),o([i.i(r.Property)(null)],t.prototype,"color",void 0),t}(r.ChildProperty),P=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),o([i.i(r.Property)(.7)],t.prototype,"width",void 0),o([i.i(r.Property)("")],t.prototype,"dashArray",void 0),o([i.i(r.Property)(null)],t.prototype,"color",void 0),t}(r.ChildProperty),E=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),o([i.i(r.Property)(1)],t.prototype,"width",void 0),o([i.i(r.Property)("")],t.prototype,"dashArray",void 0),o([i.i(r.Property)(null)],t.prototype,"color",void 0),t}(r.ChildProperty),N=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),o([i.i(r.Property)(1)],t.prototype,"width",void 0),o([i.i(r.Property)(5)],t.prototype,"height",void 0),o([i.i(r.Property)(null)],t.prototype,"color",void 0),t}(r.ChildProperty),F=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),o([i.i(r.Property)(.7)],t.prototype,"width",void 0),o([i.i(r.Property)(5)],t.prototype,"height",void 0),o([i.i(r.Property)(null)],t.prototype,"color",void 0),t}(r.ChildProperty),I=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),o([i.i(r.Property)(0)],t.prototype,"x",void 0),o([i.i(r.Property)(0)],t.prototype,"y",void 0),t}(r.ChildProperty),L=(function(){function e(){}o([i.i(r.Property)("")],e.prototype,"color",void 0),o([i.i(r.Property)(1)],e.prototype,"width",void 0)}(),function(){function e(){}o([i.i(r.Property)(!0)],e.prototype,"enable",void 0),o([i.i(r.Property)(1e3)],e.prototype,"duration",void 0),o([i.i(r.Property)(0)],e.prototype,"delay",void 0)}(),function(){function e(){}o([i.i(r.Property)(null)],e.prototype,"value",void 0),o([i.i(r.Property)(null)],e.prototype,"color",void 0),o([i.i(r.Property)("0")],e.prototype,"dashArray",void 0)}(),function(){function e(){}o([i.i(r.Property)(!1)],e.prototype,"visible",void 0),o([i.i(r.Property)("Circle")],e.prototype,"shape",void 0),o([i.i(r.Property)("")],e.prototype,"imageUrl",void 0),o([i.i(r.Property)(5)],e.prototype,"height",void 0),o([i.i(r.Property)(5)],e.prototype,"width",void 0),o([i.i(r.Complex)({width:2,color:null},p)],e.prototype,"border",void 0),o([i.i(r.Property)(null)],e.prototype,"fill",void 0),o([i.i(r.Property)(1)],e.prototype,"opacity",void 0),o([i.i(r.Complex)({},f)],e.prototype,"dataLabel",void 0)}(),function(){function e(){}o([i.i(r.Property)(!1)],e.prototype,"visible",void 0),o([i.i(r.Property)("Fixed")],e.prototype,"type",void 0),o([i.i(r.Property)("Both")],e.prototype,"direction",void 0),o([i.i(r.Property)("Vertical")],e.prototype,"mode",void 0),o([i.i(r.Property)(null)],e.prototype,"color",void 0),o([i.i(r.Property)(1)],e.prototype,"verticalError",void 0),o([i.i(r.Property)(1)],e.prototype,"width",void 0),o([i.i(r.Property)(1)],e.prototype,"horizontalError",void 0),o([i.i(r.Property)(3)],e.prototype,"verticalPositiveError",void 0),o([i.i(r.Property)(3)],e.prototype,"verticalNegativeError",void 0),o([i.i(r.Property)(1)],e.prototype,"horizontalPositiveError",void 0),o([i.i(r.Property)(1)],e.prototype,"horizontalNegativeError",void 0),o([i.i(r.Complex)(null,b)],e.prototype,"errorBarCap",void 0)}(),function(){function e(){}o([i.i(r.Property)("")],e.prototype,"name",void 0),o([i.i(r.Property)("Linear")],e.prototype,"type",void 0),o([i.i(r.Property)(2)],e.prototype,"period",void 0),o([i.i(r.Property)(2)],e.prototype,"polynomialOrder",void 0),o([i.i(r.Property)(0)],e.prototype,"backwardForecast",void 0),o([i.i(r.Property)(0)],e.prototype,"forwardForecast",void 0),o([i.i(r.Complex)({},s)],e.prototype,"animation",void 0),o([i.i(r.Complex)({},y)],e.prototype,"marker",void 0),o([i.i(r.Property)(!0)],e.prototype,"enableTooltip",void 0),o([i.i(r.Property)(null)],e.prototype,"intercept",void 0),o([i.i(r.Property)("")],e.prototype,"fill",void 0),o([i.i(r.Property)(1)],e.prototype,"width",void 0),o([i.i(r.Property)("SeriesType")],e.prototype,"legendShape",void 0)}(),function(){function e(){}o([i.i(r.Property)(null)],e.prototype,"fill",void 0),o([i.i(r.Complex)({color:"transparent",width:0},p)],e.prototype,"border",void 0),o([i.i(r.Property)("Zero")],e.prototype,"mode",void 0)}(),function(){function e(){}o([i.i(r.Property)(0)],e.prototype,"topLeft",void 0),o([i.i(r.Property)(0)],e.prototype,"topRight",void 0),o([i.i(r.Property)(0)],e.prototype,"bottomLeft",void 0),o([i.i(r.Property)(0)],e.prototype,"bottomRight",void 0)}(),function(){function e(){}o([i.i(r.Property)("Normal")],e.prototype,"fontStyle",void 0),o([i.i(r.Property)("16px")],e.prototype,"size",void 0),o([i.i(r.Property)("Normal")],e.prototype,"fontWeight",void 0),o([i.i(r.Property)("")],e.prototype,"color",void 0),o([i.i(r.Property)("Center")],e.prototype,"textAlignment",void 0),o([i.i(r.Property)("Segoe UI")],e.prototype,"fontFamily",void 0),o([i.i(r.Property)(1)],e.prototype,"opacity",void 0),o([i.i(r.Property)("Trim")],e.prototype,"textOverflow",void 0)}(),function(){function e(){}o([i.i(r.Property)(!1)],e.prototype,"enable",void 0),o([i.i(r.Property)(null)],e.prototype,"fill",void 0),o([i.i(r.Complex)(a.a.crosshairLabelFont,d)],e.prototype,"textStyle",void 0)}(),function(){function e(){}o([i.i(r.Property)(1)],e.prototype,"width",void 0),o([i.i(r.Property)(5)],e.prototype,"height",void 0),o([i.i(r.Property)(null)],e.prototype,"color",void 0)}(),function(){function e(){}o([i.i(r.Property)(1)],e.prototype,"width",void 0),o([i.i(r.Property)("")],e.prototype,"dashArray",void 0),o([i.i(r.Property)(null)],e.prototype,"color",void 0)}(),function(){function e(){}o([i.i(r.Property)(.7)],e.prototype,"width",void 0),o([i.i(r.Property)(5)],e.prototype,"height",void 0),o([i.i(r.Property)(null)],e.prototype,"color",void 0)}(),function(){function e(){}o([i.i(r.Property)(.7)],e.prototype,"width",void 0),o([i.i(r.Property)("")],e.prototype,"dashArray",void 0),o([i.i(r.Property)(null)],e.prototype,"color",void 0)}(),function(){function e(){}o([i.i(r.Property)(1)],e.prototype,"width",void 0),o([i.i(r.Property)("")],e.prototype,"dashArray",void 0),o([i.i(r.Property)(null)],e.prototype,"color",void 0)}(),function(){function e(){}o([i.i(r.Property)(!0)],e.prototype,"visible",void 0),o([i.i(r.Property)(!1)],e.prototype,"startFromAxis",void 0),o([i.i(r.Property)(null)],e.prototype,"start",void 0),o([i.i(r.Property)(null)],e.prototype,"end",void 0),o([i.i(r.Property)(null)],e.prototype,"size",void 0),o([i.i(r.Property)("#808080")],e.prototype,"color",void 0),o([i.i(r.Property)(null)],e.prototype,"dashArray",void 0),o([i.i(r.Property)("Auto")],e.prototype,"sizeType",void 0),o([i.i(r.Property)(!1)],e.prototype,"isRepeat",void 0),o([i.i(r.Property)(null)],e.prototype,"repeatEvery",void 0),o([i.i(r.Property)(null)],e.prototype,"repeatUntil",void 0),o([i.i(r.Property)(!1)],e.prototype,"isSegmented",void 0),o([i.i(r.Property)(null)],e.prototype,"segmentStart",void 0),o([i.i(r.Property)(null)],e.prototype,"segmentEnd",void 0),o([i.i(r.Property)(null)],e.prototype,"segmentAxisName",void 0),o([i.i(r.Complex)({color:"transparent",width:1},p)],e.prototype,"border",void 0),o([i.i(r.Property)("")],e.prototype,"text",void 0),o([i.i(r.Property)(null)],e.prototype,"rotation",void 0),o([i.i(r.Property)("Middle")],e.prototype,"horizontalAlignment",void 0),o([i.i(r.Property)("Middle")],e.prototype,"verticalAlignment",void 0),o([i.i(r.Complex)(a.a.stripLineLabelFont,d)],e.prototype,"textStyle",void 0),o([i.i(r.Property)("Behind")],e.prototype,"zIndex",void 0),o([i.i(r.Property)(1)],e.prototype,"opacity",void 0)}(),function(){function e(){}o([i.i(r.Property)("")],e.prototype,"color",void 0),o([i.i(r.Property)(1)],e.prototype,"width",void 0),o([i.i(r.Property)("Rectangle")],e.prototype,"type",void 0)}(),function(){function e(){}o([i.i(r.Complex)({},p)],e.prototype,"border",void 0),o([i.i(r.Property)("transparent")],e.prototype,"background",void 0),o([i.i(r.Property)(1)],e.prototype,"opacity",void 0)}(),function(){function e(){}o([i.i(r.Property)(!1)],e.prototype,"enable",void 0),o([i.i(r.Property)("")],e.prototype,"dashArray",void 0),o([i.i(r.Complex)({color:null,width:1},p)],e.prototype,"line",void 0),o([i.i(r.Property)("Both")],e.prototype,"lineType",void 0)}(),function(){function e(){}o([i.i(r.Property)(!0)],e.prototype,"visible",void 0),o([i.i(r.Property)(null)],e.prototype,"height",void 0),o([i.i(r.Property)(null)],e.prototype,"width",void 0),o([i.i(r.Complex)({x:0,y:0},I)],e.prototype,"location",void 0),o([i.i(r.Property)("Auto")],e.prototype,"position",void 0),o([i.i(r.Property)(8)],e.prototype,"padding",void 0),o([i.i(r.Property)("Center")],e.prototype,"alignment",void 0),o([i.i(r.Complex)(a.a.legendLabelFont,d)],e.prototype,"textStyle",void 0),o([i.i(r.Property)(10)],e.prototype,"shapeHeight",void 0),o([i.i(r.Property)(10)],e.prototype,"shapeWidth",void 0),o([i.i(r.Complex)({},p)],e.prototype,"border",void 0),o([i.i(r.Complex)({left:0,right:0,top:0,bottom:0},h)],e.prototype,"margin",void 0),o([i.i(r.Property)(5)],e.prototype,"shapePadding",void 0),o([i.i(r.Property)("transparent")],e.prototype,"background",void 0),o([i.i(r.Property)(1)],e.prototype,"opacity",void 0),o([i.i(r.Property)(!0)],e.prototype,"toggleVisibility",void 0),o([i.i(r.Property)(null)],e.prototype,"description",void 0),o([i.i(r.Property)(3)],e.prototype,"tabIndex",void 0)}(),function(){function e(){}o([i.i(r.Property)(0)],e.prototype,"series",void 0),o([i.i(r.Property)(0)],e.prototype,"point",void 0)}(),function(){function e(){}o([i.i(r.Property)(10)],e.prototype,"left",void 0),o([i.i(r.Property)(10)],e.prototype,"right",void 0),o([i.i(r.Property)(10)],e.prototype,"top",void 0),o([i.i(r.Property)(10)],e.prototype,"bottom",void 0)}(),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),o([i.i(r.Property)(null)],t.prototype,"fill",void 0),o([i.i(r.Property)(null)],t.prototype,"endAngle",void 0),o([i.i(r.Property)(!1)],t.prototype,"explode",void 0),o([i.i(r.Property)(!1)],t.prototype,"explodeAll",void 0),o([i.i(r.Property)(null)],t.prototype,"explodeIndex",void 0),o([i.i(r.Property)(null)],t.prototype,"innerRadius",void 0),o([i.i(r.Property)("30%")],t.prototype,"explodeOffset",void 0),o([i.i(r.Property)(0)],t.prototype,"gapRatio",void 0),o([i.i(r.Property)("Value")],t.prototype,"groupMode",void 0),o([i.i(r.Property)(null)],t.prototype,"groupTo",void 0),o([i.i(r.Property)("20%")],t.prototype,"neckHeight",void 0),o([i.i(r.Property)("20%")],t.prototype,"neckWidth",void 0),o([i.i(r.Property)("Linear")],t.prototype,"pyramidMode",void 0),o([i.i(r.Property)([])],t.prototype,"palettes",void 0),o([i.i(r.Property)(0)],t.prototype,"startAngle",void 0),o([i.i(r.Complex)(null,s)],t.prototype,"animation",void 0),o([i.i(r.Complex)(null,S)],t.prototype,"dataLabel",void 0),o([i.i(r.Property)("0")],t.prototype,"dashArray",void 0),o([i.i(r.Property)(1)],t.prototype,"width",void 0),o([i.i(r.Property)("X")],t.prototype,"segmentAxis",void 0),o([i.i(r.Property)("Line")],t.prototype,"drawType",void 0),o([i.i(r.Property)(!0)],t.prototype,"isClosed",void 0),o([i.i(r.Collection)([],l)],t.prototype,"segments",void 0),o([i.i(r.Property)("")],t.prototype,"stackingGroup",void 0),o([i.i(r.Complex)({color:"transparent",width:0},p)],t.prototype,"border",void 0),o([i.i(r.Property)(!0)],t.prototype,"visible",void 0),o([i.i(r.Property)(1)],t.prototype,"opacity",void 0),o([i.i(r.Property)("Line")],t.prototype,"type",void 0),o([i.i(r.Complex)(null,y)],t.prototype,"marker",void 0),o([i.i(r.Complex)(null,C)],t.prototype,"errorBar",void 0),o([i.i(r.Property)(!0)],t.prototype,"enableTooltip",void 0),o([i.i(r.Collection)([],x)],t.prototype,"trendlines",void 0),o([i.i(r.Property)("")],t.prototype,"tooltipMappingName",void 0),o([i.i(r.Property)("SeriesType")],t.prototype,"legendShape",void 0),o([i.i(r.Property)(1)],t.prototype,"minRadius",void 0),o([i.i(r.Property)(null)],t.prototype,"selectionStyle",void 0),o([i.i(r.Property)("Natural")],t.prototype,"splineType",void 0),o([i.i(r.Property)(3)],t.prototype,"maxRadius",void 0),o([i.i(r.Property)(.5)],t.prototype,"cardinalSplineTension",void 0),o([i.i(r.Property)(null)],t.prototype,"columnWidth",void 0),o([i.i(r.Complex)(null,w)],t.prototype,"emptyPointSettings",void 0),o([i.i(r.Complex)(null,T)],t.prototype,"cornerRadius",void 0),o([i.i(r.Property)(0)],t.prototype,"columnSpacing",void 0),t}(r.ChildProperty)),A=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),o([i.i(r.Property)("Rotate45")],t.prototype,"labelIntersectAction",void 0),o([i.i(r.Complex)(a.a.axisLabelFont,d)],t.prototype,"labelStyle",void 0),o([i.i(r.Property)("")],t.prototype,"title",void 0),o([i.i(r.Property)(null)],t.prototype,"zoomFactor",void 0),o([i.i(r.Complex)({},M)],t.prototype,"crosshairTooltip",void 0),o([i.i(r.Property)("")],t.prototype,"labelFormat",void 0),o([i.i(r.Complex)(a.a.axisTitleFont,d)],t.prototype,"titleStyle",void 0),o([i.i(r.Property)(!1)],t.prototype,"isIndexed",void 0),o([i.i(r.Property)(0)],t.prototype,"plotOffset",void 0),o([i.i(r.Property)("Shift")],t.prototype,"edgeLabelPlacement",void 0),o([i.i(r.Property)("BetweenTicks")],t.prototype,"labelPlacement",void 0),o([i.i(r.Property)("Outside")],t.prototype,"tickPosition",void 0),o([i.i(r.Property)(!1)],t.prototype,"opposedPosition",void 0),o([i.i(r.Property)(!0)],t.prototype,"visible",void 0),o([i.i(r.Property)("Outside")],t.prototype,"labelPosition",void 0),o([i.i(r.Property)(0)],t.prototype,"labelRotation",void 0),o([i.i(r.Property)(0)],t.prototype,"minorTicksPerInterval",void 0),o([i.i(r.Property)(null)],t.prototype,"maximum",void 0),o([i.i(r.Property)(null)],t.prototype,"minimum",void 0),o([i.i(r.Property)(34)],t.prototype,"maximumLabelWidth",void 0),o([i.i(r.Property)(null)],t.prototype,"interval",void 0),o([i.i(r.Complex)({},N)],t.prototype,"majorTickLines",void 0),o([i.i(r.Property)(!1)],t.prototype,"enableTrim",void 0),o([i.i(r.Complex)({},O)],t.prototype,"majorGridLines",void 0),o([i.i(r.Complex)({},F)],t.prototype,"minorTickLines",void 0),o([i.i(r.Complex)({},E)],t.prototype,"lineStyle",void 0),o([i.i(r.Complex)({},P)],t.prototype,"minorGridLines",void 0),o([i.i(r.Property)(!1)],t.prototype,"isInversed",void 0),o([i.i(r.Property)(null)],t.prototype,"description",void 0),o([i.i(r.Property)(0)],t.prototype,"startAngle",void 0),o([i.i(r.Property)(100)],t.prototype,"coefficient",void 0),o([i.i(r.Collection)([],_)],t.prototype,"stripLines",void 0),o([i.i(r.Property)(2)],t.prototype,"tabIndex",void 0),o([i.i(r.Complex)({color:null,width:0,type:"Rectangle"},D)],t.prototype,"border",void 0),t}(r.ChildProperty),R=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),o([i.i(r.Property)(!1)],t.prototype,"enableMarker",void 0),o([i.i(r.Property)(!0)],t.prototype,"enable",void 0),o([i.i(r.Property)(null)],t.prototype,"fill",void 0),o([i.i(r.Property)(!1)],t.prototype,"shared",void 0),o([i.i(r.Property)(.75)],t.prototype,"opacity",void 0),o([i.i(r.Property)(null)],t.prototype,"header",void 0),o([i.i(r.Property)(null)],t.prototype,"format",void 0),o([i.i(r.Complex)(a.a.tooltipLabelFont,d)],t.prototype,"textStyle",void 0),o([i.i(r.Property)(null)],t.prototype,"template",void 0),o([i.i(r.Complex)({color:"#cccccc",width:.5},p)],t.prototype,"border",void 0),o([i.i(r.Property)(!0)],t.prototype,"enableAnimation",void 0),t}(r.ChildProperty),k=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),o([i.i(r.Property)("50%")],t.prototype,"x",void 0),o([i.i(r.Property)("50%")],t.prototype,"y",void 0),t}(r.ChildProperty),j=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),o([i.i(r.Property)(!1)],t.prototype,"enablePinchZooming",void 0),o([i.i(r.Property)(!0)],t.prototype,"enableSelectionZooming",void 0),o([i.i(r.Property)(!1)],t.prototype,"enableDeferredZooming",void 0),o([i.i(r.Property)(!1)],t.prototype,"enableMouseWheelZooming",void 0),o([i.i(r.Property)("XY")],t.prototype,"mode",void 0),o([i.i(r.Property)(["Zoom","ZoomIn","ZoomOut","Pan","Reset"])],t.prototype,"toolbarItems",void 0),o([i.i(r.Property)(!0)],t.prototype,"enableScrollbar",void 0),o([i.i(r.Property)(!1)],t.prototype,"enablePan",void 0),t}(r.ChildProperty),H=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),o([i.i(r.Complex)({},L)],t.prototype,"chartSeries",void 0),o([i.i(r.Complex)({},A)],t.prototype,"primaryXAxis",void 0),o([i.i(r.Complex)({},A)],t.prototype,"primaryYAxis",void 0),o([i.i(r.Property)("")],t.prototype,"value",void 0),o([i.i(r.Property)("")],t.prototype,"columnHeader",void 0),o([i.i(r.Property)("-")],t.prototype,"columnDelimiter",void 0),o([i.i(r.Property)(!1)],t.prototype,"enableMultipleAxis",void 0),o([i.i(r.Property)("Stacked")],t.prototype,"multipleAxisMode",void 0),o([i.i(r.Property)(!1)],t.prototype,"enableScrollOnMultiAxis",void 0),o([i.i(r.Property)(!1)],t.prototype,"showMemberSeries",void 0),o([i.i(r.Property)(!1)],t.prototype,"showPointColorByMembers",void 0),o([i.i(r.Complex)(a.a.chartTitleFont,d)],t.prototype,"titleStyle",void 0),o([i.i(r.Property)("")],t.prototype,"title",void 0),o([i.i(r.Complex)(a.a.chartSubTitleFont,d)],t.prototype,"subTitleStyle",void 0),o([i.i(r.Property)("")],t.prototype,"subTitle",void 0),o([i.i(r.Complex)({color:"#DDDDDD",width:0},p)],t.prototype,"border",void 0),o([i.i(r.Complex)({},h)],t.prototype,"margin",void 0),o([i.i(r.Complex)({border:{color:null,width:.5},background:"transparent"},g)],t.prototype,"chartArea",void 0),o([i.i(r.Property)(null)],t.prototype,"background",void 0),o([i.i(r.Property)("Material")],t.prototype,"theme",void 0),o([i.i(r.Property)([])],t.prototype,"palettes",void 0),o([i.i(r.Complex)({},m)],t.prototype,"crosshair",void 0),o([i.i(r.Complex)({},R)],t.prototype,"tooltip",void 0),o([i.i(r.Complex)(null,k)],t.prototype,"pieCenter",void 0),o([i.i(r.Complex)({},j)],t.prototype,"zoomSettings",void 0),o([i.i(r.Property)()],t.prototype,"legendSettings",void 0),o([i.i(r.Property)("None")],t.prototype,"selectionMode",void 0),o([i.i(r.Property)("None")],t.prototype,"accumulationSelectionMode",void 0),o([i.i(r.Property)(!0)],t.prototype,"enableSmartLabels",void 0),o([i.i(r.Property)(!0)],t.prototype,"enableBorderOnMouseMove",void 0),o([i.i(r.Property)("None")],t.prototype,"highlightMode",void 0),o([i.i(r.Property)("None")],t.prototype,"highlightPattern",void 0),o([i.i(r.Property)(!0)],t.prototype,"enableExport",void 0),o([i.i(r.Property)(!1)],t.prototype,"isMultiSelect",void 0),o([i.i(r.Collection)([],c)],t.prototype,"selectedDataIndexes",void 0),o([i.i(r.Property)(!0)],t.prototype,"enableAnimation",void 0),o([i.i(r.Property)(!1)],t.prototype,"enableCanvas",void 0),o([i.i(r.Property)(!0)],t.prototype,"useGroupingSeparator",void 0),o([i.i(r.Property)(!1)],t.prototype,"isTransposed",void 0),o([i.i(r.Property)(1)],t.prototype,"tabIndex",void 0),o([i.i(r.Property)(null)],t.prototype,"description",void 0),o([i.i(r.Event)()],t.prototype,"resized",void 0),o([i.i(r.Property)(!0)],t.prototype,"enableSideBySidePlacement",void 0),o([i.i(r.Event)()],t.prototype,"loaded",void 0),o([i.i(r.Event)()],t.prototype,"beforePrint",void 0),o([i.i(r.Event)()],t.prototype,"animationComplete",void 0),o([i.i(r.Event)()],t.prototype,"load",void 0),o([i.i(r.Event)()],t.prototype,"textRender",void 0),o([i.i(r.Event)()],t.prototype,"legendRender",void 0),o([i.i(r.Event)()],t.prototype,"seriesRender",void 0),o([i.i(r.Event)()],t.prototype,"multiLevelLabelRender",void 0),o([i.i(r.Event)()],t.prototype,"pointRender",void 0),o([i.i(r.Event)()],t.prototype,"tooltipRender",void 0),o([i.i(r.Event)()],t.prototype,"legendClick",void 0),o([i.i(r.Event)()],t.prototype,"axisLabelRender",void 0),o([i.i(r.Event)()],t.prototype,"multiLevelLabelClick",void 0),o([i.i(r.Event)()],t.prototype,"chartMouseClick",void 0),o([i.i(r.Event)()],t.prototype,"chartMouseMove",void 0),o([i.i(r.Event)()],t.prototype,"pointMove",void 0),o([i.i(r.Event)()],t.prototype,"pointClick",void 0),o([i.i(r.Event)()],t.prototype,"chartMouseDown",void 0),o([i.i(r.Event)()],t.prototype,"chartMouseLeave",void 0),o([i.i(r.Event)()],t.prototype,"dragComplete",void 0),o([i.i(r.Event)()],t.prototype,"chartMouseUp",void 0),o([i.i(r.Event)()],t.prototype,"scrollStart",void 0),o([i.i(r.Event)()],t.prototype,"zoomComplete",void 0),o([i.i(r.Event)()],t.prototype,"scrollChanged",void 0),o([i.i(r.Event)()],t.prototype,"scrollEnd",void 0),o([i.i(r.Property)(!0)],t.prototype,"showMultiLevelLabels",void 0),t}(r.ChildProperty)},function(e,t,i){"use strict";i.d(t,"a",function(){return o});var r=i(0),a=(i.n(r),this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}()),n=this&&this.__decorate||function(e,t,i,r){var a,n=arguments.length,o=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(n<3?a(o):n>3?a(t,i,o):a(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},o=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}a(t,e),n([i.i(r.Property)("Row")],t.prototype,"mode",void 0),n([i.i(r.Property)("Flow")],t.prototype,"cellSelectionMode",void 0),n([i.i(r.Property)("Single")],t.prototype,"type",void 0),n([i.i(r.Property)(!1)],t.prototype,"checkboxOnly",void 0),n([i.i(r.Property)(!1)],t.prototype,"persistSelection",void 0),n([i.i(r.Property)("Default")],t.prototype,"checkboxMode",void 0),n([i.i(r.Property)(!1)],t.prototype,"enableSimpleMultiRowSelection",void 0)}(r.ChildProperty),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),n([i.i(r.Property)("auto")],t.prototype,"height",void 0),n([i.i(r.Property)("auto")],t.prototype,"width",void 0),n([i.i(r.Property)("Both")],t.prototype,"gridLines",void 0),n([i.i(r.Property)(!1)],t.prototype,"allowTextWrap",void 0),n([i.i(r.Property)(!1)],t.prototype,"allowReordering",void 0),n([i.i(r.Property)(!0)],t.prototype,"allowResizing",void 0),n([i.i(r.Property)(!0)],t.prototype,"allowAutoResizing",void 0),n([i.i(r.Property)(null)],t.prototype,"rowHeight",void 0),n([i.i(r.Property)(110)],t.prototype,"columnWidth",void 0),n([i.i(r.Property)("Ellipsis")],t.prototype,"clipMode",void 0),n([i.i(r.Property)(!1)],t.prototype,"allowSelection",void 0),n([i.i(r.Property)(-1)],t.prototype,"selectedRowIndex",void 0),n([i.i(r.Property)({mode:"Row",cellSelectionMode:"Flow",type:"Single"})],t.prototype,"selectionSettings",void 0),n([i.i(r.Property)({wrapMode:"Both"})],t.prototype,"textWrapSettings",void 0),n([i.i(r.Property)("AllPages")],t.prototype,"printMode",void 0),n([i.i(r.Property)()],t.prototype,"contextMenuItems",void 0),n([i.i(r.Event)()],t.prototype,"beforeCopy",void 0),n([i.i(r.Event)()],t.prototype,"printComplete",void 0),n([i.i(r.Event)()],t.prototype,"beforePrint",void 0),n([i.i(r.Event)()],t.prototype,"beforePdfExport",void 0),n([i.i(r.Event)()],t.prototype,"beforeExcelExport",void 0),n([i.i(r.Event)()],t.prototype,"contextMenuOpen",void 0),n([i.i(r.Event)()],t.prototype,"contextMenuClick",void 0),n([i.i(r.Event)()],t.prototype,"queryCellInfo",void 0),n([i.i(r.Event)()],t.prototype,"headerCellInfo",void 0),n([i.i(r.Event)()],t.prototype,"rowSelecting",void 0),n([i.i(r.Event)()],t.prototype,"rowSelected",void 0),n([i.i(r.Event)()],t.prototype,"rowDeselecting",void 0),n([i.i(r.Event)()],t.prototype,"rowDeselected",void 0),n([i.i(r.Event)()],t.prototype,"cellSelecting",void 0),n([i.i(r.Event)()],t.prototype,"cellSelected",void 0),n([i.i(r.Event)()],t.prototype,"cellDeselecting",void 0),n([i.i(r.Event)()],t.prototype,"cellDeselected",void 0),n([i.i(r.Event)()],t.prototype,"resizeStart",void 0),n([i.i(r.Event)()],t.prototype,"resizing",void 0),n([i.i(r.Event)()],t.prototype,"resizeStop",void 0),n([i.i(r.Event)()],t.prototype,"pdfHeaderQueryCellInfo",void 0),n([i.i(r.Event)()],t.prototype,"pdfQueryCellInfo",void 0),n([i.i(r.Event)()],t.prototype,"excelHeaderQueryCellInfo",void 0),n([i.i(r.Event)()],t.prototype,"excelQueryCellInfo",void 0),n([i.i(r.Event)()],t.prototype,"columnDragStart",void 0),n([i.i(r.Event)()],t.prototype,"columnDrag",void 0),n([i.i(r.Event)()],t.prototype,"columnDrop",void 0),n([i.i(r.Event)()],t.prototype,"columnRender",void 0),t}(r.ChildProperty))},function(e,t,i){"use strict";var r=i(41);i.d(t,"a",function(){return r.a})},function(e,t){e.exports=p},function(e,t){e.exports=u},function(e,t){e.exports=c},function(e,t){e.exports=g}])});